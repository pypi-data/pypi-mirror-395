import{j as e}from"./ui-BzkW_zSA.js";import{r as f}from"./vendor-Dje7enk0.js";import{G as D,B as E,u as O,d as R,s as G,T as z,l as U,m as W,a as $,D as X,y as M,I as q,X as H,C as J}from"./index-CxHQsSmh.js";import{C as L,a as A,b as F,c as P}from"./card-BfWTGDCc.js";import{B as C}from"./badge-B4R87TdU.js";import{T as K,a as Y,b as B,c as Q}from"./tabs-BhXUGBkR.js";import{S as Z}from"./searchable-select-8QB8UQao.js";import{S as V}from"./separator-zYqy1n3n.js";import{F as ee}from"./favicon-icon-BELQjD9b.js";import{P as T}from"./play-CBsxRgGX.js";import{D as se}from"./download-Dl9G88Pi.js";import{C as te}from"./clock-CG63yexX.js";import"./chevron-down-Cj0HsQ0D.js";import"./check-D22Mrj8T.js";function ae({vmcps:b,searchQuery:w,debouncedQuery:_,onInstall:p}){return e.jsx(L,{className:"text-center py-16 bg-gradient-to-br from-muted/20 to-muted/10 border-2 border-dashed border-muted-foreground/30",children:e.jsxs(A,{className:"space-y-4",children:[e.jsx("div",{className:"h-20 w-20 rounded-full bg-muted/50 flex items-center justify-center mx-auto mb-4",children:e.jsx(D,{className:"h-10 w-10 text-muted-foreground"})}),e.jsx(F,{className:"text-2xl font-semibold mb-2",children:"Discover More vMCPs"}),e.jsxs(P,{className:"text-muted-foreground max-w-md mx-auto text-base",children:["To discover and access more community vMCPs, visit"," ",e.jsx("a",{href:"https://1xn.ai",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline font-medium",children:"1xn.ai"})," ","for the full enterprise experience with authentication and community features."]}),e.jsx(E,{asChild:!0,className:"mt-4",variant:"default",children:e.jsxs("a",{href:"https://1xn.ai",target:"_blank",rel:"noopener noreferrer",children:["Visit 1xn.ai ",e.jsx(D,{className:"ml-2 h-4 w-4"})]})})]})})}function re({publicVMCPS:b}){const w=O(),{success:_,error:p}=R(),{forceRefreshVMCPData:h}=G(),[N,u]=f.useState({}),k=async s=>{const i=s.id||s.public_vmcp_id;if(!N[i]){u(a=>({...a,[i]:!0}));try{const a=localStorage.getItem("access_token")||"local-token",m=await $.getPublicVMCPDetails(i,a);if(!m.success||!m.data){p("Failed to fetch vMCP configuration");return}const d=m.data;if(!d.name||!d.vmcp_config){p("Invalid vMCP configuration");return}const n=`${d.name}-${Date.now()}`,l=await $.createVMCP({...d,name:n},a);l.success?(_(`vMCP "${n}" imported successfully`),h(),l.data?.id&&w.push(`/vmcp/${l.data.id}`)):p(l.error||"Failed to import vMCP configuration")}catch(a){console.error("Import error:",a),p("Failed to import vMCP configuration. Please check the file format.")}finally{u(a=>({...a,[i]:!1}))}}},I=s=>s.startsWith("http://")||s.startsWith("https://"),g=s=>s.metadata?.icon?I(s.metadata.icon)?s.metadata.icon:`data:image/png;base64,${s.metadata.icon}`:null,c=s=>{const i=s.vmcp_config?.selected_servers?.length||0;let a=s.total_tools,m=s.total_resources,d=s.total_prompts;return a==null&&(a=Object.values(s.vmcp_config?.selected_tools||{}).reduce((n,l)=>n+(Array.isArray(l)?l.length:0),0)),m==null&&(m=Object.values(s.vmcp_config?.selected_resources||{}).reduce((n,l)=>n+(Array.isArray(l)?l.length:0),0)),d==null&&(d=Object.values(s.vmcp_config?.selected_prompts||{}).reduce((n,l)=>n+(Array.isArray(l)?l.length:0),0)),{serversCount:i,toolsCount:a??0,resourcesCount:m??0,promptsCount:d??0}};return b.length===0?e.jsx(L,{className:"text-center py-12 bg-gradient-to-br from-muted/20 to-muted/10 border-2 border-dashed border-muted-foreground/30",children:e.jsxs(A,{children:[e.jsx("div",{className:"h-16 w-16 rounded-full bg-muted/50 flex items-center justify-center mx-auto mb-4",children:e.jsx(T,{className:"h-8 w-8 text-muted-foreground"})}),e.jsx(F,{className:"text-xl font-semibold mb-2",children:"No Demo vMCPs Available"}),e.jsx(P,{className:"text-muted-foreground",children:"Check back later for demo vMCPs to try out"})]})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:b.map((s,i)=>{const a=s.id||s.public_vmcp_id,m=N[a]||!1,d=c(s);return e.jsxs("div",{className:"group relative rounded-xl border transition-all duration-200 shadow-sm hover:shadow-lg hover:border-primary/50 bg-card overflow-hidden h-72 flex flex-col",style:{animationDelay:`${i*100}ms`},children:[e.jsxs("div",{className:"p-4 pb-0 flex flex-col flex-1",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[e.jsxs("div",{className:"h-10 w-10 rounded-xl bg-gradient-to-br from-primary/20 to-primary/10 flex items-center justify-center overflow-hidden shadow-sm",children:[g(s)?e.jsx("img",{src:g(s),alt:s.name,className:"h-6 w-6 object-contain",onError:n=>{n.currentTarget.style.display="none",n.currentTarget.nextElementSibling?.classList.remove("hidden")}}):null,e.jsx(T,{className:`h-5 w-5 text-primary ${g(s)?"hidden":""}`})]}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("div",{className:"mb-2",children:s.name.startsWith("@")?e.jsxs("div",{className:"flex flex-col flex-1 min-w-0",children:[e.jsxs("span",{className:"text-xs text-muted-foreground font-medium",children:[s.name.split("/")[0],"/"]}),e.jsx("h4",{className:"font-semibold text-foreground text-sm truncate",children:s.name.split("/").slice(1).join("/")})]}):e.jsx("h4",{className:"font-semibold text-foreground text-sm truncate",children:s.name})})})]}),e.jsx("div",{className:"mb-2",children:s.metadata?.category&&e.jsx(C,{variant:"outline",className:"text-[10px] text-muted-foreground bg-muted/60 px-2 py-1 rounded-md font-medium w-fit inline-block",children:typeof s.metadata.category=="string"?s.metadata.category:s.metadata.category.secondary||"Category"})}),s.description&&e.jsx("p",{className:"text-xs pb-2 text-muted-foreground leading-relaxed line-clamp-3 min-h-[3rem]",children:s.description}),e.jsx("div",{className:"mb-3 min-h-[32px]",children:s.vmcp_config?.selected_servers&&s.vmcp_config.selected_servers.length>0?e.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[s.vmcp_config.selected_servers.slice(0,3).map((n,l)=>e.jsxs("div",{className:"flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg bg-muted/40 hover:bg-muted/60 transition-colors",children:[e.jsx(ee,{url:n.url,faviconUrl:n.favicon_url,className:"h-3 w-3",size:12}),e.jsx("span",{className:"text-xs font-medium truncate max-w-40",children:n.name})]},l)),s.vmcp_config.selected_servers.length>3&&e.jsx("div",{className:"flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg bg-muted/40",children:e.jsxs("span",{className:"text-xs font-medium text-muted-foreground",children:["+",s.vmcp_config.selected_servers.length-3]})})]}):e.jsx("div",{className:"min-h-[32px]"})})]}),e.jsx("div",{className:"px-4 py-4 border-t border-border/30 mt-auto",children:e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"font-medium text-foreground text-xs",children:d.toolsCount}),e.jsx("span",{className:"text-muted-foreground text-xs",children:"tools"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"font-medium text-foreground text-xs",children:d.promptsCount}),e.jsx("span",{className:"text-muted-foreground text-xs",children:"prompts"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"font-medium text-foreground text-xs",children:d.resourcesCount}),e.jsx("span",{className:"text-muted-foreground text-xs",children:"resources"})]})]}),e.jsxs(z,{children:[e.jsx(U,{asChild:!0,children:e.jsx(E,{size:"sm",variant:"ghost",onClick:n=>{n.stopPropagation(),k(s)},disabled:m,className:"h-8 w-8 p-0 rounded-full",children:m?e.jsx("div",{className:"h-4 w-4 border-2 border-primary border-t-transparent rounded-full animate-spin"}):e.jsx(se,{className:"h-4 w-4"})})}),e.jsx(W,{children:e.jsx("p",{className:"text-xs",children:m?"Importing...":"Import vMCP"})})]})]})})]},a)})})}function ve(){const b=O(),{publicVMCPS:w,loading:_}=X(),{error:p}=R(),[h,N]=f.useState(""),[u,k]=f.useState(""),[I,g]=f.useState(!1),[c,s]=f.useState([]),{vmcps:i,demos:a,categories:m}=f.useMemo(()=>{const t=[],x=[],r=new Set;return w?.forEach(o=>{const v=o.metadata?.category?typeof o.metadata.category=="string"?o.metadata.category:o.metadata.category.secondary||o.metadata.category.primary:null;v&&r.add(v);const y=o.metadata?.type;!y||y==="vmcp"?t.push(o):y==="demo"&&x.push(o)}),{vmcps:t,demos:x,categories:Array.from(r).sort()}},[w]);f.useEffect(()=>{const t=setTimeout(()=>{k(h)},300);return()=>clearTimeout(t)},[h]);const d=async(t,x)=>{try{if(!localStorage.getItem("access_token")){p("Please log in to install vMCPs");return}const o=`/vmcp/install/${t}/${x}`;b.push(o)}catch{p("Failed to start installation")}},n=(t,x,r)=>{if(r.length>0){const v=t.metadata?.category?typeof t.metadata.category=="string"?t.metadata.category:t.metadata.category.secondary||t.metadata.category.primary:null;if(!v||!r.includes(v))return!1}if(!x.trim())return!0;const o=x.toLowerCase();return!!(t.name?.toLowerCase().includes(o)||t.description?.toLowerCase().includes(o)||t.metadata?.category&&(typeof t.metadata.category=="string"?t.metadata.category:t.metadata.category.secondary||t.metadata.category.primary)?.toLowerCase().includes(o)||t.vmcp_config?.selected_servers&&t.vmcp_config.selected_servers.map(y=>y.name?.toLowerCase()).filter(Boolean).some(y=>y.includes(o)))},l=f.useMemo(()=>{if(!h.trim()||h.length<2)return[];const t=new Set,x=h.toLowerCase();return i.forEach(r=>{r.name?.toLowerCase().includes(x)&&t.add(r.name)}),a.forEach(r=>{r.name?.toLowerCase().includes(x)&&t.add(r.name)}),[...i,...a].forEach(r=>{if(r.metadata?.category){const o=typeof r.metadata.category=="string"?r.metadata.category:r.metadata.category.secondary||r.metadata.category.primary;o?.toLowerCase().includes(x)&&t.add(o)}}),[...i,...a].forEach(r=>{r.vmcp_config?.selected_servers&&r.vmcp_config.selected_servers.forEach(o=>{o.name?.toLowerCase().includes(x)&&t.add(o.name)})}),Array.from(t).slice(0,8)},[h,i,a]),S=f.useMemo(()=>i.filter(t=>n(t,u,c)),[i,u,c]),j=f.useMemo(()=>a.filter(t=>n(t,u,c)),[a,u,c]);return _?e.jsx("div",{className:"min-h-screen text-foreground flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2 border-primary border-t-transparent mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading discovery content..."})]})}):e.jsxs("div",{className:"min-h-screen",children:[e.jsx("div",{className:"mb-8",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-12 w-12 rounded-lg bg-primary/20 flex items-center justify-center",children:e.jsx(D,{className:"h-8 w-8 text-primary"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Discover"}),e.jsx("p",{className:"text-muted-foreground",children:"Explore vMCPs from the community"})]})]})})}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsxs("div",{className:"relative",children:[e.jsx(M,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(q,{type:"text",placeholder:"Search vMCPs, categories, descriptions, or servers...",value:h,onChange:t=>{N(t.target.value),g(t.target.value.length>=2)},onFocus:()=>g(h.length>=2),onBlur:()=>{setTimeout(()=>g(!1),200)},className:"pl-10 pr-10 h-11"}),h&&e.jsx(E,{variant:"ghost",size:"sm",onClick:()=>{N(""),g(!1)},className:"absolute right-1 top-1/2 transform -translate-y-1/2 h-8 w-8 p-0 hover:bg-muted",children:e.jsx(H,{className:"h-4 w-4"})})]}),I&&l.length>0&&e.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-card border border-border rounded-md shadow-lg z-50 max-h-60 overflow-y-auto",children:e.jsxs("div",{className:"p-2",children:[e.jsx("div",{className:"text-xs font-medium text-muted-foreground mb-2 px-2",children:"Suggestions"}),l.map((t,x)=>e.jsxs("div",{onClick:()=>{N(t),g(!1)},className:"flex items-center gap-2 px-2 py-2 rounded-sm hover:bg-muted cursor-pointer transition-colors",children:[e.jsx(te,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm truncate",children:t})]},x))]})})]}),e.jsx("div",{className:"flex-1 max-w-md",children:e.jsx(Z,{options:m,value:c,onValueChange:s,placeholder:"Filter by categories...",searchPlaceholder:"Search categories...",emptyText:"No categories found.",className:"h-11"})})]}),(u||c.length>0)&&e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:[S.length+j.length," result",S.length+j.length!==1?"s":""," found"]}),c.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["in ",c.length," categor",c.length===1?"y":"ies",":"]}),e.jsxs("div",{className:"flex flex-wrap gap-1 max-w-full overflow-hidden",children:[c.slice(0,5).map(t=>e.jsx(C,{variant:"outline",className:"text-[10px] px-1.5 py-0.5 flex-shrink-0",children:t},t)),c.length>5&&e.jsxs(z,{children:[e.jsx(U,{asChild:!0,children:e.jsxs(C,{variant:"outline",className:"text-[10px] px-1.5 py-0.5 cursor-pointer hover:bg-muted/50 flex-shrink-0",children:["+",c.length-5," more"]})}),e.jsx(W,{children:e.jsxs("div",{className:"max-w-xs",children:[e.jsx("p",{className:"font-medium mb-1 text-xs",children:"All selected categories:"}),e.jsx("p",{className:"text-[10px] break-words",children:c.join(", ")})]})})]})]})]})]})]}),e.jsxs(K,{defaultValue:"vmcps",className:"min-h-[600px]",children:[e.jsxs(Y,{className:"mb-4",children:[e.jsxs(B,{value:"vmcps",className:"flex items-center gap-2",children:[e.jsx(J,{className:"h-4 w-4"}),"Community",e.jsx(C,{variant:"outline",className:"ml-2 text-xs",children:S.length})]}),e.jsxs(B,{value:"demos",className:"flex items-center gap-2",children:[e.jsx(T,{className:"h-4 w-4"}),"Demo",e.jsx(C,{variant:"outline",className:"ml-2 text-xs",children:j.length})]})]}),e.jsx(V,{className:"mb-4"}),e.jsx(Q,{value:"vmcps",className:"space-y-6",children:e.jsx(ae,{vmcps:S,searchQuery:h,debouncedQuery:u,onInstall:d})}),e.jsxs(Q,{value:"demos",className:"space-y-6",children:[j&&j.length>0&&e.jsx("div",{children:e.jsx(re,{publicVMCPS:j})}),(!j||j.length===0)&&e.jsx(L,{className:"text-center py-12 bg-gradient-to-br from-muted/20 to-muted/10 border-2 border-dashed border-muted-foreground/30",children:e.jsxs(A,{children:[e.jsx("div",{className:"h-16 w-16 rounded-full bg-muted/50 flex items-center justify-center mx-auto mb-4",children:u?e.jsx(M,{className:"h-8 w-8 text-muted-foreground"}):e.jsx(T,{className:"h-8 w-8 text-muted-foreground"})}),e.jsx(F,{className:"text-xl font-semibold mb-2",children:u?"No Demos Found":"No Demos Available"}),e.jsx(P,{className:"text-muted-foreground",children:u?`No demos match "${u}". Try a different search term.`:"Check back later for demo vMCPs to try out"})]})})]})]})]})}export{ve as default};
//# sourceMappingURL=DiscoverPage-Bb4-4wbK.js.map
