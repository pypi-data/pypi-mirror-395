{"version":3,"file":"EditServerPage-CGNSmfMw.js","sources":["../../src/pages/EditServerPage.tsx"],"sourcesContent":["\nimport React, { useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { useRouter } from '@/hooks/useRouter';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { Alert, AlertDescription } from '@/components/ui/alert';\nimport { Badge } from '@/components/ui/badge';\nimport { Separator } from '@/components/ui/separator';\nimport { \n  ArrowLeft,\n  Save,\n  Server as ServerIcon,\n  Terminal,\n  Globe,\n  Wifi,\n  Settings,\n  AlertTriangle,\n  CheckCircle,\n  Edit,\n  RefreshCw\n} from 'lucide-react';\nimport { useAuth } from '@/contexts/auth-context';\nimport { useToast } from '@/hooks/use-toast';\n// import { newApi } from '@/lib/new-api';\nimport { apiClient } from '@/api/client';\n\ninterface ServerFormData {\n  name: string;\n  description: string;\n  transport: 'stdio' | 'http' | 'sse';\n  command: string;\n  url: string;\n  args: string;\n  env: string;\n  headers: string;\n  auto_connect: boolean;\n  enabled: boolean;\n}\n\ninterface ServerData {\n  name: string;\n  server_id: string;\n  transport_type: string;\n  status: string;\n  description: string;\n  url: string;\n  command: string;\n  last_connected: string;\n  last_error: string;\n  capabilities: {\n    tools: boolean;\n    resources: boolean;\n    prompts: boolean;\n  };\n  tools: string[];\n  resources: string[];\n  prompts: string[];\n  auto_connect: boolean;\n  enabled: boolean;\n}\n\nexport default function EditServerPage() {\n  const router = useRouter();\n  const params = useParams();\n  const serverName = params.name as string;\n  const { user, loading: authLoading, isAuthenticated } = useAuth();\n  const { success, error: toastError } = useToast();\n  \n  const [loading, setLoading] = useState(false);\n  const [loadingServer, setLoadingServer] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [serverData, setServerData] = useState<ServerData | null>(null);\n  \n  const [formData, setFormData] = useState<ServerFormData>({\n    name: '',\n    description: '',\n    transport: 'stdio',\n    command: '',\n    url: '',\n    args: '',\n    env: '',\n    headers: '',\n    auto_connect: false,\n    enabled: true\n  });\n\n  React.useEffect(() => {\n    // Redirect to login if not authenticated and not loading\n    if (!authLoading && !isAuthenticated) {\n      router.push('/login');\n      return;\n    }\n  }, [authLoading, isAuthenticated, router]);\n\n  // Load server data\n  useEffect(() => {\n    const loadServerData = async () => {\n      if (!serverName) return;\n      \n      try {\n        const accessToken = localStorage.getItem('access_token');\n        if (!accessToken) {\n          setError('No access token available');\n          return;\n        }\n\n        // Use the getServerByName method from the new API\n        const result = await apiClient.getServerByName(serverName, accessToken);\n        if (!result.success) {\n          setError(result.error || 'Failed to load server data');\n          return;\n        }\n\n        const server = result.data;\n        setServerData(server);\n        \n        // Populate form data with detailed server information\n        setFormData({\n          name: server.name,\n          description: server.description || '',\n          transport: server.transport_type as 'stdio' | 'http' | 'sse',\n          command: server.command || '',\n          url: server.url || '',\n          args: Array.isArray(server.args) ? server.args.join(', ') : '',\n          env: server.env ? JSON.stringify(server.env, null, 2) : '{}',\n          headers: server.headers ? JSON.stringify(server.headers, null, 2) : '{}',\n          auto_connect: server.auto_connect,\n          enabled: server.enabled\n        });\n      } catch (err) {\n        setError(err instanceof Error ? err.message : 'Failed to load server data');\n      } finally {\n        setLoadingServer(false);\n      }\n    };\n\n    loadServerData();\n  }, [serverName]);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!formData.name.trim()) {\n      setError('Server name is required');\n      return;\n    }\n\n    if (formData.transport === 'stdio' && !formData.command.trim()) {\n      setError('Command is required for STDIO transport');\n      return;\n    }\n\n    if ((formData.transport === 'http' || formData.transport === 'sse') && !formData.url.trim()) {\n      setError('URL is required for HTTP/SSE transport');\n      return;\n    }\n\n    // Validate JSON fields\n    if (formData.env.trim() && formData.env !== '{}') {\n      try {\n        JSON.parse(formData.env);\n      } catch {\n        setError('Environment variables must be valid JSON (e.g., {\"KEY\": \"value\"})');\n        return;\n      }\n    }\n\n    if (formData.headers.trim() && formData.headers !== '{}') {\n      try {\n        JSON.parse(formData.headers);\n      } catch {\n        setError('Headers must be valid JSON (e.g., {\"Authorization\": \"Bearer token\"})');\n        return;\n      }\n    }\n\n    setLoading(true);\n    setError(null);\n\n    try {\n      const accessToken = localStorage.getItem('access_token');\n      if (!accessToken) {\n        throw new Error('No access token available');\n      }\n\n      // Prepare the update data\n      const updateData = {\n        name: formData.name,\n        mode: formData.transport,\n        description: formData.description,\n        command: formData.transport === 'stdio' ? formData.command : undefined,\n        args: formData.args ? formData.args.split(',').map(arg => arg.trim()) : undefined,\n        env: formData.env ? JSON.parse(formData.env) : undefined,\n        url: (formData.transport === 'http' || formData.transport === 'sse') ? formData.url : undefined,\n        headers: formData.headers ? JSON.parse(formData.headers) : undefined,\n        auto_connect: formData.auto_connect,\n        enabled: formData.enabled\n      };\n\n      const result = await apiClient.updateMCPServer(serverName, updateData, accessToken);\n      if (!result.success) {\n        throw new Error(result.error || 'Failed to update server');\n      }\n\n      success('Server updated successfully!');\n      \n      // Redirect back to servers page\n      router.push('/servers?success=updated');\n    } catch (err) {\n      const errorMessage = err instanceof Error ? err.message : 'Failed to update server';\n      setError(errorMessage);\n      toastError(errorMessage);\n      console.error('Error updating server:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleFieldChange = (field: keyof ServerFormData, value: string | boolean) => {\n    setFormData(prev => ({ ...prev, [field]: value }));\n  };\n\n  const getTransportIcon = (transport: string) => {\n    switch (transport) {\n      case 'stdio':\n        return Terminal;\n      case 'http':\n        return Globe;\n      case 'sse':\n        return Wifi;\n      default:\n        return ServerIcon;\n    }\n  };\n\n  if (authLoading || loadingServer) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"h-8 w-8 animate-spin rounded-full border-2 border-primary border-t-transparent mx-auto mb-4\"></div>\n          <p className=\"text-muted-foreground\">Loading...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (!user) {\n    return null;\n  }\n\n  const TransportIcon = getTransportIcon(formData.transport);\n\n  return (\n    <div className=\"min-h-screen\">\n      {/* Main Content */}\n      <div className=\"h-screen overflow-y-auto\">\n        <div className=\"mx-auto px-4 sm:px-6 lg:px-8 py-12\">\n          {/* Header */}\n          <div className=\"mb-8\">\n            <div className=\"flex items-center gap-4 mb-6\">\n              <Button\n                variant=\"ghost\"\n                onClick={() => router.push('/servers')}\n                className=\"text-muted-foreground hover:text-foreground\"\n              >\n                <ArrowLeft className=\"h-4 w-4 mr-2\" />\n                Back to Servers\n              </Button>\n            </div>\n            \n            <div className=\"flex items-center gap-3 mb-2\">\n              <div className=\"h-12 w-12 rounded-xl bg-orange-100 dark:bg-orange-900 flex items-center justify-center\">\n                <Edit className=\"h-6 w-6 text-orange-600 dark:text-orange-400\" />\n              </div>\n              <div>\n                <h1 className=\"text-3xl font-bold text-foreground\">Edit MCP Server</h1>\n                <p className=\"text-muted-foreground\">Update configuration for {serverName}</p>\n              </div>\n            </div>\n          </div>\n\n          {/* Server Info Card */}\n          {serverData && (\n            <Card className=\"mb-6\">\n              <CardContent className=\"p-4\">\n                <div className=\"flex items-center gap-2 text-primary mb-2\">\n                  <ServerIcon size={20} />\n                  <span className=\"font-medium\">Current Server Info</span>\n                </div>\n                <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm\">\n                  <div>\n                    <span className=\"text-muted-foreground\">Status:</span>\n                    <Badge \n                      variant={\n                        serverData.status === 'connected' ? 'default' :\n                        serverData.status === 'disconnected' ? 'secondary' :\n                        'destructive'\n                      }\n                      className=\"ml-2 text-xs\"\n                    >\n                      {serverData.status}\n                    </Badge>\n                  </div>\n                  <div>\n                    <span className=\"text-muted-foreground\">Transport:</span>\n                    <span className=\"ml-2 text-foreground\">{serverData.transport_type}</span>\n                  </div>\n                  <div>\n                    <span className=\"text-muted-foreground\">Last Connected:</span>\n                    <span className=\"ml-2 text-foreground\">\n                      {serverData.last_connected ? new Date(serverData.last_connected).toLocaleDateString() : 'Never'}\n                    </span>\n                  </div>\n                  <div>\n                    <span className=\"text-muted-foreground\">Capabilities:</span>\n                    <span className=\"ml-2 text-foreground\">\n                      {Object.values(serverData.capabilities).filter(Boolean).length}/3\n                    </span>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          )}\n\n          {/* Error Display */}\n          {error && (\n            <Alert variant=\"destructive\" className=\"mb-6\">\n              <AlertTriangle className=\"h-4 w-4\" />\n              <AlertDescription>{error}</AlertDescription>\n            </Alert>\n          )}\n\n          <form onSubmit={handleSubmit}>\n            <Card className=\"hover:shadow-lg transition-shadow\">\n              <CardContent className=\"p-8\">\n              {/* Basic Information */}\n              <div className=\"mb-8\">\n                <div className=\"flex items-center gap-2 mb-6\">\n                  <Settings className=\"h-5 w-5 text-primary\" />\n                  <h3 className=\"text-xl font-semibold text-foreground\">Basic Information</h3>\n                </div>\n\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-foreground mb-2\">\n                      Server Name <span className=\"text-destructive\">*</span>\n                    </label>\n                    <Input\n                      type=\"text\"\n                      value={formData.name}\n                      onChange={(e) => handleFieldChange('name', e.target.value)}\n                      placeholder=\"my-mcp-server\"\n                      required\n                    />\n                    <p className=\"mt-1 text-xs text-muted-foreground\">\n                      Unique identifier for this server\n                    </p>\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm font-medium text-foreground mb-2\">\n                      Transport Type <span className=\"text-destructive\">*</span>\n                    </label>\n                    <div className=\"grid grid-cols-3 gap-3\">\n                      {[\n                        { value: 'stdio', label: 'STDIO', icon: Terminal, desc: 'Command line process' },\n                        { value: 'http', label: 'HTTP', icon: Globe, desc: 'HTTP endpoint' },\n                        { value: 'sse', label: 'SSE', icon: Wifi, desc: 'Server-sent events' }\n                      ].map((option) => {\n                        const Icon = option.icon;\n                        return (\n                          <button\n                            key={option.value}\n                            type=\"button\"\n                            onClick={() => handleFieldChange('transport', option.value as 'stdio' | 'http' | 'sse')}\n                            className={`p-4 rounded-lg border-2 text-center transition-all ${\n                              formData.transport === option.value\n                                ? 'border-primary bg-primary/10 text-primary'\n                                : 'border-border hover:border-primary/50 text-muted-foreground hover:text-foreground'\n                            }`}\n                          >\n                            <Icon className=\"h-6 w-6 mx-auto mb-2\" />\n                            <div className=\"font-medium text-sm\">{option.label}</div>\n                            <div className=\"text-xs opacity-75\">{option.desc}</div>\n                          </button>\n                        );\n                      })}\n                    </div>\n                  </div>\n                </div>\n\n                <div className=\"mt-6\">\n                  <label className=\"block text-sm font-medium text-foreground mb-2\">\n                    Description\n                  </label>\n                  <Textarea\n                    value={formData.description}\n                    onChange={(e: React.ChangeEvent<HTMLTextAreaElement>) => handleFieldChange('description', e.target.value)}\n                    placeholder=\"Brief description of this server\"\n                    rows={3}\n                  />\n                </div>\n              </div>\n\n              {/* STDIO Configuration */}\n              {formData.transport === 'stdio' && (\n                <div className=\"mb-8 pt-8\">\n                  <Separator className=\"mb-6\" />\n                  <div className=\"flex items-center gap-2 mb-6\">\n                    <Terminal className=\"h-5 w-5 text-orange-600 dark:text-orange-400\" />\n                    <h3 className=\"text-xl font-semibold text-foreground\">STDIO Configuration</h3>\n                  </div>\n\n                  <div className=\"space-y-6\">\n                    <div>\n                      <label className=\"block text-sm font-medium text-foreground mb-2\">\n                        Command <span className=\"text-destructive\">*</span>\n                      </label>\n                      <Input\n                        type=\"text\"\n                        value={formData.command}\n                        onChange={(e) => handleFieldChange('command', e.target.value)}\n                        placeholder=\"python -m mcp_server\"\n                        required\n                      />\n                      <p className=\"mt-1 text-xs text-muted-foreground\">\n                        Command to execute the MCP server\n                      </p>\n                    </div>\n\n                    <div>\n                      <label className=\"block text-sm font-medium text-foreground mb-2\">\n                        Arguments\n                      </label>\n                      <Input\n                        type=\"text\"\n                        value={formData.args}\n                        onChange={(e) => handleFieldChange('args', e.target.value)}\n                        placeholder='[\"--config\", \"config.json\"] or --config config.json'\n                      />\n                      <p className=\"mt-1 text-xs text-muted-foreground\">\n                        Command line arguments (JSON array or space-separated)\n                      </p>\n                    </div>\n\n                    <div>\n                      <label className=\"block text-sm font-medium text-foreground mb-2\">\n                        Environment Variables\n                      </label>\n                      <Textarea\n                        value={formData.env}\n                        onChange={(e: React.ChangeEvent<HTMLTextAreaElement>) => handleFieldChange('env', e.target.value)}\n                        placeholder='{\"API_KEY\": \"your-key\", \"DEBUG\": \"true\"}'\n                        rows={3}\n                      />\n                      <p className=\"mt-1 text-xs text-muted-foreground\">\n                        Environment variables as JSON object\n                      </p>\n                    </div>\n                  </div>\n                </div>\n              )}\n\n              {/* HTTP/SSE Configuration */}\n              {(formData.transport === 'http' || formData.transport === 'sse') && (\n                <div className=\"mb-8 pt-8\">\n                  <Separator className=\"mb-6\" />\n                  <div className=\"flex items-center gap-2 mb-6\">\n                    <TransportIcon className=\"h-5 w-5 text-green-600 dark:text-green-400\" />\n                    <h3 className=\"text-xl font-semibold text-foreground\">{formData.transport.toUpperCase()} Configuration</h3>\n                  </div>\n\n                  <div className=\"space-y-6\">\n                    <div>\n                      <label className=\"block text-sm font-medium text-foreground mb-2\">\n                        Server URL <span className=\"text-destructive\">*</span>\n                      </label>\n                      <Input\n                        type=\"url\"\n                        value={formData.url}\n                        onChange={(e) => handleFieldChange('url', e.target.value)}\n                        placeholder=\"https://api.example.com/mcp\"\n                        required\n                      />\n                      <p className=\"mt-1 text-xs text-muted-foreground\">\n                        Full URL to the MCP server endpoint\n                      </p>\n                    </div>\n\n                    <div>\n                      <label className=\"block text-sm font-medium text-foreground mb-2\">\n                        HTTP Headers\n                      </label>\n                      <Textarea\n                        value={formData.headers}\n                        onChange={(e: React.ChangeEvent<HTMLTextAreaElement>) => handleFieldChange('headers', e.target.value)}\n                        placeholder='{\"User-Agent\": \"MCP-Client\", \"Accept\": \"application/json\"}'\n                        rows={3}\n                      />\n                      <p className=\"mt-1 text-xs text-muted-foreground\">\n                        Custom HTTP headers as JSON object\n                      </p>\n                    </div>\n                  </div>\n                </div>\n              )}\n\n              {/* Connection Options */}\n              <div className=\"pt-8\">\n                <Separator className=\"mb-6\" />\n                <div className=\"flex items-center gap-2 mb-6\">\n                  <CheckCircle className=\"h-5 w-5 text-purple-600 dark:text-purple-400\" />\n                  <h3 className=\"text-xl font-semibold text-foreground\">Connection Options</h3>\n                </div>\n\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                  <div className=\"flex items-center\">\n                    <input\n                      type=\"checkbox\"\n                      id=\"auto_connect\"\n                      checked={formData.auto_connect}\n                      onChange={(e) => handleFieldChange('auto_connect', e.target.checked)}\n                      className=\"w-4 h-4 text-primary bg-background border-border rounded focus:ring-primary focus:ring-2\"\n                    />\n                    <label htmlFor=\"auto_connect\" className=\"ml-3 text-sm text-foreground\">\n                      Auto-connect on startup\n                    </label>\n                  </div>\n\n                  <div className=\"flex items-center\">\n                    <input\n                      type=\"checkbox\"\n                      id=\"enabled\"\n                      checked={formData.enabled}\n                      onChange={(e) => handleFieldChange('enabled', e.target.checked)}\n                      className=\"w-4 h-4 text-primary bg-background border-border rounded focus:ring-primary focus:ring-2\"\n                    />\n                    <label htmlFor=\"enabled\" className=\"ml-3 text-sm text-foreground\">\n                      Enabled\n                    </label>\n                  </div>\n                </div>\n              </div>\n              </CardContent>\n            </Card>\n\n            {/* Action Buttons */}\n            <div className=\"flex gap-4 justify-end mt-8 pb-6\">\n              <Button\n                type=\"button\"\n                variant=\"outline\"\n                onClick={() => router.push('/servers')}\n                disabled={loading}\n              >\n                Cancel\n              </Button>\n              <Button\n                type=\"submit\"\n                disabled={loading}\n              >\n                {loading ? (\n                  <>\n                    <RefreshCw className=\"h-4 w-4 mr-2 animate-spin\" />\n                    Updating Server...\n                  </>\n                ) : (\n                  <>\n                    <Save className=\"h-4 w-4 mr-2\" />\n                    Update Server\n                  </>\n                )}\n              </Button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n} "],"names":["EditServerPage","router","useRouter","serverName","useParams","user","authLoading","isAuthenticated","useAuth","success","toastError","useToast","loading","setLoading","useState","loadingServer","setLoadingServer","error","setError","serverData","setServerData","formData","setFormData","React","useEffect","accessToken","result","apiClient","server","err","handleSubmit","e","updateData","arg","errorMessage","handleFieldChange","field","value","prev","getTransportIcon","transport","Terminal","Globe","Wifi","ServerIcon","jsxs","jsx","TransportIcon","Button","ArrowLeft","Edit","Card","CardContent","Badge","Alert","AlertTriangle","AlertDescription","Settings","Input","option","Icon","Textarea","Separator","CheckCircle","Fragment","RefreshCw","Save"],"mappings":"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"}