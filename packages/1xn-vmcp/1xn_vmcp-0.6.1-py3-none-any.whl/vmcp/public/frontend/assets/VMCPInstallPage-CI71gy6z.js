import{j as e}from"./ui-BzkW_zSA.js";import{f as E,r as i}from"./vendor-Dje7enk0.js";import{u as T,d as F,b as L,a as v,C as R,S as z,B as j,z as A}from"./index-CxHQsSmh.js";import{C as N,d as b,b as y,c as W,a as C}from"./card-BfWTGDCc.js";import{V as $,I as B}from"./VMCPDetailsDisplay-729UBGdX.js";import{Z as G}from"./zap-BQC4oCcW.js";import{L as U}from"./lock-BylOtS64.js";import{M as Z}from"./message-square-CU5DKSXQ.js";import{D as q}from"./download-Dl9G88Pi.js";import{G as H}from"./git-fork-D_ZgruJ2.js";import"./badge-B4R87TdU.js";import"./favicon-icon-BELQjD9b.js";import"./chevron-down-Cj0HsQ0D.js";import"./circle-check-big-Ca-XExcj.js";import"./type-BdYygmtS.js";import"./file-text-BF6iJmBf.js";import"./wifi-C6zxt-eS.js";function me(){const a=E(),r=T(),{success:P,error:n}=F(),{user:w,loading:o,isAuthenticated:d}=L(),[m,M]=i.useState(""),[x,I]=i.useState("public"),[t,_]=i.useState(null),[S,u]=i.useState(!0),[p,h]=i.useState(!1),V=s=>s.startsWith("http://")||s.startsWith("https://"),f=s=>s.metadata?.icon?V(s.metadata.icon)?s.metadata.icon:`data:image/png;base64,${s.metadata.icon}`:null;i.useEffect(()=>{if(!o&&!d){r.push("/login");return}},[o,d,r]),i.useEffect(()=>{a.vmcp_id&&a.vmcp_type&&(M(a.vmcp_id),I(a.vmcp_type),k(a.vmcp_id,a.vmcp_type))},[a.vmcp_id,a.vmcp_type]);const k=async(s,g)=>{try{u(!0);const l=localStorage.getItem("access_token");if(!l){n("Please log in to install vMCPs"),r.push("/login");return}let c;c=await v.getPublicVMCPDetails(s,l),c.success&&c.data?_(c.data):(n(`Failed to load ${g} vMCP details`),r.push("/vmcp"))}catch{n("Failed to load vMCP details"),r.push("/vmcp")}finally{u(!1)}},D=async()=>{try{h(!0),console.log("üîß vmcpData:",t);const s=localStorage.getItem("access_token");if(!s){n("Please log in to install vMCPs"),r.push("/login");return}console.log("üîß setting up installVMCP:",s);const g={...t,user_id:w?.id||""};console.log("üîß Calling installVMCP with vmcpId:",m);const l=await v.installVMCP(m,s);if(console.log("üîß installVMCP result:",l),!l.success)throw new Error(l.error||"Failed to install vMCP");P("vMCP installed successfully!"),r.push("/vmcp")}catch(s){console.error("‚ùå Error installing vMCP:",s),n(s instanceof Error?s.message:"Unknown error")}finally{h(!1)}};return S?e.jsx("div",{className:"min-h-screen text-foreground flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2 border-primary border-t-transparent mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading vMCP details..."})]})}):t?e.jsx("div",{className:"min-h-screen",children:e.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"h-10 w-10 rounded-lg bg-gradient-to-br from-primary/20 to-primary/10 flex items-center justify-center relative overflow-hidden",children:f(t)?e.jsx("img",{src:f(t),alt:`${t.name} icon`,className:"h-7 w-7 object-contain"}):e.jsx(R,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h1",{className:"text-2xl font-bold mb-1",children:["Install ",x==="wellknown"?"Well-Known":"Public"," vMCP"]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Review and install ",t.name," to your account"]})]})]})}),e.jsxs(N,{className:"mb-6",children:[e.jsx(b,{className:"pb-4",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx(y,{className:"text-xl",children:t.name}),e.jsx(W,{className:"text-sm mt-1",children:t.description||"No description available"})]})})}),e.jsx(C,{className:"pt-0",children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-4 rounded-lg bg-muted/30",children:[e.jsx(z,{className:"h-6 w-6 mx-auto mb-2 text-primary"}),e.jsx("div",{className:"text-xl font-bold",children:t.vmcp_config?.selected_servers?.length||0}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"MCP Servers"})]}),e.jsxs("div",{className:"text-center p-4 rounded-lg bg-muted/30",children:[e.jsx(G,{className:"h-6 w-6 mx-auto mb-2 text-primary"}),e.jsx("div",{className:"text-xl font-bold",children:t.total_tools||0}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Tools"})]}),e.jsxs("div",{className:"text-center p-4 rounded-lg bg-muted/30",children:[e.jsx(U,{className:"h-6 w-6 mx-auto mb-2 text-primary"}),e.jsx("div",{className:"text-xl font-bold",children:t.total_resources||0}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Resources"})]}),e.jsxs("div",{className:"text-center p-4 rounded-lg bg-muted/30",children:[e.jsx(Z,{className:"h-6 w-6 mx-auto mb-2 text-primary"}),e.jsx("div",{className:"text-xl font-bold",children:t.total_prompts||0}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Prompts"})]})]})})]}),e.jsx($,{vmcpData:t,vmcpType:x,isRemoteVMCP:!1,showExpandableLists:!0}),e.jsxs(N,{className:"mt-8",children:[e.jsx(b,{children:e.jsxs(y,{className:"flex items-center gap-2",children:[e.jsx(B,{className:"h-5 w-5 text-blue-500"}),"Installation Information"]})}),e.jsx(C,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:["This vMCP will be installed as a ",e.jsx("strong",{children:"read-only copy"}),". After installation, you will only be able to edit:"]}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1 ml-4",children:[e.jsx("li",{children:"‚Ä¢ Server authentication settings in the MCP Servers tab"}),e.jsx("li",{children:"‚Ä¢ Environment variable values"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"To make a fully editable copy, you can fork this vMCP after installation."})]})})]}),e.jsxs("div",{className:"flex justify-center gap-4 mt-8",children:[e.jsx(j,{onClick:D,disabled:p,size:"lg",className:"px-8 py-3",children:p?e.jsxs(e.Fragment,{children:[e.jsx(A,{className:"h-4 w-4 mr-2 animate-spin"}),"Installing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(q,{className:"h-4 w-4 mr-2"}),"Install vMCP"]})}),e.jsxs(j,{variant:"outline",size:"lg",className:"px-8 py-3",disabled:!0,title:"Fork functionality coming soon",children:[e.jsx(H,{className:"h-4 w-4 mr-2"}),"Fork vMCP"]})]})]})}):e.jsx("div",{className:"min-h-screen text-foreground flex items-center justify-center",children:e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-destructive",children:"vMCP not found"})})})}export{me as default};
//# sourceMappingURL=VMCPInstallPage-CI71gy6z.js.map
