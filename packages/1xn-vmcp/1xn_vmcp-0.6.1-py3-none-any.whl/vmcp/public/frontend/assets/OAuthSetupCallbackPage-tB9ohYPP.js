import{j as s}from"./ui-BzkW_zSA.js";import{j as g,r as l}from"./vendor-Dje7enk0.js";import{u as f,z as b,B as w}from"./index-CxHQsSmh.js";import{C as j}from"./circle-check-big-Ca-XExcj.js";import{C}from"./circle-x-Dl-pZVkV.js";const N=({className:t,children:r,...e})=>s.jsx("div",{className:`rounded-lg border bg-white/10 backdrop-blur-lg border-white/20 shadow-sm ${t||""}`,...e,children:r}),v=({className:t,children:r,...e})=>s.jsx("div",{className:`flex flex-col space-y-1.5 p-6 ${t||""}`,...e,children:r}),k=({className:t,children:r,...e})=>s.jsx("h3",{className:`text-2xl font-semibold leading-none tracking-tight text-white ${t||""}`,...e,children:r}),P=({className:t,children:r,...e})=>s.jsx("p",{className:`text-sm text-gray-300 ${t||""}`,...e,children:r}),y=({className:t,children:r,...e})=>s.jsx("div",{className:`p-6 pt-0 ${t||""}`,...e,children:r});function $(){const t=f(),[r]=g(),[e,c]=l.useState("loading"),[u,o]=l.useState("Processing OAuth setup callback..."),[i,n]=l.useState(null);l.useEffect(()=>{m()},[]);const m=async()=>{try{const a=r.get("code"),h=r.get("state"),d=r.get("error"),x=r.get("error_description"),S=r.get("vmcp_id");if(d){c("error"),n(x||d),o("OAuth setup authorization failed");return}if(!a||!h){c("error"),n("Missing required OAuth parameters"),o("Invalid callback request");return}c("success"),o("VMCP OAuth setup completed successfully!"),setTimeout(()=>{window.opener?window.close():t.push("/vmcp")},2e3)}catch(a){console.error("OAuth setup callback error:",a),c("error"),n(a instanceof Error?a.message:"Unknown error occurred"),o("Failed to process OAuth setup callback")}},p=()=>{window.opener?window.close():t.push("/vmcp")};return s.jsx("div",{className:"min-h-screen bg-linear-to-br from-slate-900 via-purple-900 to-slate-900 flex items-center justify-center p-4",children:s.jsxs(N,{className:"w-full max-w-md bg-white/10 backdrop-blur-lg border-white/20",children:[s.jsxs(v,{children:[s.jsxs(k,{className:"text-white flex items-center space-x-2",children:[e==="success"&&s.jsx(j,{className:"h-6 w-6 text-green-400"}),e==="error"&&s.jsx(C,{className:"h-6 w-6 text-red-400"}),e==="loading"&&s.jsx(b,{className:"h-6 w-6 animate-spin text-blue-400"}),s.jsxs("span",{children:[e==="success"&&"VMCP Setup Successful",e==="error"&&"VMCP Setup Failed",e==="loading"&&"Processing VMCP Setup"]})]}),s.jsx(P,{className:"text-gray-300",children:u})]}),s.jsxs(y,{className:"space-y-4",children:[e==="error"&&i&&s.jsx("div",{className:"bg-red-500/10 border border-red-500/20 rounded-lg p-3",children:s.jsx("p",{className:"text-red-200 text-sm",children:i})}),e==="success"&&s.jsx("div",{className:"bg-green-500/10 border border-green-500/20 rounded-lg p-3",children:s.jsx("p",{className:"text-green-200 text-sm",children:"Your VMCP OAuth setup has been completed successfully. This window will close automatically."})}),s.jsx(w,{onClick:p,className:"w-full",variant:e==="error"?"outline":"default",children:e==="error"?"Close":"Continue"})]})]})})}export{$ as default};
//# sourceMappingURL=OAuthSetupCallbackPage-tB9ohYPP.js.map
