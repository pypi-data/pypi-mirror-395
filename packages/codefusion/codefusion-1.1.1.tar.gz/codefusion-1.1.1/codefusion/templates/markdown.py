# codefusion/templates/markdown.py
from pathlib import Path
from .base import BaseTemplate
from .. import __version__

class MarkdownTemplate(BaseTemplate):
    def render_header(self, **kwargs) -> str:
        return f"""# ðŸ“ Code Compilation

**Generated:** {kwargs.get('timestamp', 'Unknown')}  
**Source:** `{kwargs.get('source_dir', 'Unknown')}`  
**Extensions:** {kwargs.get('extensions', 'Unknown')}  
**Total Files:** {kwargs.get('total_files', 0)}

---

"""

    def render_group_header(self, group_name: str, group_description: str, file_count: int) -> str:
        return f"\n\n## ðŸ“ {group_description}\n\n*{file_count} files*\n\n---\n\n"

    def render_file_header(self, file_path: str, **kwargs) -> str:
        return f"\n### ðŸ“„ File: `{file_path}`\n\n```{Path(file_path).suffix.lstrip('.') or 'text'}\n"

    def render_file_footer(self, **kwargs) -> str:
        return "\n```\n"

    def render_group_footer(self, **kwargs) -> str:
        return ""

    def render_footer(self, **kwargs) -> str:
        return f"""
---

## ðŸ“Š Compilation Summary

- **Files Processed:** {kwargs.get('processed_count', 0)}
- **Files with Errors:** {kwargs.get('error_count', 0)}
- **Completion Time:** {kwargs.get('timestamp', 'Unknown')}

*Generated by CodeFusion v{__version__}* ðŸš€
"""
