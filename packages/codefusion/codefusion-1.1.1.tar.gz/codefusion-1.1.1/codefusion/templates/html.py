# codefusion/templates/html.py
from .base import BaseTemplate
from .. import __version__

class HtmlTemplate(BaseTemplate):
    def render_header(self, **kwargs) -> str:
        return f"""<!DOCTYPE html>
<html>
<head>
    <title>Code Compilation</title>
    <style>
        body {{ font-family: 'Courier New', monospace; margin: 20px; }}
        .header {{ background: #f5f5f5; padding: 15px; border-left: 4px solid #007acc; }}
        .group-header {{ background: #e0f2ff; padding: 12px; margin: 30px 0 15px 0; border-left: 5px solid #0066cc; font-size: 1.2em; font-weight: bold; }}
        .file-header {{ background: #e8f4fd; padding: 10px; margin: 20px 0 10px 0; border-left: 4px solid #007acc; }}
        .file-content {{ background: #fafafa; padding: 15px; border: 1px solid #ddd; }}
        pre {{ margin: 0; white-space: pre-wrap; }}
    </style>
</head>
<body>
    <div class="header">
        <h1>ğŸ“ Code Compilation</h1>
        <p><strong>Generated:</strong> {kwargs.get('timestamp', 'Unknown')}</p>
        <p><strong>Source:</strong> {kwargs.get('source_dir', 'Unknown')}</p>
        <p><strong>Extensions:</strong> {kwargs.get('extensions', 'Unknown')}</p>
        <p><strong>Total Files:</strong> {kwargs.get('total_files', 0)}</p>
    </div>
"""

    def render_group_header(self, group_name: str, group_description: str, file_count: int) -> str:
        return f'\n<div class="group-header">ğŸ“ {group_description} ({file_count} files)</div>\n'

    def render_file_header(self, file_path: str, **kwargs) -> str:
        return f'<div class="file-header"><h3>ğŸ“„ File: {file_path}</h3></div>\n<div class="file-content"><pre>'

    def render_file_footer(self, **kwargs) -> str:
        return "</pre></div>\n"

    def render_group_footer(self, **kwargs) -> str:
        return ""

    def render_footer(self, **kwargs) -> str:
        return f"""
    <div class="header">
        <h2>ğŸ“Š Compilation Summary</h2>
        <p><strong>Files Processed:</strong> {kwargs.get('processed_count', 0)}</p>
        <p><strong>Files with Errors:</strong> {kwargs.get('error_count', 0)}</p>
        <p><strong>Completion Time:</strong> {kwargs.get('timestamp', 'Unknown')}</p>
         <p><em>Generated by CodeFusion v{__version__} ğŸš€</em></p>
    </div>
</body>
</html>
"""
