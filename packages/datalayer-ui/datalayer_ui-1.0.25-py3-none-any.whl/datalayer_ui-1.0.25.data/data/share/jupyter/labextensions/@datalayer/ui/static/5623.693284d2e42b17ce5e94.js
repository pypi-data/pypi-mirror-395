"use strict";(self.webpackChunk_datalayer_ui=self.webpackChunk_datalayer_ui||[]).push([[5623],{15623:(e,t,r)=>{r.d(t,{o:()=>U,v:()=>C});var n=r(80144);const a=Symbol("Let zodToJsonSchema decide on which parser to use"),s={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref",openAiAnyTypeName:"OpenAiAnyType"};var i=r(71494);const o=(e,t)=>{let r=0;for(;r<e.length&&r<t.length&&e[r]===t[r];r++);return[(e.length-r).toString(),...t.slice(r)].join("/")};function c(e){if("openAi"!==e.target)return{};const t=[...e.basePath,e.definitionPath,e.openAiAnyTypeName];return e.flags.hasReferencedOpenAiAnyType=!0,{$ref:"relative"===e.$refStrategy?o(t,e.currentPath):t.join("/")}}function u(e,t,r,n){n?.errorMessages&&r&&(e.errorMessage={...e.errorMessage,[t]:r})}function f(e,t,r,n,a){e[t]=r,u(e,t,n,a)}function d(e,t){return F(e.type._def,t)}function p(e,t,r){const n=r??t.dateStrategy;if(Array.isArray(n))return{anyOf:n.map((r,n)=>p(e,t,r))};switch(n){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return m(e,t)}}const m=(e,t)=>{const r={type:"integer",format:"unix-time"};if("openApi3"===t.target)return r;for(const n of e.checks)switch(n.kind){case"min":f(r,"minimum",n.value,n.message,t);break;case"max":f(r,"maximum",n.value,n.message,t)}return r};let l;const g=/^[cC][^\s-]{8,}$/,y=/^[0-9a-z]+$/,h=/^[0-9A-HJKMNP-TV-Z]{26}$/,v=/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,k=()=>(void 0===l&&(l=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),l),b=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,_=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,P=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,A=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Z=/^[a-zA-Z0-9_-]{21}$/,S=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/;function x(e,t){const r={type:"string"};if(e.checks)for(const n of e.checks)switch(n.kind){case"min":f(r,"minLength","number"==typeof r.minLength?Math.max(r.minLength,n.value):n.value,n.message,t);break;case"max":f(r,"maxLength","number"==typeof r.maxLength?Math.min(r.maxLength,n.value):n.value,n.message,t);break;case"email":switch(t.emailStrategy){case"format:email":$(r,"email",n.message,t);break;case"format:idn-email":$(r,"idn-email",n.message,t);break;case"pattern:zod":N(r,v,n.message,t)}break;case"url":$(r,"uri",n.message,t);break;case"uuid":$(r,"uuid",n.message,t);break;case"regex":N(r,n.regex,n.message,t);break;case"cuid":N(r,g,n.message,t);break;case"cuid2":N(r,y,n.message,t);break;case"startsWith":N(r,RegExp(`^${O(n.value,t)}`),n.message,t);break;case"endsWith":N(r,RegExp(`${O(n.value,t)}$`),n.message,t);break;case"datetime":$(r,"date-time",n.message,t);break;case"date":$(r,"date",n.message,t);break;case"time":$(r,"time",n.message,t);break;case"duration":$(r,"duration",n.message,t);break;case"length":f(r,"minLength","number"==typeof r.minLength?Math.max(r.minLength,n.value):n.value,n.message,t),f(r,"maxLength","number"==typeof r.maxLength?Math.min(r.maxLength,n.value):n.value,n.message,t);break;case"includes":N(r,RegExp(O(n.value,t)),n.message,t);break;case"ip":"v6"!==n.version&&$(r,"ipv4",n.message,t),"v4"!==n.version&&$(r,"ipv6",n.message,t);break;case"base64url":N(r,A,n.message,t);break;case"jwt":N(r,S,n.message,t);break;case"cidr":"v6"!==n.version&&N(r,b,n.message,t),"v4"!==n.version&&N(r,_,n.message,t);break;case"emoji":N(r,k(),n.message,t);break;case"ulid":N(r,h,n.message,t);break;case"base64":switch(t.base64Strategy){case"format:binary":$(r,"binary",n.message,t);break;case"contentEncoding:base64":f(r,"contentEncoding","base64",n.message,t);break;case"pattern:zod":N(r,P,n.message,t)}break;case"nanoid":N(r,Z,n.message,t);case"toLowerCase":case"toUpperCase":case"trim":break;default:(()=>{})()}return r}function O(e,t){return"escape"===t.patternStrategy?function(e){let t="";for(let r=0;r<e.length;r++)j.has(e[r])||(t+="\\"),t+=e[r];return t}(e):e}const j=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function $(e,t,r,n){e.format||e.anyOf?.some(e=>e.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format,...e.errorMessage&&n.errorMessages&&{errorMessage:{format:e.errorMessage.format}}}),delete e.format,e.errorMessage&&(delete e.errorMessage.format,0===Object.keys(e.errorMessage).length&&delete e.errorMessage)),e.anyOf.push({format:t,...r&&n.errorMessages&&{errorMessage:{format:r}}})):f(e,"format",t,r,n)}function N(e,t,r,n){e.pattern||e.allOf?.some(e=>e.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern,...e.errorMessage&&n.errorMessages&&{errorMessage:{pattern:e.errorMessage.pattern}}}),delete e.pattern,e.errorMessage&&(delete e.errorMessage.pattern,0===Object.keys(e.errorMessage).length&&delete e.errorMessage)),e.allOf.push({pattern:T(t,n),...r&&n.errorMessages&&{errorMessage:{pattern:r}}})):f(e,"pattern",T(t,n),r,n)}function T(e,t){if(!t.applyRegexFlags||!e.flags)return e.source;const r=e.flags.includes("i"),n=e.flags.includes("m"),a=e.flags.includes("s"),s=r?e.source.toLowerCase():e.source;let i="",o=!1,c=!1,u=!1;for(let e=0;e<s.length;e++)if(o)i+=s[e],o=!1;else{if(r)if(c){if(s[e].match(/[a-z]/)){u?(i+=s[e],i+=`${s[e-2]}-${s[e]}`.toUpperCase(),u=!1):"-"===s[e+1]&&s[e+2]?.match(/[a-z]/)?(i+=s[e],u=!0):i+=`${s[e]}${s[e].toUpperCase()}`;continue}}else if(s[e].match(/[a-z]/)){i+=`[${s[e]}${s[e].toUpperCase()}]`;continue}if(n){if("^"===s[e]){i+="(^|(?<=[\r\n]))";continue}if("$"===s[e]){i+="($|(?=[\r\n]))";continue}}a&&"."===s[e]?i+=c?`${s[e]}\r\n`:`[${s[e]}\r\n]`:(i+=s[e],"\\"===s[e]?o=!0:c&&"]"===s[e]?c=!1:c||"["!==s[e]||(c=!0))}try{new RegExp(i)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return i}function Y(e,t){if("openAi"===t.target&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),"openApi3"===t.target&&e.keyType?._def.typeName===i.kY.ZodEnum)return{type:"object",required:e.keyType._def.values,properties:e.keyType._def.values.reduce((r,n)=>({...r,[n]:F(e.valueType._def,{...t,currentPath:[...t.currentPath,"properties",n]})??c(t)}),{}),additionalProperties:t.rejectedAdditionalProperties};const r={type:"object",additionalProperties:F(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??t.allowedAdditionalProperties};if("openApi3"===t.target)return r;if(e.keyType?._def.typeName===i.kY.ZodString&&e.keyType._def.checks?.length){const{type:n,...a}=x(e.keyType._def,t);return{...r,propertyNames:a}}if(e.keyType?._def.typeName===i.kY.ZodEnum)return{...r,propertyNames:{enum:e.keyType._def.values}};if(e.keyType?._def.typeName===i.kY.ZodBranded&&e.keyType._def.type._def.typeName===i.kY.ZodString&&e.keyType._def.type._def.checks?.length){const{type:n,...a}=d(e.keyType._def,t);return{...r,propertyNames:a}}return r}const M={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"},w=(e,t)=>{const r=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((e,r)=>F(e._def,{...t,currentPath:[...t.currentPath,"anyOf",`${r}`]})).filter(e=>!!e&&(!t.strictUnions||"object"==typeof e&&Object.keys(e).length>0));return r.length?{anyOf:r}:void 0};function z(e){try{return e.isOptional()}catch{return!0}}const L=(e,t,r)=>{switch(t){case i.kY.ZodString:return x(e,r);case i.kY.ZodNumber:return function(e,t){const r={type:"number"};if(!e.checks)return r;for(const n of e.checks)switch(n.kind){case"int":r.type="integer",u(r,"type",n.message,t);break;case"min":"jsonSchema7"===t.target?n.inclusive?f(r,"minimum",n.value,n.message,t):f(r,"exclusiveMinimum",n.value,n.message,t):(n.inclusive||(r.exclusiveMinimum=!0),f(r,"minimum",n.value,n.message,t));break;case"max":"jsonSchema7"===t.target?n.inclusive?f(r,"maximum",n.value,n.message,t):f(r,"exclusiveMaximum",n.value,n.message,t):(n.inclusive||(r.exclusiveMaximum=!0),f(r,"maximum",n.value,n.message,t));break;case"multipleOf":f(r,"multipleOf",n.value,n.message,t)}return r}(e,r);case i.kY.ZodObject:return function(e,t){const r="openAi"===t.target,n={type:"object",properties:{}},a=[],s=e.shape();for(const e in s){let i=s[e];if(void 0===i||void 0===i._def)continue;let o=z(i);o&&r&&("ZodOptional"===i._def.typeName&&(i=i._def.innerType),i.isNullable()||(i=i.nullable()),o=!1);const c=F(i._def,{...t,currentPath:[...t.currentPath,"properties",e],propertyPath:[...t.currentPath,"properties",e]});void 0!==c&&(n.properties[e]=c,o||a.push(e))}a.length&&(n.required=a);const i=function(e,t){if("ZodNever"!==e.catchall._def.typeName)return F(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]});switch(e.unknownKeys){case"passthrough":return t.allowedAdditionalProperties;case"strict":return t.rejectedAdditionalProperties;case"strip":return"strict"===t.removeAdditionalStrategy?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}(e,t);return void 0!==i&&(n.additionalProperties=i),n}(e,r);case i.kY.ZodBigInt:return function(e,t){const r={type:"integer",format:"int64"};if(!e.checks)return r;for(const n of e.checks)switch(n.kind){case"min":"jsonSchema7"===t.target?n.inclusive?f(r,"minimum",n.value,n.message,t):f(r,"exclusiveMinimum",n.value,n.message,t):(n.inclusive||(r.exclusiveMinimum=!0),f(r,"minimum",n.value,n.message,t));break;case"max":"jsonSchema7"===t.target?n.inclusive?f(r,"maximum",n.value,n.message,t):f(r,"exclusiveMaximum",n.value,n.message,t):(n.inclusive||(r.exclusiveMaximum=!0),f(r,"maximum",n.value,n.message,t));break;case"multipleOf":f(r,"multipleOf",n.value,n.message,t)}return r}(e,r);case i.kY.ZodBoolean:return{type:"boolean"};case i.kY.ZodDate:return p(e,r);case i.kY.ZodUndefined:return function(e){return{not:c(e)}}(r);case i.kY.ZodNull:return function(e){return"openApi3"===e.target?{enum:["null"],nullable:!0}:{type:"null"}}(r);case i.kY.ZodArray:return function(e,t){const r={type:"array"};return e.type?._def&&e.type?._def?.typeName!==i.kY.ZodAny&&(r.items=F(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&f(r,"minItems",e.minLength.value,e.minLength.message,t),e.maxLength&&f(r,"maxItems",e.maxLength.value,e.maxLength.message,t),e.exactLength&&(f(r,"minItems",e.exactLength.value,e.exactLength.message,t),f(r,"maxItems",e.exactLength.value,e.exactLength.message,t)),r}(e,r);case i.kY.ZodUnion:case i.kY.ZodDiscriminatedUnion:return function(e,t){if("openApi3"===t.target)return w(e,t);const r=e.options instanceof Map?Array.from(e.options.values()):e.options;if(r.every(e=>e._def.typeName in M&&(!e._def.checks||!e._def.checks.length))){const e=r.reduce((e,t)=>{const r=M[t._def.typeName];return r&&!e.includes(r)?[...e,r]:e},[]);return{type:e.length>1?e:e[0]}}if(r.every(e=>"ZodLiteral"===e._def.typeName&&!e.description)){const e=r.reduce((e,t)=>{const r=typeof t._def.value;switch(r){case"string":case"number":case"boolean":return[...e,r];case"bigint":return[...e,"integer"];case"object":if(null===t._def.value)return[...e,"null"];default:return e}},[]);if(e.length===r.length){const t=e.filter((e,t,r)=>r.indexOf(e)===t);return{type:t.length>1?t:t[0],enum:r.reduce((e,t)=>e.includes(t._def.value)?e:[...e,t._def.value],[])}}}else if(r.every(e=>"ZodEnum"===e._def.typeName))return{type:"string",enum:r.reduce((e,t)=>[...e,...t._def.values.filter(t=>!e.includes(t))],[])};return w(e,t)}(e,r);case i.kY.ZodIntersection:return function(e,t){const r=[F(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),F(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(e=>!!e);let n="jsonSchema2019-09"===t.target?{unevaluatedProperties:!1}:void 0;const a=[];return r.forEach(e=>{if("type"in(t=e)&&"string"===t.type||!("allOf"in t)){let t=e;if("additionalProperties"in e&&!1===e.additionalProperties){const{additionalProperties:r,...n}=e;t=n}else n=void 0;a.push(t)}else a.push(...e.allOf),void 0===e.unevaluatedProperties&&(n=void 0);var t}),a.length?{allOf:a,...n}:void 0}(e,r);case i.kY.ZodTuple:return function(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((e,r)=>F(e._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((e,t)=>void 0===t?e:[...e,t],[]),additionalItems:F(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((e,r)=>F(e._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((e,t)=>void 0===t?e:[...e,t],[])}}(e,r);case i.kY.ZodRecord:return Y(e,r);case i.kY.ZodLiteral:return function(e,t){const r=typeof e.value;return"bigint"!==r&&"number"!==r&&"boolean"!==r&&"string"!==r?{type:Array.isArray(e.value)?"array":"object"}:"openApi3"===t.target?{type:"bigint"===r?"integer":r,enum:[e.value]}:{type:"bigint"===r?"integer":r,const:e.value}}(e,r);case i.kY.ZodEnum:return function(e){return{type:"string",enum:Array.from(e.values)}}(e);case i.kY.ZodNativeEnum:return function(e){const t=e.values,r=Object.keys(e.values).filter(e=>"number"!=typeof t[t[e]]).map(e=>t[e]),n=Array.from(new Set(r.map(e=>typeof e)));return{type:1===n.length?"string"===n[0]?"string":"number":["string","number"],enum:r}}(e);case i.kY.ZodNullable:return function(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return"openApi3"===t.target?{type:M[e.innerType._def.typeName],nullable:!0}:{type:[M[e.innerType._def.typeName],"null"]};if("openApi3"===t.target){const r=F(e.innerType._def,{...t,currentPath:[...t.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}const r=F(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return r&&{anyOf:[r,{type:"null"}]}}(e,r);case i.kY.ZodOptional:return((e,t)=>{if(t.currentPath.toString()===t.propertyPath?.toString())return F(e.innerType._def,t);const r=F(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return r?{anyOf:[{not:c(t)},r]}:c(t)})(e,r);case i.kY.ZodMap:return function(e,t){return"record"===t.mapStrategy?Y(e,t):{type:"array",maxItems:125,items:{type:"array",items:[F(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||c(t),F(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||c(t)],minItems:2,maxItems:2}}}(e,r);case i.kY.ZodSet:return function(e,t){const r={type:"array",uniqueItems:!0,items:F(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&f(r,"minItems",e.minSize.value,e.minSize.message,t),e.maxSize&&f(r,"maxItems",e.maxSize.value,e.maxSize.message,t),r}(e,r);case i.kY.ZodLazy:return()=>e.getter()._def;case i.kY.ZodPromise:return function(e,t){return F(e.type._def,t)}(e,r);case i.kY.ZodNaN:case i.kY.ZodNever:return function(e){return"openAi"===e.target?void 0:{not:c({...e,currentPath:[...e.currentPath,"not"]})}}(r);case i.kY.ZodEffects:return function(e,t){return"input"===t.effectStrategy?F(e.schema._def,t):c(t)}(e,r);case i.kY.ZodAny:return c(r);case i.kY.ZodUnknown:return function(e){return c(e)}(r);case i.kY.ZodDefault:return function(e,t){return{...F(e.innerType._def,t),default:e.defaultValue()}}(e,r);case i.kY.ZodBranded:return d(e,r);case i.kY.ZodReadonly:case i.kY.ZodCatch:return((e,t)=>F(e.innerType._def,t))(e,r);case i.kY.ZodPipeline:return((e,t)=>{if("input"===t.pipeStrategy)return F(e.in._def,t);if("output"===t.pipeStrategy)return F(e.out._def,t);const r=F(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]});return{allOf:[r,F(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",r?"1":"0"]})].filter(e=>void 0!==e)}})(e,r);case i.kY.ZodFunction:case i.kY.ZodVoid:case i.kY.ZodSymbol:default:return}};function F(e,t,r=!1){const n=t.seen.get(e);if(t.override){const s=t.override?.(e,t,n,r);if(s!==a)return s}if(n&&!r){const e=I(n,t);if(void 0!==e)return e}const s={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,s);const i=L(e,e.typeName,t),o="function"==typeof i?F(i(),t):i;if(o&&E(e,t,o),t.postProcess){const r=t.postProcess(o,e,t);return s.jsonSchema=o,r}return s.jsonSchema=o,o}const I=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:o(t.currentPath,e.path)};case"none":case"seen":return e.path.length<t.currentPath.length&&e.path.every((e,r)=>t.currentPath[r]===e)?(console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),c(t)):"seen"===t.$refStrategy?c(t):void 0}},E=(e,t,r)=>(e.description&&(r.description=e.description,t.markdownDescription&&(r.markdownDescription=e.description)),r),R=(e,t)=>{const r=(e=>{const t=(e=>"string"==typeof e?{...s,name:e}:{...s,...e})(e),r=void 0!==t.name?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,flags:{hasReferencedOpenAiAnyType:!1},currentPath:r,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([e,r])=>[r._def,{def:r._def,path:[...t.basePath,t.definitionPath,e],jsonSchema:void 0}]))}})(t);let n="object"==typeof t&&t.definitions?Object.entries(t.definitions).reduce((e,[t,n])=>({...e,[t]:F(n._def,{...r,currentPath:[...r.basePath,r.definitionPath,t]},!0)??c(r)}),{}):void 0;const a="string"==typeof t?t:"title"===t?.nameStrategy?void 0:t?.name,i=F(e._def,void 0===a?r:{...r,currentPath:[...r.basePath,r.definitionPath,a]},!1)??c(r),o="object"==typeof t&&void 0!==t.name&&"title"===t.nameStrategy?t.name:void 0;void 0!==o&&(i.title=o),r.flags.hasReferencedOpenAiAnyType&&(n||(n={}),n[r.openAiAnyTypeName]||(n[r.openAiAnyTypeName]={type:["string","number","integer","boolean","array","null"],items:{$ref:"relative"===r.$refStrategy?"1":[...r.basePath,r.definitionPath,r.openAiAnyTypeName].join("/")}}));const u=void 0===a?n?{...i,[r.definitionPath]:n}:i:{$ref:[..."relative"===r.$refStrategy?[]:r.basePath,r.definitionPath,a].join("/"),[r.definitionPath]:{...n,[a]:i}};return"jsonSchema7"===r.target?u.$schema="http://json-schema.org/draft-07/schema#":"jsonSchema2019-09"!==r.target&&"openAi"!==r.target||(u.$schema="https://json-schema.org/draft/2019-09/schema#"),"openAi"===r.target&&("anyOf"in u||"oneOf"in u||"allOf"in u||"type"in u&&Array.isArray(u.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),u};function C(e){if(("ZodObject"===e?._def?.typeName||"object"===e?._def?.type)&&e._def?.shape){const t="function"==typeof e._def.shape?e._def.shape():e._def.shape,r={},n=[];for(const[e,a]of Object.entries(t)){let t=a;const s={};let i=!1;for(;"ZodOptional"===t._def?.typeName||"ZodDefault"===t._def?.typeName||"optional"===t._def?.type||"default"===t._def?.type||"optional"===t.def?.type||"default"===t.def?.type;)"ZodOptional"!==t._def?.typeName&&"optional"!==t._def?.type&&"optional"!==t.def?.type||(i=!0),t=t._def?.innerType||t.def?.innerType||t;const o=a._def?.description||a.def?.description||a.description;o&&(s.description=o);const c=t._def?.typeName||t._def?.type||t.def?.type;if("ZodString"===c||"string"===c)s.type="string";else if("ZodNumber"===c||"number"===c)s.type="number";else if("ZodBoolean"===c||"boolean"===c)s.type="boolean";else if("ZodEnum"===c||"enum"===c){s.type="string";const e=t._def?.values||t.def?.values||t.options||(t.def?.entries?Object.keys(t.def.entries):null)||(t.enum?Object.keys(t.enum):null)||[];s.enum=Array.isArray(e)?e:Object.keys(e||{})}r[e]=s,i||n.push(e)}return{type:"object",properties:r,required:n}}const t=R(e,{target:"openApi3",$refStrategy:"none"});return{type:"object",properties:t.properties||{},required:t.required||[]}}function U(e,t,r){try{return e.parse(t)}catch(e){if(e instanceof n.z.ZodError){const n=e.issues.map(e=>`  - ${e.path.length>0?e.path.join("."):"root"}: ${e.message}`).join("\n");throw new Error(`Invalid parameters for ${r}:\n${n}\n\nReceived: ${JSON.stringify(t)}`)}throw e}}}}]);