"use strict";(self.webpackChunk_datalayer_ui=self.webpackChunk_datalayer_ui||[]).push([[650,1367,2426,3031,8269],{45:(e,t,n)=>{n.a(e,async(e,s)=>{try{n.r(t),n.d(t,{IJupyterIAM:()=>f,default:()=>x,jupyterIAMPlugin:()=>w});var r=n(16255),i=n(62863),a=n(59179),o=n(41665),l=n(97371),c=n(98238),d=n(7254),h=n(71932),u=n(26127),m=n(48552),g=n(7098),p=e([g]),v=p.then?(await p)():p;g=v[0];const y="@datalayer/ui:iam",f=new c.Token(y);let _;(_||(_={})).create="create-jupyter-iam-widget";const w={id:y,autoStart:!0,requires:[h.R],optional:[a.kn,l.k,r.E],provides:f,activate:(e,t,n,s,r)=>{let a=!1;const l=t=>{if(!a&&!t.whiteLabel){a=!0;const t=_.create;(0,m.$)("config").then(e=>{u.J7.getState().setVersion(e.version);const r=e.configuration.launcher.category;n?.addItem({command:t,category:r}),s&&r&&s.add({command:t,category:r,rank:4.1})}).catch(e=>{console.error(`Error while accessing the jupyter server jupyter_iam extension.\n${e}`)});const{commands:l}=e,c=new o.H({namespace:"jupyter-iam"});r&&r.restore(c,{command:t,name:()=>"jupyter-iam"}),l.addCommand(t,{caption:"Show Jupyter IAM",label:"Jupyter IAM",icon:d.A,execute:()=>{const t=new g.V(e),n=new i.p({content:t});n.title.label="Jupyter IAM",n.title.icon=d.A,e.shell.add(n,"main"),c.add(n)}})}};return t.ready.finally(()=>{l(t.configuration.configuration),t.configuration.configurationChanged.connect((e,t)=>{l(t)})}),console.log(`JupyterLab plugin ${w.id} is activated.`),{}}},x=w;s()}catch(e){s(e)}})},2285:(e,t,n)=>{n.a(e,async(e,s)=>{try{n.d(t,{Y:()=>j});var r=n(20568),i=n(70216),a=n(99180),o=n(63711),l=n(17788),c=n(99179),d=n(9448),h=n(14551),u=n(54992),m=n(11056),g=n(12616),p=n(67776),v=n(9570),y=n(23787),f=n(78464),_=n(2453),w=(n(50149),n(18683)),x=e([y]),b=x.then?(await x)():x;y=b[0];const j=()=>{const e=(0,c.J)(),{configuration:t}=(0,v._O)(),n=(0,l.Z)();return(0,w.jsx)(w.Fragment,{children:(0,w.jsx)(i.M,{containerWidth:"full",padding:"normal",sx:{overflow:"visible"},children:(0,w.jsx)(i.M.Content,{children:(0,w.jsxs)(d.az,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:4},children:[(0,w.jsxs)(d.az,{sx:{gridColumn:"1 / 3"},children:[!t?.whiteLabel&&"top"===e.onboarding.position&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(m.M,{client:"Platform"}),(0,w.jsx)(d.az,{mt:5})]}),(0,w.jsx)(u.l,{id:"runtimes-box-jupyterlab",title:"Runtimes",linkLabel:"More on Runtimes",linkRoute:"/jupyter/kernels/runtimes",children:(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)(d.az,{children:[(0,w.jsx)(a.Q,{variant:"default",size:"large",leadingVisual:()=>(0,w.jsx)(h.Cx,{type:"runtime"}),onClick:e=>n("/jupyter/kernels/runtimes/new",e),children:"Launch a Runtime"}),(0,w.jsx)(a.Q,{variant:"default",size:"large",leadingVisual:()=>(0,w.jsx)(h.Cx,{type:"documentation"}),onClick:e=>n("/jupyter/kernels/docs",e),style:{marginTop:5},children:"Read the documentation"})]}),(0,w.jsx)(r.BV,{children:(0,w.jsx)(r.qh,{path:"",element:(0,w.jsx)(f.n,{})})})]})}),!t?.whiteLabel&&"bottom"===e.onboarding.position&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(d.az,{mt:5}),(0,w.jsx)(m.M,{client:"Platform"})]})]}),(0,w.jsx)(d.az,{sx:{gridColumn:"3 / 3"},children:(0,w.jsx)(u.l,{title:"Usage",linkLabel:"More on Usage",linkRoute:"/jupyter/kernels/usage",children:(0,w.jsx)(r.BV,{children:(0,w.jsx)(r.qh,{path:"",element:(0,w.jsx)(p.pp,{showLeftPane:!1,baseRoute:o.URLExt.join(y.X3,_.Ek)}),children:(0,w.jsx)(r.qh,{path:"",element:(0,w.jsx)(g.t,{})})})})})})]})})})})};s()}catch(e){s(e)}})},7098:(e,t,n)=>{n.a(e,async(e,s)=>{try{n.d(t,{V:()=>u});var r=n(88037),i=n(64761),a=n(61286),o=n(18683),l=e([a]),c=l.then?(await l)():l;function d(e){var t=h(e,"string");return"symbol"==typeof t?t:t+""}function h(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}a=c[0];class u extends r._Q{constructor(e){var t,n,s;super(),t=this,s=void 0,(n=d(n="_app"))in t?Object.defineProperty(t,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[n]=s,this._app=e,this.addClass("dla-Container")}render(){return(0,o.jsx)(a.l,{memoryRouter:!0,baseRoute:"",jupyterLabAdapter:i.H.create(this._app)})}}s()}catch(m){s(m)}})},13279:(e,t,n)=>{n.d(t,{E:()=>d});var s=n(98754),r=n(48453),i=n(80006),a=n(70216),o=n(49261),l=n(9570),c=n(18683);const d=()=>{const{configuration:e}=(0,l._O)();return(0,c.jsxs)(a.M,{containerWidth:"full",padding:"normal",style:{overflow:"visible",minHeight:"calc(100vh - 45px)"},children:[(0,c.jsx)(a.M.Header,{children:(0,c.jsxs)(o.z,{children:[(0,c.jsx)(o.z.TitleArea,{variant:"large",children:(0,c.jsx)(o.z.Title,{children:"Documentation"})}),(0,c.jsx)(o.z.Description,{children:(0,c.jsxs)(i.A,{sx:{fontSize:1,color:"fg.muted"},children:["Useful links for ",e.brand.name]})})]})}),(0,c.jsxs)(a.M.Content,{children:[(0,c.jsx)(s.A,{children:(0,c.jsx)(i.A,{children:e.brand.about})}),(0,c.jsx)(s.A,{children:(0,c.jsx)(i.A,{as:"h3",children:(0,c.jsx)(r.A,{href:e.brand.docsUrl,target:"_blank",children:"User Guide"})})}),(0,c.jsx)(s.A,{children:(0,c.jsx)(i.A,{as:"h3",children:(0,c.jsx)(r.A,{href:e.brand.pricingUrl,target:"_blank",children:"Pricing"})})}),(0,c.jsx)(s.A,{children:(0,c.jsx)(i.A,{as:"h3",children:(0,c.jsx)(r.A,{href:e.brand.privacyUrl,target:"_blank",children:"Privacy"})})}),(0,c.jsx)(s.A,{children:(0,c.jsx)(i.A,{as:"h3",children:(0,c.jsx)(r.A,{href:e.brand.termsUrl,target:"_blank",children:"Terms and conditions"})})})]})]})}},16152:(e,t,n)=>{n.r(t),n.d(t,{datalayerCorePlugin:()=>Ce,default:()=>Se});var s=n(16255),r=n(59179),i=n(41665),a=n(62863),o=n(69584),l=n(97371),c=n(98238),d=n(40358),h=n(9570),u=n(26127),m=n(13957),g=n(63711),p=n(97789);async function v(e="",t={}){const n=p.ServerConnection.makeSettings(),s=g.URLExt.join(n.baseUrl,"datalayer",e);let r;try{r=await p.ServerConnection.makeRequest(s,t,n)}catch(e){throw new p.ServerConnection.NetworkError(e)}let i=await r.text();if(i.length>0)try{i=JSON.parse(i)}catch(e){console.log("Not a JSON response body.",r)}if(!r.ok)throw new p.ServerConnection.ResponseError(r,i.message||i);return i}var y=n(88037),f=n(9387),_=n(41630),w=n(98754),x=n(92584),b=n(42108),j=n(69541),k=n(90764),A=n(75147),C=n(18683);const S=e=>{const{version:t}=e;return(0,C.jsx)(A.a,{version:t,title:"Datalayer Core",icon:(0,C.jsx)(k.A,{colored:!0,size:32}),description:"Ξ Datalayer Core contains base application classes and configuration used by other package."})};var R=n(21854),M=n(77578),L=n(33436),P=n(91719),E=n(86101),D=n(43),N=n(94489),F=n(25365),U=n(61458),I=n(97582),T=n(49261),q=n(44742),O=n(59612),z=n(96566),V=n(54191),H=n(4899),W=n(11757),K=n(88962),$=n(14282),J=n(9171);function B(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Y{constructor(e){B(this,"_plugins",void 0),B(this,"_nodes",new Map),B(this,"_edges",new Array),B(this,"_categories",new Map),B(this,"_filter",""),B(this,"_requires",!0),B(this,"_optional",!0),this._plugins=e.plugins,this.update()}_asCategory(e){const t=e.split(":");return t.length>1?t[0]:e}_addNode(e){const t=this._asCategory(e);this._nodes.set(e,{id:e,name:e,category:t}),this._addCategory(t)}_addEdge(e,t){this._edges.push({source:e,target:t})}_addCategory(e){this._categories.set(e,{name:e})}update(){const{plugins:e,filter:t,requires:n,optional:s}=this;e.forEach((e,r)=>{const i=e=>""===t||!!e.toLowerCase().match(t.toLowerCase());let a=r;e.provides&&(a=e.provides.name),i(a)&&this._addNode(a),n&&(e.requires??[]).forEach(e=>{(i(e.name)||i(a))&&(this._addNode(e.name),this._addNode(a),this._addEdge(a,e.name))}),s&&(e.optional??[]).forEach(e=>{(i(e.name)||i(a))&&(this._addNode(e.name),this._addNode(a),this._addEdge(a,e.name))})})}get plugins(){return this._plugins}get filter(){return this._filter}set filter(e){this._filter=e}get requires(){return this._requires}set requires(e){this._requires=e}get optional(){return this._optional}set optional(e){this._optional=e}get nodes(){return Array.from(this._nodes.values()).sort((e,t)=>e.id.localeCompare(t.id))}get edges(){return this._edges}get categories(){return Array.from(this._categories.values()).sort((e,t)=>e.name.localeCompare(t.name))}}q.Y([$.a,z.a,V.a,H.a,W.a,K.a]);const G=e=>{const{jupyterFrontend:t}=e,[n,s]=(0,f.useState)(void 0);return(0,f.useEffect)(()=>{const e=t.pluginRegistry._plugins,n=new Y({plugins:e}),r={showLoading:!0,tooltip:{},legend:[{orient:"vertical",x:"left",right:10,data:n.categories.map(function(e){return e.name})}],animationDurationUpdate:1500,animationEasingUpdate:"quinticInOut",series:[{name:"JupyterLab Plugins",type:"graph",layout:"circular",center:["30%","45%"],circular:{rotateLabel:!0},data:n.nodes,links:n.edges,categories:n.categories,roam:!0,label:{position:"right",formatter:"{b}"},lineStyle:{color:"source",curveness:.3}}]};s(r)},[t]),(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(T.z,{children:(0,C.jsx)(T.z.TitleArea,{children:(0,C.jsx)(T.z.Title,{children:"Plugins"})})}),n&&(0,C.jsx)(J.A,{echarts:O,option:n,style:{height:"calc(100vh - 200px)"},notMerge:!0,lazyUpdate:!0})]})};var Z=n(80006),Q=n(58078),X=n(27102),ee=n(63594),te=n(4902);class ne{constructor(e){var t,n,s;t=this,s=void 0,(n=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(n="_fileType"))in t?Object.defineProperty(t,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[n]=s,this._fileType=e}get id(){return this._fileType.name}get name(){return this._fileType.name}get displayName(){return this._fileType.displayName}get fileFormat(){return this._fileType.fileFormat}get icon(){return this._fileType.icon}get extensions(){return this._fileType.extensions}get contentType(){return this._fileType.contentType()}get mimeTypes(){return this._fileType.mimeTypes()}get pattern(){return this._fileType.pattern()}get iconClass(){return this._fileType.iconClass()}get iconLabel(){return this._fileType.iconLabel()}}const se=e=>{const{jupyterFrontend:t}=e,[n,s]=(0,f.useState)();return(0,f.useEffect)(()=>{if(t){const e=Array.from(t.docRegistry.fileTypes()).map(e=>new ne(e));s(e)}},[t]),(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(T.z,{children:(0,C.jsx)(T.z.TitleArea,{children:(0,C.jsx)(T.z.Title,{children:"File Types"})})}),n&&(0,C.jsxs)(ee.X.Container,{children:[(0,C.jsx)(ee.X.Title,{as:"h2",id:"file-types",children:"File types"}),(0,C.jsx)(ee.X.Subtitle,{as:"p",id:"file-types-subtitle",children:"List of registered file types."}),(0,C.jsx)(te.b,{"aria-labelledby":"file-types","aria-describedby":"file-types-subtitle",data:n,columns:[{header:"Icon",field:"icon",renderCell:e=>e.icon?(0,C.jsx)(w.A,{sx:{width:16,height:16},children:(0,C.jsx)(e.icon.react,{})}):(0,C.jsx)(C.Fragment,{})},{header:"Name",field:"name",renderCell:e=>e.name},{header:"Display Name",field:"displayName",renderCell:e=>(0,C.jsx)(Z.A,{children:String(e.displayName)})},{header:"Extensions",field:"extensions",renderCell:e=>(0,C.jsx)(Q.A,{children:e.extensions.map(e=>(0,C.jsx)(X.A,{children:e}))})},{header:"File Format",field:"fileFormat",renderCell:e=>(0,C.jsx)(X.A,{variant:"primary",children:String(e.fileFormat)})}]})]})]})},re=e=>{const{jupyterFrontend:t}=e,[n,s]=(0,f.useState)(),[r,i]=(0,f.useState)();return(0,f.useEffect)(()=>{if(t){const e=t.serviceManager.contents._defaultDrive;s({id:-1,...e});const n=t.serviceManager.contents._additionalDrives;n&&i(Array.from(n.values()).map((e,t)=>({id:t,...e,name:e.name})))}},[t]),(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(T.z,{children:(0,C.jsx)(T.z.TitleArea,{children:(0,C.jsx)(T.z.Title,{children:"Drives"})})}),(0,C.jsxs)(w.A,{children:[(0,C.jsx)("h3",{children:"Default Drive"}),(0,C.jsx)(Z.A,{children:n?.name}),(0,C.jsx)(X.A,{style:{marginLeft:3},children:n?.sharedModelFactory?.collaborative?"collaborative":"non collaborative"})]}),r&&(0,C.jsxs)(ee.X.Container,{children:[(0,C.jsx)(ee.X.Title,{as:"h2",id:"repositories",children:"Additional Drives"}),(0,C.jsx)(ee.X.Subtitle,{as:"p",id:"repositories-subtitle",children:"List of registered drives"}),(0,C.jsx)(te.b,{"aria-labelledby":"file-types","aria-describedby":"file-types-subtitle",data:r,columns:[{header:"Name",field:"name",renderCell:e=>(0,C.jsx)(Z.A,{children:e.name})},{header:"Shared Model Factory",field:"sharedModelFactory",renderCell:e=>(0,C.jsx)(X.A,{children:e.sharedModelFactory?.collaborative?"collaborative":"non collaborative"})}]})]})]})};class ie{constructor(e){var t,n,s;t=this,s=void 0,(n=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(n="_modelFactory"))in t?Object.defineProperty(t,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[n]=s,this._modelFactory=e}get id(){return this._modelFactory.name}get name(){return this._modelFactory.name}get contentType(){return this._modelFactory.contentType}get collaborative(){return this._modelFactory.collaborative}get isDisposed(){return this._modelFactory.isDisposed}get fileFormat(){return this._modelFactory.fileFormat}}const ae=e=>{const{jupyterFrontend:t}=e,[n,s]=(0,f.useState)();return(0,f.useEffect)(()=>{if(t){const e=Array.from(t.docRegistry.modelFactories()).map(e=>new ie(e));s(e)}},[t]),(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(T.z,{children:(0,C.jsx)(T.z.TitleArea,{children:(0,C.jsx)(T.z.Title,{children:"Models"})})}),n&&(0,C.jsxs)(ee.X.Container,{children:[(0,C.jsx)(ee.X.Title,{as:"h2",id:"model-factories",children:"Model Factories"}),(0,C.jsx)(ee.X.Subtitle,{as:"p",id:"model-factories-subtitle",children:"List of registered model factories."}),(0,C.jsx)(te.b,{"aria-labelledby":"model-factories","aria-describedby":"model-factories-subtitle",data:n,columns:[{header:"Name",field:"name",renderCell:e=>(0,C.jsx)(Z.A,{children:e.name})},{header:"Content Type",field:"contentType",renderCell:e=>(0,C.jsx)(X.A,{children:e.contentType})},{header:"Collaborative",field:"collaborative",renderCell:e=>(0,C.jsx)(Z.A,{children:String(e.collaborative)})},{header:"File Format",field:"fileFormat",renderCell:e=>(0,C.jsx)(X.A,{variant:"primary",children:String(e.fileFormat)})}]})]})]})};class oe{constructor(e){var t,n,s;t=this,s=void 0,(n=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(n="_widgetFactory"))in t?Object.defineProperty(t,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[n]=s,this._widgetFactory=e}get id(){return this._widgetFactory.name}get name(){return this._widgetFactory.name}get modelName(){return this._widgetFactory.modelName}get label(){return this._widgetFactory.label}get fileTypes(){return this._widgetFactory.fileTypes}get isDisposed(){return this._widgetFactory.isDisposed}get widgetCreated(){return this._widgetFactory.widgetCreated}}const le=e=>{const{jupyterFrontend:t}=e,[n,s]=(0,f.useState)();return(0,f.useEffect)(()=>{if(t){const e=Array.from(t.docRegistry.widgetFactories()).map(e=>new oe(e));s(e)}},[t]),(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(T.z,{children:(0,C.jsx)(T.z.TitleArea,{children:(0,C.jsx)(T.z.Title,{children:"Widgets"})})}),n&&(0,C.jsxs)(ee.X.Container,{children:[(0,C.jsx)(ee.X.Title,{as:"h2",id:"widget-factories",children:"Widget Factories"}),(0,C.jsx)(ee.X.Subtitle,{as:"p",id:"widget-factories-subtitle",children:"List of registered widgets factories."}),(0,C.jsx)(te.b,{"aria-labelledby":"file-types","aria-describedby":"file-types-subtitle",data:n,columns:[{header:"Name",field:"name",renderCell:e=>(0,C.jsx)(Z.A,{children:e.name})},{header:"Label",field:"label",renderCell:e=>(0,C.jsx)(Z.A,{children:e.label})},{header:"Model Name",field:"modelName",renderCell:e=>(0,C.jsx)(X.A,{children:e.modelName})},{header:"File Types",field:"fileTypes",renderCell:e=>(0,C.jsx)(Q.A,{children:e.fileTypes.map(e=>(0,C.jsx)(X.A,{variant:"primary",children:e}))})}]})]})]})};var ce=n(3556);function de(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class he{constructor(e,t){de(this,"_widgetName",void 0),de(this,"_extension",void 0),this._widgetName=e,this._extension=t}get id(){return this.widgetName}get widgetName(){return this._widgetName}get extension(){return this._extension}}const ue=e=>{const{widgetName:t,extensions:n}=e;return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(w.A,{children:(0,C.jsx)(ce.A,{sx:{fontSize:2,mb:2},children:t})}),n.map(e=>(0,C.jsx)(C.Fragment,{children:(0,C.jsx)(w.A,{children:(0,C.jsx)(X.A,{children:e.extension.constructor.name})})}))]})},me=e=>{const{jupyterFrontend:t}=e,[n,s]=(0,f.useState)();return(0,f.useEffect)(()=>{if(t){const e=t.docRegistry._extenders,n=new Map;Object.keys(e).forEach(t=>{const s=e[t].map(e=>new he(t,e));n.set(t,s)}),s(n)}},[t]),(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(T.z,{children:(0,C.jsx)(T.z.TitleArea,{children:(0,C.jsx)(T.z.Title,{children:"Widget Extensions"})})}),n&&Array.from(n.entries()).map(e=>{const[t,n]=e;return(0,C.jsx)(ue,{widgetName:t,extensions:n})})]})},ge=e=>(0,C.jsx)(w.A,{children:(0,C.jsx)(T.z,{children:(0,C.jsx)(T.z.TitleArea,{children:(0,C.jsx)(T.z.Title,{children:"Settings"})})})}),pe=e=>(0,C.jsx)(w.A,{children:(0,C.jsx)(T.z,{children:(0,C.jsx)(T.z.TitleArea,{children:(0,C.jsx)(T.z.Title,{children:"IPyWidgets"})})})}),ve=e=>(0,C.jsx)(C.Fragment,{children:(0,C.jsxs)(T.z,{children:[(0,C.jsx)(T.z.TitleArea,{children:(0,C.jsx)(T.z.Title,{children:"Server"})}),(0,C.jsx)(T.z.Navigation,{children:(0,C.jsxs)(x.O,{"aria-label":"Server",children:[(0,C.jsx)(x.O.Item,{icon:D.A,counter:"12","aria-current":"page",children:"Extensions"}),(0,C.jsx)(x.O.Item,{counter:3,icon:F.A,children:"Settings"})]})})]})}),ye=e=>{const{jupyterFrontend:t}=e,{tab:n,setTab:s}=(0,h._O)();return(0,C.jsx)(C.Fragment,{children:(0,C.jsxs)(w.A,{sx:{display:"flex"},children:[(0,C.jsx)(w.A,{children:(0,C.jsxs)(I.c,{sx:{"> *":{paddingTop:"0px"}},children:[(0,C.jsxs)(I.c.Item,{"aria-current":0===n?"page":void 0,onClick:e=>s(0),children:[(0,C.jsx)(I.c.LeadingVisual,{children:(0,C.jsx)(R.A,{})}),"Plugins"]}),(0,C.jsxs)(I.c.Item,{"aria-current":.1===n?"page":void 0,onClick:e=>s(.1),children:[(0,C.jsx)(I.c.LeadingVisual,{children:(0,C.jsx)(M.A,{})}),"File Types"]}),(0,C.jsxs)(I.c.Item,{"aria-current":.2===n?"page":void 0,onClick:e=>s(.2),children:[(0,C.jsx)(I.c.LeadingVisual,{children:(0,C.jsx)(L.A,{})}),"Models"]}),(0,C.jsxs)(I.c.Item,{"aria-current":.3===n?"page":void 0,onClick:e=>s(.3),children:[(0,C.jsx)(I.c.LeadingVisual,{children:(0,C.jsx)(P.A,{colored:!0})}),"Drives"]}),(0,C.jsxs)(I.c.Item,{"aria-current":.4===n?"page":void 0,onClick:e=>s(.4),children:[(0,C.jsx)(I.c.LeadingVisual,{children:(0,C.jsx)(E.A,{})}),"Widgets"]}),(0,C.jsxs)(I.c.Item,{"aria-current":.5===n?"page":void 0,onClick:e=>s(.5),children:[(0,C.jsx)(I.c.LeadingVisual,{children:(0,C.jsx)(D.A,{})}),"Widget Extensions"]}),(0,C.jsxs)(I.c.Item,{"aria-current":.6===n?"page":void 0,onClick:e=>s(.6),children:[(0,C.jsx)(I.c.LeadingVisual,{children:(0,C.jsx)(N.A,{})}),"IPyWidgets"]}),(0,C.jsxs)(I.c.Item,{"aria-current":.7===n?"page":void 0,onClick:e=>s(.7),children:[(0,C.jsx)(I.c.LeadingVisual,{children:(0,C.jsx)(F.A,{})}),"Settings"]}),(0,C.jsxs)(I.c.Item,{"aria-current":.8===n?"page":void 0,onClick:e=>s(.8),children:[(0,C.jsx)(I.c.LeadingVisual,{children:(0,C.jsx)(U.A,{})}),"Server"]})]})}),(0,C.jsxs)(w.A,{ml:3,sx:{width:"100%"},children:[0===n&&(0,C.jsx)(G,{jupyterFrontend:t}),.1===n&&(0,C.jsx)(se,{jupyterFrontend:t}),.2===n&&(0,C.jsx)(ae,{jupyterFrontend:t}),.3===n&&(0,C.jsx)(re,{jupyterFrontend:t}),.4===n&&(0,C.jsx)(le,{jupyterFrontend:t}),.5===n&&(0,C.jsx)(me,{jupyterFrontend:t}),.6===n&&(0,C.jsx)(pe,{jupyterFrontend:t}),.7===n&&(0,C.jsx)(ge,{jupyterFrontend:t}),.8===n&&(0,C.jsx)(ve,{jupyterFrontend:t})]})]})})},fe=e=>{const{jupyterFrontend:t}=e,{tab:n,setTab:s}=(0,h._O)(),r=Math.floor(n),[i,a]=(0,f.useState)("");return(0,f.useEffect)(()=>{v("config").then(e=>{a(e.version)}).catch(e=>{console.error(`Error while accessing the jupyter server datalayer extension.\n${e}`)})}),(0,C.jsx)(C.Fragment,{children:(0,C.jsx)(_.NP,{children:(0,C.jsxs)(w.A,{children:[(0,C.jsx)(w.A,{children:(0,C.jsxs)(x.O,{"aria-label":"datalayer",children:[(0,C.jsx)(x.O.Item,{"aria-label":"jupyterlab","aria-current":0===r?"page":void 0,icon:()=>(0,C.jsx)(b.A,{colored:!0}),onSelect:e=>{e.preventDefault(),s(0)},children:"JupyterLab"}),(0,C.jsx)(x.O.Item,{"aria-label":"about","aria-current":1===r?"page":void 0,icon:()=>(0,C.jsx)(j.A,{colored:!0}),onSelect:e=>{e.preventDefault(),s(1)},children:"About"})]})}),(0,C.jsxs)(w.A,{m:3,children:[0===r&&t&&(0,C.jsx)(ye,{jupyterFrontend:t}),1===r&&(0,C.jsx)(S,{version:i})]})]})})})};class _e extends y._Q{constructor(e){var t,n,s;super(),t=this,s=void 0,(n=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(n="_app"))in t?Object.defineProperty(t,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[n]=s,this._app=e,this.addClass("dla-Container")}render(){return(0,C.jsx)(fe,{jupyterFrontend:this._app})}}var we=n(71932);const xe="@datalayer/jupyter-kernels:remote:activate",be={"@datalayer/ui:iam:plugin":!0,"@datalayer/ui:runtimes:plugin":!0,"@datalayer/ui:runtimes:browser-localforage":!1,"@datalayer/ui:runtimes:browser-localforage-memory-storage":!1,"@datalayer/ui:runtimes:browser-contents":!1,"@datalayer/ui:runtimes:browser-contents-routes":!1,"@datalayer/ui:runtimes:browser-service-worker":!1,"@datalayer/ui:runtimes:emscripten-filesystem":!1,"@datalayer/ui:runtimes:browser-kernels":!1,"@datalayer/ui:runtimes:browser-kernels-routes":!1,"@datalayer/ui:runtimes:browser-kernelspec":!1,"@datalayer/ui:runtimes:browser-kernelspec-routes":!1,"@datalayer/ui:runtimes:browser-sessions":!1,"@datalayer/ui:runtimes:browser-sessions-routes":!1,"@datalayer/ui:runtimes:browser-manager":!1,"@datalayer/ui:runtimes:cell-action":!0,"@datalayer/ui:runtimes:cell-executor":!0,"@datalayer/ui:runtimes:cell-footer":!0,"@datalayer/ui:runtimes:credits-indicator":!0,"@datalayer/ui:runtimes:lifecycle":!0},je={id:"@datalayer/ui:activator",description:"Activate Datalayer needed plugins when needed.",requires:[we.R],autoStart:!0,activate:(e,t)=>{let n=!1;e.commands.addCommand(xe,{execute:async()=>{if(!n){n=!0;try{await t.ready}catch(e){}await Promise.allSettled(Object.entries(be).reduce((n,[s,r])=>(!e.hasPlugin(s)||!r&&t.configuration.configuration.whiteLabel||n.push(s),n),[]).map(t=>e.activatePlugin(t).catch(e=>{console.error(`Failed to activate plugin ${t}.`)})))}}}),t.ready.finally(()=>{t.configuration.configuration.whiteLabel||e.commands.execute(xe)})}};let ke,Ae;(ke||(ke={})).create="datalayer:create-datalayer-widget";const Ce={id:"@datalayer/ui:plugin",autoStart:!0,optional:[r.SM,r.kn,o.X,l.k,s.E],provides:we.R,deactivate:(e,t,n,s,r,i)=>{Ae.forEach(e=>e.dispose()),console.log(`${Ce.id} is deactivated.`)},activate:(e,t,n,s,r,o)=>{const l=new c.PromiseDelegate,g=Object.freeze({configuration:new m.Cm,ready:l.promise});function p(e){const{setConfiguration:t}=h.$K.getState();t(e)}return p(g.configuration.configuration),g.configuration.configurationChanged.connect((e,t)=>{p(t)}),v("config").then(t=>{console.log("Received Datalayer configuration",t),h.$K.getState().setVersion(t.version);const c=h.$K.getState().configuration,p=new URLSearchParams(window.location.search).get("run_url")||t.configuration.run_url,v=h.$K.getState().loadConfigurationFromServer?{...c,iamRunUrl:p||c.iamRunUrl,runtimesRunUrl:p||c.runtimesRunUrl,libraryRunUrl:p||c.libraryRunUrl,spacerRunUrl:p||c.spacerRunUrl,aiagentsRunUrl:p||c.aiagentsRunUrl,aiinferenceRunUrl:p||c.aiinferenceRunUrl,mcpserversRunUrl:p||c.mcpserversRunUrl,successRunUrl:p||c.successRunUrl,growthRunUrl:p||c.growthRunUrl,inboundsRunUrl:p||c.inboundsRunUrl,supportRunUrl:p||c.supportRunUrl,launcher:t.configuration.launcher??c.launcher,whiteLabel:t.configuration.white_label??c.whiteLabel,brand:{name:t.configuration.brand.name??c.brand.name,logoUrl:t.configuration.brand.logo_url??c.brand.logoUrl,logoSquareUrl:t.configuration.brand.logo_square_url??c.brand.logoSquareUrl,about:t.configuration.brand.about??c.brand.about,copyright:t.configuration.brand.copyright??c.brand.copyright,docsUrl:t.configuration.brand.docs_url??c.brand.docsUrl,supportUrl:t.configuration.brand.support_url??c.brand.supportUrl,pricingUrl:t.configuration.brand.pricing_url??c.brand.pricingUrl,termsUrl:t.configuration.brand.terms_url??c.brand.termsUrl,privacyUrl:t.configuration.brand.privacy_url??c.brand.privacyUrl}}:c;if(g.configuration.configuration=v,h.$K.getState().setConfiguration(v),u.J7.getState().refreshUserByTokenStored(),l.resolve(),m.vK)return void function(e,t,n){try{async function s(e,r){"added"===r.type&&r.id===t&&(e.execute(t).catch(e=>{console.warn(`Error while activating the ${n} extension`,e)}),e.commandChanged.disconnect(s))}console.log(`Opening the ${n} extension`),e.commands.hasCommand(t)?s(e.commands,{id:t,type:"added"}):e.commands.commandChanged.connect(s)}catch(r){console.warn(`Error while activating the ${n} extension`,r)}}(e,xe,"Runtimes");const{commands:y}=e,f=ke.create;Ae||(Ae=new i.H({namespace:"datalayer"})),o&&o.restore(Ae,{command:f,name:()=>"datalayer"}),y.addCommand(f,{caption:"Show Datalayer UI",label:"Datalayer UI",icon:d.A,execute:()=>{const t=new _e(e),n=new a.p({content:t});n.title.label="Datalayer UI",n.title.icon=d.A,e.shell.add(n,"main"),Ae.add(n)}});const _=v.launcher?.category??"Datalayer";n?.addItem({command:f,category:_});const w=e=>{const t=e.get("showInLauncher").composite;r&&t&&r.add({command:f,category:_,rank:1.1})};s&&s.load(Ce.id).then(e=>{console.log(`${Ce.id} settings loaded:`,e.composite),w(e),e.changed.connect(w)}).catch(e=>{console.debug(`Failed to load settings for ${Ce.id}`,e)})}).catch(e=>{l.reject(e),console.error(`Error while accessing the jupyter server extension.\n${e}`)}),console.log(`JupyterLab plugin ${Ce.id} is activated.`),g}},Se=[Ce,je]},17868:(e,t,n)=>{n.a(e,async(e,s)=>{try{n.d(t,{o:()=>_});var r=n(2335),i=n(80578),a=n(63711),o=n(53054),l=n(85181),c=n(98238),d=n(79246),h=n(72490),u=n(14809),m=n(37032),g=e([m]),p=g.then?(await g)():g;function v(e,t,n){return(t=y(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e){var t=f(e,"string");return"symbol"==typeof t?t:t+""}function f(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}m=p[0];class _{constructor(e){v(this,"sessionContext",void 0),v(this,"urlResolver",void 0),v(this,"translator",void 0),v(this,"_isReady",!1),v(this,"_isDisposed",!1),v(this,"_isPopulated",!1),v(this,"_trans",void 0),v(this,"_contentProviderId",void 0),v(this,"_manager",void 0),v(this,"_opener",void 0),v(this,"_model",void 0),v(this,"_path",""),v(this,"_lineEnding",null),v(this,"_factory",void 0),v(this,"_contentsModel",null),v(this,"_readyPromise",void 0),v(this,"_populatedPromise",new c.PromiseDelegate),v(this,"_pathChanged",new h.Signal(this)),v(this,"_fileChanged",new h.Signal(this)),v(this,"_saveState",new h.Signal(this)),v(this,"_disposed",new h.Signal(this)),v(this,"_dialogs",void 0),v(this,"_lastModifiedCheckMargin",500),v(this,"_conflictModalIsOpen",!1);const t=this._manager=e.manager;this.translator=e.translator||l.wK,this._contentProviderId=e.contentProviderId,this._trans=this.translator.load("jupyterlab"),this._factory=e.factory,this._dialogs=e.sessionDialogs??new i.V({translator:e.translator}),this._opener=e.opener||w.noOp,this._path=this._manager.contents.normalize(e.path),this._lastModifiedCheckMargin=e.lastModifiedCheckMargin||500;const n=this._manager.contents.localPath(this._path),s=this._factory.preferredLanguage(a.PathExt.basename(n)),r=this._manager.contents.getSharedModelFactory(this._path,{contentProviderId:e.contentProviderId}),d=r?.createNew({path:n,format:this._factory.fileFormat,contentType:this._factory.contentType,collaborative:this._factory.collaborative});this._model=this._factory.createNew({languagePreference:s,sharedModel:d,collaborationEnabled:r?.collaborative??!1}),this._readyPromise=t.ready.then(()=>this._populatedPromise.promise);const u=a.PathExt.extname(this._path);this.sessionContext=new m.I({sessionManager:t.sessions,specsManager:t.kernelspecs,path:n,type:".ipynb"===u?"notebook":"file",name:a.PathExt.basename(n),kernelPreference:e.kernelPreference||{shouldStart:!1},setBusy:e.setBusy},t),this.sessionContext.propertyChanged.connect(this._onSessionChanged,this),t.contents.fileChanged.connect(this._onFileChanged,this),this.urlResolver=new o.K.UrlResolver({path:this._path,contents:t.contents})}get pathChanged(){return this._pathChanged}get fileChanged(){return this._fileChanged}get saveState(){return this._saveState}get disposed(){return this._disposed}get lastModifiedCheckMargin(){return this._lastModifiedCheckMargin}set lastModifiedCheckMargin(e){this._lastModifiedCheckMargin=e}get model(){return this._model}get path(){return this._path}get localPath(){return this._manager.contents.localPath(this._path)}get contentsModel(){return this._contentsModel?{...this._contentsModel}:null}get factoryName(){return this.isDisposed?"":this._factory.name}get isDisposed(){return this._isDisposed}dispose(){this.isDisposed||(this._isDisposed=!0,this.sessionContext.dispose(),this._model.dispose(),this._model.sharedModel.dispose(),this._disposed.emit(void 0),h.Signal.clearData(this))}get isReady(){return this._isReady}get ready(){return this._readyPromise}get canSave(){return!(!this._contentsModel?.writable||this._model.collaborative)}async initialize(e){e?await this._save():await this._revert(),this.model.sharedModel.clearUndoHistory()}rename(e){return this.ready.then(()=>this._manager.ready.then(()=>this._rename(e)))}async save(){await this.ready,await this._save()}async saveAs(){await this.ready;const e=this._manager.contents.localPath(this.path),t=await w.getSavePath(e);if(this.isDisposed||!t)return!1;const n=this._manager.contents.driveName(this.path),s=""===n?t:`${n}:${t}`;if(s===this._path)return this.save(),!0;try{return await this._manager.ready,await this._manager.contents.get(s,{contentProviderId:this._contentProviderId}),await this._maybeOverWrite(s),!0}catch(e){if(!e.response||404!==e.response.status)throw e;return await this._finishSaveAs(s),!0}}async download(){const e=await this._manager.contents.getDownloadUrl(this._path),t=document.createElement("a");t.href=e,t.download="",document.body.appendChild(t),t.click(),document.body.removeChild(t)}async revert(){await this.ready,await this._revert()}createCheckpoint(){const e=this._manager.contents;return this._manager.ready.then(()=>e.createCheckpoint(this._path))}deleteCheckpoint(e){const t=this._manager.contents;return this._manager.ready.then(()=>t.deleteCheckpoint(this._path,e))}restoreCheckpoint(e){const t=this._manager.contents,n=this._path;return this._manager.ready.then(()=>e?t.restoreCheckpoint(n,e):this.listCheckpoints().then(s=>{if(!this.isDisposed&&s.length)return e=s[s.length-1].id,t.restoreCheckpoint(n,e)}))}listCheckpoints(){const e=this._manager.contents;return this._manager.ready.then(()=>e.listCheckpoints(this._path))}addSibling(e,t={}){const n=this._opener;return n&&n(e,t),new d.DisposableDelegate(()=>{e.close()})}_onFileChanged(e,t){if("rename"!==t.type)return;let n=t.oldValue&&t.oldValue.path,s=t.newValue&&t.newValue.path;if(s&&0===this._path.indexOf(n||"")){let e=t.newValue;n!==this._path&&(s=this._path.replace(new RegExp(`^${n}/`),`${s}/`),n=this._path,e={last_modified:t.newValue?.created,path:s}),this._updateContentsModel({...this._contentsModel,...e}),this._updatePath(s)}}_onSessionChanged(e,t){if("path"!==t)return;const n=this._manager.contents.driveName(this.path);let s=this.sessionContext.session.path;n&&(s=`${n}:${s}`),this._updatePath(s)}_updateContentsModel(e){const t={path:e.path,name:e.name,type:e.type,writable:e.writable,created:e.created,last_modified:e.last_modified,mimetype:e.mimetype,format:e.format,hash:e.hash,hash_algorithm:e.hash_algorithm},n=this._contentsModel?.last_modified??null,s=this._contentsModel?.hash??null;this._contentsModel=t,(!n&&!s||!s&&t.last_modified!==n||s&&t.hash!==s)&&this._fileChanged.emit(t)}_updatePath(e){if(this._path===e)return;this._path=e;const t=this._manager.contents.localPath(e),n=a.PathExt.basename(t);if(this.sessionContext.session?.path!==t&&this.sessionContext.session?.setPath(t),this.sessionContext.session?.name!==n&&this.sessionContext.session?.setName(n),this.urlResolver.path!==e&&(this.urlResolver.path=e),this._contentsModel&&(this._contentsModel.path!==e||this._contentsModel.name!==n)){const t={...this._contentsModel,name:n,path:e};this._updateContentsModel(t)}this._pathChanged.emit(e)}async _populate(){if(this._isPopulated=!0,this._isReady=!0,this._populatedPromise.resolve(void 0),await this._maybeCheckpoint(!1),this.isDisposed)return;const e=this._model.defaultKernelName||this.sessionContext.kernelPreference.name;this.sessionContext.kernelPreference={...this.sessionContext.kernelPreference,name:e,language:this._model.defaultKernelLanguage},this.sessionContext.initialize().then(e=>{e&&this._dialogs.selectKernel(this.sessionContext)})}async _rename(e){const t=this.localPath.split("/");t[t.length-1]=e;let n=a.PathExt.join(...t);const s=this._manager.contents.driveName(this.path);s&&(n=`${s}:${n}`),await this._manager.contents.rename(this.path,n)}async _save(){this._saveState.emit("started");const e=this._createSaveOptions();try{await this._manager.ready;const t=await this._maybeSave(e);if(this.isDisposed)return;this._model.dirty=!1,this._updateContentsModel(t),this._isPopulated||await this._populate(),this._saveState.emit("completed")}catch(e){const{name:t}=e;if("ModalCancelError"===t||"ModalDuplicateError"===t)throw e;const n=this._manager.contents.localPath(this._path),s=a.PathExt.basename(n);throw this._handleError(e,this._trans.__("File Save Error for %1",s)),this._saveState.emit("failed"),e}}_revert(e=!1){const t={type:this._factory.contentType,content:null!==this._factory.fileFormat,hash:null!==this._factory.fileFormat?1:0,...null!==this._factory.fileFormat?{format:this._factory.fileFormat}:{},contentProviderId:this._contentProviderId},n=this._path,s=this._model;return this._manager.ready.then(()=>this._manager.contents.get(n,t)).then(e=>{if(!this.isDisposed){if(e.content)if("json"===e.format)s.fromJSON(e.content);else{let t=e.content;-1!==t.indexOf("\r\n")?(this._lineEnding="\r\n",t=t.replace(/\r\n/g,"\n")):-1!==t.indexOf("\r")?(this._lineEnding="\r",t=t.replace(/\r/g,"\n")):this._lineEnding=null,s.fromString(t)}return this._updateContentsModel(e),s.dirty=!1,this._isPopulated?void 0:this._populate()}}).catch(async e=>{const t=this._manager.contents.localPath(this._path),n=a.PathExt.basename(t);throw this._handleError(e,this._trans.__("File Load Error for %1",n)),e})}_maybeSave(e){const t=this._path;return this._manager.contents.get(t,{content:!1,hash:1,contentProviderId:this._contentProviderId}).then(n=>{if(this.isDisposed)return Promise.reject(new Error("Disposed"));const s=void 0!==this.contentsModel?.hash&&null!==this.contentsModel?.hash&&void 0!==n.hash&&null!==n.hash,r=this.contentsModel?.hash,i=n.hash;if(s&&r!==i)return console.warn(`Different hash found for ${this.path}`),this._raiseConflict(n,e);const a=this._lastModifiedCheckMargin,o=this.contentsModel?.last_modified,l=o?new Date(o):new Date,c=new Date(n.last_modified);return!s&&o&&c.getTime()-l.getTime()>a?(console.warn(`Last saving performed ${l} while the current file seems to have been saved ${c}`),this._raiseConflict(n,e)):this._manager.contents.save(t,e).then(async e=>{const n=await this._manager.contents.get(t,{content:!1,hash:1,contentProviderId:this._contentProviderId});return{...e,hash:n.hash,hash_algorithm:n.hash_algorithm}})},n=>{if(n.response&&404===n.response.status)return this._manager.contents.save(t,e).then(async e=>{const n=await this._manager.contents.get(t,{content:!1,hash:1});return{...e,hash:n.hash,hash_algorithm:n.hash_algorithm}});throw n})}async _handleError(e,t){await(0,r.f1)(t,e)}_maybeCheckpoint(e){let t=Promise.resolve(void 0);return this.canSave?(t=e?this.createCheckpoint().then():this.listCheckpoints().then(e=>{if(!this.isDisposed&&!e.length&&this.canSave)return this.createCheckpoint().then()}),t.catch(e=>{if(!e.response||403!==e.response.status)throw e})):t}_raiseConflict(e,t){if(this._conflictModalIsOpen){const e=new Error("Modal is already displayed");return e.name="ModalDuplicateError",Promise.reject(e)}const n=this._trans.__('"%1" has changed on disk since the last time it was opened or saved.\nDo you want to overwrite the file on disk with the version open here,\nor load the version on disk (revert)?',this.path),s=r.lG.okButton({label:this._trans.__("Revert"),actions:["revert"]}),i=r.lG.warnButton({label:this._trans.__("Overwrite"),actions:["overwrite"]});return this._conflictModalIsOpen=!0,(0,r.ui)({title:this._trans.__("File Changed"),body:n,buttons:[r.lG.cancelButton(),s,i]}).then(n=>{if(this._conflictModalIsOpen=!1,this.isDisposed)return Promise.reject(new Error("Disposed"));if(n.button.actions.includes("overwrite"))return this._manager.contents.save(this._path,{...t,contentProviderId:this._contentProviderId});if(n.button.actions.includes("revert"))return this.revert().then(()=>e);const s=new Error("Cancel");return s.name="ModalCancelError",Promise.reject(s)})}_maybeOverWrite(e){const t=this._trans.__('"%1" already exists. Do you want to replace it?',e),n=r.lG.warnButton({label:this._trans.__("Overwrite"),accept:!0});return(0,r.ui)({title:this._trans.__("File Overwrite?"),body:t,buttons:[r.lG.cancelButton(),n]}).then(t=>this.isDisposed?Promise.reject(new Error("Disposed")):t.button.accept?this._manager.contents.delete(e).then(()=>this._finishSaveAs(e)):void 0)}async _finishSaveAs(e){this._saveState.emit("started");try{await this._manager.ready;const t=this._createSaveOptions();await this._manager.contents.save(e,t),await this._maybeCheckpoint(!0),this._saveState.emit("completed")}catch(e){if("Cancel"===e.message||"Modal is already displayed"===e.message)throw e;const t=this._manager.contents.localPath(this._path),n=a.PathExt.basename(t);return this._handleError(e,this._trans.__("File Save Error for %1",n)),void this._saveState.emit("failed")}}_createSaveOptions(){let e=null;return"json"===this._factory.fileFormat?e=this._model.toJSON():(e=this._model.toString(),this._lineEnding&&(e=e.replace(/\n/g,this._lineEnding))),{type:this._factory.contentType,format:this._factory.fileFormat,content:e}}}let w;!function(e){e.getSavePath=function(e,n){const s=(n=n||l.wK).load("jupyterlab"),i=r.lG.okButton({label:s.__("Save"),accept:!0});return(0,r.ui)({title:s.__("Save File As…"),body:new t(e),buttons:[r.lG.cancelButton(),i]}).then(e=>{if(e.button.accept)return e.value??void 0})},e.noOp=function(){};class t extends u.x0{constructor(e){super({node:n(e)})}getValue(){return this.node.value}}function n(e){const t=document.createElement("input");return t.value=e,t}}(w||(w={})),s()}catch(x){s(x)}})},20557:(e,t,n)=>{n.d(t,{b:()=>v});var s=n(9448),r=n(98754),i=n(11471),a=n(84514),o=n(24860),l=n(55682),c=n(9387),d=n(76199),h=n(41273),u=n(20568),m=n(26127),g=n(18683);function p(e){const{currentLimit:t,handleSubmit:n,maximum:d}=e,[h,u]=(0,c.useState)(0),[m,p]=(0,c.useState)(!1),[v,y]=(0,c.useState)(!1),f=((0,c.useCallback)(e=>{p(e.target.checked)},[]),d-t);return(0,g.jsx)(l.l,{title:"Increase Credit Limit",onClose:()=>{n()},footerButtons:[{buttonType:"default",content:"Cancel",onClick:e=>{e.defaultPrevented||(e.preventDefault(),n())}},{buttonType:"primary",content:v?(0,g.jsx)(i.A,{size:"small"}):"Apply",disabled:v,onClick:e=>{e.defaultPrevented||(e.preventDefault(),y(!0),n({increment:h,permanent:m}).finally(()=>{y(!1)}))},autoFocus:!0}],children:(0,g.jsx)(r.A,{as:"form",onKeyDown:e=>{e.defaultPrevented||"Enter"===e.key&&(e.preventDefault(),y(!0),n({increment:h,permanent:m}).finally(()=>{y(!1)}))},children:(0,g.jsxs)(a.A,{children:[(0,g.jsx)(a.A.Label,{children:"Credits limit increase in US dollars"}),(0,g.jsxs)(r.A,{style:{alignItems:"center",display:"grid",gridTemplateColumns:"max-content 1fr max-content max-content",gridGap:"var(--stack-gap-condensed)"},children:[(0,g.jsx)(s.Ap,{step:1,min:0,max:f,value:h,onChange:u,label:"",displayValue:!1}),(0,g.jsx)(o.A,{type:"number",step:"10",min:"0",max:f,value:h.toFixed(2),onChange:e=>u(parseFloat(e.target.value))})]}),(0,g.jsx)(a.A.Caption,{children:`Applying this change will raise your credits limit to $${(t+h).toFixed(2)}.`}),f<Number.EPSILON&&(0,g.jsx)(a.A.Validation,{variant:"error",children:`You cannot increase your credits limit above ${d.toFixed(2)}`})]})})})}function v(){const e=(0,u.Zp)(),{externalToken:t,iamRunUrl:n,refreshCredits:s}=(0,m.Y)(),{enqueueToast:a}=(0,h.d)(),{requestDatalayer:o}=(0,d.F)(),[l,v]=(0,c.useState)(!1),[y,f]=(0,c.useState)(null);(0,c.useEffect)(()=>{o({url:`${n}/api/iam/anaconda/v1/creditsLimits`,headers:{"X-External-Token":t??""},notifyOnError:!1}).then(t=>{t.success?(f({hard:t.hard_limit_in_dollars,soft:t.soft_limit_in_dollars,id:t.subscription_id}),v(!0)):(a("Unable to fetch current credits limit.",{variant:"error"}),e(-1))})},[t,n]);const _=(0,c.useCallback)(async r=>{y&&r&&(await o({url:`${n}/api/iam/anaconda/v1/creditsLimits`,method:"PATCH",body:{permanent:r.permanent,soft_limit_in_dollars:y.soft+r.increment,subscription_id:y.id},headers:{"X-External-Token":t??""}})).success&&s().catch(e=>{console.error("Failed to refresh credits following update.",e)}),v(!1),e(-1)},[t,n,y]);return l?(0,g.jsx)(p,{currentLimit:y.soft,maximum:y.hard,handleSubmit:_}):(0,g.jsx)(r.A,{sx:{display:"grid",alignContent:"center",justifyContent:"center",position:"absolute",top:0,left:0,height:"100%",width:"100%",backgroundColor:"var(--overlay-backdrop-bgColor)"},children:(0,g.jsx)(i.A,{size:"large"})})}},22426:e=>{e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE5LjIuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCAxOCAxOCIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMTggMTg7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4KCS5zdDB7ZmlsbDpub25lO30KPC9zdHlsZT4KPHBhdGggZD0iTTUuMiw1LjlMOSw5LjdsMy44LTMuOGwxLjIsMS4ybC00LjksNWwtNC45LTVMNS4yLDUuOXoiLz4KPHBhdGggY2xhc3M9InN0MCIgZD0iTTAtMC42aDE4djE4SDBWLTAuNnoiLz4KPC9zdmc+Cg"},23787:(e,t,n)=>{n.a(e,async(e,s)=>{try{n.d(t,{Ig:()=>K,X3:()=>W});var r=n(9387),i=n(20568),a=n(55285),o=n(63711),l=n(2453),c=n(9570),d=n(26127),h=n(92131),u=n(69453),m=n(34279),g=n(17788),p=n(41273),v=n(20557),y=n(78806),f=n(43322),_=n(75650),w=n(24630),x=n(29621),b=n(4338),j=n(56635),k=n(60533),A=n(64983),C=n(72883),S=n(51739),R=n(67776),M=n(86944),L=n(36228),P=n(96308),E=n(2285),D=n(49452),N=n(93410),F=n(13279),U=n(94009),I=n(29745),T=n(70350),q=n(38885),O=n(91676),z=n(24842),V=n(18683),H=e([C,S,E,T,z]);[C,S,E,T,z]=H.then?(await H)():H;const W="jupyter/kernels";function K(e){const{memoryRouter:t=!1,baseRoute:n="",jupyterLabAdapter:s}=e,{configuration:H}=(0,c._O)(),{externalToken:K,user:$}=(0,d.Y)(),{checkIsPlatformUsageReviewer:J}=(0,m.x)(),{version:B,runtimeModels:Y,setMultiServiceManager:G}=(0,h.c6)(),{enqueueToast:Z}=(0,p.d)(),Q=(0,i.zy)(),X=Q.state??{},ee=(0,g.Z)();if((0,r.useEffect)(()=>{s&&G(s.jupyterLab.serviceManager)},[s]),(0,r.useEffect)(()=>{const e=setTimeout(()=>{$||ee(o.URLExt.join("/",n,W,"login"))},2e3);return()=>{clearTimeout(e)}},[$]),!t){const e=new Set;(0,a.$$)(()=>{Y.forEach(t=>{!e.has(t.pod_name)&&t.expired_at&&1e3*parseFloat(t.expired_at)-Date.now()<d.zo&&(Z(`Reservation for runtime '${t.given_name}' is going to end in less than ${(d.zo/6e4).toFixed(0)} minutes.`,{variant:"warning",actions:[{label:"Show more…",callback:()=>{ee(n)}}]}),e.add(t.pod_name))});const t=Y.map(e=>e.pod_name);[...e].forEach(n=>{t.includes(n)||e.delete(n)})},6e4)}return X.backgroundLocation&&!K&&console.error("Modal user interface will not be displayed due to missing external token."),(0,V.jsxs)(u.WV,{children:[(0,V.jsxs)(i.BV,{location:X.backgroundLocation??Q,children:[(0,V.jsx)(i.qh,{path:n,element:(0,V.jsx)(i.C5,{to:o.URLExt.join("/",n,W)})}),(0,V.jsx)(i.qh,{path:o.URLExt.join("/",n,W),element:(0,V.jsx)(y.q,{baseURL:o.URLExt.join(n,W),children:(0,V.jsx)(i.sv,{})}),children:$?(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(i.qh,{index:!0,element:(0,V.jsx)(E.Y,{})}),(0,V.jsx)(i.qh,{path:"runtimes",element:(0,V.jsx)(D.B,{version:B})}),(0,V.jsx)(i.qh,{path:"runtimes/new",element:(0,V.jsx)(D.B,{version:B,openLaunchRuntimes:!0})}),(0,V.jsx)(i.qh,{path:"environments",element:(0,V.jsx)(N.g,{})}),(0,V.jsx)(i.qh,{path:"login",element:(0,V.jsx)(i.C5,{to:o.URLExt.join("/",n,W)})}),(0,V.jsxs)(i.qh,{path:l.Ek,element:(0,V.jsx)(R.pp,{baseRoute:o.URLExt.join(W,l.Ek)}),children:[(0,V.jsx)(i.qh,{index:!0,element:(0,V.jsx)(i.C5,{to:"overview"})}),(0,V.jsx)(i.qh,{path:"overview",element:(0,V.jsx)(S.i,{})}),(0,V.jsx)(i.qh,{path:"reservations",element:(0,V.jsx)(L.r,{})}),(0,V.jsx)(i.qh,{path:"history",element:(0,V.jsx)(P.V,{})}),(0,V.jsx)(i.qh,{path:"checkout",element:(0,V.jsx)(T.O,{})}),J($)&&(0,V.jsx)(i.qh,{path:"platform",element:(0,V.jsx)(M.$,{})})]}),!H?.whiteLabel&&(0,V.jsx)(i.qh,{path:"settings",element:(0,V.jsx)(U.w,{})}),(0,V.jsx)(i.qh,{path:l.$r,element:(0,V.jsx)(z.LP,{})}),(0,V.jsx)(i.qh,{path:o.URLExt.join(l.uP,l.$r),element:(0,V.jsx)(z.LP,{})}),(0,V.jsx)(i.qh,{path:l.uP,element:(0,V.jsx)(O.q,{})}),(0,V.jsx)(i.qh,{path:"about",element:(0,V.jsx)(q.Z,{version:B})}),(0,V.jsx)(i.qh,{path:"docs",element:(0,V.jsx)(F.E,{})}),!H?.whiteLabel&&(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(i.qh,{path:"content",element:(0,V.jsx)(I.U,{})}),(0,V.jsx)(i.qh,{path:"profile",element:(0,V.jsx)(C.a,{})}),(0,V.jsx)(i.qh,{path:"logout",element:(0,V.jsx)(b.f,{homeRoute:o.URLExt.join("/",n,W)})})]})]}):(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(i.qh,{index:!0,element:(0,V.jsx)(i.C5,{to:"login"})}),(0,V.jsx)(i.qh,{path:"login",element:(0,V.jsx)(x.a,{heading:H?.whiteLabel?"Login":"Login to Datalayer",homeRoute:o.URLExt.join("/",n,W),loginRoute:o.URLExt.join("/",n,W,"login"),passwordRoute:o.URLExt.join("/",n,W,"password"),joinRoute:H?.whiteLabel?void 0:o.URLExt.join("/",n,W,"join"),joinConfirmRoute:H?.whiteLabel?void 0:o.URLExt.join("/",n,W,"join","confirm"),showEmailLogin:!H?.whiteLabel,showGitHubLogin:!H?.whiteLabel,showTokenLogin:!0})}),(0,V.jsx)(i.qh,{path:"password",element:(0,V.jsx)(k.U,{passwordConfirmRoute:o.URLExt.join("/",n,W,"password","confirm")})}),(0,V.jsx)(i.qh,{path:"password/confirm",element:(0,V.jsx)(j.y,{loginRoute:o.URLExt.join("/",n,W,"login"),passwordWelcomeRoute:o.URLExt.join("/",n,W,"password","welcome")})}),(0,V.jsx)(i.qh,{path:"password/welcome",element:(0,V.jsx)(A.Q,{loginRoute:o.URLExt.join("/",n,W,"login")})}),!1===H?.whiteLabel&&(0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(i.qh,{path:"join",element:(0,V.jsx)(_.n,{joinConfirmRoute:o.URLExt.join("/",n,W,"join","confirm")})}),(0,V.jsx)(i.qh,{path:"join/confirm",element:(0,V.jsx)(f.J,{loginRoute:o.URLExt.join("/",n,W,"password","login"),joinWelcomeRoute:o.URLExt.join("/",n,W,"join","welcome")})}),(0,V.jsx)(i.qh,{path:"join/welcome",element:(0,V.jsx)(w.D,{loginRoute:o.URLExt.join("/",n,W,"login")})})]})]})})]}),X.backgroundLocation&&(0,V.jsx)(i.BV,{children:(0,V.jsx)(i.qh,{path:o.URLExt.join("/",n,"anaconda/increaseCreditsLimit"),element:K?(0,V.jsx)(v.b,{}):null})})]})}s()}catch($){s($)}})},24630:(e,t,n)=>{n.d(t,{D:()=>o});var s=n(9387),r=n(17788),i=n(41273),a=n(18683);const o=e=>{const{loginRoute:t}=e,{enqueueToast:n}=(0,i.d)(),o=(0,r.Z)();return(0,s.useEffect)(()=>{n("Welcome to Datalayer - Login with your username and password.",{variant:"success"}),o(t)},[]),(0,a.jsx)(a.Fragment,{})}},29621:(e,t,n)=>{n.d(t,{a:()=>A});var s=n(9387),r=n(63711),i=n(38621),a=n(3556),o=n(48453),l=n(70216),c=n(84514),d=n(24860),h=n(99180),u=n(9448),m=n(95772),g=n(83626),p=n(26127),v=n(83121),y=n(87999),f=n(42564),_=n(93159),w=n(79435),x=n(17788),b=n(41273),j=n(81734),k=n(18683);const A=e=>{const{heading:t,homeRoute:n,loginRoute:A,showEmailLogin:C=!0,showGitHubLogin:S=!0,showTokenLogin:R=!0}=e,{useLogin:M,useOAuth2AuthorizationURL:L}=(0,_.E6)({loginRoute:A}),P=M(),E=L(),{loginAndNavigate:D,setLogin:N}=(0,w.D)(),{externalToken:F,iamProvidersAuthorizationURL:U,addIAMProviderAuthorizationURL:I,iamRunUrl:T,logout:q,checkIAMToken:O}=(0,p.Y)(),{enqueueToast:z}=(0,b.d)(),V=(0,x.Z)(),[H,W]=(0,s.useState)(!1),[K,$]=(0,s.useState)(-1),[J,B]=(0,s.useState)({handle:void 0,password:void 0}),[Y,G]=(0,s.useState)({handle:void 0,password:void 0}),[Z,Q]=(0,s.useState)(!1);(0,s.useEffect)(()=>{const e=e=>{const t=(0,y.P)()?r.URLExt.join(r.PageConfig.getBaseUrl(),e.oauth2CallbackServerRoute):location.protocol+"//"+location.hostname+":"+location.port+e.oauth2CallbackUIRoute,n={provider:e.name,callback_uri:t};E.mutate(n,{onSuccess:t=>{t?I(e.name,t):console.error(`Failed to get the Login URL from Datalayer IAM for provider ${e.name}.`)}})};U[m.s.GitHub.name]||e(m.s.GitHub),U[m.s.LinkedIn.name]||e(m.s.LinkedIn)},[T,U,I]),(0,s.useEffect)(()=>{F&&($(1),D(F,q,O,V,n).catch(e=>{console.debug("Failed to login with token from cookie..",e),z("Failed to check authentication.",{variant:"error"})}).finally(()=>{$(-1)}))},[F]);const X=e=>{"Enter"===e.key&&ee()},ee=async()=>{H||""!==Y.handle||""!==Y.password||(W(!0),P.mutate({handle:J.handle,password:J.password},{onSuccess:e=>{if(e.success){G({handle:"",password:""});const t=(0,g.ex)(e.user),s=e.token;N(t,s),V(n)}else z("Failed to login. Check your username and password.",{variant:"warning"}),G({handle:"",password:"Invalid credentials"}),console.debug(`Failed to login: ${e.message}`,e.errors??"")},onSettled:()=>{W(!1)}}))};return(0,s.useEffect)(()=>{G({...Y,handle:void 0===J.handle?void 0:(0,f.xR)(J.handle,1)?"":"Your username may not be empty.",password:void 0===J.password?void 0:(0,f.xR)(J.password,1)?"":"Your password may not be empty."})},[J]),(0,k.jsxs)(l.M,{containerWidth:"medium",padding:"normal",style:{overflow:"visible",minHeight:"calc(100vh - 45px)"},children:[(0,k.jsx)(l.M.Header,{children:(0,k.jsx)(a.A,{children:t||"Login to Datalayer"})}),(0,k.jsx)(l.M.Content,{children:K<0?(0,k.jsx)(k.Fragment,{children:(0,k.jsxs)(u.az,{display:"flex",children:[C&&(0,k.jsxs)(u.az,{sx:{label:{marginTop:2},paddingRight:"10%"},children:[(0,k.jsx)(u.az,{mt:5,children:(0,k.jsxs)(c.A,{required:!0,children:[(0,k.jsx)(c.A.Label,{children:"Your username"}),(0,k.jsx)(d.A,{autoFocus:!0,placeholder:"Your username",value:J.handle,onChange:e=>{B(t=>({...t,handle:e.target.value}))},onKeyDown:X}),Y.handle&&(0,k.jsx)(c.A.Validation,{variant:Y.handle?"error":"success",children:Y.handle})]})}),(0,k.jsx)(u.az,{children:(0,k.jsxs)(c.A,{required:!0,children:[(0,k.jsx)(c.A.Label,{children:"Your password"}),(0,k.jsx)(d.A,{placeholder:"Your password",type:Z?"text":"password",value:J.password,onChange:e=>{B(t=>({...t,password:e.target.value}))},onKeyDown:X,trailingAction:(0,k.jsx)(d.A.Action,{onClick:()=>{Q(!Z)},icon:Z?i.V$C:i.bMW,"aria-label":Z?"Hide password":"Show password",sx:{color:"var(--fgColor-muted)"}}),sx:{overflow:"visible"}}),Y.password&&(0,k.jsx)(c.A.Validation,{variant:Y.password?"error":"success",children:Y.password})]})}),(0,k.jsxs)(u.az,{mt:5,children:[(0,k.jsx)(h.Q,{variant:"primary",disabled:H||""!==Y.handle||""!==Y.password,onClick:ee,children:H?"Login…":t?"Login with Datalayer":"Login"}),(0,k.jsx)(u.az,{pt:6}),(0,k.jsx)(o.A,{href:"https://datalayer.app/password",target:"_blank",children:"Forgot password?"})]})]}),(0,k.jsx)(u.az,{children:(0,k.jsxs)(u.az,{display:"flex",flexDirection:"column",sx:{margin:"auto"},children:[S&&U[m.s.GitHub.name]&&(0,k.jsx)(h.Q,{leadingVisual:i.uj0,href:U[m.s.GitHub.name],as:"a",style:{margin:"10px 0"},children:"Login with GitHub"}),R&&(0,k.jsx)(j.f,{branded:!1,homeRoute:n,style:{margin:"10px 0"}})]})})]})}):K?(0,k.jsx)(v.Y,{message:"Checking authentication…"}):(0,k.jsx)(k.Fragment,{})})]})}},29745:(e,t,n)=>{n.d(t,{U:()=>c});var s=n(98754),r=n(10680),i=n(70216),a=n(49261),o=n(8250),l=n(18683);const c=()=>(0,l.jsxs)(i.M,{containerWidth:"full",padding:"normal",style:{overflow:"visible",minHeight:"calc(100vh - 45px)"},children:[(0,l.jsxs)(i.M.Header,{children:[(0,l.jsx)(a.z,{children:(0,l.jsx)(a.z.TitleArea,{variant:"large",children:(0,l.jsx)(a.z.Title,{children:"Content"})})}),(0,l.jsx)(s.A,{children:(0,l.jsx)(r.A,{children:(0,l.jsx)(s.A,{children:"This feature is being developed."})})})]}),(0,l.jsx)(i.M.Content,{children:(0,l.jsx)(o.A,{size:200})})]})},37032:(e,t,n)=>{n.a(e,async(e,s)=>{try{n.d(t,{I:()=>R,V:()=>M});var r=n(36848),i=n(38921),a=n(98238),o=n(72490),l=n(2335),c=n(8522),d=n(63711),h=n(85181),u=n(89161),m=n(30681),g=n(92202),p=n(40120),v=n(16878),y=n(97553),f=n(26127),_=n(92131),w=n(9857),x=n(58642),b=n(18683),j=e([u]),k=j.then?(await j)():j;function A(e,t,n){return(t=C(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C(e){var t=S(e,"string");return"symbol"==typeof t?t:t+""}function S(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}u=k[0];class R{constructor(e,t){A(this,"_path",""),A(this,"_name",""),A(this,"_type",""),A(this,"_prevKernelName",""),A(this,"_kernelPreference",void 0),A(this,"_isDisposed",!1),A(this,"_location","local"),A(this,"_disposed",new o.Signal(this)),A(this,"_session",null),A(this,"_ready",new a.PromiseDelegate),A(this,"_initializing",!1),A(this,"_initStarted",new a.PromiseDelegate),A(this,"_initPromise",new a.PromiseDelegate),A(this,"_isReady",!1),A(this,"_isTerminating",!1),A(this,"_isRestarting",!1),A(this,"_kernelChanged",new o.Signal(this)),A(this,"_preferenceChanged",new o.Signal(this)),A(this,"_sessionChanged",new o.Signal(this)),A(this,"_statusChanged",new o.Signal(this)),A(this,"_connectionStatusChanged",new o.Signal(this)),A(this,"translator",void 0),A(this,"_trans",void 0),A(this,"_pendingInput",!1),A(this,"_iopubMessage",new o.Signal(this)),A(this,"_unhandledMessage",new o.Signal(this)),A(this,"_propertyChanged",new o.Signal(this)),A(this,"_dialog",null),A(this,"_setBusy",void 0),A(this,"_busyDisposable",null),A(this,"_serviceManager",void 0),A(this,"_pendingKernelName",""),A(this,"_pendingSessionRequest",""),this.translator=e.translator||h.wK,this._trans=this.translator.load("jupyterlab"),this._path=e.path??a.UUID.uuid4(),this._type=e.type??"",this._name=e.name??"",this._setBusy=e.setBusy,this._kernelPreference=e.kernelPreference??{},this._serviceManager=t}get session(){return this._session??null}get path(){return this._path}get type(){return this._type}get name(){return this._name}get location(){return this._location}get kernelChanged(){return this._kernelChanged}get sessionChanged(){return this._sessionChanged}get statusChanged(){return this._statusChanged}get pendingInput(){return this._pendingInput}get connectionStatusChanged(){return this._connectionStatusChanged}get iopubMessage(){return this._iopubMessage}get unhandledMessage(){return this._unhandledMessage}get propertyChanged(){return this._propertyChanged}get kernelPreference(){return this._kernelPreference}set kernelPreference(e){if(!a.JSONExt.deepEqual(e,this._kernelPreference)){const t=this._kernelPreference;this._kernelPreference=e,this._preferenceChanged.emit({name:"kernelPreference",oldValue:t,newValue:a.JSONExt.deepCopy(e)})}}get kernelPreferenceChanged(){return this._preferenceChanged}get isReady(){return this._isReady}get ready(){return this._ready.promise}get isTerminating(){return this._isTerminating}get isRestarting(){return this._isRestarting}get kernelManager(){switch(this._location){case"browser":return this._serviceManager.browser.kernels;case"local":return this._serviceManager.local.kernels;default:const e=this._serviceManager.remote.runtimesManager.getServices(this._location);return e?e.kernels:this._serviceManager.local.kernels}}get serviceManager(){return this._serviceManager}get sessionManager(){switch(this._location){case"browser":return this._serviceManager.browser.sessions;case"local":return this._serviceManager.local.sessions;default:const e=this._serviceManager.remote.runtimesManager.getServices(this._location);return e?e.sessions:this._serviceManager.local.sessions}}get specsManager(){switch(this._location){case"browser":return this._serviceManager.browser.kernelspecs;case"local":return this._serviceManager.local.kernelspecs;default:const e=this._serviceManager.remote.runtimesManager.getServices(this._location);return e?e.kernelspecs:this._serviceManager.local.kernelspecs}}get hasNoKernel(){return this.kernelDisplayName===this.noKernelName}get kernelDisplayName(){const e=this.session?.kernel;if(this._pendingKernelName===this.noKernelName)return this.noKernelName;let t="";if(t=(0,g.R)(this.location)?"☁︎ ":"browser"===this.location?"🌐︎ ":"💻︎ ",e){if((0,g.R)(this.location)){const n=this.serviceManager.remote.runtimesManager.get().find(t=>t.id===e.id);return t+(n?.name??n?.environment_title??e.name)}return t+(this.specsManager.specs?.kernelspecs[e.name]?.display_name??e.name)}return this._pendingKernelName?t+(this.specsManager.specs?.kernelspecs[this._pendingKernelName]?.display_name??this._pendingKernelName):this.noKernelName}get kernelDisplayStatus(){const e=this.session?.kernel;return this._isTerminating?"terminating":this._isRestarting?"restarting":this._pendingKernelName===this.noKernelName?"unknown":!e&&this._pendingKernelName?"initializing":e||this.isReady||!1===this.kernelPreference.canStart||!1===this.kernelPreference.shouldStart?("connected"===e?.connectionStatus?e?.status:e?.connectionStatus)??"unknown":"initializing"}get prevKernelName(){return this._prevKernelName}get isDisposed(){return this._isDisposed}get disposed(){return this._disposed}get noKernelName(){return this._trans.__("No Runtime")}dispose(){this._isDisposed||(this._isDisposed=!0,this._disposed.emit(),this._session&&(this.kernelPreference.shutdownOnDispose&&this.sessionManager.shutdown(this._session.id).catch(e=>{console.error(`Kernel not shut down ${e}`)}),this._session.dispose(),this._session=null),this._dialog&&this._dialog.dispose(),this._busyDisposable&&(this._busyDisposable.dispose(),this._busyDisposable=null),o.Signal.clearData(this))}async startKernel(){const e=this.kernelPreference;if(!e.autoStartDefault&&!1===e.shouldStart)return!0;let t;if(e.id)t={id:e.id};else{const n=(0,v.K)({specs:this.specsManager.specs,sessions:this.sessionManager.running(),preference:e});n&&(t={name:n})}if(t)try{return await this._changeKernel(t),!1}catch(e){}return!0}async restartKernel(){const e=this.session?.kernel||null;if(!this._isRestarting){this._isRestarting=!0,this._isReady=!1,this._statusChanged.emit("restarting");try{await(this.session?.kernel?.restart()),this._isReady=!0}catch(e){console.error(e)}this._isRestarting=!1,this._statusChanged.emit(this.session?.kernel?.status||"unknown"),this._kernelChanged.emit({name:"kernel",oldValue:e,newValue:this.session?.kernel||null})}}async changeKernel(e={}){if(this.isDisposed)throw new Error("Disposed");return await this._initStarted.promise,this._changeKernel(e)}async shutdown(){if(!this.isDisposed&&this._initializing)return await this._initStarted.promise,this._pendingSessionRequest="",this._pendingKernelName=this.noKernelName,this._shutdownSession()}async initialize(){if(this._initializing)return this._initPromise.promise;this._initializing=!0;const e=await this._initialize();return e||(this._isReady=!0,this._ready.resolve(void 0)),this._pendingSessionRequest||this._initStarted.resolve(void 0),this._initPromise.resolve(e),e}async _initialize(){const e=this.sessionManager;await e.ready,await e.refreshRunning();const t=(0,i.find)(e.running(),e=>e.path===this._path);if(t)try{const n=e.connectTo({model:t});this._handleNewSession(n)}catch(e){return this._handleSessionError(e),Promise.reject(e)}return await this._startIfNecessary()}async _shutdownSession(){const e=this._session,t=this._isTerminating,n=this._isReady;this._isTerminating=!0,this._isReady=!1,this._statusChanged.emit("terminating");try{await(e?.shutdown()),this._isTerminating=!1,e?.dispose(),this._session=null;const t=e?.kernel||null;this._statusChanged.emit("unknown"),this._kernelChanged.emit({name:"kernel",oldValue:t,newValue:null}),this._sessionChanged.emit({name:"session",oldValue:e,newValue:null})}catch(s){this._isTerminating=t,this._isReady=n;const r=e?.kernel?.status;throw void 0===r?this._statusChanged.emit("unknown"):this._statusChanged.emit(r),s}}async _startIfNecessary(){const e=this.kernelPreference;return!this.isDisposed&&!this.session?.kernel&&!1!==e.shouldStart&&!1!==e.canStart&&this.startKernel()}async _changeKernel(e={}){let t;if(e.id){if(await this.serviceManager.local.kernels.refreshRunning(),(0,i.find)(this.serviceManager.local.kernels.running(),t=>t.id===e.id)&&(t="local"),!t&&this.serviceManager.remote){await this.serviceManager.remote.runtimesManager.refresh();const n=this.serviceManager.remote.runtimesManager.get().find(t=>t.id===e.id);n&&(t=n.pod_name)}!t&&this.serviceManager.browser&&(await this.serviceManager.browser.kernels.refreshRunning(),(0,i.find)(this.serviceManager.browser.kernels.running(),t=>t.id===e.id)&&(t="browser"))}if(!t)switch(e.environmentName?.split("-",1)[0]){case"browser":t="browser";break;case"remote":t="remote";break;default:t="local"}const n=this._location===t;if(!n&&(0,g.R)(this._location)&&(console.debug("Shutting down the current remote session as the kernel location is changing."),await this._shutdownSession()),this._location=t,e.environmentName&&("local"!==this._location&&(e.environmentName=e.environmentName.replace(/^(remote-|browser-)/,"")),this._pendingKernelName=e.environmentName),this._session||this._kernelChanged.emit({name:"kernel",oldValue:null,newValue:null}),this._pendingSessionRequest||this._initStarted.resolve(void 0),n&&this._session&&!this._isTerminating)try{return console.log("Reusing session and changing the kernel with a model",this._session,e),await this._session.changeKernel({...e,name:e.environmentName?e.environmentName:e.name}),this._session.kernel}catch(e){throw this._handleSessionError(e),e}const s=d.PathExt.dirname(this._path),r=this._pendingSessionRequest=d.PathExt.join(s,a.UUID.uuid4());try{if(this._statusChanged.emit("starting"),"remote"===this._location){let t=e.creditsLimit;if(!t){const{credits:e}=f.J7.getState(),{configuration:n,runtimeModels:s}=_.LH.getState();if(t=(e?.available??0)/Math.max(n.maxNotebookRuntimes-s.filter(e=>"cell"!==e.type).length,1),t<w.c)throw new Error("You do not have enough credits to start a remote kernel.")}const n=await(this.serviceManager.remote?.runtimesManager.startNew({environmentName:e.environmentName,type:"notebook",creditsLimit:t,givenName:e.givenName,capabilities:e.capabilities},{handleComms:!0}));if(n){e.id=n.model.id;const t=await(this.serviceManager.remote?.runtimesManager.findById(n.model.id));t&&(this._location=t.pod_name),n.dispose()}}const t=await this.sessionManager.startNew({path:r,type:this._type,name:this._name,kernel:{...e,name:e.environmentName?e.environmentName:e.name}});return this._pendingSessionRequest!==t.path?(await t.shutdown(),t.dispose(),null):(await t.setPath(this._path),await t.setName(this._name),this._session&&!this._isTerminating&&await this._shutdownSession(),this._handleNewSession(t))}catch(e){throw 503===e.response?.status?(0,l.f1)("Unable to create a new remote kernel",x.S):"MaxRuntimesExceededError"===e.name?(0,l.f1)("Unable to create a new runtime.","You have reached your runtimes limit... please stop some runtimes to start new ones."):this._handleSessionError(e),e}}_handleNewSession(e){if(this.isDisposed)throw Error("Disposed");return this._isReady||(this._isReady=!0,this._ready.resolve(void 0)),this._session&&this._session.dispose(),this._session=e,this._pendingKernelName="",e&&(this._prevKernelName=e.kernel?.name??"",e.disposed.connect(this._onSessionDisposed,this),e.propertyChanged.connect(this._onPropertyChanged,this),e.kernelChanged.connect(this._onKernelChanged,this),e.statusChanged.connect(this._onStatusChanged,this),e.connectionStatusChanged.connect(this._onConnectionStatusChanged,this),e.pendingInput.connect(this._onPendingInput,this),e.iopubMessage.connect(this._onIopubMessage,this),e.unhandledMessage.connect(this._onUnhandledMessage,this),e.path!==this._path&&this._onPropertyChanged(e,"path"),e.name!==this._name&&this._onPropertyChanged(e,"name"),e.type!==this._type&&this._onPropertyChanged(e,"type")),this._sessionChanged.emit({name:"session",oldValue:null,newValue:e}),this._kernelChanged.emit({oldValue:null,newValue:e?.kernel||null,name:"kernel"}),this._statusChanged.emit(e?.kernel?.status||"unknown"),e?.kernel||null}async _handleSessionError(e){this._handleNewSession(null);let t="",n="";try{t=e.traceback,n=e.message}catch(e){}await this._displayKernelError(n,t)}async _displayKernelError(e,t){const n=(0,b.jsxs)("div",{children:[e&&(0,b.jsx)("pre",{children:e}),t&&(0,b.jsx)("details",{className:"jp-mod-wide",children:(0,b.jsx)("pre",{children:t})})]}),s=this._dialog=new l.lG({title:this._trans.__("Error Starting Kernel"),body:n,buttons:[l.lG.okButton()]});await s.launch(),this._dialog=null}_onSessionDisposed(){if(this._session){const e=this._session;this._session=null;const t=this._session;this._sessionChanged.emit({name:"session",oldValue:e,newValue:t})}}_onPropertyChanged(e,t){switch(t){case"path":this._path=e.path;break;case"name":this._name=e.name;break;case"type":this._type=e.type;break;default:throw new Error(`unrecognized property ${t}`)}this._propertyChanged.emit(t)}_onKernelChanged(e,t){this._kernelChanged.emit(t)}_onStatusChanged(e,t){if("dead"===t){const t=e.kernel?.model;if(t?.reason){const e=t.traceback||"";this._displayKernelError(t.reason,e)}}this._setBusy&&("busy"===t?this._busyDisposable||(this._busyDisposable=this._setBusy()):this._busyDisposable&&(this._busyDisposable.dispose(),this._busyDisposable=null)),this._statusChanged.emit(t)}_onConnectionStatusChanged(e,t){this._connectionStatusChanged.emit(t)}_onPendingInput(e,t){this._pendingInput=t}_onIopubMessage(e,t){"shutdown_reply"===t.header.msg_type&&this.session.kernel.removeInputGuard(),this._iopubMessage.emit(t)}_onUnhandledMessage(e,t){this._unhandledMessage.emit(t)}}(R||(R={})).getDefaultKernel=function e(t){const{preference:n}=t,{shouldStart:s}=n;return!1===s?null:e(t)};class M{constructor(e={},t,n){A(this,"_commandRegistry",void 0),A(this,"_multiServiceManager",void 0),A(this,"_translator",void 0),this._translator=e.translator??h.wK,this._commandRegistry=n,this._multiServiceManager=t}async selectKernel(e){if(e.isDisposed)return Promise.resolve();const t=this._translator.load("jupyterlab"),n=e.hasNoKernel?e.kernelDisplayName:t.__("Cancel"),s=e.kernelPreference.autoStartDefault,i="boolean"==typeof s,a=new y.o({title:t.__("Assign a Runtime to %1",e.name),body:t=>(0,b.jsx)(p.a,{sessionContext:e,multiServiceManager:this._multiServiceManager,logIn:this._commandRegistry.hasCommand(u.ou.createWidget)?()=>{this._commandRegistry.execute(u.ou.createWidget),a.close()}:void 0,commands:this._commandRegistry,close:()=>a.close(),setValue:t.setValue,translator:this._translator}),buttons:[l.lG.cancelButton({label:n}),l.lG.okButton({label:t.__("Assign"),ariaLabel:t.__("Assign Runtime")})],checkbox:i?{label:t.__("Always start the preferred Runtime"),caption:t.__("Remember my choice and always start the preferred Runtime"),checked:s}:null}),o=await a.launch();if(e.isDisposed||!o.button.accept)return;i&&null!==o.isChecked&&(e.kernelPreference={...e.kernelPreference,autoStartDefault:o.isChecked});const{runtime:d,selectedVariables:h}=await(o.value??Promise.resolve({runtime:null,selectedVariables:[]}));if(null!==d||e.hasNoKernel||(await e.shutdown(),c.E.success("Runtime is stopped.")),d){let n,s="";if(h.length){n=c.E.emit("Saving the variables…","in-progress",{autoClose:!1});try{s=await async function(e,t){if(t.length){const n=e.session.kernel,s=e.specsManager.specs.kernelspecs[n.model.name],i=new m.J(s.language);return(await new r.D({connection:n}).execute(i.saveVariables(t))).get(0).data["text/plain"]}return""}(e,h)}catch(e){return n&&c.E.update({id:n,message:"Failed to save the variables",type:"error",autoClose:!1}),void console.error(e)}}n&&c.E.update({id:n,message:"Starting the new runtime…"});const i=await e.changeKernel(d);if(i){let a;try{const t=e.specsManager.specs.kernelspecs[i.model.name];a=new m.J(t.language)}catch(e){return console.warn("Kernel snippets not supported.",e),void(n&&c.E.update({id:n,message:"Kernel is ready",type:"success",autoClose:3e3}))}"remote"===e.location&&await new r.D({connection:i}).execute(a.changeCurrentWorkingDirectory("content/local"));try{const i=[];if(s){n&&c.E.update({id:n,message:"Importing the variables…"});const t=(await new r.D({connection:e.session.kernel}).execute(a.loadVariables(s))).get(0).data["text/plain"]||"[]",o=JSON.parse(t.slice(1,t.length-1));i.push(...h.filter(e=>!o.includes(e)))}n&&c.E.update({id:n,message:"Runtime is ready",type:i.length?"warning":"success",autoClose:3e3,actions:i.length?[{label:t.__("Warnings"),callback:()=>{(0,l.ui)({title:t.__("Warning"),body:`The following variables were not transferred: ${i.join(", ")}`,buttons:[l.lG.warnButton({label:t.__("Dismiss")})]})},displayType:"warn"}]:void 0})}catch(e){console.error(e),n&&c.E.update({id:n,message:"Fail to import the variables",type:"error"})}}}}async restart(e){const t=this._translator.load("jupyterlab");if(await e.initialize(),e.isDisposed)throw new Error("session already disposed");const n=e.session?.kernel;if(!n&&e.prevKernelName)return await e.changeKernel({name:e.prevKernelName}),!0;if(!n)throw new Error("No kernel to restart");const s=l.lG.warnButton({label:t.__("Restart"),ariaLabel:t.__("Confirm Runtime Restart")}),r=await(0,l.ui)({title:t.__("Restart Kernel?"),body:t.__("Do you want to restart the kernel of %1? All variables will be lost.",e.name),buttons:[l.lG.cancelButton({ariaLabel:t.__("Cancel Runtime Restart")}),s]});return!n.isDisposed&&!!r.button.accept&&(await e.restartKernel(),!0)}}s()}catch(L){s(L)}})},37907:(e,t,n)=>{n.a(e,async(e,s)=>{try{n.d(t,{ih:()=>ee});var r=n(19823),i=n(63711),a=n(97371),o=n(97789),l=n(85181),c=n(87725),d=n(54904),h=n(43304),u=n(80475),m=n(40279),g=n(32556),p=n(97610),v=n(83015),y=n(58264),f=n(34412),_=n(32738),w=n(9877),x=n(98238),b=n(79246),j=n(49267),k=n(72490),A=n(49087),C=n.n(A),S=n(18565),R=n(71932),M=n(37032),L=n(71518),P=e([M]),E=P.then?(await P)():P;function N(e,t,n){return(t=F(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function F(e){var t=U(e,"string");return"symbol"==typeof t?t:t+""}function U(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}M=E[0];const I="python";class T{constructor(e){N(this,"_stream",void 0),N(this,"_serverSettings",void 0),this._stream=new k.Stream(this),this._serverSettings=e.serverSettings}async emit(e){}dispose(){}get isDisposed(){return!0}get stream(){return this._stream}get serverSettings(){return this._serverSettings}}let q;(D=q||(q={})).createConsole="@datalayer/ui:runtimes:new-browser-console",D.createNotebook="@datalayer/ui:runtimes:new-browser-notebook";const O={id:"@datalayer/ui:runtimes:browser-localforage",autoStart:!1,requires:[R.R],provides:v.n,activate:async(e,t)=>({localforage:C()})},z={id:"@datalayer/ui:runtimes:browser-localforage-memory-storage",autoStart:!1,requires:[v.n],activate:async(e,t)=>{JSON.parse(i.PageConfig.getOption("enableMemoryStorage")||"false")&&(console.warn("Memory storage fallback enabled: contents and settings may not be saved"),await(0,v.G)(t.localforage))}},V={id:"@datalayer/ui:runtimes:browser-contents",requires:[v.n],autoStart:!1,provides:h.GJ,activate:(e,t)=>{const n=i.PageConfig.getOption("contentsStorageName"),s=JSON.parse(i.PageConfig.getOption("contentsStorageDrivers")||"null"),{localforage:r}=t,a=new d.v({storageName:n,storageDrivers:s,localforage:r});return e.started.then(()=>a.initialize().catch(console.warn)),a}},H={id:"@datalayer/ui:runtimes:browser-contents-routes",autoStart:!1,requires:[L.TT,h.GJ],activate:(e,t,n)=>{t.get("/api/contents/(.+)/checkpoints",async(e,t)=>{const s=await n.listCheckpoints(t);return new Response(JSON.stringify(s))}),t.post("/api/contents/(.+)/checkpoints/(.*)",async(e,t,s)=>{const r=await n.restoreCheckpoint(t,s);return new Response(JSON.stringify(r),{status:204})}),t.post("/api/contents/(.+)/checkpoints",async(e,t)=>{const s=await n.createCheckpoint(t);return new Response(JSON.stringify(s),{status:201})}),t.delete("/api/contents/(.+)/checkpoints/(.*)",async(e,t,s)=>{const r=await n.deleteCheckpoint(t,s);return new Response(JSON.stringify(r),{status:204})}),t.get("/api/contents(.*)",async(e,t)=>{const s={content:"1"===e.query?.content},r=await n.get(t,s);return r?new Response(JSON.stringify(r)):new Response(null,{status:404})}),t.post("/api/contents(.*)",async(e,t)=>{const s=e.body,r=s?.copy_from;let i;return i=r?await n.copy(r,t):await n.newUntitled(s),i?new Response(JSON.stringify(i),{status:201}):new Response(null,{status:400})}),t.patch("/api/contents(.*)",async(e,t)=>{const s=e.body?.path??"";t="/"===t[0]?t.slice(1):t;const r=await n.rename(t,s);return new Response(JSON.stringify(r))}),t.put("/api/contents/(.+)",async(e,t)=>{const s=e.body,r=await n.save(t,s);return new Response(JSON.stringify(r))}),t.delete("/api/contents/(.+)",async(e,t)=>(await n.delete(t),new Response(null,{status:204})))}};class W{constructor(e){N(this,"_registration",null),N(this,"_registrationChanged",new k.Signal(this)),N(this,"_ready",new x.PromiseDelegate);const t=e?.workerUrl??i.URLExt.join(i.PageConfig.getBaseUrl(),f.H);this.initialize(t).catch(console.warn)}get registrationChanged(){return this._registrationChanged}get enabled(){return null!==this._registration}get ready(){return this._ready.promise}async initialize(e){const{serviceWorker:t}=navigator;let n=null;if(t?t.controller&&(n=await t.getRegistration(t.controller.scriptURL)||null,console.info("JupyterLite ServiceWorker was already registered")):console.warn("ServiceWorkers not supported in this browser"),!n&&t)try{const s=await t.getRegistrations();await Promise.all(s.map(e=>e.unregister())),console.info("Existing JupyterLite ServiceWorkers unregistered"),console.info("Registering new JupyterLite ServiceWorker",e),n=await t.register(e,{scope:i.PageConfig.getBaseUrl()}),console.info("JupyterLite ServiceWorker was successfully registered")}catch(e){console.warn(e),console.warn(`JupyterLite ServiceWorker registration unexpectedly failed: ${e}`)}this.setRegistration(n),n?this._ready.resolve(void 0):this._ready.reject(void 0)}setRegistration(e){this._registration=e,this._registrationChanged.emit(this._registration)}}const K={id:"@datalayer/ui:runtimes:browser-service-worker",autoStart:!1,provides:f.u,requires:[R.R],activate:async(e,t)=>new W({workerUrl:i.URLExt.join(i.PageConfig.getBaseUrl(),"datalayer/service-worker",f.H)})},$={id:"@datalayer/ui:runtimes:emscripten-filesystem",autoStart:!1,requires:[L.qk,L.TT],optional:[f.u],provides:h.LX,activate:(e,t,n,s)=>{const{contents:r}=t.browser??{};if(!r)throw new Error("Unable to activate emscripten-filesystem plugin without the browser service manager.");const i=new u.Y({contents:r}),a="Kernel filesystem and JupyterLite contents";function o(e,t){t&&console.warn(t),e&&console.warn(e),t||e?console.warn(`${a} will NOT be synced`):console.info(`${a} will be synced`)}return s?s.ready.then(()=>{i.enable(),o()}).catch(e=>{o("JupyterLite ServiceWorker failed to become available",e)}):o("JupyterLite ServiceWorker not available"),i}},J={id:"@datalayer/ui:runtimes:browser-kernels",autoStart:!1,provides:p.il,requires:[p.X],activate:(e,t)=>new m.j({kernelspecs:t})},B={id:"@datalayer/ui:runtimes:browser-kernels-routes",autoStart:!1,requires:[L.TT,p.il],activate:(e,t,n)=>{t.get("/api/kernels/(.*)",async(e,t)=>{const s=await n.get(t);return s?new Response(JSON.stringify(s)):new Response(void 0,{status:404})}),t.get("/api/kernels",async e=>{const t=await n.list();return new Response(JSON.stringify(t))}),t.post("/api/kernels",async e=>{const{name:t=I,path:s}=e.body,r=await n.startNew({id:x.UUID.uuid4(),name:t,location:s?i.PathExt.dirname(s):""});return new Response(JSON.stringify(r),{status:201})}),t.post("/api/kernels/(.*)/restart",async(e,t)=>{const s=await n.restart(t);return new Response(JSON.stringify(s))}),t.delete("/api/kernels/(.*)",async(e,t)=>{const s=await n.shutdown(t);return new Response(JSON.stringify(s),{status:204})})}},Y={id:"@datalayer/ui:runtimes:browser-kernelspec",autoStart:!1,provides:p.X,requires:[R.R],optional:[l.sQ,a.k],activate:async(e,t,n,s)=>{const r=new g.K,i=(n??l.wK).load("datalayer");if(s){let e=null,t=new b.DisposableSet;new j.Poll({factory:async()=>{const n=r.specs;x.JSONExt.deepEqual(e,n)||(t.dispose(),e=n,t=new b.DisposableSet,Object.values(e?.kernelspecs??{}).map(e=>{if(e){const n=e.resources["logo-svg"]||e.resources["logo-64x64"];t.add(s.add({command:q.createConsole,args:{isLauncher:!0,kernelName:`browser-${e.name}`},category:i.__("Console"),kernelIconUrl:n,metadata:{kernel:x.JSONExt.deepCopy(e.metadata||{})}})),t.add(s.add({command:q.createNotebook,args:{isLauncher:!0,kernelName:`browser-${e.name}`},category:i.__("Notebook"),kernelIconUrl:n,metadata:{kernel:x.JSONExt.deepCopy(e.metadata||{})}}))}}))}})}return r}},G={id:"@datalayer/ui:runtimes:browser-kernelspec-routes",autoStart:!1,requires:[L.TT,p.X],activate:(e,t,n)=>{t.get("/api/kernelspecs",async e=>{const{specs:t}=n;if(!t)return new Response(null);const s={},r=t.kernelspecs;Object.keys(r).forEach(e=>{const t=r[e],{resources:n}=t??{};s[e]={name:e,spec:t,resources:n}});const i={default:t.default,kernelspecs:s};return new Response(JSON.stringify(i))})}},Z={id:"@datalayer/ui:runtimes:browser-sessions",autoStart:!1,provides:_.L,requires:[p.il],activate:(e,t)=>new w.A({kernels:t})},Q={id:"@datalayer/ui:runtimes:browser-sessions-routes",autoStart:!1,requires:[L.TT,_.L],activate:(e,t,n)=>{t.get("/api/sessions/(.+)",async(e,t)=>{const s=await n.get(t);return new Response(JSON.stringify(s),{status:200})}),t.get("/api/sessions",async e=>{const t=await n.list();return new Response(JSON.stringify(t),{status:200})}),t.patch("/api/sessions(.*)",async(e,t)=>{const s=e.body,r=await n.patch(s);return new Response(JSON.stringify(r),{status:200})}),t.delete("/api/sessions/(.+)",async(e,t)=>(await n.shutdown(t),new Response(null,{status:204}))),t.post("/api/sessions",async e=>{const t=e.body,s=await(async e=>{const{path:t,name:s}=e,r=n._sessions.find(e=>e.path===t);if(r)return r;const a=e.id??x.UUID.uuid4(),o=e.kernel?.id??a,l=e.kernel?.name??I,c=e.name??e.path,d=i.PathExt.dirname(e.name)||i.PathExt.dirname(e.path),h=c.includes(":")?c.split(":")[0]:"",u=d.includes(h)?d:`${h}:${d}`,m=await n._kernels.startNew({id:o,name:l,location:u}),g={id:a,path:t,name:s??t,type:"notebook",kernel:{id:m.id,name:m.name}};return n._sessions.push(g),n._handleKernelShutdown({kernelId:a,sessionId:g.id}),g})(t);return new Response(JSON.stringify(s),{status:201})})}},X={id:"@datalayer/ui:runtimes:browser-manager",requires:[L.qk,R.R],optional:[l.sQ,r.n3],provides:L.TT,autoStart:!1,activate:async(e,t,n,s,r)=>{const a=(s??l.wK).load("jupyterlab"),d=new y.I,h={...o.ServerConnection.makeSettings(),WebSocket:S.WebSocket,fetch:async(e,t)=>{if(!(e instanceof Request))throw Error("Request info is not a Request");try{return d.route(e)}catch(n){if(n.message.startsWith("Cannot route"))return console.log(`No browser route for ${e.method} ${e.url}`),fetch(e,t);throw n}}},u=t.browser=new o.ServiceManager({standby:"never",serverSettings:h,events:new T({serverSettings:h})});let m=0;return e.commands.addCommand(q.createConsole,{label:e=>{const t=e.kernelName||"";if(e.isLauncher&&t&&u.kernelspecs){const e=t.startsWith("browser-")?t.slice(8):t;return u.kernelspecs.specs?.kernelspecs[e]?.display_name??e}return e.isPalette||e.isContextMenu?a.__("New Console"):a.__("Console")},caption:a.__("Create a new console"),icon:e=>e.isPalette?void 0:c.zk,execute:n=>{const s=m++;let o=n.path;return o||(o=i.PathExt.join(n.basePath||"",`console-browser-${s}-${x.UUID.uuid4()}`)),n.sessionContext=new M.I({sessionManager:t.sessions,specsManager:t.kernelspecs,path:t.contents.localPath(o),name:n.name||a.__("Console %1",s),type:"console",kernelPreference:n.kernelPreference,setBusy:r?()=>r.setBusy():void 0},t),e.commands.execute("console:create",n)}}),e.commands.addCommand(q.createNotebook,{label:e=>{const t=e.kernelName||"";if(e.isLauncher&&t&&u.kernelspecs){const e=t.startsWith("browser-")?t.slice(8):t;return u.kernelspecs.specs?.kernelspecs[e]?.display_name??e}return e.isPalette||e.isContextMenu?a.__("New Notebook"):a.__("Notebook")},caption:a.__("Create a new notebook"),icon:e=>e.isPalette?void 0:c.JG,execute:t=>e.commands.execute("notebook:create-new",t)}),console.log(`JupyterLab ${X.id} is activated.`),d}},ee=[V,H,X,$,J,B,Y,G,z,O,K,Z,Q];s()}catch(te){s(te)}var D})},38885:(e,t,n)=>{n.d(t,{Z:()=>a});var s=n(77544),r=n(75147),i=n(18683);const a=e=>(0,i.jsx)(r.a,{title:"AI Runtimes",icon:(0,i.jsx)(s.A,{colored:!0,size:42}),description:"🪐 ⚪ AI Runtimes scales your code in the cloud."})},39170:(e,t,n)=>{n.d(t,{a:()=>_});var s=n(69453),r=n(70900),i=n(59179),a=n(85181),o=n(88037),l=n(38621),c=n(94706),d=n(10680),h=n(80006),u=n(26127),m=n(71518),g=n(98970),p=n(18683);const v="The current runtime will be stopped in less than 5 minutes due to credits exhaustion.",y="Runtime stopped due to credits exhaustion.";class f extends o._Q{constructor(...e){var t,n,s;super(...e),t=this,s="",(n=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(n="_message"))in t?Object.defineProperty(t,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[n]=s}get message(){return this._message}set message(e){this._message!==e&&(this._message=e,this.update())}render(){return this._message?(0,p.jsx)(s.WV,{children:(0,p.jsxs)(d.A,{variant:"warning",children:[(0,p.jsx)(c.A,{icon:l._0O}),(0,p.jsx)(h.A,{children:this.message})]})}):null}}const _={id:"@datalayer/ui:runtimes:credits-indicator",description:"Notebook credits indicator",optional:[a.sQ],requires:[m.qk,i.qe],autoStart:!1,activate(e,t,n,i){n.addFactory("Notebook",_.id,n=>{const i=new f;i.addClass("dla-Notebook-warning-notice"),n.contentHeader.addClass("dla-Notebook-content-header"),n.contentHeader.addWidget(i);const a=o._Q.create((0,p.jsx)(s.WV,{children:(0,p.jsx)(r.mE,{signal:n.sessionContext.kernelChanged,initialArgs:{name:"kernel",newValue:n.sessionContext.session?.kernel??null,oldValue:null},children:(s,r)=>r?.newValue?.id?(i.message="",n.contentHeader.node.style.minHeight="0",n.contentHeader.node.style.height="0",n.fit(),(0,p.jsx)(g.m,{kernelId:r.newValue.id,serviceManager:t.remote,onClick:e.commands.hasCommand("@datalayer/ui:runtimes:create-widget")?()=>{e.commands.execute("@datalayer/ui:runtimes:create-widget")}:void 0,onUpdate:(e,t)=>{100===e?i.message=y:(100-e)*t*10<u.zo&&(i.message=v),i.message?n.contentHeader.node.style.minHeight="60px":(n.contentHeader.node.style.minHeight="0",n.contentHeader.node.style.height="0"),n.fit()}})):(null===r?.newValue&&r?.oldValue?.id&&i.message===v&&(i.message=y,n.contentHeader.node.style.minHeight="60px",n.fit()),null)})}));return a.node.title="Runtime credits",a.addClass("dla-Toolbar-credits-indicator"),a})}}},43322:(e,t,n)=>{n.d(t,{J:()=>g});var s=n(9387),r=n(98754),i=n(3556),a=n(70216),o=n(84514),l=n(24860),c=n(99180),d=n(42564),h=n(93159),u=n(17788),m=n(18683);const g=e=>{const{joinWelcomeRoute:t}=e,n=(0,u.Z)(),{useConfirmJoinWithToken:g}=(0,h.E6)(),p=g(),[v,y]=(0,s.useState)(!1),[f,_]=(0,s.useState)({handle:void 0,token:void 0}),[w,x]=(0,s.useState)({handle:void 0,token:void 0});return(0,s.useEffect)(()=>{x({...w,handle:void 0===f.handle?void 0:(0,d.xR)(f.handle,1)?"success":"error",token:void 0===f.token?void 0:(0,d.xR)(f.token,1)?"success":"error"})},[f]),(0,m.jsxs)(a.M,{containerWidth:"medium",padding:"normal",style:{overflow:"visible",minHeight:"calc(100vh - 45px)"},children:[(0,m.jsx)(a.M.Header,{children:(0,m.jsx)(i.A,{children:"Activate your Datalayer account"})}),(0,m.jsx)(a.M.Content,{children:(0,m.jsx)(r.A,{display:"grid",gridTemplateColumns:"1fr 1fr",children:(0,m.jsxs)(r.A,{sx:{label:{marginTop:2}},children:[(0,m.jsx)(r.A,{children:(0,m.jsxs)(o.A,{required:!0,children:[(0,m.jsx)(o.A.Label,{children:"Your username"}),(0,m.jsx)(l.A,{autoFocus:!0,value:f.handle,onChange:e=>{_(t=>({...t,handle:e.target.value}))}}),"error"===w.handle&&(0,m.jsx)(o.A.Validation,{variant:w.handle,children:"Your username must have more than 1 character."})]})}),(0,m.jsx)(r.A,{children:(0,m.jsxs)(o.A,{required:!0,children:[(0,m.jsx)(o.A.Label,{children:"Your activation code (check your email)"}),(0,m.jsx)(l.A,{type:"email",value:f.token,onChange:e=>{_(t=>({...t,token:e.target.value}))}}),"error"===w.token&&(0,m.jsx)(o.A.Validation,{variant:w.token,children:"Your activation code is too small."})]})}),(0,m.jsx)(r.A,{sx:{display:"flex"},mt:2,children:(0,m.jsx)(c.Q,{variant:"primary",type:"submit",disabled:v||"success"!==w.handle||"success"!==w.token,onClick:async()=>{v||Object.values(w).some(e=>"success"!==e)||(y(!0),p.mutate({userHandle:f.handle,token:f.token},{onSuccess:e=>{e.success&&n(t)},onSettled:()=>{y(!1)}}))},children:v?"Activating…":"Activate"})})]})})})]})}},48222:(e,t,n)=>{n.d(t,{Z:()=>a});var s=n(56770),r=n(75147),i=n(18683);const a=e=>{const{version:t}=e;return(0,i.jsx)(r.a,{version:t,title:"Jupyter IAM",icon:(0,i.jsx)(s.A,{colored:!0,size:32}),description:"🪐 🛂 Identity and Access Management for Jupyter."})}},48552:(e,t,n)=>{n.d(t,{$:()=>i});var s=n(63711),r=n(97789);async function i(e="",t={}){const n=r.ServerConnection.makeSettings(),i=s.URLExt.join(n.baseUrl,"jupyter_iam",e);let a;try{a=await r.ServerConnection.makeRequest(i,t,n)}catch(e){throw new r.ServerConnection.NetworkError(e)}let o=await a.text();if(o.length>0)try{o=JSON.parse(o)}catch(e){console.log("Not a JSON response body.",a)}if(!a.ok)throw new r.ServerConnection.ResponseError(a,o.message||o);return o}},49272:(e,t,n)=>{n.a(e,async(e,s)=>{try{n.d(t,{j:()=>f});var r=n(9387),i=n(41630),a=n(92584),o=n(98754),l=n(56770),c=n(48552),d=n(26127),h=n(81045),u=n(48222),m=n(16583),g=n(77130),p=n(18683),v=e([g]),y=v.then?(await v)():v;g=y[0];const f=e=>{const{jupyterLabAdapter:t}=e,{user:n}=(0,d.Y)(),[s,v]=(0,r.useState)(0),[y,f]=(0,r.useState)("");return(0,r.useEffect)(()=>{(0,c.$)("config").then(e=>{f(e.version)}).catch(e=>{console.error(`Error while accessing the jupyter server jupyter_iam extension.\n${e}`)})}),(0,p.jsx)(p.Fragment,{children:(0,p.jsx)(i.NP,{children:(0,p.jsxs)(o.A,{children:[(0,p.jsx)(o.A,{children:(0,p.jsxs)(a.O,{"aria-label":"iam",children:[(0,p.jsx)(a.O.Item,{"aria-label":"iam-home","aria-current":0===s?"page":void 0,onSelect:e=>{e.preventDefault(),v(0)},children:"Providers"}),(n?.roles??[]).includes(h.n.Admin.handle)&&(0,p.jsx)(a.O.Item,{"aria-label":"iam-users","aria-current":1===s?"page":void 0,onSelect:e=>{e.preventDefault(),v(1)},children:"Manage users"}),(0,p.jsx)(a.O.Item,{"aria-label":"iam-about","aria-current":2===s?"page":void 0,icon:()=>(0,p.jsx)(l.A,{colored:!0}),onSelect:e=>{e.preventDefault(),v(2)},children:"About"})]})}),(0,p.jsxs)(o.A,{m:3,children:[0===s&&t&&(0,p.jsx)(g.N,{jupyterLabAdapter:t}),1===s&&(n?.roles??[]).includes(h.n.Admin.handle)&&(0,p.jsx)(m.k,{}),2===s&&(0,p.jsx)(u.Z,{version:y})]})]})})})};s()}catch(e){s(e)}})},56635:(e,t,n)=>{n.d(t,{y:()=>g});var s=n(98754),r=n(3556),i=n(70216),a=n(84514),o=n(24860),l=n(99180),c=n(9387),d=n(42564),h=n(93159),u=n(17788),m=n(18683);const g=e=>{const{loginRoute:t,passwordWelcomeRoute:n}=e,{useConfirmPasswordWithToken:g}=(0,h.E6)(),p=g(),v=(0,u.Z)(),[y,f]=(0,c.useState)(!1),[_,w]=(0,c.useState)({handle:void 0,token:void 0}),[x,b]=(0,c.useState)({handle:void 0,token:void 0});return(0,c.useEffect)(()=>{b({...x,handle:void 0===_.handle?void 0:(0,d.xR)(_.handle,1)?"success":"error",token:void 0===_.token?void 0:(0,d.xR)(_.token,1)?"success":"error"})},[_]),(0,m.jsxs)(i.M,{containerWidth:"medium",padding:"normal",style:{overflow:"visible",minHeight:"calc(100vh - 45px)"},children:[(0,m.jsx)(i.M.Header,{children:(0,m.jsx)(r.A,{children:"Confirm your password"})}),(0,m.jsx)(i.M.Content,{children:(0,m.jsx)(s.A,{display:"grid",gridTemplateColumns:"1fr 1fr",children:(0,m.jsxs)(s.A,{sx:{label:{marginTop:2}},children:[(0,m.jsx)(s.A,{children:(0,m.jsxs)(a.A,{required:!0,children:[(0,m.jsx)(a.A.Label,{children:"Your username"}),(0,m.jsx)(o.A,{autoFocus:!0,value:_.handle,onChange:e=>{w(t=>({...t,handle:e.target.value}))}}),"error"===x.handle&&(0,m.jsx)(a.A.Validation,{variant:x.handle,children:"Your username must have more than 1 character."})]})}),(0,m.jsx)(s.A,{children:(0,m.jsxs)(a.A,{required:!0,children:[(0,m.jsx)(a.A.Label,{children:"Your activation code (check your email)"}),(0,m.jsx)(o.A,{type:"email",value:_.token,onChange:e=>{w(t=>({...t,token:e.target.value}))}}),"error"===x.token&&(0,m.jsx)(a.A.Validation,{variant:x.token,children:"Your activation token is too small."})]})}),(0,m.jsx)(s.A,{sx:{display:"flex"},mt:2,children:(0,m.jsx)(l.Q,{variant:"primary",type:"submit",disabled:y||"success"!==x.handle||"success"!==x.token,onClick:async()=>{y||Object.values(x).some(e=>"success"!==e)||(f(!0),p.mutate({userHandle:_.handle,token:_.token},{onSuccess:e=>{e.success?v(n):v(t)}}))},children:y?"Activating…":"Activate"})})]})})})]})}},60533:(e,t,n)=>{n.d(t,{U:()=>v});var s=n(9387),r=n(98754),i=n(3556),a=n(70216),o=n(84514),l=n(24860),c=n(99180),d=n(38621),h=n(42564),u=n(93159),m=n(17788),g=n(41273),p=n(18683);const v=e=>{const{passwordConfirmRoute:t}=e,{useCreateTokenForPasswordChange:n}=(0,u.E6)(),v=n(),y=(0,m.Z)(),{enqueueToast:f}=(0,g.d)(),[_,w]=(0,s.useState)(!1),[x,b]=(0,s.useState)(!1),[j,k]=(0,s.useState)(!1),[A,C]=(0,s.useState)({handle:void 0,password:void 0,passwordConfirm:void 0}),[S,R]=(0,s.useState)({handle:void 0,password:void 0,passwordConfirm:void 0}),M=e=>{"Enter"===e.key&&L()};(0,s.useEffect)(()=>{R({...S,handle:void 0===A.handle?void 0:(0,h.xR)(A.handle,1)?"success":"error",password:void 0===A.password?void 0:(0,h.sl)(A.password)?"success":"error",passwordConfirm:void 0===A.passwordConfirm?void 0:A.password===A.passwordConfirm?"success":"error"})},[A]);const L=async()=>{_||Object.values(S).some(e=>"success"!==e)||(w(!0),v.mutate({handle:A.handle,password:A.password,passwordConfirm:A.passwordConfirm},{onSuccess:e=>{e.success?(f(e.message,{variant:"success"}),y(t)):f(e.message,{variant:"error"})},onSettled:()=>{w(!1)}}))};return(0,p.jsxs)(a.M,{containerWidth:"medium",padding:"normal",style:{overflow:"visible",minHeight:"calc(100vh - 45px)"},children:[(0,p.jsx)(a.M.Header,{children:(0,p.jsx)(i.A,{children:"Change your password"})}),(0,p.jsx)(a.M.Content,{children:(0,p.jsxs)(r.A,{display:"grid",gridTemplateColumns:"1fr 1fr",children:[(0,p.jsxs)(r.A,{sx:{label:{marginTop:2}},children:[(0,p.jsxs)(o.A,{required:!0,children:[(0,p.jsx)(o.A.Label,{children:"Your username"}),(0,p.jsx)(l.A,{autoFocus:!0,value:A.handle,onChange:e=>{C(t=>({...t,handle:e.target.value}))},onKeyDown:M}),"error"===S.handle&&(0,p.jsx)(o.A.Validation,{variant:S.handle,children:"Your username must have more than 1 character."})]}),(0,p.jsxs)(o.A,{required:!0,children:[(0,p.jsx)(o.A.Label,{children:"Your new password"}),(0,p.jsx)(l.A,{type:x?"text":"password",value:A.password,onChange:e=>{C(t=>({...t,password:e.target.value}))},onKeyDown:M,trailingAction:(0,p.jsx)(l.A.Action,{onClick:()=>{b(!x)},icon:x?d.V$C:d.bMW,"aria-label":x?"Hide password":"Show password",sx:{color:"var(--fgColor-muted)"}}),sx:{overflow:"visible"}}),"error"===S.password&&(0,p.jsx)(o.A.Validation,{variant:S.password,children:"The password must be between 8 and 64 characters with at least one lower case character, one upper case character, one digit and one special character."})]}),(0,p.jsxs)(o.A,{required:!0,children:[(0,p.jsx)(o.A.Label,{children:"Your new password confirmation"}),(0,p.jsx)(l.A,{type:j?"text":"password",value:A.passwordConfirm,onChange:e=>{C(t=>({...t,passwordConfirm:e.target.value}))},onKeyDown:M,trailingAction:(0,p.jsx)(l.A.Action,{onClick:()=>{k(!j)},icon:j?d.V$C:d.bMW,"aria-label":j?"Hide password":"Show password",sx:{color:"var(--fgColor-muted)"}}),sx:{overflow:"visible"}}),"error"===S.passwordConfirm&&(0,p.jsx)(o.A.Validation,{variant:S.passwordConfirm,children:"Passwords do not match."})]})]}),(0,p.jsx)(r.A,{sx:{display:"flex"},mt:2,children:(0,p.jsx)(c.Q,{variant:"primary",type:"submit",disabled:_||"success"!==S.handle||"success"!==S.password||"success"!==S.passwordConfirm,onClick:L,children:_?"Sending email to change password…":"Request to change password"})})]})})]})}},61286:(e,t,n)=>{n.a(e,async(e,s)=>{try{n.d(t,{l:()=>g});var r=n(20568),i=n(26939),a=n(61409),o=n(63711),l=n(41757),c=n(90278),d=n(96363),h=n(18683),u=e([d]),m=u.then?(await u)():u;d=m[0];const g=e=>{const{memoryRouter:t,baseRoute:n}=e;return(0,h.jsx)(h.Fragment,{children:t?(0,h.jsx)(c.w2,{children:(0,h.jsx)(r.fS,{initialEntries:[o.URLExt.join("/",n)],children:(0,h.jsx)(d.e,{...e})})}):(0,h.jsxs)(l.cG,{children:[(0,h.jsx)(i.Kd,{children:(0,h.jsx)(d.e,{...e})}),(0,h.jsx)(a.N9,{})]})})};s()}catch(e){s(e)}})},64983:(e,t,n)=>{n.d(t,{Q:()=>o});var s=n(9387),r=n(17788),i=n(41273),a=n(18683);const o=e=>{const{loginRoute:t}=e,{enqueueToast:n}=(0,i.d)(),o=(0,r.Z)();return(0,s.useEffect)(()=>{o(t),n("Welcome back to Datalayer. Login with your username and new password",{variant:"success"})},[]),(0,a.jsx)(a.Fragment,{})}},65506:(e,t,n)=>{n.a(e,async(e,s)=>{try{n.d(t,{V:()=>_});var r=n(38921),i=n(98238),a=n(15503),o=n(72490),l=n(80578),c=n(63711),d=n(85181),h=n(45427),u=n(39203),m=n(17868),g=e([m]),p=g.then?(await g)():g;function v(e,t,n){return(t=y(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e){var t=f(e,"string");return"symbol"==typeof t?t:t+""}function f(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}m=p[0];class _{constructor(e){v(this,"registry",void 0),v(this,"services",void 0),v(this,"translator",void 0),v(this,"_activateRequested",new o.Signal(this)),v(this,"_contexts",[]),v(this,"_opener",void 0),v(this,"_widgetManager",void 0),v(this,"_isDisposed",!1),v(this,"_autosave",!0),v(this,"_autosaveInterval",120),v(this,"_lastModifiedCheckMargin",500),v(this,"_renameUntitledFileOnSave",!0),v(this,"_when",void 0),v(this,"_setBusy",void 0),v(this,"_dialogs",void 0),v(this,"_isConnectedCallback",void 0),v(this,"_stateChanged",new o.Signal(this)),this.translator=e.translator||d.wK,this.registry=e.registry,this.services=e.manager,this._dialogs=e.sessionDialogs??new l.V({translator:e.translator}),this._isConnectedCallback=e.isConnectedCallback||(()=>!0),this._opener=e.opener,this._when=e.when||e.manager.ready;const t=new u.p({registry:this.registry,translator:this.translator,recentsManager:e.recentsManager});t.activateRequested.connect(this._onActivateRequested,this),t.stateChanged.connect(this._onWidgetStateChanged,this),this._widgetManager=t,this._setBusy=e.setBusy}get activateRequested(){return this._activateRequested}get autosave(){return this._autosave}set autosave(e){if(this._autosave!==e){const t=this._autosave;this._autosave=e,this._contexts.forEach(t=>{const n=w.saveHandlerProperty.get(t);n&&(!0!==e||n.isActive?!1===e&&n.isActive&&n.stop():n.start())}),this._stateChanged.emit({name:"autosave",oldValue:t,newValue:e})}}get autosaveInterval(){return this._autosaveInterval}set autosaveInterval(e){if(this._autosaveInterval!==e){const t=this._autosaveInterval;this._autosaveInterval=e,this._contexts.forEach(t=>{const n=w.saveHandlerProperty.get(t);n&&(n.saveInterval=e||120)}),this._stateChanged.emit({name:"autosaveInterval",oldValue:t,newValue:e})}}get confirmClosingDocument(){return this._widgetManager.confirmClosingDocument}set confirmClosingDocument(e){if(this._widgetManager.confirmClosingDocument!==e){const t=this._widgetManager.confirmClosingDocument;this._widgetManager.confirmClosingDocument=e,this._stateChanged.emit({name:"confirmClosingDocument",oldValue:t,newValue:e})}}get lastModifiedCheckMargin(){return this._lastModifiedCheckMargin}set lastModifiedCheckMargin(e){if(this._lastModifiedCheckMargin!==e){const t=this._lastModifiedCheckMargin;this._lastModifiedCheckMargin=e,this._contexts.forEach(t=>{t.lastModifiedCheckMargin=e}),this._stateChanged.emit({name:"lastModifiedCheckMargin",oldValue:t,newValue:e})}}get renameUntitledFileOnSave(){return this._renameUntitledFileOnSave}set renameUntitledFileOnSave(e){if(this._renameUntitledFileOnSave!==e){const t=this._renameUntitledFileOnSave;this._renameUntitledFileOnSave=e,this._stateChanged.emit({name:"renameUntitledFileOnSave",oldValue:t,newValue:e})}}get stateChanged(){return this._stateChanged}get isDisposed(){return this._isDisposed}dispose(){this.isDisposed||(this._isDisposed=!0,o.Signal.clearData(this),this._contexts.forEach(e=>this._widgetManager.closeWidgets(e)),this._widgetManager.dispose(),this._contexts.length=0)}cloneWidget(e){return this._widgetManager.cloneWidget(e)}closeAll(){return Promise.all(this._contexts.map(e=>this._widgetManager.closeWidgets(e))).then(()=>{})}closeFile(e){const t=this._contextsForPath(e).map(e=>this._widgetManager.closeWidgets(e));return Promise.all(t).then(e=>{})}contextForWidget(e){return this._widgetManager.contextForWidget(e)}copy(e,t){return this.services.contents.copy(e,t)}createNew(e,t="default",n){return this._createOrOpenDocument("create",e,t,n)}deleteFile(e){return this.services.sessions.stopIfNeeded(e).then(()=>this.services.contents.delete(e)).then(()=>(this._contextsForPath(e).forEach(e=>this._widgetManager.deleteWidgets(e)),Promise.resolve(void 0)))}duplicate(e){const t=c.PathExt.dirname(e);return this.services.contents.copy(e,t)}findWidget(e,t="default"){const n=c.PathExt.normalize(e);let s=[t];if("default"===t){const e=this.registry.defaultWidgetFactory(n);if(!e)return;s=[e.name]}else null===t&&(s=this.registry.preferredWidgetFactories(n).map(e=>e.name));for(const e of this._contextsForPath(n))for(const t of s)if(null!==t){const n=this._widgetManager.findWidget(e,t);if(n)return n}}newUntitled(e){return"file"===e.type&&(e.ext=e.ext||".txt"),this.services.contents.newUntitled(e)}open(e,t="default",n,s){return this._createOrOpenDocument("open",e,t,n,s)}openOrReveal(e,t="default",n,s){const r=this.findWidget(e,t);return r?(this._opener.open(r,{type:t,...s}),r):this.open(e,t,n,s??{})}overwrite(e,t){const n=`${t}.${i.UUID.uuid4()}`,s=()=>this.rename(n,t);return this.rename(e,n).then(()=>this.deleteFile(t)).then(s,s)}rename(e,t){return this.services.contents.rename(e,t)}_findContext(e,t){const n=this.services.contents.normalize(e);return(0,r.find)(this._contexts,e=>e.path===n&&e.factoryName===t)}_contextsForPath(e){const t=this.services.contents.normalize(e);return this._contexts.filter(e=>e.path===t)}_createContext(e,t,n,s){const r=new m.o({opener:(e,t)=>{this._widgetManager.adoptWidget(r,e),this._opener.open(e,t)},manager:this.services,factory:t,path:e,kernelPreference:n,setBusy:this._setBusy,sessionDialogs:this._dialogs,lastModifiedCheckMargin:this._lastModifiedCheckMargin,translator:this.translator,contentProviderId:s}),i=new h.I({context:r,isConnectedCallback:this._isConnectedCallback,saveInterval:this.autosaveInterval});return w.saveHandlerProperty.set(r,i),r.ready.then(()=>{this.autosave&&i.start()}),r.disposed.connect(this._onContextDisposed,this),this._contexts.push(r),r}_onContextDisposed(e){r.ArrayExt.removeFirstOf(this._contexts,e)}_widgetFactoryFor(e,t){const{registry:n}=this;if("default"===t){const s=n.defaultWidgetFactory(e);if(!s)return;t=s.name}return n.getWidgetFactory(t)}_createOrOpenDocument(e,t,n="default",s,r){const i=this._widgetFactoryFor(t,n);if(!i)return;const a=i.modelName||"text",o=this.registry.getModelFactory(a);if(!o)return;const l=this.registry.getKernelPreference(t,i.name,s);let c,d=Promise.resolve(void 0);if("open"===e)c=this._findContext(t,o.name)||null,c||(c=this._createContext(t,o,l,i.contentProviderId),d=this._when.then(()=>c.initialize(!1)));else{if("create"!==e)throw new Error(`Invalid argument 'which': ${e}`);c=this._createContext(t,o,l,i.contentProviderId),d=this._when.then(()=>c.initialize(!0))}const h=this._widgetManager.createWidget(i,c);return this._opener.open(h,{type:i.name,...r}),d.catch(e=>{console.error(`Failed to initialize the context with '${o.name}' for ${t}`,e),h.close()}),h}_onActivateRequested(e,t){this._activateRequested.emit(t)}_onWidgetStateChanged(e,t){"confirmClosingDocument"===t.name&&this._stateChanged.emit(t)}}let w;(w||(w={})).saveHandlerProperty=new a.AttachedProperty({name:"saveHandler",create:()=>{}}),s()}catch(x){s(x)}})},69055:(e,t,n)=>{n.a(e,async(e,s)=>{try{n.r(t),n.d(t,{JupyterLabHeadless:()=>p,default:()=>v});var r=n(9387),i=n(88811),a=n(3768),o=n(71987),l=n(78772),c=n(29491),d=n(16152),h=n(45),u=n(78173),m=n(18683),g=e([h,u]);[h,u]=g.then?(await g)():g;const p=()=>{const[e,t]=(0,r.useState)(),{setJupyterLabAdapter:n}=(0,a.PT)();return(0,m.jsx)(m.Fragment,{children:(0,m.jsx)(i.C,{serverless:!1,headless:!0,plugins:[o,l,c,d,h,u],disabledPlugins:["@jupyterlab/apputils-extension:sessionDialogs","@jupyterlab/docmanager-extension:manager","@jupyterlab/running-extension:plugin","@jupyterlab/running-extension:sidebar","@jupyterlab/apputils-extension:announcements"],onJupyterLab:async e=>{t(e),n(e)}})})},v=p;s()}catch(e){s(e)}})},69513:(e,t,n)=>{n.d(t,{s:()=>c});var s=n(2335),r=n(89460),i=n(69584),a=n(71518),o=n(92202);const l="autoRestartCellKernels",c={id:"@datalayer/ui:runtimes:lifecycle",description:"Handle foreign cell runtime lifecycle when the document one changes",requires:[a.qk,r.fI],optional:[i.X],autoStart:!1,activate:(e,t,n,r)=>{const i=new WeakMap,c=new WeakMap,d=async e=>{const n=e.kernelDisplayStatus;if(["autorestarting","restarting"].includes(n)&&n!==i.get(e)){i.set(e,e.kernelDisplayStatus);let t=null;const n=new Array,o=(await(r?.get(a.UC,l)))?.composite??"ask";for(const r of c.get(e)?.model?.cells??[])r.getMetadata("datalayer")?.kernel&&!1!==r.getMetadata("datalayer").kernel.params?.notebook&&r.getMetadata("datalayer").kernel.id&&(n.push(r.getMetadata("datalayer").kernel),"ask"===o&&null===t&&(t=(0,s.ui)({title:"Restart cell kernels",body:"Do you want to restart the cell kernels too?",buttons:[s.lG.cancelButton({label:"No"}),s.lG.okButton({label:"Yes"})],checkbox:{label:"Don't ask me again",caption:"Store your answer and apply it next time a restart is performed."}})));const h=await(t??Promise.resolve(null));"yes"===o?d(n):h&&(h.button.accept&&d(n),h.isChecked&&await(r?.set(a.UC,l,h.button.accept?"yes":"no")))}else i.set(e,n);function d(e){e.forEach(async e=>{const n=(0,o.R)(e.location),s=n?t.remote?.runtimesManager:t[e.location]?.kernels;try{const t=s?.connectTo({model:{id:e.kernelId,name:e.name}});await(t?.restart())}catch(t){console.error(`Failed to restart ${n?"remote":e.location} kernel (${e.kernelId})`)}})}},h=(e,t)=>{e.isDisposed||(i.set(e,e.kernelDisplayStatus),e.statusChanged.connect(d),e.connectionStatusChanged.connect(d),c.set(e,t),e.disposed.connect(()=>{c.delete(e),e.statusChanged.disconnect(d),e.connectionStatusChanged.disconnect(d)}))};n.forEach(e=>{h(e.context.sessionContext,e.content)}),n.widgetAdded.connect((e,t)=>{h(t.context.sessionContext,t.content)})}}},71932:(e,t,n)=>{n.d(t,{R:()=>s});const s=new(n(98238).Token)("@datalayer/ui:plugin")},75650:(e,t,n)=>{n.d(t,{n:()=>v});var s=n(9387),r=n(38621),i=n(98754),a=n(3556),o=n(70216),l=n(84514),c=n(24860),d=n(99180),h=n(42564),u=n(93159),m=n(17788),g=n(41273),p=n(18683);const v=e=>{const{joinConfirmRoute:t}=e,{useRequestJoinToken:n}=(0,u.E6)(),v=n(),{enqueueToast:y}=(0,g.d)(),f=(0,m.Z)(),[_,w]=(0,s.useState)(!1),[x,b]=(0,s.useState)({handle:void 0,email:void 0,firstName:void 0,lastName:void 0,password:void 0,passwordConfirm:void 0}),[j,k]=(0,s.useState)({handle:void 0,email:void 0,firstName:void 0,lastName:void 0,password:void 0,passwordConfirm:void 0}),[A,C]=(0,s.useState)(!1),[S,R]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{k({...j,handle:void 0===x.handle?void 0:(0,h.xR)(x.handle,1)?"success":"error",email:void 0===x.email?void 0:(0,h.B9)(x.email)?"success":"error",firstName:void 0===x.firstName?void 0:(0,h.xR)(x.firstName,1)?"success":"error",lastName:void 0===x.lastName?void 0:(0,h.xR)(x.lastName,1)?"success":"error",password:void 0===x.password?void 0:(0,h.sl)(x.password)?"success":"error",passwordConfirm:void 0===x.passwordConfirm?void 0:x.password===x.passwordConfirm?"success":"error"})},[x]),(0,p.jsxs)(o.M,{containerWidth:"medium",padding:"normal",style:{overflow:"visible",minHeight:"calc(100vh - 45px)"},children:[(0,p.jsx)(o.M.Header,{children:(0,p.jsx)(a.A,{children:"Join Datalayer"})}),(0,p.jsx)(o.M.Content,{children:(0,p.jsx)(i.A,{display:"grid",gridTemplateColumns:"1fr 1fr",children:(0,p.jsxs)(i.A,{sx:{label:{marginTop:2}},children:[(0,p.jsxs)(l.A,{required:!0,children:[(0,p.jsx)(l.A.Label,{children:"Your username"}),(0,p.jsx)(c.A,{autoFocus:!0,value:x.handle,onChange:e=>{b(t=>({...t,handle:e.target.value}))}}),"error"===j.handle&&(0,p.jsx)(l.A.Validation,{variant:j.handle,children:"Your username must have more than 1 character."})]}),(0,p.jsxs)(l.A,{required:!0,children:[(0,p.jsx)(l.A.Label,{children:"Your email"}),(0,p.jsx)(c.A,{type:"email",value:x.email,onChange:e=>{b(t=>({...t,email:e.target.value}))}}),"error"===j.email&&(0,p.jsx)(l.A.Validation,{variant:j.email,children:"Your email is not valid."})]}),(0,p.jsxs)(l.A,{required:!0,children:[(0,p.jsx)(l.A.Label,{children:"Your first name"}),(0,p.jsx)(c.A,{value:x.firstName,onChange:e=>{b(t=>({...t,firstName:e.target.value}))}}),"error"===j.firstName&&(0,p.jsx)(l.A.Validation,{variant:j.firstName,children:"Your first name must have more than 1 character."})]}),(0,p.jsxs)(l.A,{required:!0,children:[(0,p.jsx)(l.A.Label,{children:"Your last name"}),(0,p.jsx)(c.A,{value:x.lastName,onChange:e=>{b(t=>({...t,lastName:e.target.value}))}}),"error"===j.lastName&&(0,p.jsx)(l.A.Validation,{variant:j.lastName,children:"Your last name must have more than 1 character."})]}),(0,p.jsxs)(l.A,{required:!0,children:[(0,p.jsx)(l.A.Label,{children:"Your password"}),(0,p.jsx)(c.A,{type:A?"text":"password",value:x.password,onChange:e=>{b(t=>({...t,password:e.target.value}))},trailingAction:(0,p.jsx)(c.A.Action,{onClick:()=>{C(!A)},icon:A?r.V$C:r.bMW,"aria-label":A?"Hide password":"Show password",sx:{color:"var(--fgColor-muted)"}}),sx:{overflow:"visible"}}),"error"===j.password&&(0,p.jsx)(l.A.Validation,{variant:j.password,children:"The password must be between 8 and 64 characters with at least one lower case character, one upper case character, one digit and one special character."})]}),(0,p.jsxs)(l.A,{required:!0,children:[(0,p.jsx)(l.A.Label,{children:"Your password confirmation"}),(0,p.jsx)(c.A,{type:S?"text":"password",value:x.passwordConfirm,onChange:e=>{b(t=>({...t,passwordConfirm:e.target.value}))},trailingAction:(0,p.jsx)(c.A.Action,{onClick:()=>{R(!S)},icon:S?r.V$C:r.bMW,"aria-label":S?"Hide password":"Show password",sx:{color:"var(--fgColor-muted)"}}),sx:{overflow:"visible"}}),"error"===j.passwordConfirm&&(0,p.jsx)(l.A.Validation,{variant:j.passwordConfirm,children:"Passwords do not match."})]}),(0,p.jsx)(i.A,{sx:{display:"flex"},mt:2,children:(0,p.jsx)(d.Q,{variant:"primary",type:"submit",disabled:_||Object.values(j).some(e=>"success"!==e),onClick:async()=>{_||Object.values(j).some(e=>"success"!==e)||(w(!0),v.mutate({handle:x.handle,email:x.email,firstName:x.firstName,lastName:x.lastName,password:x.password,passwordConfirm:x.passwordConfirm},{onSuccess:e=>{e.success&&(y(e.message,{variant:"success"}),f(t))},onSettled:()=>{w(!1)}}))},children:_?"Requesting…":"Request to join"})})]})})})]})}},77130:(e,t,n)=>{n.a(e,async(e,s)=>{try{n.d(t,{N:()=>h});var r=n(9387),i=n(98754),a=n(97582),o=n(72883),l=n(96239),c=n(18683),d=e([o,l]);[o,l]=d.then?(await d)():d;const h=e=>{const{jupyterLabAdapter:t}=e,[n,s]=(0,r.useState)(1),[d,h]=(0,r.useState)();return(0,r.useEffect)(()=>{switch(n){case 1:h((0,c.jsx)(o.a,{}));break;case 2:h((0,c.jsx)(l.S,{jupyterLabAdapter:t}))}},[n]),(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)(i.A,{sx:{display:"flex"},children:[(0,c.jsx)(i.A,{children:(0,c.jsxs)(a.c,{sx:{"> *":{paddingTop:"0px",minWidth:"150px"}},children:[(0,c.jsx)(a.c.Item,{"aria-current":1===n?"page":void 0,onClick:e=>s(1),children:"Datalayer"}),(0,c.jsx)(a.c.Item,{"aria-current":2===n?"page":void 0,onClick:e=>s(2),children:"JupyterLab"})]})}),(0,c.jsx)(i.A,{ml:3,sx:{width:"100%"},children:d})]})})};s()}catch(e){s(e)}})},77290:(e,t,n)=>{n.d(t,{B:()=>b});var s=n(76528),r=n(37461),i=n(95764),a=n(16255),o=n(68122),l=n(63711),c=n(28220),d=n(10018),h=n(85181),u=n(87725),m=n(49267),g=n(72490),p=n(71518),v=n(71932),y=n(18130);function f(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const _="jp-mod-kernel";let w;var x;(x=w||(w={})).kernelNewConsole="running:kernel-new-console",x.kernelNewNotebook="running:kernel-new-notebook",x.kernelOpenSession="running:kernel-open-session",x.kernelShutDown="running:kernel-shut-down",x.showPanel="running:show-panel";const b={activate:function(e,t,n,s,i,a){const o=t.load("jupyterlab"),h=new c.cR,p=new c.vv(h,t);return p.id="jp-running-sessions",p.title.caption=o.__("Running Terminals and Kernels"),p.title.icon=u.z9,p.node.setAttribute("role","region"),p.node.setAttribute("aria-label",o.__("Running Sessions section")),i&&i.add(p,"running-sessions"),a&&(0,d.Z)(h,t,a),function(e,t,n,s){n.ready.then(()=>async function(e,t,n,s){const{commands:i,contextMenu:a}=e,o=new g.Signal({}),c=new m.Throttler(()=>o.emit(),100),d=s.load("jupyterlab"),h=()=>c.invoke().catch(e=>{console.error("Failed to refresh the running kernels.",e)});n.local.kernels.runningChanged.connect(h),n.local.sessions.runningChanged.connect(h);const p=()=>{h(),n.remote?.runtimesManager.changed.connect(h)};p(),n.remoteChanged.connect(p);const v=()=>{h(),n.browser?.kernels.runningChanged.connect(h),n.browser?.sessions.runningChanged.connect(h)};v(),n.browserChanged.connect(v),t.add({name:d.__("Kernels"),running:()=>{const e=[new k({commands:i,location:"local",kernelspecs:n.local.kernelspecs,kernels:n.local.kernels,sessions:n.local.sessions,trans:d})];return n.remote?e.push(new A({commands:i,trans:d,remoteRuntimesManager:n.remote.runtimesManager})):e.push(Object.freeze({label:()=>"remote",labelTitle:()=>"Click to connect",detail:()=>"Disconnected",icon:()=>r.A,open:()=>{i.execute("@datalayer/ui:runtimes:create-widget")}})),n.browser&&e.push(new k({commands:i,location:"browser",kernelspecs:n.browser?.kernelspecs,kernels:n.browser?.kernels,sessions:n.browser?.sessions,trans:d})),e},shutdownAll:()=>Promise.all([n.local.kernels.shutdownAll(),n.remote?.runtimesManager.shutdownAll(),n.browser?.kernels.shutdownAll()]),refreshRunning:()=>Promise.all([n.local.kernels.refreshRunning(),n.local.sessions.refreshRunning(),n.remote?.runtimesManager.refresh(),n.browser?.kernels.refreshRunning(),n.browser?.sessions.refreshRunning()]),runningChanged:o,shutdownLabel:d.__("Shut Down Kernel"),shutdownAllLabel:d.__("Shut Down All"),shutdownAllConfirmationText:d.__("Are you sure you want to permanently shut down all running kernels?")});const y=e=>e.classList.contains(_);i.addCommand(w.kernelNewConsole,{icon:u.zk,label:d.__("New Console for Kernel"),execute:t=>{const n=e.contextMenuHitTest(y),s=t.id??n?.dataset.context;if(s)return i.execute("console:create",{kernelPreference:{id:s}})}}),i.addCommand(w.kernelNewNotebook,{icon:u.JG,label:d.__("New Notebook for Kernel"),execute:t=>{const n=e.contextMenuHitTest(y),s=t.id??n?.dataset.context;if(s)return i.execute("notebook:create-new",{kernelId:s})}}),i.addCommand(w.kernelOpenSession,{icon:e=>"console"===e.type?u.zk:"notebook"===e.type?u.JG:void 0,isEnabled:({path:e,type:t})=>!!t||void 0!==e,label:({name:e,path:t})=>e||l.PathExt.basename(t||d.__("Unknown Session")),execute:({path:e,type:t})=>{if(!t||void 0===e)return;const n="console"===t?"console:open":"docmanager:open";return i.execute(n,{path:e})}}),i.addCommand(w.kernelShutDown,{icon:u.ut,label:d.__("Shut Down Kernel"),execute:t=>{const s=e.contextMenuHitTest(y),r=t.id??s?.dataset.context;if(r)return Promise.all([n.local.kernels.findById(r).then(()=>n.local.kernels.shutdown(r)),n.remote?.runtimesManager.findById(r).then(()=>n.remote?.runtimesManager.shutdown(r)),n.browser?.kernels.findById(r).then(()=>n.browser?.kernels.shutdown(r))])}});const f=[];a.opened.connect(async()=>{const t=a.menu.items.find(e=>"submenu"===e.type&&"jp-contextmenu-connected-sessions"===e.submenu?.id)?.submenu??null;if(!t)return;f.forEach(e=>e.dispose()),f.length=0,t.clearItems();const s=e.contextMenuHitTest(y),r=s?.dataset.context;if(!r)return;const i=w.kernelOpenSession;for(const e of Array.from(n.local.sessions.running()).concat(Array.from(n.browser?.sessions.running()??[])))if(r===e.kernel?.id){const{name:n,path:s,type:r}=e;f.push(t.addItem({command:i,args:{name:n,path:s,type:r}}))}})}(e,t,n,s)).catch(e=>{console.error("The services manager failed to initialize.",e)})}(e,h,n,t),e.shell.add(p,"left",{rank:200,type:"Sessions and Tabs"}),e.commands.addCommand(w.showPanel,{label:o.__("Sessions and Tabs"),execute:()=>{e.shell.activateById(p.id)}}),h},id:"@datalayer/ui:runtimes:running",description:"Provides the running session managers.",provides:c.$F,requires:[h.sQ,p.qk,v.R],optional:[a.E,o.V],autoStart:!0};const j={browser:s.A,local:i.A,remote:r.A};class k{constructor({commands:e,location:t,kernelspecs:n,kernels:s,sessions:r,trans:i}){f(this,"commands",void 0),f(this,"kernelspecs",void 0),f(this,"kernels",void 0),f(this,"sessions",void 0),f(this,"trans",void 0),f(this,"context",void 0),this.commands=e,this.context=t,this.kernelspecs=n,this.kernels=s,this.sessions=r,this.trans=i}get children(){return Array.from(this.kernels.running()).map(e=>new C({commands:this.commands,kernel:e,kernels:this.kernels,sessions:this.sessions,spec:this.kernelspecs.specs?.kernelspecs[e.name],trans:this.trans}))}get className(){return this.kernels.running().next().done?"dla-kernels-empty-group":"dla-kernels-group"}open(){"remote"===this.context&&this.commands.execute("@datalayer/ui:runtimes:create-widget")}shutdown(){this.kernels.shutdownAll().catch(e=>{console.error(`Failed to shutdown all kernels on ${this.context} location.`,e)})}icon(){return j[this.context]}label(){return this.context}detail(){switch(this.context){case"browser":return(0,y.fx)();case"local":case"remote":try{return new URL(this.kernels.serverSettings.baseUrl).hostname}catch(e){return""}}return""}}class A{constructor({commands:e,remoteRuntimesManager:t,trans:n}){f(this,"commands",void 0),f(this,"trans",void 0),f(this,"remoteRuntimesManager",void 0),f(this,"context",void 0),this.commands=e,this.context="remote",this.trans=n,this.remoteRuntimesManager=t}get children(){return this.remoteRuntimesManager.get().map(e=>{const t=this.remoteRuntimesManager.getServices(e.pod_name);return t?new C({commands:this.commands,kernel:{...e,id:e.pod_name.split("-",2).reverse()[0],name:e.name},kernels:this.remoteRuntimesManager,sessions:t.sessions,spec:t.kernelspecs.specs?.kernelspecs[e.name]?{...t.kernelspecs.specs.kernelspecs[e.name],name:e.environment_name,display_name:e.environment_title}:void 0,trans:this.trans}):null}).filter(e=>!!e)}get className(){return 0===this.remoteRuntimesManager.get().length?"dla-kernels-empty-group":"dla-kernels-group"}detail(){return new URL(this.remoteRuntimesManager.serverSettings.baseUrl).hostname}icon(){return j[this.context]}label(){return this.context}open(){this.commands.execute("@datalayer/ui:runtimes:create-widget")}shutdown(){this.remoteRuntimesManager.shutdownAll().catch(e=>{console.error(`Failed to shutdown all kernels on ${this.context} location.`,e)})}}class C{constructor(e){f(this,"className",void 0),f(this,"context",void 0),f(this,"commands",void 0),f(this,"kernel",void 0),f(this,"kernels",void 0),f(this,"sessions",void 0),f(this,"spec",void 0),f(this,"trans",void 0),this.className=_,this.commands=e.commands,this.kernel=e.kernel,this.context=this.kernel.id,this.kernels=e.kernels,this.sessions=e.sessions,this.spec=e.spec||null,this.trans=e.trans}get children(){const e=[],t=w.kernelOpenSession,{commands:n}=this;for(const s of this.sessions.running())if(this.kernel.id===s.kernel?.id){const{name:r,id:i,path:a,type:o}=s;e.push({className:"ITEM_CLASS",context:this.kernel.id,open:()=>{n.execute(t,{name:r,path:a,type:o})},icon:()=>"console"===o?u.zk:"notebook"===o?u.JG:u.H8,label:()=>r,labelTitle:()=>a,detail:()=>i})}return e}shutdown(){return this.kernels.shutdown(this.kernel.id)}icon(){const{spec:e}=this;return e&&e.resources?e.resources["logo-svg"]||e.resources["logo-64x64"]||e.resources["logo-32x32"]:u.H8}label(){const{kernel:e,spec:t}=this;return t?.display_name||e.name}labelTitle(){const{trans:e}=this,{id:t}=this.kernel,n=[`${this.label()}: ${t}`];for(const t of this.sessions.running())if(this.kernel.id===t.kernel?.id){const{path:s,type:r}=t;n.push(e.__("%1\nPath: %2",r,s))}return n.join("\n\n")}detail(){return this.kernel.id}}},78173:(e,t,n)=>{n.a(e,async(e,s)=>{try{n.r(t),n.d(t,{default:()=>m,runtimesPlugins:()=>u});var r=n(37907),i=n(92843),a=n(1162),o=n(39170),l=n(89161),c=n(69513),d=n(77290),h=e([r,a,l]);[r,a,l]=h.then?(await h)():h;const u=[...l.cB,...r.ih,i.YN,a.zg,a.dU,o.a,c.s,d.B],m=u;s()}catch(e){s(e)}})},78269:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAYAAAB4ka1VAAAAsElEQVQIHQGlAFr/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA7+r3zKmT0/+pk9P/7+r3zAAAAAAAAAAABAAAAAAAAAAA6OPzM+/q9wAAAAAA6OPzMwAAAAAAAAAAAgAAAAAAAAAAGR8NiRQaCgAZIA0AGR8NiQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQyoYJ/SY80UAAAAASUVORK5CYII="},78806:(e,t,n)=>{n.d(t,{q:()=>j});var s=n(9448),r=n(15106),i=n(63711),a=n(22462),o=n(17788),l=n(9570),c=n(26127),d=n(2453),h=n(15115),u=n(58875),m=n(80736),g=n(38621),p=n(25365),v=n(29197),y=n(14137),f=n(69453),_=n(18683);const w=e=>{const{baseURL:t=""}=e,{configuration:n}=(0,l._O)(),s=(0,o.Z)();return(0,_.jsxs)(h.W,{children:[(0,_.jsx)(h.W.Anchor,{children:(0,_.jsx)(u.K,{icon:g.tno,variant:"invisible","aria-label":"Runtimes More Menu"})}),(0,_.jsx)(h.W.Overlay,{width:"medium",children:(0,_.jsx)(f.WV,{children:(0,_.jsxs)(m.l,{children:[(0,_.jsxs)(m.l.Group,{children:[(0,_.jsx)(m.l.GroupHeading,{children:"More…"}),!n?.whiteLabel&&(0,_.jsxs)(m.l.Item,{onSelect:()=>s(`/${t}/settings`),children:[(0,_.jsx)(m.l.LeadingVisual,{children:(0,_.jsx)(p.A,{})}),"Settings",(0,_.jsx)(m.l.Description,{variant:"block",children:"Configure your personal settings."})]}),(0,_.jsxs)(m.l.Item,{onSelect:()=>s(`/${t}/about`),children:[(0,_.jsx)(m.l.LeadingVisual,{children:(0,_.jsx)(v.A,{})}),"About",(0,_.jsx)(m.l.Description,{variant:"block",children:"About Runtimes."})]})]}),!n?.whiteLabel&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(m.l.Divider,{}),(0,_.jsxs)(m.l.Item,{variant:"danger",onSelect:e=>s(`/${t}/logout`),children:[(0,_.jsx)(m.l.LeadingVisual,{children:(0,_.jsx)(y.A,{})}),"Logout"]})]})]})})})]})},x=a.Ay.div`
  box-sizing: border-box !important;
  color: var(--fgColor-default);
  &:focus { color: var(--fgColor-muted); }
  &:hover { color: var(--fgColor-muted); }
`;function b(e){const{baseURL:t="",onlyLogin:n=!1}=e,{configuration:s}=(0,l._O)(),{user:a}=(0,c.Y)(),h=(0,o.Z)();return(0,_.jsx)(r.A,{sx:{backgroundColor:"canvas.subtle",color:"fg.default",paddingTop:0,height:45,paddingBottom:0},children:a?(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(r.A.Item,{full:!!a,children:(0,_.jsx)(r.A.Link,{onClick:e=>h(i.URLExt.join("/",t),e),children:(0,_.jsx)(x,{children:"Home"})})}),(0,_.jsx)(r.A.Item,{children:(0,_.jsx)(r.A.Link,{onClick:e=>h(i.URLExt.join("/",t,"runtimes"),e),children:(0,_.jsx)(x,{children:"Runtimes"})})}),(0,_.jsx)(r.A.Item,{children:(0,_.jsx)(r.A.Link,{onClick:e=>h(i.URLExt.join("/",t,"environments"),e),children:(0,_.jsx)(x,{children:"Environments"})})}),(0,_.jsx)(r.A.Item,{children:(0,_.jsx)(r.A.Link,{onClick:e=>h(i.URLExt.join("/",t,d.Ek),e),children:(0,_.jsx)(x,{children:"Usage"})})}),(0,_.jsx)(r.A.Item,{children:(0,_.jsx)(r.A.Link,{onClick:e=>h(i.URLExt.join("/",t,"docs"),e),children:(0,_.jsx)(x,{children:"Documentation"})})}),(0,_.jsx)(r.A.Item,{children:(0,_.jsx)(r.A.Link,{onClick:e=>h(i.URLExt.join("/",t,d.uP),e),children:(0,_.jsx)(x,{children:"Support"})})}),!n&&!s?.whiteLabel&&(0,_.jsx)(r.A.Item,{children:(0,_.jsx)(r.A.Link,{onClick:e=>h(`/${t}/profile`,e),children:(0,_.jsx)(x,{children:"Profile"})})}),!n&&(0,_.jsx)(r.A.Item,{children:(0,_.jsx)(w,{baseURL:t})})]}):(0,_.jsx)(_.Fragment,{children:(0,_.jsx)(r.A.Item,{children:(0,_.jsx)(r.A.Link,{onClick:e=>{h(`/${t}/login`,e)},children:(0,_.jsx)(x,{children:"Login"})})})})})}function j(e){const{children:t,baseURL:n,onlyLogin:r}=e;return(0,_.jsxs)(s.az,{sx:{fontFamily:"normal",color:"fg.default"},children:[(0,_.jsx)(b,{baseURL:n,onlyLogin:r}),t]})}},82252:(e,t,n)=>{n.d(t,{Ss:()=>x,XD:()=>b});var s=n(42389),r=n(72490),i=n(81045),a=n(25402),o=n(97789),l=n(98238),c=n(49267),d=n(36687),h=n(92131),u=n(6568),m=n(61687);function g(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class p extends o.BaseManager{constructor({serverSettings:e,standby:t}){super({serverSettings:e}),g(this,"_changed",new r.Signal(this)),g(this,"_connectionFailure",new r.Signal(this)),g(this,"_environments",new Array),g(this,"_isReady",!1),g(this,"_poll",void 0),g(this,"_ready",new l.PromiseDelegate),this._poll=new c.Poll({auto:!1,factory:()=>this.refreshEnvironments(),frequency:{interval:61e3,backoff:!0,max:3e5},name:"@datalayer/ui:runtimes:EnvironmentsManager#environments",standby:t??"when-hidden"}),this._ready.promise.then(async()=>{await this._poll.start(),await this._poll.tick,this._isReady=!0}),this.refreshEnvironments().then(()=>{this._ready.resolve()}).catch(e=>{console.error("Failed to fetch the remote environments.",e),this._ready.reject(e)})}get changed(){return this._changed}get connectionFailure(){return this._connectionFailure}get isReady(){return this._isReady}get ready(){return this._ready.promise}dispose(){this.isDisposed||(this._poll.dispose(),super.dispose())}get(){return[...this._environments]}async refresh(){await this._poll.refresh(),await this._poll.tick}async refreshEnvironments(){try{const e=await(0,d.DL)();l.JSONExt.deepEqual(this._environments,e)||(this._environments=e,this._changed.emit([...this._environments]))}catch(e){if(e instanceof o.ServerConnection.ResponseError)throw e;this._connectionFailure.emit(e)}}}class v{constructor({serverSettings:e,standby:t}){g(this,"_connectionFailure",new r.Signal(this)),g(this,"_contents",null),g(this,"_isDisposed",!1),g(this,"_ready",void 0),g(this,"kernels",void 0),g(this,"kernelspecs",void 0),g(this,"serverSettings",void 0),g(this,"sessions",void 0),this.serverSettings=e;const n=this.kernels=new o.KernelManager({serverSettings:e,standby:t});this.kernelspecs=new o.KernelSpecManager({serverSettings:e,standby:t}),this.sessions=new o.SessionManager({kernelManager:n,serverSettings:e,standby:t}),this.kernels.connectionFailure.connect(this._onConnectionFailure,this),this.kernelspecs.connectionFailure.connect(this._onConnectionFailure,this),this.sessions.connectionFailure.connect(this._onConnectionFailure,this),this._ready=Promise.all([this.kernels.ready,this.kernelspecs.ready,this.sessions.ready]).then(()=>{})}get contents(){return this._contents||(this._contents=new o.ContentsManager({serverSettings:this.serverSettings})),this._contents}get isDisposed(){return this._isDisposed}get ready(){return this._ready}get connectionFailure(){return this._connectionFailure}dispose(){this.isDisposed||(this._isDisposed=!0,this.sessions.connectionFailure.disconnect(this._onConnectionFailure,this),this.kernels.connectionFailure.disconnect(this._onConnectionFailure,this),this.kernelspecs.connectionFailure.disconnect(this._onConnectionFailure,this),r.Signal.clearData(this),this.contents?.dispose(),this.sessions.dispose(),this.kernels.dispose(),this.kernelspecs.dispose())}_onConnectionFailure(e,t){this._connectionFailure.emit(t)}}class y extends o.BaseManager{constructor({serverSettings:e,standby:t}){super({serverSettings:e}),g(this,"_connectionFailure",new r.Signal(this)),g(this,"_disposeStateSubscription",()=>{}),g(this,"_isReady",!1),g(this,"_ready",new l.PromiseDelegate),g(this,"_standby",void 0),g(this,"_changed",new r.Signal(this)),g(this,"_remoteServiceManager",new Map),g(this,"_refreshLock",new Set),this.serverSettings,this._standby=t,this._ready.promise.then(async()=>{const e=async()=>{for(;this._refreshLock.size;)await Promise.all(this._refreshLock);try{const e=h.LH.getState().runtimePods,t=e.map(e=>e.pod_name),n=Array.from(this._remoteServiceManager.keys());for(const t of e)if(!n.includes(t.pod_name)){const e=new v({serverSettings:(0,a.X)(t.ingress,t.token),standby:this._standby});this._remoteServiceManager.set(t.pod_name,e),e.connectionFailure.connect((e,n)=>{404===n.response?.status&&(console.info(`Remote kernel ${t.pod_name} is not found. Removing it from the state.`),this._remoteServiceManager.delete(t.pod_name),e.dispose())}),await e.ready}const s=await Promise.all(Array.from(this._remoteServiceManager.entries()).map(async([n,s])=>{if(t.includes(n)){const t=s.kernels.running().next(),r=e.find(e=>e.pod_name===n);return t.done?(console.warn(`No kernel in pod ${n}.`),{...r,id:"",name:r?.environment_name,execution_state:"unknown"}):{...r,...t.value,name:r?.environment_name}}s.kernels.isActive;try{await s.kernels.shutdownAll()}catch(e){console.debug(`Fail to shutdown remote kernel ${n}.`,e)}s.dispose(),this._remoteServiceManager.delete(n),console.info(`Removing Zombie Runtime ${n}`)}));h.LH.getState().setRuntimeModels(s.filter(e=>!!e))}catch(e){if(e instanceof o.ServerConnection.ResponseError)throw e;this._connectionFailure.emit(e)}};e().catch(e=>{console.error("Failed to update kernel models list.",e)}),this._disposeStateSubscription=h.LH.subscribe((t,n)=>{l.JSONExt.deepEqual(t.runtimePods,n.runtimePods)||e().catch(e=>{console.error("Failed to update kernel models list.",e)}),l.JSONExt.deepEqual(t.runtimeModels,n.runtimeModels)||this._changed.emit([...t.runtimeModels])}),this._isReady=!0}),this.refresh().then(()=>{this._ready.resolve()}).catch(e=>{console.error("Failed to fetch the remote kernels.",e),this._ready.reject(e)})}get connectionFailure(){return this._connectionFailure}get isReady(){return this._isReady}get ready(){return this._ready.promise}get changed(){return this._changed}dispose(){this.isDisposed||(this._disposeStateSubscription(),super.dispose())}get(){return[...h.LH.getState().runtimeModels]}getServices(e){return this._remoteServiceManager.get(e)}async refresh(){await h.LH.getState().refreshRuntimePods()}async startNew(e,t){if(this.isDisposed)throw new Error("Manager is disposed.");const{configuration:n,runtimeModels:s}=h.LH.getState();if("notebook"===e.type&&s.filter(e=>"notebook"===e.type).length>=n.maxNotebookRuntimes||"cell"===e.type&&s.filter(e=>"cell"===e.type).length>=n.maxCellRuntimes)throw new u.f(`You have reached your '${e.type}' Remote Runtimes limit.`);const r=new l.PromiseDelegate;let i,o;this._refreshLock.add(r.promise);try{i=await(0,d.xB)({...e});const t=i.pod_name;o=new v({serverSettings:(0,a.X)(i.ingress,i.token),standby:this._standby}),this._remoteServiceManager.set(t,o)}finally{r.resolve(),this._refreshLock.delete(r.promise)}await o.ready;const c=o.kernels,g=Date.now();for(;c.running().next().done&&Date.now()-g<1e4;)await c.refreshRunning();const p=c.running().next();if(!p.done){const e=p.value,n={...e,...i,name:i.environment_name};return h.LH.getState().addRuntimeModel(n),c.connectTo({...t,model:e})}{const e=i.pod_name,t=this._remoteServiceManager.get(e);this._remoteServiceManager.delete(e);const n=new l.PromiseDelegate;this._refreshLock.add(n.promise),(0,d.c_)({id:e,reason:"no_kernel"}).catch(t=>{console.error(`Failed to delete broken remote kernel ${e}.`)}).finally(()=>{n.resolve(),this._refreshLock.delete(n.promise)}),t?.dispose()}throw new m.N(`No kernel running on server '${i.pod_name}'.`,{cause:"Unable to connect to a kernel within the remote machine."})}async findById(e){for(const t of this.get())if(t.id===e)return t;await this.refresh();for(const t of this.get())if(t.id===e)return t}connectTo(e){const{model:{id:t}}=e;let n;for(const e of this.get())if(e.id===t){n=e;break}if(n){const t=this._remoteServiceManager.get(n.pod_name);if(t)return t.kernels.connectTo(e)}throw new Error("Unable to find the kernel.")}async shutdown(e){const t=await this.findById(e);if(t){const n=new l.PromiseDelegate;this._refreshLock.add(n.promise);try{const n=this._remoteServiceManager.get(t.pod_name);e&&await(n?.kernels.shutdown(e)),await(0,d.c_)({id:t.pod_name}),n?.dispose(),this._remoteServiceManager.delete(t.pod_name),h.LH.getState().removeRuntimeModel(e)}finally{n.resolve(),this._refreshLock.delete(n.promise)}}}async shutdownAll(){const e=new l.PromiseDelegate;this._refreshLock.add(e.promise);try{await Promise.all(Array.from(this._remoteServiceManager.entries()).map(async([e,t])=>{await t.kernels.shutdownAll(),await(0,d.c_)({id:e}),t.dispose()})),this._remoteServiceManager.clear(),h.LH.getState().setRuntimeModels([])}finally{e.resolve(),this._refreshLock.delete(e.promise)}}async refreshKernels(){return this.refresh()}async snapshotRuntime({id:e,podName:t,name:n,description:s,stop:r}){if(!e&&!t)throw new Error("You must provide either the runtime ID or the runtime pod name.");if(!t){const n=await this.findById(e);t=n?.pod_name}if(t)return(0,d.zW)({id:t,name:n,description:s,stop:r})}async loadRuntimeSnapshot({id:e,podName:t,snapshot:n}){if(!e&&!t)throw new Error("You must provide either the kernel ID or the kernel pod name.");if(!t){const n=await this.findById(e);t=n?.pod_name}if(t)return(0,d.Pk)({id:t,from:n})}}class f{constructor({serverSettings:e,standby:t}){g(this,"_connectionFailure",new r.Signal(this)),g(this,"_isDisposed",!1),g(this,"_isReady",!1),g(this,"_ready",void 0),g(this,"environments",void 0),g(this,"runtimesManager",void 0),g(this,"serverSettings",void 0),this.serverSettings=e,this.environments=new p({serverSettings:e,standby:t}),this.runtimesManager=new y({serverSettings:e,standby:t}),this.environments.connectionFailure.connect(this._onConnectionFailure,this),this.runtimesManager.connectionFailure.connect(this._onConnectionFailure,this),this._ready=Promise.all([this.environments.ready,this.runtimesManager.ready]).then(()=>{}),this._ready.then(()=>{this._isReady=!0})}get connectionFailure(){return this._connectionFailure}get isDisposed(){return this._isDisposed}get isReady(){return this._isReady}get ready(){return this._ready}dispose(){this.isDisposed||(this._isDisposed=!0,this.environments.connectionFailure.disconnect(this._onConnectionFailure,this),this.runtimesManager.connectionFailure.disconnect(this._onConnectionFailure,this),r.Signal.clearData(this),this.environments.dispose(),this.runtimesManager.dispose())}_onConnectionFailure(e,t){this._connectionFailure.emit(t)}}var _=n(9570);function w(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class x{constructor(e){w(this,"_remoteServiceManager",void 0),w(this,"_localServiceManager",void 0),w(this,"_browserServiceManager",void 0),w(this,"_browserChanged",new r.Signal(this)),w(this,"_remoteChanged",new r.Signal(this)),_.$K.getState().configuration.jupyterServerless?this._localServiceManager=new s.Od(e.serverSettings):this._localServiceManager=e,this._localServiceManager=e}get browser(){return this._browserServiceManager}set browser(e){this._browserServiceManager=e,this._browserChanged.emit(this._browserServiceManager)}get browserChanged(){return this._browserChanged}get local(){return this._localServiceManager}get remote(){return this._remoteServiceManager}set remote(e){this._remoteServiceManager=e,this._remoteChanged.emit(this._remoteServiceManager)}get remoteChanged(){return this._remoteChanged}get isReady(){return this._localServiceManager.isReady}get ready(){return this._localServiceManager.ready}get connectionFailure(){return this._localServiceManager.connectionFailure}get isDisposed(){return this._localServiceManager.isDisposed}get builder(){return this._localServiceManager.builder}get contents(){return this._localServiceManager.contents}get events(){return this._localServiceManager.events}get serverSettings(){return this._localServiceManager.serverSettings}get sessions(){return this._localServiceManager.sessions}get kernels(){return this._localServiceManager.kernels}get kernelspecs(){return this._localServiceManager.kernelspecs}get settings(){return this._localServiceManager.settings}get terminals(){return this._localServiceManager.terminals}get user(){return this._localServiceManager.user}get workspaces(){return this._localServiceManager.workspaces}get nbconvert(){return this._localServiceManager.nbconvert}dispose(){this._localServiceManager.dispose()}}async function b(e,t,n,s){e.remote?.serverSettings.baseUrl===t?.runtimesRunUrl&&n||e.remote&&(e.remote.dispose(),e.remote=void 0),s?.roles.includes(i.n.Member.handle)&&n&&t?.runtimesRunUrl&&!e.remote&&(e.remote=new f({serverSettings:(0,a.X)(t.runtimesRunUrl,n)}))}},85584:(e,t,n)=>{n.a(e,async(e,s)=>{try{n.d(t,{n:()=>u});var r=n(88037),i=n(64761),a=n(89318),o=n(18683),l=e([a]),c=l.then?(await l)():l;function d(e){var t=h(e,"string");return"symbol"==typeof t?t:t+""}function h(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}a=c[0];class u extends r._Q{constructor(e){var t,n,s;super(),t=this,s=void 0,(n=d(n="_app"))in t?Object.defineProperty(t,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[n]=s,this._app=e,this.addClass("dla-Container")}render(){return(0,o.jsx)(a.P,{baseRoute:"",memoryRouter:!0,jupyterLabAdapter:i.H.create(this._app)})}}s()}catch(m){s(m)}})},89161:(e,t,n)=>{n.a(e,async(e,s)=>{try{n.d(t,{cB:()=>W,ou:()=>q});var r=n(80955),i=n(16255),a=n(19823),o=n(62863),l=n(59179),c=n(41665),d=n(63711),h=n(60872),u=n(97371),m=n(5279),g=n(97789),p=n(85181),v=n(87725),y=n(72879),f=n(88037),_=n(14809),w=n(34477),x=n(64761),b=n(71752),j=n(37461),k=n(43602),A=n(69453),C=n(59017),S=n(41273),R=n(26127),M=n(92131),L=n(71932),P=n(65506),E=n(82252),D=n(37032),N=n(71518),F=n(85584),U=n(18683),I=e([P,D,F]);let q;[P,D,F]=I.then?(await I)():I,(T=q||(q={})).createWidget="@datalayer/ui:runtimes:create-widget",T.launchRemoteRuntime="@datalayer/ui:runtimes:launch-remote";const O={id:"@datalayer/ui:runtimes:manager",description:"Provides the document manager.",provides:h.cR,requires:[h.gi,l.i_],optional:[p.sQ,a.n3,r.n.IInfo,h.fA],activate:(e,t,n,s,r,i,a)=>{const{docRegistry:o,serviceManager:l}=e,c=s??p.wK,d=e.restored.then(()=>{});return new P.V({registry:o,manager:l,opener:t,when:d,setBusy:(r&&(()=>r.setBusy()))??void 0,sessionDialogs:n,translator:c??p.wK,isConnectedCallback:()=>!i||i.isConnected,recentsManager:a??void 0})}},z={id:"@datalayer/ui:runtimes:service-manager",description:"Overrides the Jupyter service manager.",provides:N.qk,autoStart:!0,activate:e=>{console.log("Activating JupyterLab @datalayer/ui:runtimes:service-manager plugin");const t=new E.Ss(e.serviceManager);return e.serviceManager=t,t}},V={id:"@datalayer/ui:runtimes:sessionDialogs",description:"Provides the session context dialogs.",provides:l.i_,optional:[p.sQ],requires:[N.qk],autoStart:!0,activate:async(e,t,n)=>new D.V({translator:n??p.wK},t,e.commands)},H={id:N.UC,autoStart:!1,requires:[L.R,N.qk],optional:[l.kn,u.k,i.E,m.co,l.zG],provides:N.Pl,activate:async(e,t,n,s,r,i,a,l)=>{const{commands:h}=e,u=g.ServerConnection.makeSettings(),m=d.URLExt.join(u.baseUrl,"jupyter_kernels","config");try{const e=await g.ServerConnection.makeRequest(m,{},u);if(e.ok){const t=await e.json(),{setConfiguration:n,setVersion:s}=M.LH.getState();n(t.configuration),s(t.version)}else console.error("Failed to load @datalayer/ui:runtimes configuration.")}catch(e){console.error("Failed to load @datalayer/ui:runtimes configuration.",e)}const{configuration:p,multiServiceManager:L,setMultiServiceManager:P}=M.LH.getState(),{jupyterLabAdapter:D,setJupyterLabAdapter:I}=w.uJ.getState(),T={configuration:p};D||I(x.H.create(e)),L||P(n);let O=!1;const z={label:"Runtimes",caption:"Show Runtimes",icon:k.A},V=e=>{if(!O){O=!0;const{category:t="Datalayer",icon:n=null,name:i="Runtimes",rank:a=0}=e.launcher??{},o=q.createWidget;(async()=>{if(i&&(z.label=i,z.caption=`Show ${i}`),n)try{const e=await fetch(n),t=await e.text();z.icon=new y.Tl({name:"@datalayer/ui:launcher-icon",svgstr:t})}catch(e){console.warn(`Failed to fetch the custom icon SVG from ${n}.`)}h.notifyCommandChanged(o)})(),s?.addItem({command:o,category:t}),r&&r.add({command:o,category:t,rank:a})}const{user:t,token:i}=R.J7.getState();console.debug("Retrieved Datalayer user and token."),(0,E.XD)(n,e,i,t),R.J7.subscribe((t,s)=>{t.token&&t.token!==s.token&&(console.log("Datalayer IAM current and previous states.",t,s),(0,E.XD)(n,e,t.token,t.user))})};t.ready.finally(()=>{console.log("Datalayer core plugin is ready."),V(t.configuration.configuration),t.configuration.configurationChanged.connect((e,t)=>{V(t)})});const W=new c.H({namespace:"jupyter-kernels"}),K=q.createWidget;h.addCommand(K,{caption:()=>z.caption,label:()=>z.label,icon:()=>z.icon,execute:()=>{const t=new F.n(e),n=new o.p({content:t});n.title.label=z.label,n.title.icon=z.icon,e.shell.add(n,"main"),W.add(n)}}),i&&i.restore(W,{command:K,name:()=>N.UC}).catch(e=>{console.warn("Unable to restore kernel plugin.",e)}),h.addCommand(q.launchRemoteRuntime,{label:"Launch a Remote Runtime",caption:"Launch a Notebook with a Remote Runtime",icon:e=>e.isLauncher?v.JG:b.A,execute:async()=>{if(n.remote){const e=f._Q.create((0,U.jsx)(A.WV,{children:(0,U.jsx)(C.D,{manager:n.remote,onSubmit:async t=>{e.dispose(),t&&await h.execute(q.createWidget),await n.kernels.refreshRunning()},markdownParser:a??void 0,sanitizer:l??void 0})}));_.x0.attach(e,document.body),await(0,d.signalToPromise)(e.disposed)}else await h.execute(q.createWidget)}}),r&&r.add({command:q.launchRemoteRuntime,category:"Notebook",kernelIconUrl:`data:image/svg+xml,${j.A.svgstr}`,rank:-1,args:{isLauncher:!0}});const $=new Set;return setInterval(()=>{const t=M.LH.getState().runtimeModels;t.forEach(t=>{const s=t.expired_at?1e3*parseFloat(t.expired_at)-Date.now():null;if(!$.has(t.pod_name)&&s&&s<R.zo){const{dismiss:r,enqueueToast:i}=(0,S.d)(),a=i(`Runtime '${t.given_name??t.name}' is going to end in less than ${(R.zo/6e4).toFixed(0)} minutes.`,{variant:"warning",actions:[{label:"Show more…",callback:()=>{e.commands.execute(q.createWidget)}}]});$.add(t.pod_name),setTimeout(()=>{n.remote?.runtimesManager.refresh(),r(a),$.delete(t.pod_name)},s)}});const s=t.map(e=>e.pod_name);[...$].forEach(e=>{s.includes(e)||$.delete(e)})},6e4),console.log(`JupyterLab plugin ${H.id} is activated.`),T}},W=[H,O,z,V];s()}catch(e){s(e)}var T})},89318:(e,t,n)=>{n.a(e,async(e,s)=>{try{n.d(t,{P:()=>v});var r=n(20568),i=n(26939),a=n(61409),o=n(63711),l=n(16526),c=n(41757),d=n(90278),h=n(58883),u=n(23787),m=n(18683),g=e([u]),p=g.then?(await g)():g;function v(e){const{memoryRouter:t=!1,baseRoute:n=""}=e;return(0,m.jsx)(m.Fragment,{children:t?(0,m.jsx)(l.Ht,{client:h.q,children:(0,m.jsx)(d.w2,{children:(0,m.jsx)(r.fS,{initialEntries:[o.URLExt.join("/",n)],children:(0,m.jsx)(u.Ig,{...e})})})}):(0,m.jsx)(l.Ht,{client:h.q,children:(0,m.jsxs)(c.cG,{children:[(0,m.jsx)(i.Kd,{children:(0,m.jsx)(u.Ig,{...e})}),(0,m.jsx)(a.N9,{})]})})})}u=p[0],s()}catch(y){s(y)}})},91676:(e,t,n)=>{n.d(t,{q:()=>b});var s=n(9387),r=n(38621),i=n(80006),a=n(24860),o=n(70216),l=n(3556),c=n(48453),d=n(99180),h=n(23093),u=n(49261),m=n(9448),g=n(9570),p=n(17788),v=n(2453),y=n(25929);const f=JSON.parse('[{"question":"I\'m seeing Runtimes without ID or with status unknown for a long time","answer":"This is what we call a Zombie Runtime. It can happen if the cluster is under high pressure. You can click on the delete button to remove it."},{"question":"I don\'t have access to some features","answer":"You may need to upgrade your subscription. Don\'t hesitate to contact us directly."}]');var _=n(18683);function w(e){const{match:t}=e,n=t.value??"",s=new Array;let r=0;for(const e of t.indices)e[0]>r&&s.push(n.slice(r,e[0])),s.push((0,_.jsx)(i.A,{sx:{backgroundColor:"var(--bgColor-attention-emphasis)",color:"var(--fgColor-onEmphasis)"},children:n.slice(e[0],e[1]+1)})),r=e[1]+1;const a=n.slice(r);return a&&s.push(a),(0,_.jsx)(_.Fragment,{children:s})}function x(){const e=(0,p.Z)(),[t,n]=(0,s.useState)(""),{configuration:o}=(0,g._O)(),l=(0,s.useMemo)(()=>new y.A(f,{includeMatches:!0,keys:["question","answer"]}),[]),c=(0,s.useMemo)(()=>l.search(t),[t,l]),d=(0,s.useCallback)(e=>{n(e.target.value)},[]),u=(0,s.useCallback)(()=>{e(v.$r)},[]);return(0,_.jsxs)(m.az,{sx:{display:"grid",gridTemplateColumns:"1fr"},children:[(0,_.jsx)(i.A,{as:"h3",sx:{alignSelf:"center"},children:"How can we help you?"}),(0,_.jsx)(a.A,{sx:{alignSelf:"center"},type:"search",leadingVisual:r.WIv,placeholder:"Search the help",value:t,onChange:d}),(0,_.jsx)(m.az,{children:c.length?(0,_.jsx)("ol",{style:{listStyle:"none",paddingInlineStart:0},children:c.map(e=>{const t=e.matches?.find(e=>"question"===e.key),n=e.matches?.find(e=>"answer"===e.key);return(0,_.jsxs)("li",{style:{borderBottom:"var(--borderWidth-thin) solid var(--borderColor-default)"},children:[(0,_.jsx)(i.A,{as:"h4",children:t?(0,_.jsx)(w,{match:t}):e.item.question}),(0,_.jsx)(i.A,{as:"p",children:n?(0,_.jsx)(w,{match:n}):e.item.answer})]},e.refIndex)})}):t?(0,_.jsx)(h.E,{border:!0,spacious:!0,children:(0,_.jsx)(h.E.Heading,{children:"No results for your query."})}):(0,_.jsx)("ol",{style:{listStyle:"none",paddingInlineStart:0},children:f.map((e,t)=>(0,_.jsxs)("li",{style:{borderBottom:"var(--borderWidth-thin) solid var(--borderColor-default)"},children:[(0,_.jsx)(i.A,{as:"h4",children:e.question}),(0,_.jsx)(i.A,{as:"p",children:e.answer})]},t))})}),!o?.whiteLabel&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(i.A,{as:"h3",sx:{marginTop:"var(--stack-gap-spacious)"},children:"Not finding your answer?"}),(0,_.jsxs)(m.az,{sx:{display:"grid",gridTemplateColumns:"1fr min-content",gridTemplateRows:"min-content",gridTemplateAreas:"\n              'title visual'\n              'message message'\n            ",border:"var(--borderWidth-thin) solid var(--borderColor-default)",borderRadius:"var(--borderRadius-medium)",padding:"var(--stack-padding-normal)",cursor:"pointer"},onClick:u,children:[(0,_.jsx)(i.A,{as:"h4",sx:{gridArea:"title"},children:"Contact Us"}),(0,_.jsx)(m.az,{sx:{gridArea:"visual",alignSelf:"center",color:"var(--fgColor-accent)"},children:(0,_.jsx)(r.uIH,{})}),(0,_.jsx)(i.A,{sx:{gridArea:"message"},children:"Contact us directly for assistance."})]})]})]})}function b(){const{configuration:e}=(0,g._O)();return(0,_.jsxs)(o.M,{containerWidth:"full",padding:"normal",style:{overflow:"visible",minHeight:"calc(100vh - 45px)"},children:[(0,_.jsx)(o.M.Header,{children:(0,_.jsx)(u.z,{children:(0,_.jsx)(u.z.TitleArea,{variant:"large",children:(0,_.jsx)(u.z.Title,{children:e?.whiteLabel?"Support":"Datalayer Support"})})})}),(0,_.jsxs)(o.M.Content,{children:[(0,_.jsxs)(m.az,{mt:3,mb:3,children:[(0,_.jsx)(m.az,{mb:3,children:(0,_.jsx)(l.A,{sx:{fontSize:2,mb:2},children:"Having a feature request or a bug report?"})}),e.whiteLabel?(0,_.jsx)(_.Fragment,{children:(0,_.jsxs)(m.az,{mb:3,children:["Please browse our ",(0,_.jsx)(c.A,{target:"_blank",href:e.brand.supportUrl,children:"support page"}),"."]})}):(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)(m.az,{mb:3,children:["Please first search for any existing or similar ",(0,_.jsx)(c.A,{target:"_blank",href:"https://github.com/datalayer/support/issues",children:"issue"})," or ",(0,_.jsx)(c.A,{target:"_blank",href:"https://github.com/datalayer/support/discussions",children:"discussion"})," before opening a new one."]}),(0,_.jsx)(m.az,{mb:3,children:"If the scope is clear, please open directly an issue."}),(0,_.jsx)(m.az,{mb:3,children:(0,_.jsx)(d.Q,{variant:"primary",onClick:e=>{e.preventDefault(),window.open("https://github.com/datalayer/support/issues/new/choose")},children:"Open an issue"})}),(0,_.jsx)(m.az,{mb:3,children:"If the scope is not clear and you would like prior input or advice, please first open a discussion."}),(0,_.jsx)(d.Q,{variant:"primary",onClick:e=>{e.preventDefault(),window.open("https://github.com/datalayer/support/discussions/new")},children:"Open a discussion"})]})]}),(0,_.jsx)(x,{})]})]})}},94009:(e,t,n)=>{n.d(t,{w:()=>h});var s=n(98754),r=n(3556),i=n(80006),a=n(70216),o=n(49261),l=n(23267),c=n(18683);const d=e=>{const{k:t,v:n,code:r}=e;return(0,c.jsxs)(s.A,{sx:{color:"fg.onEmphasis",bg:"neutral.emphasis",p:2},children:[(0,c.jsxs)(i.A,{children:[t,": "]}),(0,c.jsx)(i.A,{as:r?"code":"span",style:{overflowWrap:"anywhere"},children:n})]})},h=()=>{const e=(0,l.mt)(),t=e.core().configuration;return(0,c.jsxs)(a.M,{containerWidth:"full",padding:"normal",style:{overflow:"visible",minHeight:"calc(100vh - 45px)"},children:[(0,c.jsx)(a.M.Header,{children:(0,c.jsx)(o.z,{children:(0,c.jsx)(o.z.TitleArea,{variant:"large",children:(0,c.jsx)(o.z.Title,{children:"Settings"})})})}),(0,c.jsxs)(a.M.Content,{children:[(0,c.jsx)(r.A,{as:"h2",sx:{fontSize:4,fontWeight:"normal",mb:2},children:"User"}),(0,c.jsx)(d,{k:"Display Name",v:e.iam().user?.displayName}),(0,c.jsx)(d,{k:"Email",v:e.iam().user?.email}),(0,c.jsx)(d,{k:"Roles",v:e.iam().user?.roles.toString()}),(0,c.jsx)(d,{k:"Token",v:e.iam().token,code:!0}),(0,c.jsx)(d,{k:"External Token",v:e.iam().externalToken,code:!0}),(0,c.jsx)(d,{k:"Credits Available",v:e.iam().credits?.available}),(0,c.jsx)(d,{k:"Credits Quota",v:e.iam().credits?.quota??""}),(0,c.jsx)(d,{k:"Credits Customer ID",v:e.iam().user?.creditsCustomerId}),(0,c.jsx)(r.A,{as:"h2",sx:{fontSize:4,fontWeight:"normal",mb:2},children:"Configuration"}),(0,c.jsx)(d,{k:"IAM URL",v:t.iamRunUrl}),(0,c.jsx)(d,{k:"Runtimes URL",v:t.runtimesRunUrl}),(0,c.jsx)(d,{k:"Spacer URL",v:t.spacerRunUrl}),(0,c.jsx)(d,{k:"Library URL",v:t.libraryRunUrl}),(0,c.jsx)(d,{k:"AI Agents URL",v:t.aiagentsRunUrl}),(0,c.jsx)(d,{k:"AI Inference URL",v:t.aiinferenceRunUrl}),(0,c.jsx)(d,{k:"MCP Servers URL",v:t.mcpserversRunUrl}),(0,c.jsx)(d,{k:"Growth URL",v:t.growthRunUrl}),(0,c.jsx)(d,{k:"Inbounds URL",v:t.inboundsRunUrl}),(0,c.jsx)(d,{k:"Success URL",v:t.successRunUrl}),(0,c.jsx)(d,{k:"Support URL",v:t.supportRunUrl}),(0,c.jsx)(d,{k:"White Label",v:String(t.whiteLabel)})]})]})}},96239:(e,t,n)=>{n.a(e,async(e,s)=>{try{n.d(t,{S:()=>e});var r=n(9387),i=n(70216),a=n(49261),o=n(47414),l=n(43673),c=n(18683);const e=e=>{const{jupyterLabAdapter:t}=e,[n,s]=(0,r.useState)();return(0,r.useEffect)(()=>{if(t){const e=t.jupyterLab.serviceManager.user;s(e)}},[t]),(0,c.jsxs)(i.M,{containerWidth:"full",padding:"normal",style:{overflow:"visible",minHeight:"calc(100vh - 45px)"},children:[(0,c.jsx)(i.M.Header,{children:(0,c.jsx)(a.z,{children:(0,c.jsx)(a.z.TitleArea,{variant:"large",children:(0,c.jsx)(a.z.Title,{children:"Jupyter Profile"})})})}),(0,c.jsx)(i.M.Content,{children:n&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(l.A,{identity:n.identity,content:(0,c.jsx)(c.Fragment,{})}),(0,c.jsx)(o.b,{permissions:n.permissions})]})})]})};s()}catch(e){s(e)}})},96363:(e,t,n)=>{n.a(e,async(e,s)=>{try{n.d(t,{e:()=>g});var r=n(20568),i=n(63711),a=n(26127),o=n(69453),l=n(49272),c=n(29621),d=n(18683),h=e([l]),u=h.then?(await h)():h;l=u[0];const m="jupyter/iam",g=({baseRoute:e="",memoryRouter:t=!1,jupyterLabAdapter:n})=>{const{user:s}=(0,a.Y)();return(0,d.jsx)(o.WV,{children:(0,d.jsx)(r.BV,{children:s?(0,d.jsx)(r.qh,{path:i.URLExt.join("/",e),element:(0,d.jsx)(l.j,{jupyterLabAdapter:n})}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(r.qh,{path:i.URLExt.join("/",e),element:(0,d.jsx)(r.C5,{to:i.URLExt.join("/",e,m,"login")})}),(0,d.jsx)(r.qh,{path:i.URLExt.join("/",e,m,"login"),element:(0,d.jsx)(c.a,{homeRoute:i.URLExt.join("/",e),loginRoute:i.URLExt.join("/",e,m,"login")})})]})})})};s()}catch(e){s(e)}})}}]);