"use strict";(self.webpackChunk_datalayer_ui=self.webpackChunk_datalayer_ui||[]).push([[7565],{57565:(e,s,t)=>{t.r(s),t.d(s,{ExerciseTake:()=>S,default:()=>b});var a=t(9387),n=t(20568),i=t(3345),l=t(98754),r=t(46508),c=t(3556),u=t(80006),o=t(49261),d=t(99180),h=t(38621),x=t(17402),p=t(42968),f=t(9663),j=t(55388),g=t(63437),m=t(93159),y=t(17788),v=t(41273),A=t(99179),k=t(23267),E=t(18683);const S=()=>{const{accountHandle:e,spaceHandle:s,exerciseId:t}=(0,n.g)();if(!t)return(0,E.jsx)(E.Fragment,{});const S=(0,k.mt)(),b=(0,j.LC)(),C=(0,A.J)(),{kernelManager:$,defaultKernel:Q}=(0,p.PD)(),P=(S.layout().organization,S.layout().space),{useRefreshExercise:R,useExercise:T,useCloneExercise:_}=(0,m.E6)(),w=T(t),V=R(),z=_(),{data:H}=w,[I,q]=(0,a.useState)(H);(0,a.useEffect)(()=>{H&&q(H)},[H]);const D=(0,y.Z)(),F=(0,i.S)(),{enqueueToast:M}=(0,v.d)(),[L]=(0,a.useState)("exercise-student"),[Y,G]=(0,a.useState)(!1),[N,B]=(0,a.useState)((0,x.YG)()),[J,K]=(0,a.useState)(!1),Z=b.getInput(L),O=(0,a.useMemo)(()=>Q,[$]),U=b.getGradeSuccess(L);(0,a.useEffect)(()=>{U&&(K(U),setTimeout(()=>{K(!1)},5e3))},[U]),(0,a.useEffect)(()=>{V.mutate(t,{onSuccess:e=>{if(e.success){const{data:e}=T(t);e?q(e):D("/")}}})},[]);const W=(0,a.useCallback)(async e=>{F({title:"Are you sure?",content:"Please confirm you want to clone this exercise in your private library."}).then(e=>{e&&z.mutate(t,{onSuccess:e=>{e.success&&(M(e.message,{variant:"success"}),S.layout().triggerItemsRefresh(),D(`/${C.handle}/library/exercises`))}})})},[F,I,z,t,S,M,D,C.handle]);return I?(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(o.z,{children:(0,E.jsxs)(l.A,{display:"flex",children:[(0,E.jsx)(l.A,{flex:1,children:(0,E.jsx)(c.A,{sx:{fontSize:3},children:"Exercise"})}),(0,E.jsx)(l.A,{children:(0,E.jsxs)(r.A,{children:[C&&I&&e&&s&&(0,E.jsx)(d.Q,{variant:"default",size:"small",onClick:()=>D(`/${e}/${s}/exercises/${I.id}`),children:"Edit"}),C&&I&&P&&(0,E.jsx)(d.Q,{variant:"default",size:"small",leadingVisual:h.Nc$,onClick:W,children:"Clone"})]})})]})}),(0,E.jsxs)(l.A,{children:[(0,E.jsx)(u.A,{children:I.name}),(0,E.jsx)(u.A,{as:"p",color:"fg.muted",bg:"neutral.muted",p:2,children:I.description})]}),(0,E.jsx)(l.A,{children:(0,E.jsx)(f.k,{showEditor:!0,autoRun:!1,disableRun:!1,kernel:O,id:L,codePre:I.codePre,code:I.codeQuestion,receipt:N})}),(0,E.jsxs)(l.A,{display:"flex",sx:{gap:3},pt:2,pb:2,children:[(0,E.jsx)(l.A,{children:(0,E.jsx)(d.Q,{variant:"danger",leadingVisual:h.uIH,onClick:e=>{e.preventDefault(),G(!Y)},children:"Show help"})}),(0,E.jsx)(l.A,{children:(0,E.jsx)(d.Q,{variant:"default",leadingVisual:h.Fjq,onClick:e=>{e.preventDefault(),b.setExecuteRequest(L,I.codeQuestion)},children:"Reset"})})]}),Y&&(0,E.jsx)(u.A,{as:"p",color:"danger.fg",p:2,children:I.help??"No help available."}),(0,E.jsxs)(l.A,{children:[(0,E.jsx)(d.Q,{variant:"default",leadingVisual:h.Qvf,sx:{marginTop:2,marginBottom:2},onClick:e=>{e.preventDefault(),b.setExecuteRequest(L,`\nsetup_state(stu_code = """${I.codePre}\n${Z}""", sol_code = """${I.codePre}\n${I.codeSolution}""")\n${I.codeTest}\nfrom IPython.core.display import HTML\nHTML('<div style="display: none">You have passed the exercise! Your receipt is ${N}</div><h1>ðŸŽ‰ Success!</h1>')\n`)},children:"Validate your solution"}),(0,E.jsx)(u.A,{as:"p",color:"fg.onEmphasis",bg:"neutral.emphasis",p:2,children:"Validate your solution with this button."})]}),J&&(0,E.jsx)(g.e,{})]}):(0,E.jsx)(E.Fragment,{})},b=S}}]);