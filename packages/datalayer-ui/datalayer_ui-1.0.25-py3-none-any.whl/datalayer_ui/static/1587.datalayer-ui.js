"use strict";(self.webpackChunk_datalayer_ui=self.webpackChunk_datalayer_ui||[]).push([[1587],{61587:(e,s,t)=>{t.r(s),t.d(s,{CourseTakeExercise:()=>v,default:()=>y});var n=t(9387),a=t(20568),r=t(98754),i=t(3556),d=t(80006),c=t(49261),u=t(99180),o=t(38621),l=t(17402),p=t(42968),x=t(9663),h=t(55388),f=t(93159),j=t(17788),g=t(99179),m=t(63437),S=t(18683);const v=()=>{const{accountHandle:e,spaceHandle:s,courseId:t,exerciseId:v}=(0,a.g)();if(!t||!v)return(0,S.jsx)(S.Fragment,{});const y=(0,g.J)(),A=(0,h.LC)(),{kernelManager:E,defaultKernel:k}=(0,p.PD)(),C=(0,j.Z)(),{useRefreshCourse:I,useCourse:$,useRefreshExercise:_,useExercise:w,useUpdateExercisePoints:P}=(0,f.E6)(),Q=$(t),T=I(),b=w(v),R=_(),H=P(),{data:M}=Q,{data:D}=b,[F,G]=(0,n.useState)(D),[Y,q]=(0,n.useState)(M);(0,n.useEffect)(()=>{D&&G(D)},[D]),(0,n.useEffect)(()=>{M&&q(M)},[M]);const[z]=(0,n.useState)("exercise-student"),[L,V]=(0,n.useState)(!1),[B,J]=(0,n.useState)(),[K,N]=(0,n.useState)((0,l.YG)()),[U,Z]=(0,n.useState)(!1),O=A.getInput(z),W=(0,n.useMemo)(()=>k,[E]),X=A.getGradeSuccess(z);return(0,n.useEffect)(()=>{if(Y?.id&&F?.id&&O&&X){Z(X),setTimeout(()=>{Z(!1)},5e3);const e=X?1:0;H.mutate({exerciseId:F.id,codeStudent:O,points:e})}},[X]),(0,n.useEffect)(()=>{R.mutate(v,{onSuccess:e=>{if(e.success){const{data:e}=w(v);G(e)}}})},[]),(0,n.useEffect)(()=>{F&&T.mutate(t,{onSuccess:e=>{if(e.success){const{data:e}=$(t);q(e);const s=e?.students?.get(y?.id);if(s&&s.studentItems){const e=s.studentItems.get(F?.id);if(e)return void J(e)}J({id:"",type:"student_item",itemType:"exercise",student:y,item:F,itemId:F?.id,codeStudent:F?.codeQuestion,pass:!1,points:0})}}})},[F]),Y&&F?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(c.z,{children:(0,S.jsxs)(r.A,{display:"flex",children:[(0,S.jsx)(r.A,{flex:1,children:(0,S.jsx)(i.A,{sx:{fontSize:3},children:"Course exercise"})}),(0,S.jsx)(r.A,{children:(0,S.jsx)(u.Q,{variant:"default",size:"small",onClick:()=>C(`/${e}/${s}/course/${Y.id}/progress`),children:"My course progress"})})]})}),(0,S.jsx)(r.A,{children:(0,S.jsx)(d.A,{children:F?.description})}),(0,S.jsx)(r.A,{pt:3,children:B&&(0,S.jsx)(x.k,{showEditor:!0,autoRun:!1,disableRun:!1,kernel:W,id:z,codePre:F.codePre,code:B.codeStudent,receipt:K})}),(0,S.jsxs)(r.A,{children:[(0,S.jsxs)(r.A,{display:"flex",sx:{gap:3},pt:2,pb:2,children:[(0,S.jsx)(r.A,{children:(0,S.jsx)(u.Q,{variant:"danger",leadingVisual:o.uIH,onClick:e=>{e.preventDefault(),V(!L)},children:"Show help"})}),(0,S.jsx)(r.A,{children:(0,S.jsx)(u.Q,{variant:"default",leadingVisual:o.Fjq,onClick:e=>{e.preventDefault(),A.setInput(z,F?.codeQuestion)},children:"Reset"})})]}),L&&(0,S.jsx)(d.A,{as:"p",color:"danger.fg",p:2,children:F?.help??"No help available."})]}),(0,S.jsxs)(r.A,{children:[(0,S.jsx)(u.Q,{variant:"default",leadingVisual:o.Qvf,sx:{marginTop:2,marginBottom:2},onClick:e=>{e.preventDefault(),(e=>{A.setGradeSuccess(z,!1),A.setExecuteRequest(z,`\nsetup_state(stu_code = """${e.codePre}\n${O}""", sol_code = """${e.codePre}\n${e.codeSolution}""")\n${e.codeTest}\nfrom IPython.core.display import HTML\nHTML('<div style="display: none">You have passed the exercise! Your receipt is ${K}</div><h1>ðŸŽ‰ Success!</h1>')\n`)})(F)},children:"Grade your answer"}),(0,S.jsx)(d.A,{as:"p",color:"fg.onEmphasis",bg:"neutral.emphasis",p:2,children:"You ask for a grade as much as you want. Everytime you request a grade, your last answer code and point are saved."})]}),U&&(0,S.jsx)(m.e,{})]}):(0,S.jsx)(S.Fragment,{})},y=v}}]);