"use strict";(self.webpackChunk_datalayer_ui=self.webpackChunk_datalayer_ui||[]).push([[5409],{44915:(e,t,n)=>{n.r(t),n.d(t,{ExercisePublic:()=>w,default:()=>b});var s=n(9387),i=n(20568),c=n(3345),o=n(98754),l=n(46508),a=n(3556),r=n(80006),d=n(49261),u=n(99180),h=n(38621),g=n(17402),x=n(42968),p=n(9663),f=n(55388),m=n(63437),j=n(93159),y=n(17788),A=n(41273),v=n(23267),E=n(18683);const w=()=>{const{exerciseId:e}=(0,i.g)();if(!e)return(0,E.jsx)(E.Fragment,{});const t=(0,v.mt)(),n=(0,f.LC)(),w=t.iam().user,{kernelManager:b,defaultKernel:k}=(0,x.PD)(),{useRefreshExercise:C,useExercise:S,useCloneExercise:$}=(0,j.E6)(),P=S(e),Q=C(),V=$(),{data:W}=P,[D,L]=(0,s.useState)(W);(0,s.useEffect)(()=>{W&&L(W)},[W]);const M=(0,y.Z)(),R=(0,c.S)(),{enqueueToast:_}=(0,A.d)(),[I]=(0,s.useState)("exercise-student"),[T,z]=(0,s.useState)(!1),[F,H]=(0,s.useState)((0,g.YG)()),[q,Y]=(0,s.useState)(!1),G=n.getInput(I),N=(0,s.useMemo)(()=>k,[b]),O=n.getGradeSuccess(I);(0,s.useEffect)(()=>{O&&(Y(O),setTimeout(()=>{Y(!1)},5e3))},[O]),(0,s.useEffect)(()=>{Q.mutate(e,{onSuccess:t=>{if(t.success){const{data:t}=S(e);t?L(t):M("/")}}})},[]);const B=(0,s.useCallback)(async n=>{R({title:"Are you sure?",content:"Please confirm you want to clone this exercise in your private library."}).then(n=>{n&&V.mutate(e,{onSuccess:e=>{e.success&&(_(e.message,{variant:"success"}),t.layout().triggerItemsRefresh(),M(`/${w.handle}/library/exercises`))}})})},[R,D,V,e,t,_,M,w]);return D?(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(d.z,{children:(0,E.jsxs)(o.A,{display:"flex",children:[(0,E.jsx)(o.A,{flex:1,children:(0,E.jsx)(a.A,{sx:{fontSize:3},children:"Exercise"})}),(0,E.jsx)(o.A,{children:(0,E.jsxs)(l.A,{children:[w&&D&&(0,E.jsx)(u.Q,{variant:"default",size:"small",onClick:()=>M(`/${D.organization?.handle??D.owner?.handle}/${D.space?.handle}/exercises/${D.id}`),children:"Edit"}),w&&D&&(0,E.jsx)(u.Q,{variant:"default",size:"small",leadingVisual:h.Nc$,onClick:B,children:"Clone"})]})})]})}),(0,E.jsxs)(o.A,{children:[(0,E.jsx)(r.A,{children:D.name}),(0,E.jsx)(r.A,{as:"p",color:"fg.muted",bg:"neutral.muted",p:2,children:D.description})]}),(0,E.jsx)(o.A,{children:(0,E.jsx)(p.k,{showEditor:!0,autoRun:!1,disableRun:!1,kernel:N,id:I,codePre:D.codePre,code:D.codeQuestion,receipt:F})}),(0,E.jsxs)(o.A,{display:"flex",sx:{gap:3},pt:2,pb:2,children:[(0,E.jsx)(o.A,{children:(0,E.jsx)(u.Q,{variant:"danger",leadingVisual:h.uIH,onClick:e=>{e.preventDefault(),z(!T)},children:"Show help"})}),(0,E.jsx)(o.A,{children:(0,E.jsx)(u.Q,{variant:"default",leadingVisual:h.Fjq,onClick:e=>{e.preventDefault(),n.setInput(I,D.codeQuestion)},children:"Reset"})})]}),T&&(0,E.jsx)(r.A,{as:"p",color:"danger.fg",p:2,children:D.help??"No help available."}),(0,E.jsxs)(o.A,{children:[(0,E.jsx)(u.Q,{variant:"default",leadingVisual:h.Qvf,sx:{marginTop:2,marginBottom:2},onClick:e=>{e.preventDefault(),n.setExecuteRequest(I,`\nsetup_state(stu_code = """${D.codePre}\n${G}""", sol_code = """${D.codePre}\n${D.codeSolution}""")\n${D.codeTest}\nfrom IPython.core.display import HTML\nHTML('<div style="display: none">You have passed the exercise! Your receipt is ${F}</div><h1>ðŸŽ‰ Success!</h1>')\n`)},children:"Validate your solution"}),(0,E.jsx)(r.A,{as:"p",color:"fg.onEmphasis",bg:"neutral.emphasis",p:2,children:"Validate your solution with this button."})]}),q&&(0,E.jsx)(m.e,{})]}):(0,E.jsx)(E.Fragment,{})},b=w},50059:(e,t,n)=>{n.d(t,{A:()=>l,j:()=>o});var s=n(18683),i=n(9387),c=n(14809);const o=({id:e="lumino-id",height:t="100%",children:n})=>{const o=(0,i.useRef)(null);return(0,i.useEffect)(()=>{if(console.log("Lumino useEffect - ref.current:",o.current,"children:",n,"children.isAttached:",n?.isAttached),o&&o.current&&n){try{n.isAttached?(console.log("Widget already attached"),console.log("Widget node:",n.node),console.log("Widget node parent:",n.node.parentElement),o.current.contains(n.node)||(console.log("Widget node not in container, re-attaching"),c.x0.attach(n,o.current))):(console.log("Attaching widget to DOM"),c.x0.attach(n,o.current),console.log("Widget attached successfully"),console.log("Widget node:",n.node),console.log("Widget node parent:",n.node.parentElement),console.log("Container children after attach:",o.current.children.length),console.log("Widget is visible:",n.isVisible),n.isVisible||(console.log("Making widget visible"),n.show()),n.update())}catch(e){console.warn("Exception while attaching Lumino widget.",e)}return()=>{console.log("Lumino cleanup - detaching widget");try{n&&(n.isAttached||n.node.isConnected)&&(console.log("Detaching widget from DOM"),c.x0.detach(n))}catch(e){console.warn("Exception while detaching Lumino widget.",e)}}}},[o,n]),(0,s.jsx)("div",{id:e,ref:o,style:{height:t,minHeight:t}})},l=o}}]);