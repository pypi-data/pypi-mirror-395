"use strict";(self.webpackChunk_datalayer_ui=self.webpackChunk_datalayer_ui||[]).push([[4379],{54379:(e,t,o)=>{o.r(t),o.d(t,{default:()=>E});var n,l=o(16255),s=o(68122),d=o(69584),a=o(98687),i=o(74261),r=o(14809),c=o(88037),u=o(9387),m=o(14709),p=o(6211);class h extends u.PureComponent{render(){const{children:e,isActive:t,heading:o,onCollapse:n,onMouseDown:l}=this.props;return u.createElement(p.y,{className:"jp-tocItem jp-TreeItem nested",selected:t,expanded:!o.collapsed,onExpand:e=>{e.defaultPrevented||e.target.expanded===!o.collapsed||(e.preventDefault(),n(o))},onMouseDown:e=>{e.defaultPrevented||(e.preventDefault(),l(o))},onKeyUp:e=>{e.defaultPrevented||"Enter"!==e.key||t||(e.preventDefault(),l(o))}},u.createElement("div",{className:"jp-tocItem-heading"},u.createElement("span",{className:"jp-tocItem-content",title:o.text,...o.dataset},o.prefix,o.text)),e)}}class g extends u.PureComponent{render(){const{documentType:e}=this.props;return u.createElement(m.G,{className:"jp-TableOfContents-content jp-TreeView","data-document-type":e},this.buildTree())}buildTree(){if(0===this.props.headings.length)return[];const e=t=>{const o=this.props.headings,n=new Array,l=o[t];let s=t+1;for(;s<o.length&&!(o[s].level<=l.level);){const[t,o]=e(s);n.push(t),s=o}return[u.createElement(h,{key:`${l.level}-${t}-${l.text}`,isActive:!!this.props.activeHeading&&l===this.props.activeHeading,heading:l,onMouseDown:this.props.setActiveHeading,onCollapse:this.props.onCollapseChange},n.length?n:null),s]},t=new Array;let o=0;for(;o<this.props.headings.length;){const[n,l]=e(o);t.push(n),o=l}return t}}class b extends c.QX{constructor(e){super(e.model),this._placeholderHeadline=e.placeholderHeadline,this._placeholderText=e.placeholderText}render(){return this.model&&0!==this.model.headings.length?u.createElement(g,{activeHeading:this.model.activeHeading,documentType:this.model.documentType,headings:this.model.headings,onCollapseChange:e=>{this.model.toggleCollapse({heading:e})},setActiveHeading:e=>{this.model.setActiveHeading(e)}}):u.createElement("div",{className:"jp-TableOfContents-placeholder"},u.createElement("div",{className:"jp-TableOfContents-placeholderContent"},u.createElement("h3",null,this._placeholderHeadline),u.createElement("p",null,this._placeholderText)))}}class v extends i.w{constructor(e){super({content:new r.Zk,translator:e}),this._model=null,this.addClass("jp-TableOfContents"),this._title=new n.Header(this._trans.__("Table of Contents")),this.header.addWidget(this._title),this._treeview=new b({placeholderHeadline:this._trans.__("No Headings"),placeholderText:this._trans.__("The table of contents shows headings in notebooks and supported files.")}),this._treeview.addClass("jp-TableOfContents-tree"),this.content.addWidget(this._treeview)}get model(){return this._model}set model(e){var t,o;this._model!==e&&(null===(t=this._model)||void 0===t||t.stateChanged.disconnect(this._onTitleChanged,this),this._model=e,this._model&&(this._model.isActive=this.isVisible),null===(o=this._model)||void 0===o||o.stateChanged.connect(this._onTitleChanged,this),this._onTitleChanged(),this._treeview.model=this._model)}onAfterHide(e){super.onAfterHide(e),this._model&&(this._model.isActive=!1)}onBeforeShow(e){super.onBeforeShow(e),this._model&&(this._model.isActive=!0)}_onTitleChanged(){var e,t;this._title.setTitle(null!==(t=null===(e=this._model)||void 0===e?void 0:e.title)&&void 0!==t?t:this._trans.__("Table of Contents"))}}!function(e){class t extends r.x0{constructor(e){const t=document.createElement("h2");t.textContent=e,t.classList.add("jp-text-truncated"),super({node:t}),this._title=t}setTitle(e){this._title.textContent=e}}e.Header=t}(n||(n={}));class _{constructor(){this.modelMapping=new WeakMap}add(e,t){this.modelMapping.set(e,t)}get(e){const t=this.modelMapping.get(e);return!t||t.isDisposed?null:t}}var f=o(79246);class C{constructor(){this._generators=new Map,this._idCounter=0}getModel(e,t){for(const o of this._generators.values())if(o.isApplicable(e))return o.createNew(e,t)}add(e){const t=this._idCounter++;return this._generators.set(t,e),new f.DisposableDelegate(()=>{this._generators.delete(t)})}}var y,w=o(85181),T=o(87725),x=o(84939),H=o(53119);!function(e){e.displayNumbering="toc:display-numbering",e.displayH1Numbering="toc:display-h1-numbering",e.displayOutputNumbering="toc:display-outputs-numbering",e.showPanel="toc:show-panel",e.toggleCollapse="toc:toggle-collapse"}(y||(y={}));const j={id:"@jupyterlab/toc-extension:registry",description:"Provides the table of contents registry.",autoStart:!0,provides:a.cv,activate:()=>new C},A={id:"@jupyterlab/toc-extension:tracker",description:"Adds the table of content widget and provides its tracker.",autoStart:!0,provides:a.DP,requires:[a.cv],optional:[w.sQ,l.E,s.V,d.X],activate:async function(e,t,o,n,l,s){const d=(null!=o?o:w.wK).load("jupyterlab");let i={...a.MB.defaultConfig};const r=new v(null!=o?o:void 0);function c(e){return e.headings.some(e=>{var t;return!(null!==(t=e.collapsed)&&void 0!==t&&t)})}r.title.icon=T.Wi,r.title.caption=d.__("Table of Contents"),r.id="table-of-contents",r.node.setAttribute("role","region"),r.node.setAttribute("aria-label",d.__("Table of Contents section")),e.commands.addCommand(y.displayH1Numbering,{label:d.__("Show first-level heading number"),execute:()=>{r.model&&r.model.setConfiguration({numberingH1:!r.model.configuration.numberingH1})},isEnabled:()=>{var e,t;return null!==(t=null===(e=r.model)||void 0===e?void 0:e.supportedOptions.includes("numberingH1"))&&void 0!==t&&t},isToggled:()=>{var e,t;return null!==(t=null===(e=r.model)||void 0===e?void 0:e.configuration.numberingH1)&&void 0!==t&&t},describedBy:{args:{type:"object",properties:{}}}}),e.commands.addCommand(y.displayNumbering,{label:d.__("Show heading number in the document"),icon:e=>e.toolbar?T.z7:void 0,execute:()=>{r.model&&(r.model.setConfiguration({numberHeaders:!r.model.configuration.numberHeaders}),e.commands.notifyCommandChanged(y.displayNumbering))},isEnabled:()=>{var e,t;return null!==(t=null===(e=r.model)||void 0===e?void 0:e.supportedOptions.includes("numberHeaders"))&&void 0!==t&&t},isToggled:()=>{var e,t;return null!==(t=null===(e=r.model)||void 0===e?void 0:e.configuration.numberHeaders)&&void 0!==t&&t},describedBy:{args:{type:"object",properties:{toolbar:{type:"boolean",description:d.__("Whether the command is called from toolbar")}}}}}),e.commands.addCommand(y.displayOutputNumbering,{label:d.__("Show output headings"),execute:()=>{r.model&&r.model.setConfiguration({includeOutput:!r.model.configuration.includeOutput})},isEnabled:()=>{var e,t;return null!==(t=null===(e=r.model)||void 0===e?void 0:e.supportedOptions.includes("includeOutput"))&&void 0!==t&&t},isToggled:()=>{var e,t;return null!==(t=null===(e=r.model)||void 0===e?void 0:e.configuration.includeOutput)&&void 0!==t&&t},describedBy:{args:{type:"object",properties:{}}}}),e.commands.addCommand(y.showPanel,{label:d.__("Table of Contents"),execute:()=>{e.shell.activateById(r.id)},describedBy:{args:{type:"object",properties:{}}}}),e.commands.addCommand(y.toggleCollapse,{label:()=>r.model&&!c(r.model)?d.__("Expand All Headings"):d.__("Collapse All Headings"),icon:e=>e.toolbar?r.model&&!c(r.model)?T.vj:T.yi:void 0,execute:()=>{r.model&&(c(r.model)?r.model.toggleCollapse({collapsed:!0}):r.model.toggleCollapse({collapsed:!1}))},isEnabled:()=>null!==r.model,describedBy:{args:{type:"object",properties:{toolbar:{type:"boolean",description:d.__("Whether the command is called from toolbar")}}}}});const u=new _;let m;if(n&&n.add(r,"@jupyterlab/toc:plugin"),s)try{m=await s.load(j.id);const t=t=>{const o=t.composite;for(const e of[...Object.keys(i)]){const t=o[e];void 0!==t&&(i[e]=t)}if(l)for(const e of l.widgets("main")){const t=u.get(e);t&&t.setConfiguration(i)}else if(e.shell.currentWidget){const t=u.get(e.shell.currentWidget);t&&t.setConfiguration(i)}};m&&(m.changed.connect(t),t(m))}catch(e){console.error(`Failed to load settings for the Table of Contents extension.\n\n${e}`)}const p=new x.Fu({commands:e.commands,id:y.displayNumbering,args:{toolbar:!0},label:""});p.addClass("jp-toc-numberingButton"),r.toolbar.node.setAttribute("aria-label",d.__("Table of contents sidepanel toolbar")),r.toolbar.addItem("display-numbering",p),r.toolbar.addItem("spacer",x.M7.createSpacerItem()),r.toolbar.addItem("collapse-all",new x.Fu({commands:e.commands,id:y.toggleCollapse,args:{toolbar:!0},label:""}));const h=new H.e({commands:e.commands});h.addItem({command:y.displayH1Numbering}),h.addItem({command:y.displayOutputNumbering});const g=new x.IB({tooltip:d.__("More actionsâ€¦"),icon:T.Jb,noFocusOnClick:!1,onClick:()=>{const e=g.node.getBoundingClientRect();h.open(e.x,e.bottom)}});return r.toolbar.addItem("submenu",g),e.shell.add(r,"left",{rank:400,type:"Table of Contents"}),l&&l.currentChanged.connect(b),e.restored.then(()=>{b()}),u;function b(){var o;let n=e.shell.currentWidget;if(!n)return;let l=u.get(n);l||(l=null!==(o=t.getModel(n,i))&&void 0!==o?o:null,l&&u.add(n,l),n.disposed.connect(()=>{null==l||l.dispose()})),r.model&&(r.model.headingsChanged.disconnect(f),r.model.collapseChanged.disconnect(f)),r.model=l,r.model&&(r.model.headingsChanged.connect(f),r.model.collapseChanged.connect(f)),e.commands.notifyCommandChanged(y.displayNumbering),e.commands.notifyCommandChanged(y.toggleCollapse)}function f(){e.commands.notifyCommandChanged(y.toggleCollapse)}}},E=[j,A]}}]);