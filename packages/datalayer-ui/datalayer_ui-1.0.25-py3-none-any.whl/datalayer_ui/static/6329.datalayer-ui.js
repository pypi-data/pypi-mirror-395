"use strict";(self.webpackChunk_datalayer_ui=self.webpackChunk_datalayer_ui||[]).push([[6329],{50059:(e,n,l)=>{l.d(n,{A:()=>o,j:()=>c});var t=l(18683),s=l(9387),i=l(14809);const c=({id:e="lumino-id",height:n="100%",children:l})=>{const c=(0,s.useRef)(null);return(0,s.useEffect)(()=>{if(console.log("Lumino useEffect - ref.current:",c.current,"children:",l,"children.isAttached:",l?.isAttached),c&&c.current&&l){try{l.isAttached?(console.log("Widget already attached"),console.log("Widget node:",l.node),console.log("Widget node parent:",l.node.parentElement),c.current.contains(l.node)||(console.log("Widget node not in container, re-attaching"),i.x0.attach(l,c.current))):(console.log("Attaching widget to DOM"),i.x0.attach(l,c.current),console.log("Widget attached successfully"),console.log("Widget node:",l.node),console.log("Widget node parent:",l.node.parentElement),console.log("Container children after attach:",c.current.children.length),console.log("Widget is visible:",l.isVisible),l.isVisible||(console.log("Making widget visible"),l.show()),l.update())}catch(e){console.warn("Exception while attaching Lumino widget.",e)}return()=>{console.log("Lumino cleanup - detaching widget");try{l&&(l.isAttached||l.node.isConnected)&&(console.log("Detaching widget from DOM"),i.x0.detach(l))}catch(e){console.warn("Exception while detaching Lumino widget.",e)}}}},[c,l]),(0,t.jsx)("div",{id:e,ref:c,style:{height:n,minHeight:n}})},o=c},63211:(e,n,l)=>{l.r(n),l.d(n,{CellPublic:()=>C,default:()=>b});var t=l(9387),s=l(20568),i=l(3345),c=l(98754),o=l(46508),a=l(3556),r=l(48453),d=l(80006),h=l(49261),u=l(99180),g=l(38621),x=l(42968),f=l(9663),m=l(93159),j=l(17788),A=l(41273),p=l(23267),y=l(63367),w=l(18683);const C=()=>{const{cellId:e}=(0,s.g)();if(!e)return(0,w.jsx)(w.Fragment,{});const[n,l]=(0,t.useState)(!1),{enqueueToast:C}=(0,A.d)(),{defaultKernel:b}=(0,x.PD)(),{useCell:k,useRefreshCell:E,useCloneCell:v}=(0,m.E6)(),{data:W}=k(e),z=E(),$=v(),D=(0,p.mt)(),L=D.iam().user,S=(D.layout().organization,D.layout().space),P=(0,j.Z)(),R=(0,i.S)(),_=D.cell().cell;(0,t.useEffect)(()=>{W&&(D.cell().update(W),l(!0))},[W]);const F=_?_.outputshotUrl?_.outputshotUrl:_.outputshotData:y.XL;(0,t.useEffect)(()=>{_&&_.id===e&&l(!0),n||z.mutate(e,{onSettled:()=>{l(!0)}})},[]);const M=(0,t.useCallback)(async n=>{R({title:"Are you sure?",content:"Please confirm you want to clone this cell in your private library."}).then(n=>{n&&$.mutate(e,{onSuccess:e=>{e.success&&(C(e.message,{variant:"success"}),D.layout().triggerItemsRefresh(),P(`/${L?.handle}/library/cells`))}})})},[R,_]);return _&&n?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(h.z,{children:(0,w.jsxs)(c.A,{display:"flex",children:[(0,w.jsx)(c.A,{flex:1,children:(0,w.jsx)(a.A,{sx:{fontSize:3},children:"Public cell"})}),(0,w.jsx)(c.A,{children:(0,w.jsxs)(o.A,{children:[_&&L?.handle===_.owner.handle&&(0,w.jsx)(u.Q,{variant:"default",size:"small",onClick:()=>P(`/${_.organization?.handle??_.owner?.handle}/${_.space?.handle}/cells/${_.id}`),children:"Edit"}),L&&S&&(0,w.jsx)(u.Q,{variant:"default",size:"small",leadingVisual:g.Nc$,onClick:M,children:"Clone"})]})})]})}),(0,w.jsxs)(c.A,{children:[(0,w.jsxs)(c.A,{children:[(0,w.jsx)(c.A,{mb:3}),(0,w.jsxs)(c.A,{sx:{display:"grid",gridTemplateColumns:"1fr 1fr"},children:[(0,w.jsxs)(c.A,{children:[(0,w.jsx)(c.A,{children:(0,w.jsx)(d.A,{children:_.name})}),(0,w.jsx)(c.A,{children:(0,w.jsxs)(d.A,{children:["By ",_.owner.displayName," ",(0,w.jsxs)(r.A,{href:"",onClick:e=>P(`/${_.owner.handle}`,e),children:["@",_.owner.handle]})]})}),(0,w.jsx)(c.A,{mt:5,children:(0,w.jsx)(d.A,{children:_.description})})]}),(0,w.jsx)(c.A,{ml:3,children:(0,w.jsx)("img",{src:F,style:{maxHeight:400}})})]})]}),(0,w.jsx)(c.A,{children:b&&(0,w.jsx)(f.k,{showEditor:!0,autoRun:!0,kernel:b,code:_.source,id:"cell"})})]})]}):(0,w.jsx)(w.Fragment,{})},b=C}}]);