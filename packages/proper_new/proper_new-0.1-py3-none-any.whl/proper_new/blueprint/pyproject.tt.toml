[build-system]
requires = ["setuptools"]


# TEMP
[tool.uv.sources]
proper = { path = "../proper", editable = true }


[project]
name = "[[ app_name ]]"
version = "1.0"
description = ""
authors = [
  { name = "Lorem Ipsum", email = "lorem.ipsum@example.com" },
]
readme = "README.md"
requires-python = ">=3.12,<4"
dependencies = [
  "formidable",
  "gunicorn~=23.0.0",
  "proper",
  # "psycopg[binary,pool]",
]

[dependency-groups]
dev = [
  "inotify;sys_platform=='linux'",
  "ipdb",
  "ruff",
]
test = [
  "pytest",
]


[tool.setuptools.packages.find]
where = ["app"]

[tool.setuptools.package-data]
"*" = [
  "*.*",
  "db/**/*",
  "static/**/*",
]
[tool.setuptools.exclude-package-data]
"*" = [
    "**/__pycache__",
    "*.pyc",
    "*.pyo",
]


[tool.pytest.ini_options]
addopts = "--doctest-modules"


[tool.ruff]
line-length = 90
indent-width = 4
target-version = "py312"
exclude = [".*"]
include = ["*.py"]

[tool.ruff.format]
# Like Black, use double quotes for strings.
quote-style = "double"

# Like Black, indent with spaces, rather than tabs.
indent-style = "space"

# Like Black, respect magic trailing commas.
skip-magic-trailing-comma = false

# Like Black, automatically detect the appropriate line ending.
line-ending = "auto"

# Enable auto-formatting of code examples in docstrings. Markdown,
# reStructuredText code/literal blocks and doctests are all supported.
#
# This is currently disabled by default, but it is planned for this
# to be opt-out in the future.
docstring-code-format = false

# Set the line length limit used when formatting code snippets in
# docstrings.
#
# This only has an effect when the `docstring-code-format` setting is
# enabled.
docstring-code-line-length = "dynamic"

[tool.ruff.lint]
fixable = ["ALL"]

ignore = [
  # x is too complex
  "C901",
  # whitespace before ':'
  "E203",
  "E501",
  # x defined from star imports
  "F405",
  # line break before binary operator
  "W505",
  "W605",
]
select = [
  # bugbear
  "B",
  # mccabe"", comprehensions, commas
  "C",
  # pycodestyle errors
  "E",
  # pyflakes
  "F",
  # logging format
  "G",
  # imports
  "I",
  # quotes
  "Q",
  # pycodestyle warnings
  "W",
]

[tool.ruff.lint.isort]
known-local-folder = ["app"]
known-third-party = []
no-lines-before = ["local-folder"]
relative-imports-order = "furthest-to-closest"
# Use two line after imports.
lines-after-imports = 2
