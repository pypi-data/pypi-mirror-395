[build-system]
requires = ["setuptools>=46.4"]
build-backend = "setuptools.build_meta"

[project]
name = "blissoda"
version = "1.7.0"
authors = [{ name = "ESRF", email = "dau-pydev@esrf.fr" }]
description = "Utilities for online data analysis and automation in Bliss"
readme = { file = "README.md", content-type = "text/markdown" }
license = { file = "LICENSE.md" }
classifiers = [
    "Intended Audience :: Science/Research",
    "License :: OSI Approved :: MIT License",
    "Programming Language :: Python :: 3",
]
requires-python = ">=3.8"
dependencies = [
    "packaging",
    "numpy",
    "redis-om",
    "redis-om !=1.0.3b0;python_version < '3.9'",   # https://github.com/redis/redis-om-python/issues/706
    "redis !=5.3.0b1,!=5.3.0b3",
    "importlib_resources; python_version < '3.9'",
    "pydantic",
]

[project.urls]
Homepage = "https://gitlab.esrf.fr/bliss/blissoda/"
Documentation = "https://blissoda.readthedocs.io/"
Repository = "https://gitlab.esrf.fr/bliss/blissoda/"
Issues = "https://gitlab.esrf.fr/bliss/blissoda/issues"
Changelog = "https://gitlab.esrf.fr/bliss/blissoda/-/blob/main/CHANGELOG.md"

[project.optional-dependencies]
client = [
    "blissdata >=0.2.5",
    "ewoksjob >=1.2.0",
    "esrf-pathlib >=0.3.0",
    "icat-esrf-definitions",
    "esrf-ontologies",
]
server = [
    "blissdata >=0.2.5",
    "ewoksjob >=1.2.0",
]
daiquiri = [
    "marshmallow",
]
id01 = [
    "blissoda[client]",
    "ewoksutils >=1.1.0",
]
bm02 = [
    "blissoda[client]",
]
bm05 = [
    "blissoda[client]",
]
bm08 = [
    "blissoda[client]",
]
id06 = [
    "blissoda[client]",
]
id09 = [
    "blissoda[client]",
    "ewoksutils>=1.1.0",
]
id11 = [
    "blissoda[client]",
]
id12 = [
    "blissoda[client]",
]
id13 = [
    "blissoda[client]",
]
id14 = [
    "blissoda[client]",
]
id15b = [
    "blissoda[client]",
]
bm20 = [
    "blissoda[client]",
]
id22 = [
    "blissoda[client]",
]
bm23 = [
    "blissoda[client]",
    "silx >=1.1.0",
    "pandas",
]
id24 = [
    "blissoda[client]",
    "silx >=1.1.0",
    "pandas",
]
id31 = [
    "blissoda[client]",
    "ewoksutils >=1.1.0",
    "fabio",
    "scipy",
]
id32 = [
    "blissoda[client]",
]
streamline = [
    "blissoda[client]",
    "ewoksutils >=1.1.0",
    #    streamline_changer @ git+https://gitlab.esrf.fr/bliss/streamline_changer.git
]
democlient = [
    "blissoda[client]",
    "pandas",
    "scipy",
    "h5py",
]
demoworker = [
    "blissoda[server]",
    "ewoksjob[blissworker] >=1.2.0",
    "ewoksxrpd >=0.3",
    "est[full] >=1",
    "orange3",
    "ewoksid12",
    "ewoksid14 >=1.1.0",
    "ewoksid31",
    "ewoksbm08",
]
test = [
    "pytest >=7",
    "mock",
    "pytest-mock",
    "pytest-redis",
    "blissoda[bm02]",
    "blissoda[client]",
    "blissoda[server]",
    "blissoda[id22]",
    "blissoda[id11]",
    "blissoda[id31]",
    "blissoda[streamline]",
    "blissoda[bm23]",
    "blissoda[bm08]",
]
dev = [
    "blissoda[test]",
    "black >=25",
    "flake8 >=4",
    "isort",
]
doc = [
    "blissoda[test]",
    "sphinx >=4.5",
    "sphinx-autodoc-typehints >=1.16",
    "sphinx_design",
    "pydata_sphinx_theme < 0.15",
    "sphinx-argparse",
    "sphinx-copybutton",
]

[tool.setuptools]
package-dir = { "" = "src" }

[tool.setuptools.packages.find]
where = ["src"]

[tool.setuptools.package-data]
"*" = ['resources/*/*.*']

[tool.coverage.run]
omit = ['*/tests/*']

[project.scripts]
blissoda = "blissoda.app.__main__:main"

[tool.isort]
profile = "black"
force_single_line = true
