{"version":3,"file":"client_index_tsx.babee5811e387252fdce.js","mappings":"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","sources":["webpack://pret/./client/globals.ts","webpack://pret/./client/index.tsx","webpack://pret/./client/routing.tsx"],"sourcesContent":["import { HashRouter as i_0, BrowserRouter as i_1, Route as i_2, Routes as i_3, useMatch as i_4, useSearchParams as i_5, useLocation as i_6, useParams as i_7, Outlet as i_8 } from './routing';\n\n\n(window as any).PretRouter = {'HashRouter': i_0, 'BrowserRouter': i_1, 'Route': i_2, 'Routes': i_3, 'useMatch': i_4, 'useSearchParams': i_5, 'useLocation': i_6, 'useParams': i_7, 'Outlet': i_8};\n","import '@pret-globals';","export {\n  Outlet,\n  useMatch,\n  useParams,\n  Routes,\n  Route,\n  useLocation,\n} from \"react-router\";\nexport { useSearchParams } from \"react-router-dom\";\nimport {\n  BrowserRouter as BaseBrowserRouter,\n  HashRouter as BaseHashRouter,\n} from \"react-router-dom\";\n\nimport { useEffect, RefObject, useRef } from \"react\";\nimport { useNavigate, useInRouterContext } from \"react-router-dom\";\n\ntype Options = {\n  containerRef?: RefObject<HTMLElement>;\n  basename?: string;\n  exclude_attr?: string; // ex \"data-router-ignore\"\n};\n\nexport function useInterceptAnchorsClicks({\n  containerRef,\n  basename = \"\",\n  exclude_attr = \"data-router-ignore\",\n}: Options = {}) {\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    const root = containerRef?.current;\n    if (!root) return;\n\n    const onClick = (e: MouseEvent) => {\n      if (e.defaultPrevented || e.button !== 0) return;\n      if (e.metaKey || e.ctrlKey || e.shiftKey || e.altKey) return;\n\n      const a = (e.target as Element | null)?.closest?.(\n        \"a[href]\"\n      ) as HTMLAnchorElement | null;\n      if (!a) return;\n\n      if (a.hasAttribute(exclude_attr)) return;\n      if (a.hasAttribute(\"download\")) return;\n\n      const tgt = (a.getAttribute(\"target\") || \"\").toLowerCase();\n      if (tgt && tgt !== \"_self\") return;\n      if ((a.getAttribute(\"rel\") || \"\").includes(\"external\")) return;\n\n      const href = a.getAttribute(\"href\") || \"\";\n      if (href.startsWith(\"#\")) return;\n      if (/^(mailto|tel|ftp|blob|data|javascript):/i.test(href)) return;\n      const url = new URL(href, window.location.href);\n      if (url.origin !== window.location.origin) return;\n\n      // get the rel path\n      let pathname = url.pathname;\n      if (basename && pathname.startsWith(basename)) {\n        pathname = pathname.slice(basename.length) || \"/\";\n      }\n\n      e.preventDefault();\n      navigate(pathname + url.search + url.hash);\n    };\n\n    // capture to handle the click before other handles\n    root.addEventListener(\"click\", onClick, { capture: true });\n    return () => root.removeEventListener(\"click\", onClick, { capture: true });\n  }, [navigate, containerRef, basename, exclude_attr]);\n}\n\nfunction AnchorClickInterceptor(props: Options) {\n  useInterceptAnchorsClicks(props);\n  return null;\n}\n\nexport function BrowserRouter(\n  props: {\n    interceptAnchorClicks?:\n      | boolean\n      | {\n          basename?: string;\n          exclude_attr?: string;\n        };\n  } & React.ComponentProps<typeof BaseBrowserRouter>\n) {\n  const { interceptAnchorClicks, children, ...rest } = props;\n\n  if (!interceptAnchorClicks) {\n    return <BaseBrowserRouter {...rest}>{children}</BaseBrowserRouter>;\n  }\n\n  const containerRef = useRef(null);\n  const basename =\n    (typeof interceptAnchorClicks === \"object\" &&\n      interceptAnchorClicks.basename) ||\n    props.basename ||\n    \"\";\n  const exclude_attr =\n    (typeof interceptAnchorClicks === \"object\" &&\n      interceptAnchorClicks.exclude_attr) ||\n    \"data-router-ignore\";\n\n  return (\n    <BaseBrowserRouter {...{ future: { v7_startTransition: true }, ...rest }}>\n      <AnchorClickInterceptor\n        containerRef={containerRef}\n        basename={basename}\n        exclude_attr={exclude_attr}\n      />\n      <div ref={containerRef}>{children}</div>\n    </BaseBrowserRouter>\n  );\n}\n\n\nexport function HashRouter(\n  props: {\n    interceptAnchorClicks?:\n      | boolean\n      | {\n          basename?: string;\n          exclude_attr?: string;\n        };\n  } & React.ComponentProps<typeof BaseHashRouter>\n) {\n  const { interceptAnchorClicks, children, ...rest } = props;\n\n  if (!interceptAnchorClicks) {\n    return <BaseHashRouter {...rest}>{children}</BaseHashRouter>;\n  }\n\n  const containerRef = useRef(null);\n  const basename =\n    (typeof interceptAnchorClicks === \"object\" &&\n      interceptAnchorClicks.basename) ||\n    props.basename ||\n    \"\";\n  const exclude_attr =\n    (typeof interceptAnchorClicks === \"object\" &&\n      interceptAnchorClicks.exclude_attr) ||\n    \"data-router-ignore\";\n\n  return (\n    <BaseHashRouter {...{ future: { v7_startTransition: true }, ...rest }}>\n      <AnchorClickInterceptor\n        containerRef={containerRef}\n        basename={basename}\n        exclude_attr={exclude_attr}\n      />\n      <div ref={containerRef}>{children}</div>\n    </BaseHashRouter>\n  );\n}\n"],"names":[],"ignoreList":[],"sourceRoot":""}