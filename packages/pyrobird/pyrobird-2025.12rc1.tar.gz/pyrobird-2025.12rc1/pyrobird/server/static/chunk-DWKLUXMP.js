import{a as x}from"./chunk-AMYYJG5Q.js";import{b as c}from"./chunk-OI5V6APH.js";import"./chunk-S3FA7C5I.js";import{b as f}from"./chunk-LNTKXTVM.js";import"./chunk-MFPRCIVI.js";import"./chunk-SVHROGNI.js";import{O as h}from"./chunk-DLJYFRIS.js";import{f as d}from"./chunk-MAT3H5WR.js";import{k as a}from"./chunk-KYPE3LET.js";function p(i,t){let e=i.position.x-t.position.x,r=i.position.y-t.position.y;return Math.atan2(r,e)+Math.PI/2}var u=class i extends x{redraw(){return a(this,null,function*(){let t=this.getFramePainter(),e=this.getObject();if(t?.mode3d&&!this.use_2d){let o=c(e,"",this,t);return o.traverse(m=>m.geometry?.rotateX(Math.PI/2)),o.position.set(t.grx(e.fX),t.gry(e.fY),t.grz(e.fZ)),o.rotation.set(0,0,p(t.camera,o)),t.processRender3D=!0,t.add3DMesh(o,this,!0),t.render3D(100),this}let r=t?.mode3d&&d(t?.convert3DtoPadNDC)?"3d":"2d",s=e.fX,n=e.fY;if(r==="3d"){let o=t.convert3DtoPadNDC(e.fX,e.fY,e.fZ);s=o.x,n=o.y}return this._redrawText(s,n,r).then(()=>(t.processRender3D=r==="3d",this))})}handleRender3D(){let t=this.getObject(),e=this.getFramePainter();if(this.use_2d){let r=e.convert3DtoPadNDC(t.fX,t.fY,t.fZ),s=this.axisToSvg("x",r.x,!0),n=this.axisToSvg("y",r.y,!0);h(this.getG(),s-this.pos_x,n-this.pos_y)}else e.get3DMeshes(this).forEach(r=>r.rotation.set(0,0,p(e.camera,r)))}static draw(t,e,r){return a(this,null,function*(){let s=new i(t,e,r);return s.use_2d=r==="2d"||r==="2D",f(s,s.use_2d?!0:"3d").then(()=>s.redraw())})}};export{u as TAnnotation3DPainter};
