import{q as d}from"./chunk-S3FA7C5I.js";import{e as _,t as z}from"./chunk-MAT3H5WR.js";import{k as m}from"./chunk-KYPE3LET.js";function D(){return m(this,null,function*(){let e=this.$fp||this.getFramePainter();if(delete this.$fp,!_(e)||!e.grx||!e.gry||!e.grz)return this;let r=this.getObject(),x=5e4,i=r.fP,n=1,o=0;for(let t=0;t<i.length;t+=3)i[t]<e.scale_xmin||i[t]>e.scale_xmax||i[t+1]<e.scale_ymin||i[t+1]>e.scale_ymax||i[t+2]<e.scale_zmin||i[t+2]>e.scale_zmax||++o;z.OptimizeDraw>0&&o>x&&(n=Math.max(2,Math.floor(o/x)));let f=Math.floor(o/n),a=new d(f,e.webgl,e.size_x3d/100),h=new Int32Array(f),c=0,P=0;for(let t=0;t<i.length;t+=3)i[t]<e.scale_xmin||i[t]>e.scale_xmax||i[t+1]<e.scale_ymin||i[t+1]>e.scale_ymax||i[t+2]<e.scale_zmin||i[t+2]>e.scale_zmax||n>1&&(c=(c+1)%n,c)||(h[P++]=t,a.addPoint(e.grx(i[t]),e.gry(i[t+1]),e.grz(i[t+2])));return a.createPoints({color:this.getColor(r.fMarkerColor),style:r.fMarkerStyle}).then(t=>(t.tip_color=r.fMarkerColor===3?16711680:65280,t.tip_name=r.fName||"Poly3D",t.poly=r,t.fp=e,t.scale0=.7*a.scale,t.index=h,e.add3DMesh(t,this,!0),t.tooltip=function(u){let s=Math.floor(u.index/this.nvertex);if(s<0||s>=this.index.length)return null;s=this.index[s];let l=this.fp,p=l.grx(this.poly.fP[s]),y=l.gry(this.poly.fP[s+1]),g=l.grz(this.poly.fP[s+2]);return{x1:p-this.scale0,x2:p+this.scale0,y1:y-this.scale0,y2:y+this.scale0,z1:g-this.scale0,z2:g+this.scale0,color:this.tip_color,lines:[this.tip_name,"pnt: "+s/3,"x: "+l.axisAsText("x",this.poly.fP[s]),"y: "+l.axisAsText("y",this.poly.fP[s+1]),"z: "+l.axisAsText("z",this.poly.fP[s+2])]}},e.render3D(100),this))})}export{D as a};
