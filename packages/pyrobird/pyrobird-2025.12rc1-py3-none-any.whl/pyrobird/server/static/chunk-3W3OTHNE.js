import{e as m}from"./chunk-K2P6CES6.js";import{Xa as g,Ya as c,g as u}from"./chunk-MAT3H5WR.js";function M(a,h){a.$math=m;let e=a.fTitle,r=!1,l="[";if(e==="gaus"&&(e="gaus(0)"),u(a.fFormula?.fFormula)&&(a.fFormula.fFormula.indexOf("[](double*x,double*p)")===0?(r=!0,l="p[",e=a.fFormula.fFormula.slice(21)):(e=a.fFormula.fFormula,l="[p"),a.fFormula.fClingParameters&&a.fFormula.fParams&&a.fFormula.fParams.forEach(t=>{let i=new RegExp(`(\\[${t.first}\\])`,"g"),n=a.fFormula.fClingParameters[t.second];e=e.replace(i,n<0?`(${n})`:n)})),!e)return!h||a.fSave?.length>2;if(a.formulas?.forEach(t=>{e=e.replaceAll(t.fName,t.fTitle)}),e=e.replace(/\b(TMath::SinH)\b/g,"Math.sinh").replace(/\b(TMath::CosH)\b/g,"Math.cosh").replace(/\b(TMath::TanH)\b/g,"Math.tanh").replace(/\b(TMath::ASinH)\b/g,"Math.asinh").replace(/\b(TMath::ACosH)\b/g,"Math.acosh").replace(/\b(TMath::ATanH)\b/g,"Math.atanh").replace(/\b(TMath::ASin)\b/g,"Math.asin").replace(/\b(TMath::ACos)\b/g,"Math.acos").replace(/\b(TMath::Atan)\b/g,"Math.atan").replace(/\b(TMath::ATan2)\b/g,"Math.atan2").replace(/\b(sin|SIN|TMath::Sin)\b/g,"Math.sin").replace(/\b(cos|COS|TMath::Cos)\b/g,"Math.cos").replace(/\b(tan|TAN|TMath::Tan)\b/g,"Math.tan").replace(/\b(exp|EXP|TMath::Exp)\b/g,"Math.exp").replace(/\b(log|LOG|TMath::Log)\b/g,"Math.log").replace(/\b(log10|LOG10|TMath::Log10)\b/g,"Math.log10").replace(/\b(pow|POW|TMath::Power)\b/g,"Math.pow").replace(/\b(pi|PI)\b/g,"Math.PI").replace(/\b(abs|ABS|TMath::Abs)\b/g,"Math.abs").replace(/\bsqrt\(/g,"Math.sqrt(").replace(/\bxygaus\(/g,"this.$math.gausxy(this, x, y, ").replace(/\bgaus\(/g,"this.$math.gaus(this, x, ").replace(/\bgausn\(/g,"this.$math.gausn(this, x, ").replace(/\bexpo\(/g,"this.$math.expo(this, x, ").replace(/\blandau\(/g,"this.$math.landau(this, x, ").replace(/\blandaun\(/g,"this.$math.landaun(this, x, ").replace(/\b(TMath::|ROOT::Math::)/g,"this.$math."),e.match(/^pol[0-9]$/)&&parseInt(e[3])===a.fNpar-1){e="[0]";for(let t=1;t<a.fNpar;++t)e+=` + [${t}] * `+(t===1?"x":`Math.pow(x,${t})`)}if(e.match(/^chebyshev[0-9]$/)&&parseInt(e[9])===a.fNpar-1){e=`this.$math.ChebyshevN(${a.fNpar-1}, x, `;for(let t=0;t<a.fNpar;++t)e+=(t===0?"[":", ")+`[${t}]`;e+="])"}for(let t=0;t<a.fNpar;++t)e=e.replaceAll(l+t+"]",`(${a.GetParValue(t)})`);for(let t=2;t<10;++t)e=e.replaceAll(`x^${t}`,`Math.pow(x,${t})`);return r?(e=e.replace(/x\[0\]/g,"x"),a._typename===c?(e=e.replace(/x\[1\]/g,"y"),e=e.replace(/x\[2\]/g,"z"),a.evalPar=new Function("x","y","z",e).bind(a)):a._typename===g?(e=e.replace(/x\[1\]/g,"y"),a.evalPar=new Function("x","y",e).bind(a)):a.evalPar=new Function("x",e).bind(a)):a._typename===c?a.evalPar=new Function("x","y","z","return "+e).bind(a):a._typename===g?a.evalPar=new Function("x","y","return "+e).bind(a):a.evalPar=new Function("x","return "+e).bind(a),!0}function o(a,h){let e=a.fSave.length-3,r=a.fSave[e+1],l=a.fSave[e+2],t=(l-r)/e;if(h<r)return a.fSave[0];if(h>l)return a.fSave[e];let i=Math.min(e-1,Math.floor((h-r)/t)),n=r+i*t,f=n+t,s=a.fSave[i],p=a.fSave[i+1];return!Number.isFinite(s)&&i<e-1?(n+=t,f+=t,s=p,p=a.fSave[i+2]):!Number.isFinite(p)&&i>0&&(f-=t,n-=t,p=s,s=a.fSave[i-1]),(f*s-n*p+h*(p-s))/t}function T(a,h,e=void 0){if(!a)return 0;let r=!1;if(!e&&!a.evalPar)try{M(a)||(r=!0)}catch{r=!0}if(a.evalPar&&!r)try{return a.evalPar(h)}catch{r=!0}let l=a.fSave.length-3;return l<2||a.fSave[l+1]===a.fSave[l+2]?0:o(a,h)}export{M as a,o as b,T as c};
