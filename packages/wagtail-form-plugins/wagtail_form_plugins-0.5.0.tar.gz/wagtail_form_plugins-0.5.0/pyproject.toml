[build-system]
requires = ["uv_build"]
build-backend = "uv_build"

[dependency-groups]
dev = [
  "ty",
  "ruff",
  "pre-commit",
  "pyright",
  "django-stubs",
  "poethepoet"
]

[project]
name = "wagtail-form-plugins"
version = "0.5.0"
description = "A set of plugins used to customize and improve the Wagtail form builder in a modular way."
readme = "README.md"
requires-python = ">=3.10"
license = "BSD-3-Clause"
license-files = ["LICENSE"]
keywords = ["wagtail", "form", "plugins"]
classifiers = ["Framework :: Wagtail"]
authors = [
  {name = "NathanaÃ«l Jourdane", email = "njourdane@laas.fr"}
]
dependencies = [
  "django",
  "wagtail"
]

[project.optional-dependencies]
demo = [
  "django-bootstrap5",
  "wagtail-autocomplete"
]

[project.urls]
homepage = "https://pypi.org/project/wagtail_form_plugins"
source = "https://github.com/laas/wagtail-form-plugins"
issues = "https://github.com/laas/wagtail-form-plugins/issues"

[tool.django-stubs]
django_settings_module = "demo.settings"

[tool.poe.tasks]
ruff-lint = "uv run ruff check --fix"
ruff-format = "uv run ruff format"
pyright = "uv run pyright ."
ty = "uv run ty check"
django-check = "uv run python manage.py check"
uv-dry-sync = "uv sync --extra demo --dry-run"

[tool.poe.tasks.check]
parallel = ["ruff-lint", "ruff-format", "pyright", "ty", "django-check", "uv-dry-sync"]

[tool.pyright]
exclude = ["demo/migrations/*", ".venv/**/*"]

[tool.ruff]
extend-exclude = ["migrations"]
line-length = 100
target-version = "py310"

[tool.ruff.lint]
select = ["ALL"]
ignore = ["D106", "D107", "ANN002", "ANN003", "ANN204"]

[tool.ruff.lint.isort]
section-order = ["future", "standard-library", "django", "wagtail", "first-party", "local-folder", "third-party"]
sections.django = ["django"]
sections.wagtail = ["wagtail"]

[tool.uv.build-backend]
module-root = ""
