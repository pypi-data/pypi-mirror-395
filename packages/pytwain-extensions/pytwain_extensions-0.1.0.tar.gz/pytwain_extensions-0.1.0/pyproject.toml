[project]
name = "pytwain-extensions"
version = "0.1.0"
description = "A Python library that extends pytwain with pythonic design to make working with the TWAIN api easier. Built on TWAIN 2.5 specification."
readme = "README.md"
authors = [
    { name = "Jonathan Costa", email = "jonathanleonhard.costa@gmail.com" }
]
requires-python = ">=3.10"
dependencies = [
]
classifiers = [
    "Topic :: Multimedia :: Graphics :: Capture :: Scanners"
]

[dependency-groups]
dev = [
    "pytest>=9.0.1",
    "ruff>=0.14.4",
]
generate = [
    "pytwain>=2.3.0",
    "jinja2>=3.1.6",
]

[build-system]
requires = ["uv_build>=0.9.7,<0.10.0"]
build-backend = "uv_build"

[tool.uv.build-backend]
module-name = "twain_extensions"

[tool.pytest.ini_options]
pythonpath = ["src"]
testpaths = ["tests"]
addopts = "--color=yes"

# thanks to UniteLabs.io for the ruff settings
[tool.ruff]
src = ["src", "tests"]
line-length = 120
target-version = "py310"

[tool.ruff.lint]
select = [
    "F",      # pyflakes (ruff default)
    "E",      # pycodestyle: error (ruff default: E4, E7, E9)
    "A",      # flake8-builtins
    "B",      # flake8-bugbear
    "C4",     # flake8-comprehensions
    "ARG",    # flake8-unused-arguments
    "ASYNC",  # flake8-async
    "D",      # pydocstyle
    "D213",   # gDoc-style tweak: multi-line-summary-second-line
    "D401",   # gDoc-style tweak: non-imperative-mood
    "DOC",    # pydoclint (preview-only)
    "ANN001", # flake8-annotations: missing-type-function-argument
    "ANN201", # flake8-annotations: missing-return-type-undocumented-public-function
    "ANN202", # flake8-annotations: missing-return-type-private-function
    "ANN401", # flake8-annotations: any-type
    "EM",     # flake8-errmsg
    "BLE",    # flake8-blind-except
    "PIE",    # flake8-pie
    "SIM",    # flake8-simplify
    "PERF",   # perflint: performance
    "RET",    # flake8-return
    "RSE",    # flake8-raise
    "RUF",    # ruff-specific-rules
    "ISC",    # flake8-implicit-str-concat
    "RET",    # flake8-return
    "PTH",    # flake8-use-pathlib
    "PLW",    # pylint warning
    "UP006",  # non-pep585-annotation
    "ERA",    # no commented-out code
    "FIX",    # no FIXME comments
    "T201",   # no print calls for debugging
    "S101"    # no assert
]
ignore = [
    "A005",    # ignore io overwrite builtin
    "D100",    # undocumented-public-module
    "D104",    # undocumented-public-package
    "D105",    # undocumented-magic-method
    "D107",    # undocumented-public-init
    "D202",    # blank-line-after-function
    "D212",    # multi-line-summary-first-line
    "D418",    # overload-with-docstring
    "PERF203", # try-except-in-loop
]

[tool.ruff.lint.per-file-ignores]
"!src/**.py" = ["D", "ANN", "ARG", "S101"] # ignore documentation, typing, and assertions in tests

[tool.ruff.lint.flake8-annotations]
mypy-init-return = false

[tool.ruff.lint.flake8-comprehensions]
allow-dict-calls-with-keyword-arguments = true

[tool.ruff.lint.flake8-unused-arguments]
ignore-variadic-names = true

[tool.ruff.lint.pycodestyle]
ignore-overlong-task-comments = true

[tool.ruff.lint.pydocstyle]
convention = "google"
ignore-var-parameters = true

[tool.ruff.format]
quote-style = "double"
docstring-code-format = true
docstring-code-line-length = 80

[tool.setuptools]
package-dir = {"" = "src"}

[tool.setuptools.packages.find]
where = ["src"]

