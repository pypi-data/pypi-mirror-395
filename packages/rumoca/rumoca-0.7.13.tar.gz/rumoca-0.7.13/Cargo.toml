[package]
name = "rumoca"
version = "0.7.13"
edition = "2024"
description = "Modelica compiler written in RUST"
license = "Apache-2.0"
repository = "https://github.com/jgoppert/rumoca"
homepage = "https://github.com/jgoppert/rumoca"
documentation = "https://docs.rs/rumoca"
keywords = ["modelica", "compiler", "dae", "simulation"]
categories = ["compilers", "science", "simulation"]
readme = "README.md"
default-run = "rumoca"
exclude = [
    "editors/",
    "python/",
    ".github/",
    "docs/",
    "tools/",
    "*.swp",
]

[dependencies]
anyhow = "1.0"
chksum-md5 = "0.1.0"
clap = "4.5.31"
env_logger = "0.11"
git-version = "0.3.9"
indexmap = { version = "2.7.1", features = ["serde"] }
miette = { version = "7.4.0", features = ["fancy"] }
minijinja = { version = "2.8.0", features = ["json"] }
owo-colors = "4.0"
parol = "3.1.0"
parol_runtime = "3.1.0"
serde = { version = "1.0.218", features = ["derive"] }
serde_json = "1.0"
toml = "0.8"
thiserror = "2.0"

# LSP dependencies (always included)
lsp-server = "0.7"
lsp-types = "0.97"

# Python bindings
pyo3 = { version = "0.27", features = ["extension-module"], optional = true }

[features]
regen-parser = []
python = ["pyo3"]

[lib]
name = "rumoca"
# cdylib for Python extension, rlib for Rust library
crate-type = ["cdylib", "rlib"]

[[bin]]
name = "rumoca-lsp"
path = "src/bin/rumoca_lsp.rs"

[[bin]]
name = "rumoca-fmt"
path = "src/bin/rumoca_fmt.rs"

[[bin]]
name = "rumoca-lint"
path = "src/bin/rumoca_lint.rs"

[build-dependencies]
parol = "3.0.1"

# For faster builds.
[profile.dev.build-override]
opt-level = 3
[profile.release.build-override]
opt-level = 3
