(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1186],{589:(e,t,s)=>{"use strict";s.d(t,{$:()=>l,s:()=>n});var r=s(494),a=s(6759),i=s(1279),n=class extends a.k{#e;#t;#s;constructor(e){super(),this.mutationId=e.mutationId,this.#t=e.mutationCache,this.#e=[],this.state=e.state||l(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#e.includes(e)||(this.#e.push(e),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#e=this.#e.filter(t=>t!==e),this.scheduleGc(),this.#t.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#e.length||("pending"===this.state.status?this.scheduleGc():this.#t.remove(this))}continue(){return this.#s?.continue()??this.execute(this.state.variables)}async execute(e){let t=()=>{this.#r({type:"continue"})};this.#s=(0,i.II)({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(Error("No mutationFn found")),onFail:(e,t)=>{this.#r({type:"failed",failureCount:e,error:t})},onPause:()=>{this.#r({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#t.canRun(this)});let s="pending"===this.state.status,r=!this.#s.canStart();try{if(s)t();else{this.#r({type:"pending",variables:e,isPaused:r}),await this.#t.config.onMutate?.(e,this);let t=await this.options.onMutate?.(e);t!==this.state.context&&this.#r({type:"pending",context:t,variables:e,isPaused:r})}let a=await this.#s.start();return await this.#t.config.onSuccess?.(a,e,this.state.context,this),await this.options.onSuccess?.(a,e,this.state.context),await this.#t.config.onSettled?.(a,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(a,null,e,this.state.context),this.#r({type:"success",data:a}),a}catch(t){try{throw await this.#t.config.onError?.(t,e,this.state.context,this),await this.options.onError?.(t,e,this.state.context),await this.#t.config.onSettled?.(void 0,t,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,t,e,this.state.context),t}finally{this.#r({type:"error",error:t})}}finally{this.#t.runNext(this)}}#r(e){this.state=(t=>{switch(e.type){case"failed":return{...t,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...t,isPaused:!0};case"continue":return{...t,isPaused:!1};case"pending":return{...t,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...t,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...t,data:void 0,error:e.error,failureCount:t.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}})(this.state),r.jG.batch(()=>{this.#e.forEach(t=>{t.onMutationUpdate(e)}),this.#t.notify({mutation:this,type:"updated",action:e})})}};function l(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}},2942:(e,t,s)=>{"use strict";var r=s(2418);s.o(r,"usePathname")&&s.d(t,{usePathname:function(){return r.usePathname}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}}),s.o(r,"useSearchParams")&&s.d(t,{useSearchParams:function(){return r.useSearchParams}})},4893:(e,t,s)=>{"use strict";s.d(t,{DP:()=>y,HG:()=>u,Nl:()=>o,O4:()=>c,Pi:()=>n,RR:()=>x,RY:()=>m,Rv:()=>v,XR:()=>l,Zu:()=>f,bN:()=>p,c1:()=>N,fC:()=>w,fK:()=>j,lm:()=>g,md:()=>A,mo:()=>i,uc:()=>b,ui:()=>d,vK:()=>h,xZ:()=>_,xm:()=>C});var r=s(4568);s(7620);let a={xs:{width:12,height:12},sm:{width:16,height:16},md:{width:20,height:20},lg:{width:24,height:24}},i=e=>{let{className:t="",size:s="md"}=e,{width:i,height:n}=a[s];return(0,r.jsx)("svg",{className:t,width:i,height:n,viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})},n=e=>{let{className:t="",size:s="md"}=e,{width:i,height:n}=a[s];return(0,r.jsx)("svg",{className:t,width:i,height:n,viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})},l=e=>{let{className:t="",size:s="md"}=e,{width:i,height:n}=a[s];return(0,r.jsx)("svg",{className:t,width:i,height:n,viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{d:"M11 17a1 1 0 001.447.894l4-2A1 1 0 0017 15V9.236a1 1 0 00-1.447-.894l-4 2a1 1 0 00-.553.894V17zM15.211 6.276a1 1 0 000-1.788l-4.764-2.382a1 1 0 00-.894 0L4.789 4.488a1 1 0 000 1.788l4.764 2.382a1 1 0 00.894 0l4.764-2.382zM4.447 8.342A1 1 0 003 9.236V15a1 1 0 00.553.894l4 2A1 1 0 009 17v-5.764a1 1 0 00-.553-.894l-4-2z"})})},o=e=>{let{className:t="",size:s="md"}=e,{width:i,height:n}=a[s];return(0,r.jsxs)("svg",{className:"animate-spin ".concat(t),width:i,height:n,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})},d=e=>{let{className:t="",size:s="md"}=e,{width:i,height:n}=a[s];return(0,r.jsx)("svg",{className:t,width:i,height:n,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})},c=e=>{let{className:t="",size:s="md"}=e,{width:i,height:n}=a[s];return(0,r.jsx)("svg",{className:t,width:i,height:n,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})},u=e=>{let{className:t="",size:s="md"}=e,{width:i,height:n}=a[s];return(0,r.jsx)("svg",{className:t,width:i,height:n,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"})})},h=e=>{let{className:t="",size:s="md"}=e,{width:i,height:n}=a[s];return(0,r.jsx)("svg",{className:t,width:i,height:n,viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})},m=e=>{let{className:t="",size:s="md"}=e,{width:i,height:n}=a[s];return(0,r.jsx)("svg",{className:t,width:i,height:n,viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M18 8a6 6 0 01-7.743 5.743L10 14l-1 1-1 1H6v2H2v-4l4.257-4.257A6 6 0 1118 8zm-6-4a1 1 0 100 2 2 2 0 012 2 1 1 0 102 0 4 4 0 00-4-4z",clipRule:"evenodd"})})},x=e=>{let{className:t="",size:s="md"}=e,{width:i,height:n}=a[s];return(0,r.jsx)("svg",{className:t,width:i,height:n,viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M2 5a2 2 0 012-2h12a2 2 0 012 2v2a2 2 0 01-2 2H4a2 2 0 01-2-2V5zm14 1a1 1 0 11-2 0 1 1 0 012 0zM2 13a2 2 0 012-2h12a2 2 0 012 2v2a2 2 0 01-2 2H4a2 2 0 01-2-2v-2zm14 1a1 1 0 11-2 0 1 1 0 012 0z",clipRule:"evenodd"})})},p=e=>{let{className:t="",size:s="md"}=e,{width:i,height:n}=a[s];return(0,r.jsxs)("svg",{className:t,width:i,height:n,viewBox:"0 0 20 20",fill:"currentColor",children:[(0,r.jsx)("path",{d:"M3 12v3c0 1.657 3.134 3 7 3s7-1.343 7-3v-3c0 1.657-3.134 3-7 3s-7-1.343-7-3z"}),(0,r.jsx)("path",{d:"M3 7v3c0 1.657 3.134 3 7 3s7-1.343 7-3V7c0 1.657-3.134 3-7 3S3 8.657 3 7z"}),(0,r.jsx)("path",{d:"M17 5c0 1.657-3.134 3-7 3S3 6.657 3 5s3.134-3 7-3 7 1.343 7 3z"})]})},g=e=>{let{className:t="",size:s="md"}=e,{width:i,height:n}=a[s];return(0,r.jsx)("svg",{className:t,width:i,height:n,viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})},y=e=>{let{className:t="",size:s="md"}=e,{width:i,height:n}=a[s];return(0,r.jsx)("svg",{className:t,width:i,height:n,viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"})})},v=e=>{let{className:t="",size:s="md"}=e,{width:i,height:n}=a[s];return(0,r.jsx)("svg",{className:t,width:i,height:n,viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{d:"M8 9a3 3 0 100-6 3 3 0 000 6zM8 11a6 6 0 016 6H2a6 6 0 016-6zM16 7a1 1 0 10-2 0v1h-1a1 1 0 100 2h1v1a1 1 0 102 0v-1h1a1 1 0 100-2h-1V7z"})})},j=e=>{let{className:t="",size:s="md"}=e,{width:i,height:n}=a[s];return(0,r.jsx)("svg",{className:t,width:i,height:n,viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})},f=e=>{let{className:t="",size:s="md"}=e,{width:i,height:n}=a[s];return(0,r.jsx)("svg",{className:t,width:i,height:n,viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})},b=e=>{let{className:t="",size:s="md"}=e,{width:i,height:n}=a[s];return(0,r.jsx)("svg",{className:t,width:i,height:n,viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})})},N=e=>{let{className:t="",size:s="md"}=e,{width:i,height:n}=a[s];return(0,r.jsx)("svg",{className:t,width:i,height:n,viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})})},w=e=>{let{className:t="",size:s="md"}=e,{width:i,height:n}=a[s];return(0,r.jsx)("svg",{className:t,width:i,height:n,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})},_=e=>{let{className:t="",size:s="md"}=e,{width:i,height:n}=a[s];return(0,r.jsx)("svg",{className:t,width:i,height:n,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})},C=e=>{let{className:t="",size:s="md"}=e,{width:i,height:n}=a[s];return(0,r.jsx)("svg",{className:t,width:i,height:n,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})},A=e=>{let{status:t,className:s=""}=e;return(0,r.jsx)("span",{className:"w-3 h-3 rounded-full ".concat({green:"bg-green-500",yellow:"bg-yellow-500",red:"bg-red-500",gray:"bg-gray-500"}[t]," ").concat(s)})}},5928:(e,t,s)=>{Promise.resolve().then(s.bind(s,6107))},6107:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var r=s(4568),a=s(7620),i=s(7606),n=s(3297),l=s(6258),o=s(704),d=s(9484),c=s(3237),u=s(4893);function h(e){var t;let{adapterType:s,adapterId:i,isEdit:n=!1,config:l,setConfig:o,onSubmit:d,onClose:u,isPending:h=!1}=e,[m,x]=a.useState(!1),[p,g]=a.useState(null),y={width:"100%",padding:"8px 12px",border:"1px solid #ccc",borderRadius:"4px",fontSize:"14px",marginTop:"5px"},v={display:"block",marginBottom:"5px",fontSize:"14px",fontWeight:"500"},j={marginBottom:"15px"};return(0,r.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",zIndex:9999},children:(0,r.jsxs)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"white",padding:"30px",borderRadius:"8px",maxWidth:"500px",width:"90%",maxHeight:"80vh",overflowY:"auto"},children:[(0,r.jsxs)("h3",{style:{fontSize:"18px",fontWeight:"bold",marginBottom:"15px"},children:[n?"Edit":"Configure"," ",s.charAt(0).toUpperCase()+s.slice(1)," Adapter ",i?"(".concat(i,")"):""]}),"discord"===s&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{style:j,children:[(0,r.jsxs)("label",{style:v,children:["Bot Token ",(0,r.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,r.jsx)("input",{type:"password",value:l.bot_token||"",onChange:e=>o({...l,bot_token:e.target.value}),style:y,placeholder:n?"••••••••":"Your Discord bot token"})]}),(0,r.jsxs)("div",{style:j,children:[(0,r.jsxs)("label",{style:v,children:["Server ID ",(0,r.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,r.jsx)("input",{type:"text",value:l.server_id||"",onChange:e=>o({...l,server_id:e.target.value}),style:y,placeholder:"Discord server/guild ID"})]}),(0,r.jsxs)("div",{style:j,children:[(0,r.jsx)("label",{style:v,children:"Home Channel ID"}),(0,r.jsx)("input",{type:"text",value:l.home_channel_id||"",onChange:e=>o({...l,home_channel_id:e.target.value}),style:y,placeholder:"Primary channel for agent"})]}),(0,r.jsxs)("div",{style:j,children:[(0,r.jsx)("label",{style:v,children:"Deferral Channel ID"}),(0,r.jsx)("input",{type:"text",value:l.deferral_channel_id||"",onChange:e=>o({...l,deferral_channel_id:e.target.value}),style:y,placeholder:"Channel for deferred messages"})]}),(0,r.jsxs)("div",{style:j,children:[(0,r.jsx)("label",{style:v,children:"Monitored Channel IDs (comma-separated)"}),(0,r.jsx)("input",{type:"text",value:Array.isArray(l.monitored_channel_ids)?l.monitored_channel_ids.join(", "):"",onChange:e=>o({...l,monitored_channel_ids:e.target.value?e.target.value.split(",").map(e=>e.trim()):[]}),style:y,placeholder:"Channel IDs to monitor"})]}),(0,r.jsx)("div",{style:j,children:(0,r.jsxs)("label",{children:[(0,r.jsx)("input",{type:"checkbox",checked:!1!==l.respond_to_mentions,onChange:e=>o({...l,respond_to_mentions:e.target.checked}),style:{marginRight:"8px"}}),"Respond to Mentions"]})}),(0,r.jsx)("div",{style:j,children:(0,r.jsxs)("label",{children:[(0,r.jsx)("input",{type:"checkbox",checked:!1!==l.respond_to_dms,onChange:e=>o({...l,respond_to_dms:e.target.checked}),style:{marginRight:"8px"}}),"Respond to DMs"]})})]}),"api"===s&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{style:j,children:[(0,r.jsxs)("label",{style:v,children:["Host ",(0,r.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,r.jsx)("input",{type:"text",value:l.host||"",onChange:e=>o({...l,host:e.target.value}),style:y,placeholder:"0.0.0.0"})]}),(0,r.jsxs)("div",{style:j,children:[(0,r.jsxs)("label",{style:v,children:["Port ",(0,r.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,r.jsx)("input",{type:"number",value:l.port||"",onChange:e=>o({...l,port:parseInt(e.target.value)||8080}),style:y,placeholder:"8080"})]}),(0,r.jsxs)("div",{style:j,children:[(0,r.jsx)("label",{style:v,children:"CORS Origins"}),(0,r.jsx)("input",{type:"text",value:(null==(t=l.cors_origins)?void 0:t.join(", "))||"*",onChange:e=>o({...l,cors_origins:e.target.value.split(",").map(e=>e.trim())}),style:y,placeholder:"*, http://localhost:3000"})]}),(0,r.jsx)("div",{style:j,children:(0,r.jsxs)("label",{children:[(0,r.jsx)("input",{type:"checkbox",checked:!1!==l.enable_auth,onChange:e=>o({...l,enable_auth:e.target.checked}),style:{marginRight:"8px"}}),"Enable Authentication"]})}),(0,r.jsx)("div",{style:j,children:(0,r.jsxs)("label",{children:[(0,r.jsx)("input",{type:"checkbox",checked:!1!==l.cors_enabled,onChange:e=>o({...l,cors_enabled:e.target.checked}),style:{marginRight:"8px"}}),"Enable CORS"]})})]}),"cli"===s&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{style:j,children:[(0,r.jsx)("label",{style:v,children:"Prompt"}),(0,r.jsx)("input",{type:"text",value:l.prompt||"",onChange:e=>o({...l,prompt:e.target.value}),style:y,placeholder:"> "})]}),(0,r.jsxs)("div",{style:j,children:[(0,r.jsx)("label",{style:v,children:"History File"}),(0,r.jsx)("input",{type:"text",value:l.history_file||"",onChange:e=>o({...l,history_file:e.target.value}),style:y,placeholder:".ciris_history"})]}),(0,r.jsx)("div",{style:j,children:(0,r.jsxs)("label",{children:[(0,r.jsx)("input",{type:"checkbox",checked:l.enable_colors||!1,onChange:e=>o({...l,enable_colors:e.target.checked}),style:{marginRight:"8px"}}),"Enable Colors"]})})]}),(0,r.jsxs)("div",{style:{marginTop:"20px",borderTop:"1px solid #e5e7eb",paddingTop:"20px"},children:[(0,r.jsxs)("button",{type:"button",onClick:()=>x(!m),style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 12px",border:"1px solid #e5e7eb",borderRadius:"4px",backgroundColor:"white",cursor:"pointer",fontSize:"14px",fontWeight:"500",width:"100%",justifyContent:"space-between"},children:[(0,r.jsx)("span",{children:"Advanced Configuration (JSON)"}),(0,r.jsx)("span",{style:{fontSize:"12px"},children:m?"▼":"▶"})]}),m&&(0,r.jsxs)("div",{style:{marginTop:"15px"},children:[(0,r.jsxs)("label",{style:{...v,marginBottom:"10px"},children:["Raw Configuration JSON",p&&(0,r.jsx)("span",{style:{color:"red",fontSize:"12px",marginLeft:"10px"},children:p})]}),(0,r.jsx)("textarea",{value:JSON.stringify(l,null,2),onChange:e=>{try{let t=JSON.parse(e.target.value);o(t),g(null)}catch(e){g("Invalid JSON")}},style:{...y,fontFamily:"monospace",fontSize:"12px",minHeight:"200px",resize:"vertical",borderColor:p?"red":"#ccc"},placeholder:"{}"}),(0,r.jsx)("p",{style:{fontSize:"12px",color:"#666",marginTop:"5px"},children:"Edit the raw JSON configuration. Changes here will override the form fields above."})]})]}),(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",gap:"10px",marginTop:"20px"},children:[(0,r.jsx)("button",{onClick:u,style:{padding:"8px 16px",border:"1px solid #ccc",borderRadius:"4px",backgroundColor:"white",cursor:"pointer"},children:"Cancel"}),(0,r.jsx)("button",{onClick:()=>{if("discord"===s){if(!l.bot_token)return void c.Ay.error("Bot token is required");if(!l.server_id)return void c.Ay.error("Server ID is required")}else if("api"===s){if(!l.host)return void c.Ay.error("Host is required");if(!l.port)return void c.Ay.error("Port is required")}d(s,l)},disabled:h,style:{padding:"8px 16px",backgroundColor:h?"#ccc":"#4f46e5",color:"white",border:"none",borderRadius:"4px",cursor:h?"not-allowed":"pointer"},children:h?n?"Saving...":"Registering...":n?"Save Changes":"Register Adapter"})]})]})})}function m(){var e,t,s,m,x,p,g,y,v,j,f,b,N,w,_,C,A,k,M,R,S,I;let{hasRole:O}=(0,d.A)(),z=(0,i.jE)(),[E,L]=(0,a.useState)(null),[P,F]=(0,a.useState)(null),[T,D]=(0,a.useState)({}),B=e=>{if(e.startsWith("registry.ServiceType.")){let t=e.split(".");if(t.length>=4){let e=t[2],s=t[3].split("_")[0];if("DiscordAdapter"===s){if("WISE_AUTHORITY"===e)return"DISCORD-WISE";if("COMMUNICATION"===e)return"DISCORD-COMM"}else if("APICommunicationService"===s)return"API-COMM";else if("APIToolService"===s)return"API-TOOL";else if("APIRuntimeControlService"===s)return"API-RUNTIME";else if("DiscordToolService"===s)return"DISCORD-TOOL";else if("MockLLMService"===s)return"MOCK-LLM";else if("WiseAuthorityService"===s)return"CORE-WISE";else if("SecretsToolService"===s)return"CORE-TOOL";else if("LocalGraphMemoryService"===s)return"MEMORY";else if("TimeService"===s)return"TIME";else return e.replace(/_/g,"-")}}if(e.startsWith("direct.")){let t=e.split(".");return t[t.length-1].replace(/Service$/,"").replace(/([A-Z])/g,"-$1").toUpperCase().replace(/^-/,"").replace(/-+/g,"-")}return e};(E||P)&&console.log("Modal states:",{confirmDialog:E,adapterConfigModal:P});let{data:q}=(0,n.I)({queryKey:["system-health"],queryFn:()=>o.AQ.system.getHealth(),refetchInterval:5e3}),{data:H}=(0,n.I)({queryKey:["system-services"],queryFn:()=>o.AQ.system.getServices(),refetchInterval:5e3}),{data:K}=(0,n.I)({queryKey:["system-resources"],queryFn:()=>o.AQ.system.getResources(),refetchInterval:5e3}),{data:U}=(0,n.I)({queryKey:["system-processors"],queryFn:()=>o.AQ.system.getProcessorStates(),refetchInterval:5e3,enabled:O("ADMIN")}),{data:Q}=(0,n.I)({queryKey:["system-runtime-state"],queryFn:()=>o.AQ.system.getRuntimeState(),refetchInterval:5e3}),W=Q?{is_paused:"paused"===Q.processor_state,cognitive_state:("UNKNOWN"!==Q.cognitive_state?Q.cognitive_state:null==q||null==(e=q.cognitive_state)?void 0:e.toUpperCase())||"WORK",queue_depth:Q.queue_depth,processor_status:Q.processor_state}:null,{data:V}=(0,n.I)({queryKey:["system-adapters"],queryFn:()=>o.AQ.system.getAdapters(),refetchInterval:5e3,enabled:O("ADMIN")}),{data:G}=(0,n.I)({queryKey:["agent-channels"],queryFn:()=>o.AQ.agent.getChannels(),refetchInterval:5e3}),{data:J}=(0,n.I)({queryKey:["telemetry-overview"],queryFn:()=>o.AQ.telemetry.getOverview(),refetchInterval:3e4}),Y=(0,l.n)({mutationFn:()=>o.AQ.system.pauseRuntime(),onSuccess:()=>{c.Ay.success("Runtime paused"),z.invalidateQueries({queryKey:["system-health"]})},onError:()=>{c.Ay.error("Failed to pause runtime")}}),$=(0,l.n)({mutationFn:()=>o.AQ.system.resumeRuntime(),onSuccess:()=>{c.Ay.success("Runtime resumed"),z.invalidateQueries({queryKey:["system-health"]})},onError:()=>{c.Ay.error("Failed to resume runtime")}}),Z=(0,l.n)({mutationFn:e=>{let{name:t,duration:s}=e;return o.AQ.system.pauseProcessor(t,s)},onSuccess:(e,t)=>{let{name:s}=t;c.Ay.success("Processor ".concat(s," paused")),z.invalidateQueries({queryKey:["system-processors"]})},onError:(e,t)=>{let{name:s}=t;c.Ay.error("Failed to pause processor ".concat(s))}}),X=(0,l.n)({mutationFn:e=>o.AQ.system.resumeProcessor(e),onSuccess:(e,t)=>{c.Ay.success("Processor ".concat(t," resumed")),z.invalidateQueries({queryKey:["system-processors"]})},onError:(e,t)=>{c.Ay.error("Failed to resume processor ".concat(t))}}),ee=(0,l.n)({mutationFn:e=>o.AQ.system.reloadAdapter(e),onSuccess:(e,t)=>{c.Ay.success("Adapter ".concat(t," reloaded")),z.invalidateQueries({queryKey:["system-adapters"]})},onError:(e,t)=>{c.Ay.error("Failed to reload adapter ".concat(t))}}),et=(0,l.n)({mutationFn:e=>o.AQ.system.unregisterAdapter(e),onSuccess:(e,t)=>{c.Ay.success("Adapter ".concat(t," removed")),z.invalidateQueries({queryKey:["system-adapters"]})},onError:(e,t)=>{c.Ay.error("Failed to remove adapter ".concat(t))}}),es=(0,l.n)({mutationFn:e=>{let{adapterType:t,config:s}=e;return o.AQ.system.registerAdapter(t,s)},onSuccess:(e,t)=>{let{adapterType:s}=t;c.Ay.success("".concat(s," adapter registered")),z.invalidateQueries({queryKey:["system-adapters"]}),z.invalidateQueries({queryKey:["agent-channels"]}),F(null),D({})},onError:(e,t)=>{let{adapterType:s}=t;c.Ay.error("Failed to register ".concat(s," adapter"))}}),er=e=>{switch(e){case"healthy":return"green";case"degraded":return"yellow";case"unhealthy":return"red";default:return"gray"}};return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("div",{className:"bg-white shadow",children:(0,r.jsxs)("div",{className:"px-4 py-5 sm:px-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"System Status"}),(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Comprehensive system health monitoring and runtime control"})]})}),(0,r.jsx)("div",{className:"bg-white shadow rounded-lg",children:(0,r.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"System Overview"}),q&&(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[(0,r.jsxs)("div",{className:"bg-gray-50 px-4 py-5 sm:p-6 rounded-lg border-2 border-gray-200",children:[(0,r.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Overall Health"}),(0,r.jsx)("dd",{className:"mt-2 flex items-center",children:(0,r.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-lg font-semibold bg-".concat(er(q.status),"-100 text-").concat(er(q.status),"-800"),children:[(0,r.jsx)("span",{className:"mr-2",children:(e=>{switch(e){case"healthy":return"✓";case"degraded":return"!";case"unhealthy":return"✗";default:return"?"}})(q.status)}),null==(t=q.status)?void 0:t.toUpperCase()]})})]}),(0,r.jsxs)("div",{className:"bg-gray-50 px-4 py-5 sm:p-6 rounded-lg border-2 border-gray-200",children:[(0,r.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Uptime"}),(0,r.jsx)("dd",{className:"mt-2 text-2xl font-semibold text-gray-900",children:q.uptime_seconds?(e=>{let t=Math.floor(e/86400),s=Math.floor(e%86400/3600),r=Math.floor(e%3600/60);return"".concat(t,"d ").concat(s,"h ").concat(r,"m")})(q.uptime_seconds):"N/A"})]}),(0,r.jsxs)("div",{className:"bg-gray-50 px-4 py-5 sm:p-6 rounded-lg border-2 border-gray-200",children:[(0,r.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Memory Usage"}),(0,r.jsx)("dd",{className:"mt-2 text-2xl font-semibold text-gray-900",children:(null==K||null==(s=K.current_usage)?void 0:s.memory_mb)?"".concat(K.current_usage.memory_mb.toFixed(1)," MB"):"N/A"})]}),(0,r.jsxs)("div",{className:"bg-gray-50 px-4 py-5 sm:p-6 rounded-lg border-2 border-gray-200",children:[(0,r.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"CPU Usage"}),(0,r.jsx)("dd",{className:"mt-2 text-2xl font-semibold text-gray-900",children:(null==K||null==(m=K.current_usage)?void 0:m.cpu_percent)?"".concat(K.current_usage.cpu_percent.toFixed(1),"%"):"N/A"})]})]})]})}),(0,r.jsx)("div",{className:"bg-white shadow rounded-lg",children:(0,r.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Resource Usage"}),K?(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-3",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"CPU Usage"}),(0,r.jsxs)("span",{className:"text-lg font-bold ".concat((null==K||null==(x=K.current_usage)?void 0:x.cpu_percent)>80?"text-red-600":(null==K||null==(p=K.current_usage)?void 0:p.cpu_percent)>60?"text-yellow-600":"text-green-600"),children:[(null==K||null==(y=K.current_usage)||null==(g=y.cpu_percent)?void 0:g.toFixed(1))||0,"%"]})]}),(0,r.jsx)("div",{className:"relative",children:(0,r.jsx)("div",{className:"overflow-hidden h-4 text-xs flex rounded-full bg-gray-200",children:(0,r.jsx)("div",{style:{width:"".concat((null==K||null==(v=K.current_usage)?void 0:v.cpu_percent)||0,"%")},className:"shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center transition-all duration-300 ".concat((null==K||null==(j=K.current_usage)?void 0:j.cpu_percent)>80?"bg-red-500":(null==K||null==(f=K.current_usage)?void 0:f.cpu_percent)>60?"bg-yellow-500":"bg-blue-500")})})})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Memory Usage"}),(0,r.jsxs)("span",{className:"text-lg font-bold ".concat((null==K||null==(b=K.current_usage)?void 0:b.memory_percent)>80?"text-red-600":(null==K||null==(N=K.current_usage)?void 0:N.memory_percent)>60?"text-yellow-600":"text-green-600"),children:[(null==K||null==(w=K.current_usage)?void 0:w.memory_mb)?K.current_usage.memory_mb.toFixed(1):0," MB"]})]}),(0,r.jsx)("div",{className:"relative",children:(0,r.jsx)("div",{className:"overflow-hidden h-4 text-xs flex rounded-full bg-gray-200",children:(0,r.jsx)("div",{style:{width:"".concat((null==K||null==(_=K.current_usage)?void 0:_.memory_percent)||0,"%")},className:"shadow-none flex flex-col text-center whitespace-nowrap text-white justify-center transition-all duration-300 ".concat((null==K||null==(C=K.current_usage)?void 0:C.memory_percent)>80?"bg-red-500":(null==K||null==(A=K.current_usage)?void 0:A.memory_percent)>60?"bg-yellow-500":"bg-green-500")})})}),(0,r.jsxs)("p",{className:"text-xs text-gray-500",children:[(null==K||null==(M=K.current_usage)||null==(k=M.memory_percent)?void 0:k.toFixed(1))||0,"% utilized"]})]}),(0,r.jsx)("div",{className:"space-y-2",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Disk Usage"}),(0,r.jsx)("span",{className:"text-lg font-bold text-green-600",children:(null==K||null==(R=K.current_usage)?void 0:R.disk_used_mb)?"".concat((K.current_usage.disk_used_mb/1024).toFixed(1)," GB"):"N/A"})]})})]}):(0,r.jsx)("div",{className:"text-center py-8",children:(0,r.jsx)("p",{className:"text-gray-500",children:"Loading resource information..."})})]})}),(0,r.jsx)("div",{className:"bg-white shadow rounded-lg",children:(0,r.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Environmental Impact"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-3",children:[(0,r.jsxs)("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"CO₂ Emissions"}),(0,r.jsx)(u.fC,{className:"text-green-600",size:"sm"})]}),(0,r.jsx)("div",{className:"space-y-2",children:(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"text-2xl font-bold text-green-700",children:[(null==J?void 0:J.carbon_last_hour_grams)?(J.carbon_last_hour_grams/1e3).toFixed(3):"0.000"," kg"]}),(0,r.jsx)("p",{className:"text-xs text-gray-600",children:"Last hour total"})]})})]}),(0,r.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Energy Usage"}),(0,r.jsx)(u.xZ,{className:"text-blue-600",size:"sm"})]}),(0,r.jsx)("div",{className:"space-y-2",children:(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"text-2xl font-bold text-blue-700",children:[(null==J?void 0:J.energy_last_hour_kwh)?J.energy_last_hour_kwh.toFixed(4):"0.0000"," kWh"]}),(0,r.jsx)("p",{className:"text-xs text-gray-600",children:"Last hour total"})]})})]}),(0,r.jsxs)("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Estimated Cost"}),(0,r.jsx)(u.xm,{className:"text-purple-600",size:"sm"})]}),(0,r.jsx)("div",{className:"space-y-2",children:(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"text-2xl font-bold text-purple-700",children:["$",(null==J?void 0:J.cost_last_hour_cents)?(J.cost_last_hour_cents/100).toFixed(2):"0.00"]}),(0,r.jsx)("p",{className:"text-xs text-gray-600",children:"Last hour total"})]})})]})]}),(0,r.jsxs)("div",{className:"mt-6 border-t pt-4",children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Token Usage Details"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-3",children:[(0,r.jsxs)("div",{className:"bg-gray-50 rounded p-3",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600",children:"Total Tokens (24h)"}),(0,r.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:(null==J?void 0:J.tokens_24h)?J.tokens_24h.toLocaleString():"0"})]}),(0,r.jsxs)("div",{className:"bg-gray-50 rounded p-3",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600",children:"Avg Tokens/Hour"}),(0,r.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:(null==J||null==(S=J.tokens_last_hour)?void 0:S.toLocaleString())||"0"})]}),(0,r.jsxs)("div",{className:"bg-gray-50 rounded p-3",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600",children:"Model"}),(0,r.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:(null==q||null==(I=q.version)?void 0:I.includes("mock"))?"Mock LLM":"llama4scout"})]})]})]})]})}),(0,r.jsx)("div",{className:"bg-white shadow rounded-lg",children:(0,r.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("h3",{className:"text-lg font-medium text-gray-900",children:["Services Health",(null==H?void 0:H.services)?" (".concat(H.services.length," Services)"):""]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4 text-sm",children:[(0,r.jsxs)("span",{className:"flex items-center",children:[(0,r.jsx)(u.md,{status:"green",className:"mr-1"}),"Healthy"]}),(0,r.jsxs)("span",{className:"flex items-center",children:[(0,r.jsx)(u.md,{status:"yellow",className:"mr-1"}),"Degraded"]}),(0,r.jsxs)("span",{className:"flex items-center",children:[(0,r.jsx)(u.md,{status:"red",className:"mr-1"}),"Unhealthy"]})]})]}),(null==H?void 0:H.services)?(0,r.jsx)("div",{className:"grid grid-cols-2 gap-4 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5",children:H.services.map((e,t)=>(0,r.jsxs)("div",{className:"relative p-4 rounded-lg border-2 transition-all duration-200 hover:shadow-md ".concat(!0===e.healthy?"border-green-200 bg-green-50 hover:border-green-300":!0===e.available?"border-yellow-200 bg-yellow-50 hover:border-yellow-300":"border-red-200 bg-red-50 hover:border-red-300"),children:[(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("h4",{className:"text-sm font-semibold text-gray-900 truncate",children:B(e.name)}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:e.service_type})]}),(0,r.jsx)(u.md,{status:!0===e.healthy?"green":!0===e.available?"yellow":"red",className:"flex-shrink-0 ml-2"})]}),e.capabilities&&e.capabilities.length>0&&(0,r.jsx)("div",{className:"mt-2",children:(0,r.jsxs)("p",{className:"text-xs text-gray-600",title:e.capabilities.join(", "),children:[e.capabilities.length," capabilities"]})})]},"".concat(e.name,"-").concat(t)))}):(0,r.jsx)("div",{className:"text-center py-8",children:(0,r.jsx)("p",{className:"text-gray-500",children:"Loading services information..."})})]})}),O("ADMIN")&&(0,r.jsx)("div",{className:"bg-white shadow rounded-lg",children:(0,r.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Main Processor"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[(0,r.jsxs)("div",{className:"bg-gray-50 px-4 py-5 sm:p-6 rounded-lg border-2 border-gray-200",children:[(0,r.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Processor Status"}),(0,r.jsx)("dd",{className:"mt-2",children:(0,r.jsx)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-lg font-semibold ".concat((null==W?void 0:W.is_paused)?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"),children:(null==W?void 0:W.is_paused)?"PAUSED":"RUNNING"})})]}),(0,r.jsxs)("div",{className:"bg-gray-50 px-4 py-5 sm:p-6 rounded-lg border-2 border-gray-200",children:[(0,r.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Cognitive State"}),(0,r.jsx)("dd",{className:"mt-2 text-2xl font-semibold text-gray-900",children:(null==W?void 0:W.cognitive_state)||"WORK"})]}),(0,r.jsxs)("div",{className:"bg-gray-50 px-4 py-5 sm:p-6 rounded-lg border-2 border-gray-200",children:[(0,r.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Queue Depth"}),(0,r.jsx)("dd",{className:"mt-2 text-2xl font-semibold text-gray-900",children:(null==W?void 0:W.queue_depth)||0})]}),(0,r.jsxs)("div",{className:"bg-gray-50 px-4 py-5 sm:p-6 rounded-lg border-2 border-gray-200",children:[(0,r.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Actions"}),(0,r.jsx)("dd",{className:"mt-2",children:(null==W?void 0:W.is_paused)?(0,r.jsx)("button",{onClick:()=>L({type:"resumeRuntime"}),className:"inline-flex items-center px-3 py-1 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-green-600 hover:bg-green-700",children:"Resume"}):(0,r.jsx)("button",{onClick:()=>L({type:"pauseRuntime"}),className:"inline-flex items-center px-3 py-1 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-yellow-600 hover:bg-yellow-700",children:"Pause"})})]})]}),(0,r.jsx)("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg",children:(0,r.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,r.jsx)("strong",{children:"Note:"})," The CIRIS system has one main processor that cycles through cognitive states (WAKEUP, WORK, PLAY, DREAM, SOLITUDE, SHUTDOWN). Pausing affects the entire processor, not individual states."]})})]})}),O("ADMIN")&&(0,r.jsx)("div",{className:"bg-white shadow rounded-lg",children:(0,r.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Register New Adapter"}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("select",{value:"",onChange:e=>{let t=e.target.value;console.log("Adapter selected:",t),t&&(F({type:t}),"discord"===t?D({bot_token:"",server_id:"",monitored_channel_ids:[],home_channel_id:"",deferral_channel_id:"",respond_to_mentions:!0,respond_to_dms:!0}):"api"===t?D({host:"0.0.0.0",port:8080,cors_origins:["*"],enable_auth:!0}):"cli"===t&&D({prompt:"> ",enable_colors:!0,history_file:".ciris_history"}))},className:"block w-full max-w-xs px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:[(0,r.jsx)("option",{value:"",children:"Select adapter type..."}),(0,r.jsx)("option",{value:"api",children:"API"}),(0,r.jsx)("option",{value:"cli",children:"CLI"}),(0,r.jsx)("option",{value:"discord",children:"Discord"})]}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Select an adapter type to register a new instance"})]})]})}),(0,r.jsx)("div",{className:"bg-white shadow rounded-lg",children:(0,r.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Active Communication Channels"}),G&&G.length>0?(0,r.jsx)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3",children:G.map(e=>(0,r.jsxs)("div",{className:"relative p-4 rounded-lg border-2 border-gray-200 bg-gray-50 hover:shadow-md transition-all duration-200",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h4",{className:"text-sm font-semibold text-gray-900",children:e.display_name}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["ID: ",e.channel_id]}),(0,r.jsxs)("p",{className:"text-xs text-gray-500",children:["Type: ",e.channel_type]})]}),(0,r.jsx)(u.md,{status:e.is_active?"green":"gray",className:"flex-shrink-0 ml-2"})]}),(0,r.jsxs)("div",{className:"mt-3 space-y-1",children:[(0,r.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Messages:"}),(0,r.jsx)("span",{className:"font-medium",children:e.message_count||0})]}),e.last_activity&&(0,r.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,r.jsx)("span",{className:"text-gray-600",children:"Last Activity:"}),(0,r.jsx)("span",{className:"font-medium",children:new Date(e.last_activity).toLocaleTimeString()})]})]})]},e.channel_id))}):(0,r.jsx)("div",{className:"text-center py-8",children:(0,r.jsx)("p",{className:"text-gray-500",children:"No active channels found"})})]})}),O("ADMIN")&&(null==V?void 0:V.adapters)&&V.adapters.length>0&&(0,r.jsx)("div",{className:"bg-white shadow rounded-lg",children:(0,r.jsxs)("div",{className:"px-4 py-5 sm:p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Adapter Management"}),(0,r.jsx)("div",{className:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-300",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Adapter Name"}),(0,r.jsx)("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Type"}),(0,r.jsx)("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Status"}),(0,r.jsx)("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Active Channels"}),(0,r.jsx)("th",{scope:"col",className:"relative py-3.5 pl-3 pr-4 sm:pr-6",children:(0,r.jsx)("span",{className:"sr-only",children:"Actions"})})]})}),(0,r.jsx)("tbody",{className:"divide-y divide-gray-200 bg-white",children:V.adapters.map(e=>{var t,s;return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"whitespace-nowrap px-3 py-4 text-sm font-medium text-gray-900",children:e.adapter_id}),(0,r.jsx)("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:e.adapter_type}),(0,r.jsx)("td",{className:"whitespace-nowrap px-3 py-4 text-sm",children:(0,r.jsx)("span",{className:"inline-flex items-center rounded-full px-2 py-1 text-xs font-medium ".concat("api"===e.adapter_type&&(null==q?void 0:q.status)==="healthy"||e.is_running?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:"api"===e.adapter_type&&(null==q?void 0:q.status)==="healthy"||e.is_running?"Active":"Loaded"})}),(0,r.jsx)("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsxs)("span",{className:"font-medium",children:[(null==G?void 0:G.filter(t=>t.channel_type===e.adapter_type).length)||0," active"]}),(0,r.jsx)("div",{className:"text-xs text-gray-400 mt-1",children:(null==G||null==(s=G.filter(t=>t.channel_type===e.adapter_type))||null==(t=s.map(e=>e.display_name))?void 0:t.join(", "))||"No active channels"})]})}),(0,r.jsx)("td",{className:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-end space-x-3",children:[(0,r.jsx)("button",{onClick:()=>{let t="adapter.".concat(e.adapter_id,".config");o.AQ.config.getConfigByKey(t).then(t=>{t&&t.value?D(t.value):D({}),F({type:e.adapter_type,adapterId:e.adapter_id,isEdit:!0})}).catch(e=>{console.error("Failed to fetch adapter config:",e),c.Ay.error("Failed to load adapter configuration")})},className:"text-indigo-600 hover:text-indigo-900",children:"Edit"}),(0,r.jsx)("button",{onClick:()=>L({type:"reloadAdapter",name:e.adapter_id}),className:"text-blue-600 hover:text-blue-900",children:"Reload"}),(0,r.jsx)("button",{onClick:()=>L({type:"unregisterAdapter",name:e.adapter_id}),className:"text-red-600 hover:text-red-900",children:"Remove"})]})})]},e.adapter_id)})})]})})]})}),E&&"registerAdapter"===E.type&&"test"===E.name&&(0,r.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",zIndex:9999},children:(0,r.jsxs)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"white",padding:"20px",borderRadius:"8px"},children:[(0,r.jsx)("h2",{children:"Test Modal Works!"}),(0,r.jsx)("button",{onClick:()=>L(null),style:{marginTop:"10px",padding:"5px 10px"},children:"Close"})]})}),E&&"test"!==E.name?(0,r.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",zIndex:9999},children:(0,r.jsxs)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"white",padding:"30px",borderRadius:"8px",maxWidth:"500px",width:"90%"},children:[(0,r.jsx)("h3",{style:{fontSize:"18px",fontWeight:"bold",marginBottom:"15px"},children:"Confirm Action"}),(0,r.jsxs)("p",{style:{marginBottom:"20px",color:"#666"},children:["pauseRuntime"===E.type&&"Are you sure you want to pause the runtime? This will temporarily stop all message processing.","resumeRuntime"===E.type&&"Are you sure you want to resume the runtime? Message processing will continue.","reloadAdapter"===E.type&&"Are you sure you want to reload the ".concat(E.name," adapter?"),"unregisterAdapter"===E.type&&"Are you sure you want to remove the ".concat(E.name," adapter? This cannot be undone."),"registerAdapter"===E.type&&"Are you sure you want to register a new ".concat(E.name," adapter?")]}),(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",gap:"10px"},children:[(0,r.jsx)("button",{onClick:()=>L(null),style:{padding:"8px 16px",border:"1px solid #ccc",borderRadius:"4px",backgroundColor:"white",cursor:"pointer"},children:"Cancel"}),(0,r.jsx)("button",{onClick:()=>{if(E){switch(E.type){case"pauseRuntime":Y.mutate();break;case"resumeRuntime":$.mutate();break;case"pauseProcessor":E.name&&Z.mutate({name:E.name});break;case"resumeProcessor":E.name&&X.mutate(E.name);break;case"reloadAdapter":E.name&&ee.mutate(E.name);break;case"unregisterAdapter":E.name&&et.mutate(E.name);break;case"registerAdapter":E.name&&es.mutate({adapterType:E.name})}L(null)}},style:{padding:"8px 16px",backgroundColor:"#f59e0b",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Confirm"})]})]})}):null,P&&(0,r.jsx)(h,{adapterType:P.type,adapterId:P.adapterId,isEdit:P.isEdit,config:T,setConfig:D,onSubmit:(e,t)=>{if(P.isEdit&&P.adapterId){let e="adapter.".concat(P.adapterId,".config");o.AQ.config.updateConfigByKey(e,t).then(()=>{c.Ay.success("Adapter configuration updated"),z.invalidateQueries({queryKey:["system-adapters"]}),F(null),D({})}).catch(e=>{c.Ay.error("Failed to update adapter configuration")})}else es.mutate({adapterType:e,config:t})},onClose:()=>{F(null),D({})},isPending:es.isPending})]})}},6258:(e,t,s)=>{"use strict";s.d(t,{n:()=>c});var r=s(7620),a=s(589),i=s(494),n=s(2327),l=s(7703),o=class extends n.Q{#a;#i=void 0;#n;#l;constructor(e,t){super(),this.#a=e,this.setOptions(t),this.bindMethods(),this.#o()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){let t=this.options;this.options=this.#a.defaultMutationOptions(e),(0,l.f8)(this.options,t)||this.#a.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#n,observer:this}),t?.mutationKey&&this.options.mutationKey&&(0,l.EN)(t.mutationKey)!==(0,l.EN)(this.options.mutationKey)?this.reset():this.#n?.state.status==="pending"&&this.#n.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#n?.removeObserver(this)}onMutationUpdate(e){this.#o(),this.#d(e)}getCurrentResult(){return this.#i}reset(){this.#n?.removeObserver(this),this.#n=void 0,this.#o(),this.#d()}mutate(e,t){return this.#l=t,this.#n?.removeObserver(this),this.#n=this.#a.getMutationCache().build(this.#a,this.options),this.#n.addObserver(this),this.#n.execute(e)}#o(){let e=this.#n?.state??(0,a.$)();this.#i={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#d(e){i.jG.batch(()=>{if(this.#l&&this.hasListeners()){let t=this.#i.variables,s=this.#i.context;e?.type==="success"?(this.#l.onSuccess?.(e.data,t,s),this.#l.onSettled?.(e.data,null,t,s)):e?.type==="error"&&(this.#l.onError?.(e.error,t,s),this.#l.onSettled?.(void 0,e.error,t,s))}this.listeners.forEach(e=>{e(this.#i)})})}},d=s(7606);function c(e,t){let s=(0,d.jE)(t),[a]=r.useState(()=>new o(s,e));r.useEffect(()=>{a.setOptions(e)},[a,e]);let n=r.useSyncExternalStore(r.useCallback(e=>a.subscribe(i.jG.batchCalls(e)),[a]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),c=r.useCallback((e,t)=>{a.mutate(e,t).catch(l.lQ)},[a]);if(n.error&&(0,l.GU)(a.options.throwOnError,[n.error]))throw n.error;return{...n,mutate:c,mutateAsync:n.mutate}}}},e=>{var t=t=>e(e.s=t);e.O(0,[4534,8903,3297,704,9484,587,8315,7358],()=>t(5928)),_N_E=e.O()}]);
