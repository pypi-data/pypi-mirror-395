Metadata-Version: 2.1
Name: odoo-addon-l10n_es_genci_account
Version: 16.0.1.0.0.1
Summary: Gestión tarifas GENCI
Home-page: https://github.com/sygel-technology/sy-l10n-spain
Author: Sygel
License: AGPL-3
Classifier: Programming Language :: Python
Classifier: Framework :: Odoo
Classifier: Framework :: Odoo :: 16.0
Classifier: License :: OSI Approved :: GNU Affero General Public License v3
Requires-Python: >=3.10
Requires-Dist: odoo-addon-account-invoice-margin<16.1dev,>=16.0dev
Requires-Dist: odoo<16.1dev,>=16.0a

==========
Tasa Genci
==========

.. 
   !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
   !! This file is generated by oca-gen-addon-readme !!
   !! changes will be overwritten.                   !!
   !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
   !! source digest: sha256:d404c447c8d2dcf511b7ab0046e37cfcc2a7d4037ceef0a88ca7850e85efffa8
   !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

.. |badge1| image:: https://img.shields.io/badge/maturity-Beta-yellow.png
    :target: https://odoo-community.org/page/development-status
    :alt: Beta
.. |badge2| image:: https://img.shields.io/badge/licence-AGPL--3-blue.png
    :target: http://www.gnu.org/licenses/agpl-3.0-standalone.html
    :alt: License: AGPL-3
.. |badge3| image:: https://img.shields.io/badge/github-sygel--technology%2Fsy--l10n--spain-lightgray.png?logo=github
    :target: https://github.com/sygel-technology/sy-l10n-spain/tree/16.0/l10n_es_genci_account
    :alt: sygel-technology/sy-l10n-spain

|badge1| |badge2| |badge3|

This module integrates the GENCI system into Odoo accounting,
automatically applying the GENCI environmental rate on invoice lines
where applicable.

**Table of contents**

.. contents::
   :local:

Installation
============

To install this module, you need to:

- Only install

Configuration
=============

To configure this module, you need to:

1. Enable GENCI for the company:

   - Go to Settings → Users & Companies → Companies.
   - Select the desired company.
   - In the GENCI tab, check Enable GENCI.
   - Save the changes.

This enables the GENCI functionality for all invoices of that company
and makes GENCI-specific configurations available elsewhere in the
system.

2. Create GENCI Rules:

   - Material type (metal, plastic, etc.).
   - Usage type (commercial or industrial).
   - Container capacity (1L, 5L, etc.).
   - Rate amount (price per unit, excluding taxes).
   - Validity period (start/end date).
   - Rule name will be used as invoice line description.

3. Configure Products:

   - "Subject to GENCI" = Yes.
   - Link GENCI rule on Genci Tab.

4. Configure Partners:

   - GENCI Subject checked by default.
   - Uncheck if not applicable.

5. Fiscal Positions:

   - GENCI Subject checkbox controls inclusion.

6. Invoice Header Field: "Is GENCI":

   - Default depends on partner config.
   - If unchecked, GENCI lines removed even if products apply.

Usage
=====

Usage Flow

1. Create invoice.
2. Add products with GENCI rules.
3. If all conditions met (partner, fiscal pos, rule, date, etc.) → GENCI
   line(s) auto-added.

Application Logic

- One GENCI line per distinct rule.
- Uses generated product: "Tasa GENCI (R.D. 1055/2022)".
- Line description comes from rule name.
- Amount = Unit Rate × Total Quantity across matching products.

Error Handling

- If "Is GENCI" is checked and no rule applies → Warning is shown.

Known issues / Roadmap
======================

Pending Features:

- **Multi-company:** Confirm whether GENCI rules should support
  multi-company logic, and ensure each rule is linked to its respective
  company with coherent application logic.

- **Currency:** Validate whether GENCI rules can be configured in
  different currencies or only in euros.

- **Supplier association:** Determine if each GENCI rule should be
  linked to a specific supplier, and consider if multiple rules could
  exist for the same product depending on the supplier.

- **Product GENCI flag type:** Consider changing the genci_subject field
  on product.template from a selection (yes/no) to a Boolean is_genci
  field for simplicity and consistency in the code.

Bug Tracker
===========

Bugs are tracked on `GitHub Issues <https://github.com/sygel-technology/sy-l10n-spain/issues>`_.
In case of trouble, please check there if your issue has already been reported.
If you spotted it first, help us to smash it by providing a detailed and welcomed
`feedback <https://github.com/sygel-technology/sy-l10n-spain/issues/new?body=module:%20l10n_es_genci_account%0Aversion:%2016.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**>`_.

Do not contact contributors directly about support or help with technical issues.

Credits
=======

Authors
-------

* Sygel

Contributors
------------

- `Sygel <https://www.sygel.es>`__:

  - Ángel Rivas
  - Valentín Vinagre

Maintainers
-----------

This module is part of the `sygel-technology/sy-l10n-spain <https://github.com/sygel-technology/sy-l10n-spain/tree/16.0/l10n_es_genci_account>`_ project on GitHub.

You are welcome to contribute.
