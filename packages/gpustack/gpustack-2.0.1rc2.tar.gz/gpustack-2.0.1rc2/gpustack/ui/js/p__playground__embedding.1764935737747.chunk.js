"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3856],{73963:function(e,n,t){var r=t(26068),a=t.n(r),i=t(27722),o=t(25466),l=t(75271),s=t(52676),c=function(e){var n=e.message,t=e.type,r=e.rows,l=void 0===r?1:r,c=e.ellipsis,u=e.style;return(0,s.jsx)(s.Fragment,{children:n?(0,s.jsxs)(o.Z.Paragraph,{type:t,ellipsis:void 0!==c?c:{rows:l,tooltip:n},style:a()({fontWeight:400,whiteSpace:"pre-line",textAlign:"center",padding:"2px 5px",borderRadius:"var(--border-radius-base)",margin:0,backgroundColor:"var(--ant-color-error-bg)"},u),children:[(0,s.jsx)(i.Z,{className:"m-r-8"}),n]}):null})};n.Z=l.memo(c)},85882:function(e,n,t){var r,a=t(26068),i=t.n(a),o=t(48305),l=t.n(o),s=t(67825),c=t.n(s),u=t(53649),d=t.n(u),f=t(15409),p=t(68652),m=t(32699),h=t(75271),x=t(67585),v=t(3453),g=t(52676),b=["children","maxWidth","minWidth","ghost","title","showTitle","tooltipProps","radius","filled"],y=(0,x.ZP)(p.Z)(r||(r=d()(["\n  margin: 0;\n  &.tag-filled {\n    border: none;\n    background-color: var(--ant-color-fill-secondary);\n  }\n"]))),j=function(e){var n=e.children,t=e.maxWidth,r=void 0===t?"100%":t,a=e.minWidth,o=e.ghost,s=void 0!==o&&o,u=e.title,d=e.showTitle,p=void 0!==d&&d,x=e.tooltipProps,j=e.radius,w=void 0===j?12:j,C=e.filled,N=void 0!==C&&C,Z=c()(e,b),k=(0,h.useRef)(null),S=(0,h.useState)(!1),R=l()(S,2),M=R[0],T=R[1],P=(0,h.useRef)(null),z=(0,h.useCallback)((function(){if(k.current){var e=k.current,n=e.scrollWidth,t=e.clientWidth;T(n>t)}}),[k.current]);(0,h.useEffect)((function(){var e,n,t=k.current;if(t)return null===(e=P.current)||void 0===e||e.disconnect(),P.current=new ResizeObserver((function(){z()})),null===(n=P.current)||void 0===n||n.observe(t),z(),function(){var e;null===(e=P.current)||void 0===e||e.disconnect(),P.current=null}}),[z]),(0,h.useEffect)((function(){var e=(0,m.throttle)(z,200);return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e),e.cancel()}}),[z]),(0,h.useEffect)((function(){z()}),[n,z]);var L=(0,h.useMemo)((function(){return i()({maxWidth:r,minWidth:a,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},Z.style)}),[r,Z.style]);return(0,g.jsx)(v.$R,{toolTipProps:i()(i()({},x),{},{destroyOnHidden:!1}),title:!(!M&&!p)&&(u||n),children:s?(0,g.jsx)("div",{ref:k,style:L,"data-overflow":M,children:n}):(0,g.jsx)(y,i()(i()({},Z),{},{className:"".concat(Z.className||""," ").concat(N?"tag-filled":""),ref:k,style:i()({paddingInline:Z.closable?"8px 22px":8,borderRadius:w},L),closeIcon:!!Z.closable&&(0,g.jsx)(f.Z,{style:{position:"absolute",right:8,top:"50%",transform:"translateY(-50%)"}}),children:n}))})};n.Z=h.memo(j)},82487:function(e,n,t){var r=t(32699),a=t.n(r),i=t(75271),o=t(6745),l=t(52676),s=(0,i.forwardRef)((function(e,n){var t=e.options,s=e.width,c=e.height,u=(0,i.useRef)(null),d=(0,i.useRef)(),f=(0,i.useRef)(!1),p=(0,i.useRef)(),m=(0,i.useRef)(!1);(0,i.useImperativeHandle)(n,(function(){return{chart:d.current}}));return(0,i.useEffect)((function(){var e,n,t=function(){var e;if(d.current&&!m.current){var n=d.current,t=null===(e=n.getOption())||void 0===e?void 0:e.yAxis;if(t&&Array.isArray(t)&&!(t.length<2)){var r=n.getModel(),i=[r.getComponent("yAxis",0),r.getComponent("yAxis",1)];if(i[0]&&i[1]){var o=i.map((function(e){return e.axis})),l=o.map((function(e){return e.scale.getInterval()})),s=o.map((function(e){return e.scale.getTicks()})).map((function(e){return e.length})),c=Math.max(s[0],s[1]),u=l[0]*(c-1),f=l[1]*(c-1);if(s[0]!==s[1]){var p=[{},{}];s[0]<c&&(p[0].max=a().round(u,2),p[0].interval=l[0],p[0].splitNumber=c),s[1]<c&&(p[1].max=a().round(f,2),p[1].interval=l[1],p[1].splitNumber=c),m.current=!0,n.setOption({yAxis:p})}}}}};u.current&&(u.current&&(null===(n=d.current)||void 0===n||n.clear(),d.current=o.Z.init(u.current)),null===(e=d.current)||void 0===e||e.on("finished",t));return function(){var e,n;null===(e=d.current)||void 0===e||e.off("finished",t),null===(n=d.current)||void 0===n||n.dispose()}}),[]),(0,i.useEffect)((function(){f.current=!1,m.current=!1,function(e){var n,t,r;d.current&&(null===(n=d.current)||void 0===n||n.clear(),null===(t=d.current)||void 0===t||t.setOption(e,{notMerge:!0,lazyUpdate:!0}),Array.isArray(e.yAxis)&&e.yAxis.length>1&&(null===(r=d.current)||void 0===r||r.resize()))}(t),f.current=!0}),[t]),(0,i.useEffect)((function(){var e=(0,r.throttle)((function(){var e;f.current&&(null===(e=d.current)||void 0===e||e.resize())}),100);return u.current&&(p.current=new ResizeObserver(e),p.current.observe(u.current)),function(){var e;null===(e=p.current)||void 0===e||e.disconnect(),p.current=void 0}}),[]),(0,l.jsx)("div",{className:"chart-wrapper",style:{width:s,height:c},children:(0,l.jsx)("div",{ref:u,style:{width:s,height:c}})})}));n.Z=s},90064:function(e,n,t){t.d(n,{Z:function(){return c}});var r=t(92900),a=t(48075),i=t(54246),o=t(32699),l=t(75271),s={left:0,right:0,bottom:20,containLabel:!0};function c(){var e=(0,r.Z)(),n=e.userSettings,t=e.isDarkTheme,c=(0,i.Z.useToken)().token,u=(0,l.useMemo)((function(){return{titleColor:c.colorText,splitLineColor:c.colorBorder,tickLineColor:c.colorSplit,axislabelColor:c.colorTextTertiary,colorSecondary:c.colorTextSecondary,colorTertiary:c.colorTextTertiary,gaugeBgColor:c.colorFillSecondary,gaugeSplitLineColor:t?"rgba(255,255,255,.3)":"rgba(255, 255, 255, 1)",gaugeSplitLineColor2:t?"rgba(255,255,255,.5)":"rgba(255, 255, 255, 1)",colorBgContainerHover:t?"#424242":"#fff"}}),[n.theme,t]),d={trigger:"axis",backgroundColor:u.colorBgContainerHover,borderColor:"transparent",formatter:function(e,n){var t='<span class="tooltip-x-name">'.concat(e[0].axisValue,"</span>");return e.forEach((function(e){var r=(0,o.isFunction)(n)?null==n?void 0:n(e.data.value):e.data.value,a="bar"===e.seriesType?"2px":"8px";t+='<span class="tooltip-item">\n          <span class="tooltip-item-name">\n            <span style="display:inline-block;margin-right:5px;border-radius:'.concat(a,";width:8px;height:8px;background-color:").concat(e.color,';"></span>\n            <span class="tooltip-title">').concat(e.seriesName,'</span>:\n          </span>\n            <span class="tooltip-value">').concat(r,"</span>\n      </span>")})),'<div class="tooltip-wrapper">'.concat(t,"</div>")}},f={itemWidth:8,itemHeight:8,itemGap:12,textStyle:{color:u.axislabelColor}},p={type:"category",axisTick:{show:!0,lineStyle:{color:u.tickLineColor}},axisLabel:{color:u.axislabelColor,fontSize:12},axisLine:{show:!1}},m={nameTextStyle:{padding:[0,0,0,-20]},splitLine:{show:!0,lineStyle:{type:"dashed",color:u.splitLineColor}},axisLabel:{color:u.axislabelColor,fontSize:12,formatter:a.HN},axisTick:{show:!1},type:"value"},h={show:!0,left:"center",textStyle:{fontSize:12,color:u.titleColor},text:""},x={type:"gauge",radius:"88%",center:["50%","65%"],startAngle:190,endAngle:-10,min:0,max:100,splitNumber:5,progress:{show:!0,roundCap:!1,width:12},pointer:{length:"80%",width:4,itemStyle:{color:"auto"}},axisLine:{roundCap:!1,lineStyle:{width:12,color:[[.5,"rgba(84, 204, 152, 80%)"],[.8,"rgba(250, 173, 20, 80%)"],[1,"rgba(255, 77, 79, 80%)"]]}},axisTick:{distance:-11,length:6,splitNumber:5,lineStyle:{width:1.5,color:u.gaugeSplitLineColor}},splitLine:{distance:-5,length:5,lineStyle:{width:1.5,color:u.gaugeSplitLineColor2}},axisLabel:{distance:14,color:u.axislabelColor,fontSize:12},detail:{lineHeight:40,height:40,offsetCenter:[5,30],valueAnimation:!1,fontSize:20,color:u.titleColor,formatter:function(e){return"{value|"+e+"}{unit|%}"},rich:{value:{fontSize:16,fontWeight:500,color:u.titleColor},unit:{fontSize:14,color:u.titleColor,fontWeight:500,padding:[0,0,0,2]}}}};return{tooltip:d,grid:s,legend:f,xAxis:p,yAxis:m,title:h,chartColorMap:u,barItemConfig:{type:"bar",barMaxWidth:20,barMinWidth:8,barGap:"30%",barCategoryGap:"50%"},lineItemConfig:{type:"line",smooth:!0,showSymbol:!1,itemStyle:{},lineStyle:{width:1.5,opacity:.7}},gaugeItemConfig:x,isDark:t}}},6745:function(e,n,t){var r=t(801),a=t(38811),i=t(74157),o=t(86920),l=t(97775),s=t(37209),c=t(12525),u=t(11819),d=t(61227),f=t(99297),p=t(47627),m=t(925),h=t(22337),x=t(25796),v=t(77204),g=t(77008);m.D([l.N,s.N,c.N,u.N,d.N,f.N,p.N,r.N,a.N,i.N,o.N,x.T,v.z,g.N]),n.Z=h},51461:function(e,n,t){var r=t(65050),a=(t(75271),t(52676));n.Z=function(e){var n=e.height,t=e.title;return(0,a.jsxs)("div",{style:{width:"100%",height:n||"100%"},className:"flex-center  flex-column ",children:[t&&(0,a.jsx)("h3",{className:"justify-center font-size-12",style:{padding:"4px 0",marginBottom:0},children:t}),(0,a.jsx)("div",{className:"flex-center justify-center flex-column",style:{height:"100%"},children:(0,a.jsx)(r.Z,{image:r.Z.PRESENTED_IMAGE_SIMPLE})})]})}},3453:function(e,n,t){t.d(n,{$R:function(){return g},QR:function(){return v}});var r,a=t(67825),i=t.n(a),o=t(26068),l=t.n(o),s=t(53649),c=t.n(s),u=t(2825),d=t(25408),f=t(75271),p=t(67585),m=t(52676),h=["styles"],x=p.ZP.div(r||(r=c()(["\n  max-height: ",";\n  overflow-y: auto;\n  width: 100%;\n"])),(function(e){var n=e.$maxHeight;return"number"==typeof n?"".concat(n,"px"):n})),v=function(e){var n=e.children,t=e.maxHeight,r=e.scrollbars,a=e.oppositeTheme,i=e.style,o=e.onScroll,s=f.useRef(null),c=(0,u.Z)({options:{scrollbars:r,oppositeTheme:a}}).initialize;return f.useEffect((function(){s.current&&c(s.current)}),[]),(0,m.jsx)(x,{ref:s,"data-overlayscrollbars-initialize":!0,className:"overlay-scroller-wrapper",$maxHeight:t||200,hidden:!1,onWheel:o,style:l()({paddingInlineStart:8,paddingInlineEnd:8},i),children:n})},g=function(e){var n=e.children,t=e.maxHeight,r=e.title,a=e.toolTipProps,o=e.scrollbars,s=e.oppositeTheme,c=a||{},u=c.styles,f=i()(c,h);return(0,m.jsx)(d.Z,l()(l()({styles:l()(l()({},u),{},{body:l()({paddingInline:0},null==u?void 0:u.body)}),title:r&&(0,m.jsx)(v,{scrollbars:l()(l()({},o),{},{theme:"os-theme-light"}),maxHeight:t,oppositeTheme:s,children:r})},f),{},{children:n}))};n.ZP=v},55625:function(e,n,t){t.d(n,{Uq:function(){return o},ZP:function(){return i}});var r=t(88467),a=t(75271);function i(){return r.Z.CancelToken.source}function o(){var e=r.Z.CancelToken.source,n=(0,a.useRef)(null),t=function(){n.current&&n.current.cancel()};return(0,a.useEffect)((function(){return function(){n.current&&n.current.cancel()}}),[]),{updateCancelToken:function(){t(),n.current=e()},cancelRequest:t,getCanceltToken:function(){return n.current.token},source:e}}},3542:function(e,n,t){t.d(n,{Z:function(){return y}});var r=t(26068),a=t.n(r),i=t(15558),o=t.n(i),l=t(48305),s=t.n(l),c=t(15409),u=t(53231),d=t(97014),f=t(25408),p=t(79635),m=t(82187),h=t.n(m),x=t(75271),v=t(52676),g=function(e){var n=e.value,t=e.onChange,r=e.onSelect,i=e.style,o=e.label,l=e.placeholder,m=e.height,g=void 0===m?46:m,b=(0,u.useIntl)(),y=x.useRef(null),j=(0,x.useState)({minRows:1,maxRows:1,focus:!1}),w=s()(j,2),C=w[0],N=w[1],Z=function(){N({minRows:3,maxRows:3,focus:!0}),setTimeout((function(){var e,n;null===(e=y.current)||void 0===e||null===(n=e.focus)||void 0===n||n.call(e,{cursor:"end"})}),50)};return(0,v.jsxs)("div",{className:h()("row-textarea",{focus:C.focus}),style:a()({},i),children:[(0,v.jsxs)("div",{style:{display:C.focus?"block":"none"},className:"textarea-wrapper",children:[o&&(0,v.jsx)("span",{className:"textarea-label",children:o}),(0,v.jsx)(d.Z.TextArea,{className:"custome-scrollbar",ref:y,placeholder:l,style:{borderRadius:"0",border:"none"},value:n,autoSize:{minRows:C.minRows,maxRows:C.maxRows},onFocus:Z,onBlur:function(e){N({minRows:2,maxRows:2,focus:!1})},allowClear:!1,onChange:function(e){null==t||t(e)},onSelect:function(e){e.stopPropagation();var t=e.target.selectionStart,a=e.target.selectionEnd,i=n.substring(0,t),o=n.substring(a,n.length);null==r||r({start:t,end:a,beforeText:i,afterText:o})},onPaste:function(n){var t;null===(t=e.onPaste)||void 0===t||t.call(e,n)}})]}),!C.focus&&(0,v.jsxs)("div",{className:"content-wrap",onClick:Z,children:[(0,v.jsxs)("div",{className:"content",style:{height:g},children:[o&&(0,v.jsx)("span",{className:"title",children:o}),n||(0,v.jsx)("span",{style:{color:"var(--ant-color-text-tertiary)"},children:l})]}),n&&(0,v.jsx)(f.Z,{title:b.formatMessage({id:"common.button.clear"}),children:(0,v.jsx)(p.ZP,{className:"clear-btn",type:"text",icon:(0,v.jsx)(c.Z,{}),size:"small",onClick:function(){null==t||t({target:{value:""}})}})})]})]})},b=t(38913),y=(0,x.forwardRef)((function(e,n){var t=e.textList,r=e.showLabel,i=void 0===r||r,l=e.height,s=e.onChange,c=e.extra,d=e.onPaste,m=e.onSelect,h=(0,u.useIntl)(),y=(0,x.useRef)(0),j=(0,x.useRef)(null),w=function(){return y.current=y.current+1,y.current},C=function(){w();var e=o()(t);e.push({text:"",uid:y.current,name:"Text ".concat(e.length+1)}),null==s||s(e)},N=function(e){var n=o()(t),r=n.findIndex((function(n){return n.uid===e.uid}));n.splice(r,1),null==s||s(n)},Z=function(e,n){var r=o()(t),a=r.findIndex((function(e){return e.uid===n.uid}));r[a].text=e,null==s||s(r)};return(0,x.useImperativeHandle)(n,(function(){return{handleAdd:C,handleDelete:N,handleTextChange:Z,setMessageId:w}})),(0,v.jsx)("div",{className:"input-list",ref:j,children:t.map((function(e,n){return(0,v.jsxs)("div",{className:"input-item","data-uid":e.uid,children:[(0,v.jsx)("div",{className:"input-wrap",children:(0,v.jsx)(g,{height:l,label:i?"".concat(n+1):null,value:e.text,placeholder:h.formatMessage({id:"playground.embedding.inputyourtext"}),onChange:function(n){return Z(n.target.value,e)},onPaste:function(e){return null==d?void 0:d(e,n)},onSelect:function(e){return null==m?void 0:m(a()(a()({},e),{},{index:n}))}})}),(0,v.jsx)("span",{className:"btn-group",children:(0,v.jsx)(f.Z,{title:h.formatMessage({id:"common.button.delete"}),children:(0,v.jsx)(p.ZP,{danger:!0,size:"small",type:"text",icon:(0,v.jsx)(b.Z,{}),onClick:function(){return N(e)}})})}),null==c?void 0:c(e)]},e.uid)}))})}))},27973:function(e,n,t){var r,a=t(26068),i=t.n(a),o=t(67825),l=t.n(o),s=t(53649),c=t.n(s),u=t(53231),d=(t(75271),t(67585)),f=t(52676),p=["tokenResult"],m=d.ZP.div(r||(r=c()(["\n  font-size: var(--font-size-small);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 2px 5px;\n  .text {\n    color: var(--ant-orange);\n  }\n"])));n.Z=function(e){var n=e.tokenResult,t=l()(e,p),r=(0,u.useIntl)();return n?(0,f.jsx)(m,i()(i()({},t),{},{children:(null==n?void 0:n.total_tokens)&&(0,f.jsxs)("span",{className:"text",children:[r.formatMessage({id:"playground.tokenusage"}),":"," ",null==n?void 0:n.total_tokens]})})):null}},80193:function(e,n,t){t.d(n,{H:function(){return a},N:function(){return r}});var r={"zh-CN":["最近哪家咖啡店评价最好？","附近有没有推荐的咖啡厅？","明天天气预报说会下雨。","北京是中国的首都。","我想找一个适合学习的地方。"],"en-US":["What are the best cafes nearby?","Can you recommend a quiet coffee shop?","I’m planning a trip to Japan next month.","The capital of France is Paris.","I'm looking for a place to study."],"ja-JP":["近くにおすすめのカフェはありますか？","静かな喫茶店を探しています。","明日の天気はどうですか？","富士山は日本で一番高い山です。","勉強に集中できる場所を知っていますか？"],"ru-RU":["Где находится ближайшая аптека?","Можете подсказать, где купить лекарства?","Погода сегодня очень хорошая.","Я ищу кафе рядом с вокзалом.","Как добраться до аэропорта?"]},a={"zh-CN":{query:"如何提高睡眠质量？",documents:["保持规律的作息时间，晚上避免使用电子产品。","参加更多社交活动有助于提高情绪。","多喝咖啡可以让你更有精神。"]},"en-US":{query:"What are the benefits of regular exercise?",documents:["Regular physical activity helps improve cardiovascular health and mental well-being.","Eating too much sugar can lead to health issues.","Exercise is often done in gyms or outdoors."]},"ja-JP":{query:"効果的な英語の勉強法は？",documents:["毎日少しずつでも英語に触れることが大切です。","睡眠時間を削ると集中力が低下します。","文法よりも単語を先に覚えましょう。"]},"ru-RU":{query:"Как улучшить концентрацию во время учёбы?",documents:["Регулярные перерывы помогают поддерживать концентрацию.","Учёба ночью может быть неэффективной.","Прогулка на свежем воздухе улучшает работу мозга."]}}},53942:function(e,n,t){t.r(n),t.d(n,{default:function(){return xe}});var r=t(90228),a=t.n(r),i=t(87999),o=t.n(i),l=t(48305),s=t.n(l),c=t(71920),u=t(37952),d=t(67996),f=t(53231),p=t(25383),m=t(48872),h=t(82187),x=t.n(h),v=t(32699),g=t.n(v),b=t(75271),y=t(7388),j=t(94213),w=t(13507),C=t(15558),N=t.n(C),Z=t(26068),k=t.n(Z),S=t(73963),R=t(82487),M=t(90064),T=t(51461),P=t(52676),z=function(e){var n=(0,M.Z)(),t=n.grid,r=n.title,a=n.isDark,i=n.chartColorMap,o=e.seriesData,l=e.xAxisData,c=e.height,u=e.width,d=e.showEmpty,f=e.title,p=(0,b.useRef)(null),m=(0,b.useMemo)((function(){var e=a?{split:i.splitLineColor,axis:i.axislabelColor,label:i.axislabelColor}:{split:"#F2F2F2",axis:"#dcdcdc",label:"#dcdcdc"};return{animation:!1,grid:k()(k()({},t),{},{right:10,top:10,bottom:2,left:2,containLabel:!0,borderRadius:4}),xAxis:{min:-1,max:1,scale:!1,slient:!0,splitNumber:15,splitLine:{lineStyle:{color:e.split}},axisLine:{show:!0,lineStyle:{color:e.axis}},axisTick:{show:!1},axisLabel:{show:!0,color:e.label},boundaryGap:[.05,.05]},yAxis:{min:-1,max:1,scale:!1,slient:!0,splitNumber:10,boundaryGap:[.05,.05],splitLine:{lineStyle:{color:e.split}},axisLine:{show:!0,lineStyle:{color:e.axis}},axisTick:{show:!1},axisLabel:{show:!0,color:e.label}},symbol:"roundRect",label:{show:!0,shadowColor:"none",textBorderColor:"none",formatter:function(e){return e.name}},series:[]}}),[a]),h=(0,b.useCallback)((function(e,n){for(var t,r=[],a=null===(t=p.current.chart)||void 0===t?void 0:t.convertToPixel("grid",n.value),i=s()(a,2),o=i[0],l=i[1],c=e.map((function(e){var n;return k()(k()({},e),{},{value:null===(n=p.current.chart)||void 0===n?void 0:n.convertToPixel("grid",e.value)})})),u=0;u<c.length;u++)if(n.name!==c[u].name){var d=s()(c[u].value,2),f=d[0],m=d[1];Math.sqrt(Math.pow(g().round(f-o,2),2)+Math.pow(g().round(m-l,2),2))<=16&&r.push(k()({},c[u]))}else r.push(k()({},c[u]));return r}),[]),x=(0,b.useCallback)((function(e){if(!e.length||e.length<2)return null;return function(e){var n;return'<span class="tooltip-item-name">\n               <span style="display:flex;justify-content:center;align-items: center;color:#fff;\n               margin-right:0;border-radius:4px;width:14px;\n               height:14px;background-color:'.concat(null==e||null===(n=e.itemStyle)||void 0===n?void 0:n.color,';"\n               >').concat(e.name,"</span>\n             </span>")}}),[]),v=(0,b.useMemo)((function(){var e=o.map((function(e,n){return k()(k()({},e),{},{itemStyle:{color:"#5470c6"},symbolSize:16})}));return k()(k()({},m),{},{tooltip:{trigger:"item",borderWidth:0,backgroundColor:i.colorBgContainerHover,borderColor:"transparent",formatter:function(n,t){var r=h(e,n.data),a="",i=x(r);return r.forEach((function(e){a+='\n            <span class="tooltip-item" style="justify-content: flex-start;">\n             '.concat(i?i(e):"",'\n             <span class="tooltip-value">').concat(e.text,"</span>\n            </span>")})),'<div class="tooltip-wrapper scatter">'.concat(a,"</div>")}},title:k()(k()({},r),{},{text:f}),series:{type:"scatter",labelLayout:{hideOverlap:!0},data:e}})}),[o,l,f,m,h]);return(0,P.jsx)(P.Fragment,{children:!o.length&&d?(0,P.jsx)(T.Z,{height:c,title:f}):(0,P.jsx)(R.Z,{ref:p,height:c,options:v,width:u||"100%"})})},L=(0,b.memo)(z),I=t(41273),A=t(92829),E=t(68048),H=t(2825),W=t(55625),_=t(97489),O=t(17114),D=t(94752),U=t(47219),F=t(91234),B=t(26965),G=t(25408),K=t(72567),V=t(79635),Y=t(43458),q=t(3246),J=t(81967),$=(t(82093),t(20990)),X=t(41994),Q=t(80193),ee=t(89843);var ne=t(45629),te=(t(50314),t(85932),t(56349)),re=t(4806),ae=t(85882),ie=t(44655),oe=t(38913),le=function(e){var n=e.textListCount,t=e.fileList,r=e.ghost,a=e.showIcon,i=void 0===a||a,o=e.onDelete,l=(0,f.useIntl)();return(0,P.jsx)("div",{className:"file-list",children:t.map((function(e,t){return(0,P.jsxs)("div",{className:x()("file-item",{ghost:r}),children:[(0,P.jsxs)("span",{className:"title",children:[(0,P.jsxs)("span",{className:"m-r-5",children:[t+1+n,"."]}),i&&(0,P.jsx)(ie.Z,{className:"m-r-5"}),(0,P.jsxs)(ae.Z,{ghost:!0,children:[" ",e.name]})]}),o&&(0,P.jsx)(G.Z,{title:l.formatMessage({id:"common.button.delete"}),children:(0,P.jsx)(V.ZP,{danger:!0,size:"small",type:"text",className:"delete-btn",icon:(0,P.jsx)(oe.Z,{}),onClick:function(){return o(e.uid)}})})]},e.uid)}))})},se=b.memo(le),ce=t(3542),ue=t(27973),de=t(36224),fe=(0,b.forwardRef)((function(e,n){var r=e.modelList,i=(0,f.useIntl)(),l=function(){var e=(0,b.useRef)(null),n=function(){e.current&&(e.current.terminate(),e.current=null)};return(0,b.useEffect)((function(){return function(){n()}}),[]),{workerRef:e,createWorker:function(){e.current&&e.current.terminate(),e.current=new Worker(new URL(t.p+t.u(0),t.b),{type:void 0})},postMessage:function(n){e.current&&e.current.postMessage(n)},terminateWorker:n}}(),c=l.workerRef,u=l.createWorker,d=l.postMessage,p=(l.terminateWorker,(0,W.ZP)()),m=(0,b.useState)(!1),h=s()(m,2),v=h[0],y=h[1],j=(0,b.useState)(!1),C=s()(j,2),Z=C[0],R=C[1],M=(0,b.useState)(null),T=s()(M,2),z=T[0],ae=T[1],ie=(0,b.useState)(!1),oe=s()(ie,2),le=oe[0],fe=oe[1],pe=(0,b.useRef)(""),me=(0,b.useRef)(null),he=(0,b.useRef)(null),xe=(0,b.useRef)(0),ve=(0,b.useRef)(null),ge=(0,b.useState)([]),be=s()(ge,2),ye=be[0],je=be[1],we=(0,b.useState)("chart"),Ce=s()(we,2),Ne=Ce[0],Ze=Ce[1],ke=(0,b.useState)(180),Se=s()(ke,2),Re=Se[0],Me=Se[1],Te=(0,b.useState)({code:"",copyValue:""}),Pe=s()(Te,2),ze=Pe[0],Le=Pe[1],Ie=(0,b.useState)(!1),Ae=s()(Ie,2),Ee=Ae[0],He=Ae[1],We=(0,b.useRef)(!0),_e=(0,b.useRef)(null),Oe=(0,b.useState)([{text:"",uid:-1,name:""},{text:"",uid:-2,name:""}]),De=s()(Oe,2),Ue=De[0],Fe=De[1],Be=(0,b.useState)([]),Ge=s()(Be,2),Ke=Ge[0],Ve=Ge[1],Ye=(0,b.useRef)(null),qe=(0,H.Z)(),Je=qe.initialize,$e=qe.updateScrollerPosition,Xe=(0,ne.X)({modelList:r,isChat:!0},{defaultValues:{},defaultParamsConfig:[],metaKeys:ee.m4}),Qe=Xe.handleOnValuesChange,en=Xe.formRef,nn=Xe.paramsConfig,tn=Xe.initialValues,rn=Xe.parameters,an=Xe.paramsRef,on=Xe.modelMeta,ln=Xe.formFields;(0,b.useImperativeHandle)(n,(function(){return{viewCode:function(){y(!0)},setCollapse:function(){fe(!le)},calculateNewMaxFromBoundary:function(e,n){var t;null===(t=Ye.current)||void 0===t||t.calculateNewMaxFromBoundary()},collapse:le}}));var sn=(0,b.useMemo)((function(){return(0,te.X)({api:w.d8,parameters:k()(k()({},g().pick(rn,["model"].concat(N()(g().split(ln,","))))),{},{input:[].concat(N()(Ue.map((function(e){return e.text})).filter((function(e){return e}))),N()(ye.map((function(e){return e.text})).filter((function(e){return e}))))})})}),[rn,ln,Ue,ye]),cn=(0,b.useMemo)((function(){return[].concat(N()(Ue),N()(ye)).length<2}),[Ue,ye]),un=function(){var e,n;return null===(e=he.current)||void 0===e||null===(n=e.setMessageId)||void 0===n?void 0:n.call(e)},dn=function(){var e=o()(a()().mark((function e(n){var t,r,i,o,l,s,f,m;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,null===(t=en.current)||void 0===t?void 0:t.form.validateFields();case 3:if(rn.model){e.next=5;break}return e.abrupt("return");case 5:if(o=Ue.filter((function(e){return e.text})),l=ye.filter((function(e){return e.text})),!((s=[].concat(N()(o.map((function(e){return e.text}))),N()(l.map((function(e){return e.text}))))).length<2)){e.next=11;break}return He(!0),e.abrupt("return");case 11:return Fe(o),je(l),He(!1),R(!0),un(),ae(null),null===(r=ve.current)||void 0===r||null===(i=r.cancel)||void 0===i||i.call(r),ve.current=p(),pe.current=(null==n?void 0:n.content)||"",e.next=22,(0,w.xO)({model:rn.model,encoding_format:"float",input:s},{token:ve.current.token});case 22:f=e.sent,ae(f.usage),m=f.data||[],u(),c.current.onmessage=function(e){var n=e.data,t=n.scatterData,r=n.embeddingData;Ve(t),Le(r),R(!1)},d({embeddings:m,textList:Ue,fileList:ye}),e.next=34;break;case 30:e.prev=30,e.t0=e.catch(0),ae({error:!0,errorMessage:(0,X.Yo)(e.t0.response)}),R(!1);case 34:case"end":return e.stop()}}),e,null,[[0,30]])})));return function(n){return e.apply(this,arguments)}}(),fn=(0,b.useCallback)((function(e){_e.current=e}),[]),pn=(0,b.useCallback)((function(e,n){if(We.current){var t=e.clipboardData.getData("text");if(t){var r,a,i=t.split("\n").map((function(e){return{text:null==e?void 0:e.trim(),name:"",uid:un()}}));i[0].text="".concat((null===(r=_e.current)||void 0===r?void 0:r.beforeText)||"").concat(i[0].text).concat((null===(a=_e.current)||void 0===a?void 0:a.afterText)||"");var o=[].concat(N()(Ue.slice(0,n)),N()(i),N()(Ue.slice(n+1))).filter((function(e){return e.text}));Fe(o)}}}),[Ue]),mn=(0,b.useMemo)((function(){return null!=on&&on.n_ctx&&null!=on&&on.n_slot?(0,P.jsx)(B.Z.Item,{children:(0,P.jsx)(E.Z,{disabled:!0,label:"Max Tokens",value:g().divide(null==on?void 0:on.n_ctx,null==on?void 0:on.n_slot)})}):[]}),[on]),hn=(0,b.useMemo)((function(){return[{key:"chart",label:"Chart",children:(0,P.jsx)(L,{seriesData:Ke,height:Re,width:"100%",xAxisData:[]},le?"collapse":"expand")},{key:"json",label:"JSON",children:(0,P.jsx)("div",{style:{backgroundColor:"var(--ant-color-bg-container)",borderRadius:"var(--border-radius-base)",overflow:"hidden"},children:(0,P.jsx)(I.Z,{height:Re-32,code:ze.code,copyValue:ze.copyValue,lang:"json",copyable:!0,style:{marginBottom:0}})})}]}),[Re,le,Ke,ze]),xn=(0,b.useCallback)((function(e,n){e.model&&(Ve([]),ae(null)),Qe(e,n)}),[]);return(0,b.useEffect)((function(){me.current&&Je(me.current)}),[Je]),(0,b.useEffect)((function(){Ue.length+ye.length>xe.current&&$e(),xe.current=Ue.length+ye.length}),[Ue.length,ye.length]),(0,b.useEffect)((function(){i.locale;var e=Q.N[i.locale];e&&Fe(e.map((function(e,n){return{text:e,uid:un(),name:"Document ".concat(n+1)}})))}),[]),(0,P.jsxs)("div",{className:"ground-left-wrapper rerank",children:[(0,P.jsxs)("div",{className:"ground-left",children:[(0,P.jsx)("div",{className:"center",ref:me,style:{height:"auto",maxHeight:"100%"},children:(0,P.jsxs)("div",{className:"documents",children:[(0,P.jsxs)("div",{className:"flex-between m-b-8 doc-header",children:[(0,P.jsx)("h3",{className:"m-l-10 flex-between flex-center font-size-14 line-24 m-b-0",children:(0,P.jsx)("div",{className:"flex gap-20",children:(0,P.jsx)("span",{children:i.formatMessage({id:"playground.embedding.documents"})})})}),(0,P.jsxs)("div",{className:"flex-center gap-10",children:[(0,P.jsx)(G.Z,{title:i.formatMessage({id:"playground.input.multiplePaste.tips"}),children:(0,P.jsxs)(K.Z,{defaultChecked:We.current,onChange:function(e){We.current=e.target.checked},children:[i.formatMessage({id:"playground.input.multiplePaste"}),(0,P.jsx)(_.Z,{className:"m-l-4"})]})}),(0,P.jsxs)(V.ZP,{size:"middle",onClick:function(){var e;null===(e=he.current)||void 0===e||e.handleAdd()},disabled:Z,children:[(0,P.jsx)(O.Z,{}),i.formatMessage({id:"playground.embedding.addtext"})]}),(0,P.jsx)(V.ZP,{icon:(0,P.jsx)(D.Z,{}),size:"middle",disabled:Z,onClick:function(){Fe([{text:"",uid:-1,name:""},{text:"",uid:-2,name:""}]),je([]),Ve([]),ae(null),He(!1),Le({code:"",copyValue:""})},children:i.formatMessage({id:"common.button.clear"})}),Z?(0,P.jsx)(G.Z,{title:i.formatMessage({id:"common.button.stop"}),children:(0,P.jsx)(V.ZP,{style:{width:60},size:"middle",type:"primary",onClick:function(){var e,n;null===(e=ve.current)||void 0===e||null===(n=e.cancel)||void 0===n||n.call(e),R(!1)},icon:(0,P.jsx)(A.Z,{type:"icon-stop1",className:"font-size-12"})})}):(0,P.jsx)(G.Z,{title:(0,P.jsx)("span",{children:i.formatMessage({id:"common.button.submit"})}),children:(0,P.jsx)(V.ZP,{size:"middle",type:"primary",disabled:cn,onClick:function(){dn()},icon:(0,P.jsx)(U.Z,{rotate:0,className:"font-size-14"}),style:{width:60}})})]})]}),(0,P.jsxs)("div",{className:"docs-wrapper",children:[(0,P.jsx)(ce.Z,{ref:he,textList:Ue,onChange:function(e){Fe(e)},onSelect:fn,onPaste:pn}),ye.length>0&&(0,P.jsx)("div",{style:{marginTop:8},children:(0,P.jsx)(se,{fileList:ye,textListCount:Ue.length||0,onDelete:function(e){je((function(n){return n.filter((function(n){return n.uid!==e}))}))}})}),Ee&&(0,P.jsx)("div",{className:"m-t-16",children:(0,P.jsx)(S.Z,{type:"danger",message:i.formatMessage({id:"playground.documents.verify.embedding"})})}),(0,P.jsx)(ue.Z,{tokenResult:z,className:"m-t-16"})]})]})}),(0,P.jsxs)("div",{className:"ground-left-footer",style:{width:"100%",padding:"0 32px 16px"},children:[(0,P.jsxs)("h3",{className:"m-l-10 flex-between flex-center font-size-14 line-24 m-b-16",children:[(0,P.jsxs)("div",{className:"flex gap-20",children:[(0,P.jsxs)("span",{className:"flex-center",children:[i.formatMessage({id:"playground.embedding.output"}),(0,P.jsx)(G.Z,{title:(0,P.jsxs)("span",{className:"flex-column",children:[(0,P.jsxs)("span",{children:["1.",i.formatMessage({id:"playground.embedding.pcatips1"})]}),(0,P.jsxs)("span",{children:["2."," ",i.formatMessage({id:"playground.embedding.pcatips2"})]})]}),children:(0,P.jsx)(_.Z,{className:"m-l-4"})})]}),(0,P.jsx)(S.Z,{type:"danger",message:null==z?void 0:z.errorMessage})]}),(0,P.jsx)(Y.Z,{onChange:function(e){Ze(e)},value:Ne,options:[{label:i.formatMessage({id:"playground.embedding.chart"}),value:"chart"},{label:"JSON",value:"json"}]})]}),(0,P.jsxs)("div",{className:"embed-chart",children:[Z&&(0,P.jsx)("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:10,display:"flex",justifyContent:"center",alignItems:"center"},children:(0,P.jsx)(q.Z,{spinning:!0})}),(0,P.jsx)($.e,{ref:Ye,enable:{top:!0},defaultSize:{height:180},handleComponent:{top:(0,P.jsx)(G.Z,{title:i.formatMessage({id:"playground.embedding.handler.tips"}),children:(0,P.jsx)(V.ZP,{size:"small",className:"drag-handler",color:"default",variant:"filled",icon:(0,P.jsx)(F.Z,{rotate:90,style:{fontSize:"var(--font-size-14)"}})})})},maxHeight:400,minHeight:180,onResize:function(){var e,n=null===(e=Ye.current)||void 0===e||null===(e=e.state)||void 0===e?void 0:e.height;n&&Me(n)},onResizeStop:function(e,n,t,r){r.height+Re<=400&&r.height+Re>=180&&Me(r.height+Re)},children:(0,P.jsx)("div",{style:{border:"1px solid var(--ant-color-border)",borderRadius:"var(--border-radius-base)",width:"100%"},className:"scatter",children:(0,P.jsx)(J.Z,{defaultActiveKey:Ne,activeKey:Ne,centered:!0,renderTabBar:function(){return(0,P.jsx)(P.Fragment,{})},items:hn})})})]})]})]}),(0,P.jsx)("div",{className:x()("params-wrapper",{collapsed:le}),ref:an,children:(0,P.jsx)("div",{className:"box",children:(0,P.jsx)(re.Z,{ref:en,onValuesChange:xn,paramsConfig:nn,initialValues:tn,modelList:r,extra:mn})})}),(0,P.jsx)(de.Z,{open:v,viewCodeContent:sn,onCancel:function(){y(!1)},title:i.formatMessage({id:"playground.viewcode"})})]})})),pe=fe,me=t(9629),he=t(82141),xe=(t(48119),function(){(0,f.useIntl)();var e=(0,b.useRef)(null),n=(0,b.useState)([]),t=s()(n,2),r=t[0],i=t[1],l=(0,b.useState)(!1),h=s()(l,2),v=h[0],C=h[1];(0,he.Z)({handler:function(){var n,t,r,a;null===(n=e.current)||void 0===n||null===(t=n.setCollapse)||void 0===t||t.call(n),null===(r=e.current)||void 0===r||null===(a=r.calculateNewMaxFromBoundary)||void 0===a||a.call(r,500,300)},triggeredRef:e.current});var N=(0,p.Z)((function(){var n,t;null===(n=e.current)||void 0===n||null===(t=n.viewCode)||void 0===t||t.call(n)})),Z=(0,p.Z)((function(){var n,t;null===(n=e.current)||void 0===n||null===(t=n.setCollapse)||void 0===t||t.call(n)}));return(0,b.useEffect)((function(){var e=function(){var e=o()(a()().mark((function e(){var n,t,r;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={categories:d.Us.embedding,with_meta:!0},e.next=4,(0,w.nb)(n);case 4:return t=e.sent,r=g().map(t.data||[],(function(e){return{value:e.id,label:e.id,meta:e.meta}})),e.abrupt("return",r);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",[]);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),n=function(){var n=o()(a()().mark((function n(){var t,r,o;return a()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Promise.all([e()]);case 3:t=n.sent,r=s()(t,1),o=r[0],i(o),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),C(!0);case 12:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(){return n.apply(this,arguments)}}();n()}),[]),(0,y.y1)(c.ZP.RIGHT.join(","),(function(){var n,t;null===(n=e.current)||void 0===n||null===(t=n.setCollapse)||void 0===t||t.call(n)}),{preventDefault:!0}),(0,P.jsx)(j.R,{className:x()("playground-container chat"),extra:[(0,P.jsx)(me.Z,{activeKey:"",handleViewCode:N,handleToggleCollapse:Z},"view-code-buttons"),(0,P.jsx)(m.Z,{type:"vertical",style:{height:24,marginInline:16}},"divider"),(0,P.jsx)(u.k,{},"extra-content")],children:(0,P.jsx)("div",{className:"play-ground",children:(0,P.jsx)("div",{className:"chat",children:(0,P.jsx)(pe,{ref:e,modelList:r,loaded:v})})})})})},82141:function(e,n,t){t.d(n,{Z:function(){return o}});var r=t(91962),a=t(4144),i=t(75271);function o(e){var n=(0,a.Z)().size;(0,i.useEffect)((function(){var t;n.width<r.Z.lg&&(null!==(t=e.triggeredRef)&&void 0!==t&&t.collapse||e.handler())}),[n.width])}},56349:function(e,n,t){t.d(n,{N:function(){return l},X:function(){return s}});var r=t(26068),a=t.n(r),i=t(13507),o=t(65548),l=function(e){var n=e.api,t=e.modelProxy,r=e.parameters,a=window.location.origin,l=t?"".concat(i.kW,"/${YOUR_API_PATH}"):n;return"\ncurl ".concat(a).concat(l,' \\\n-H "Content-Type: application/json" \\\n-H "Authorization: Bearer ${YOUR_GPUSTACK_API_KEY}" \\').concat(t?'\n-H "X-GPUStack-Model: '.concat(r.model,'" \\'):"","\n").concat((0,o.Yy)(r,!1)).trim()},s=function(e){var n=e.api,t=e.parameters,r=window.location.origin,s=l({api:n,parameters:t}),c='\nfrom openai import OpenAI\n\nclient = OpenAI(\n  base_url="'.concat(r,"/").concat(i.Mo,'", \n  api_key="YOUR_GPUSTACK_API_KEY"\n)\n\nresponse = client.embeddings.create(\n').concat((0,o.G4)(a()({},t)),")\n\nprint(response.data[0].embedding)").trim(),u=(0,o.GT)(a()({},t));return{curlCode:s,pythonCode:c,nodeJsCode:'\nconst OpenAI = require("openai");\n\nconst openai = new OpenAI({\n  "apiKey": "YOUR_GPUSTACK_API_KEY",\n  "baseURL": "'.concat(r,"/").concat(i.Mo,'"\n});\n\nasync function main() {\n  const params = ').concat(u,"; \n  const response = await openai.embeddings.create(params);\n  console.log(response.data[0].embedding);\n}\nmain();").trim()}}},85932:function(){}}]);