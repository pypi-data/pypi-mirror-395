"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[766],{72742:function(e,n,t){var r,a=t(26068),o=t.n(a),l=t(53649),i=t.n(l),s=t(53231),c=t(18843),u=t(79635),d=(t(75271),t(67585)),p=t(52676),m=d.ZP.div(r||(r=i()(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  gap: 20px;\n"])));n.Z=function(e){var n=e.onOk,t=e.onCancel,r=e.cancelText,a=e.okText,l=e.okBtnProps,i=e.cancelBtnProps,d=e.loading,f=e.htmlType,v=void 0===f?"button":f,h=e.style,g=e.showOkBtn,x=void 0===g||g,b=e.description,k=e.extra,y=e.showCancelBtn,_=void 0===y||y,w=(e.form,(0,s.useIntl)());return(0,p.jsxs)(m,{children:[(0,p.jsx)("div",{children:b}),(0,p.jsxs)(c.Z,{size:20,style:o()({},h),children:[_&&(0,p.jsx)(u.ZP,o()(o()({onClick:t,style:{width:"88px"}},i),{},{children:r||w.formatMessage({id:"common.button.cancel"})})),k,x&&(0,p.jsx)(u.ZP,o()(o()({type:"primary",onClick:n,style:{width:"88px"},loading:d,htmlType:v},l),{},{children:a||w.formatMessage({id:"common.button.save"})}))]})]})}},15341:function(e,n,t){var r=t(48305),a=t.n(r),o=t(2325),l=t(25408),i=t(75271),s=t(52676),c=(0,i.memo)((function(e){var n=e.defaultOpen,t=e.percent,r=e.download,c=e.label,u=e.successPercent,d=i.useState(!1),p=a()(d,2),m=p[0],f=p[1],v=(0,i.useMemo)((function(){return r?"var(--ant-color-primary)":t<=50?"var(--ant-color-success)":t<=80?"var(--ant-color-warning)":"var(--ant-color-error)"}),[t]);(0,i.useEffect)((function(){f(n||!1)}),[n]);var h=(0,i.useMemo)((function(){return(0,s.jsx)(o.Z,{percentPosition:{align:"center",type:"inner"},size:["",16],format:function(){return(0,s.jsxs)("span",{style:{color:"var(--color-progress-text)"},children:[t,"%"]})},percent:t,success:{percent:u,strokeColor:"var(--ant-geekblue-3)"},strokeColor:v})}),[t,u,v]);return(0,s.jsx)(s.Fragment,{children:c?(0,s.jsx)(l.Z,{title:c,open:m,onOpenChange:f,styles:{body:{paddingInline:12}},children:h}):h})}));n.Z=c},19636:function(e,n,t){t.d(n,{Z:function(){return j}});var r,a=t(26068),o=t.n(a),l=t(67825),i=t.n(l),s=t(48305),c=t.n(s),u=t(53649),d=t.n(u),p=t(71920),m=t(53231),f=t(58281),v=t(32699),h=t(75271),g=t(7388),x=t(52676),b=(0,f.kc)((function(e){var n=e.css,t=e.token;return{hintOverlay:n(r||(r=d()(["\n    position: fixed;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    background: var(--color-esc-hint-bg);\n    color: ",";\n    padding: 16px 24px;\n    border-radius: 4px;\n    z-index: 2000;\n    font-size: 14px;\n    pointer-events: none;\n    animation: fadeInOut 2s ease-in-out;\n    @keyframes fadeInOut {\n      0% {\n        opacity: 0;\n      }\n      10% {\n        opacity: 1;\n      }\n      90% {\n        opacity: 1;\n      }\n      100% {\n        opacity: 0;\n      }\n    }\n  "])),t.colorTextLightSolid)}}));var k=t(15409),y=t(68883),_=t(79635),w=["title","closable","maskClosable"],j=function(e){var n,t,r,a,l,s,u,d,f,j,C,S,Z,M,T,I,E=e.title,P=e.closable,D=void 0===P||P,A=e.maskClosable,L=void 0!==A&&A,O=i()(e,w),R=(n={enabled:!e.keyboard&&e.open},r=(t=n||{}).enabled,a=void 0===r||r,l=t.message,s=t.throttleDelay,u=void 0===s?3e3:s,d=(0,m.useIntl)(),f=b().styles,j=(0,h.useState)(!1),C=c()(j,2),S=C[0],Z=C[1],M=(0,h.useRef)(null),T=(0,h.useRef)(!1),I=(0,h.useMemo)((function(){return(0,v.throttle)((function(){T.current||(T.current=!0,Z(!0),M.current&&clearTimeout(M.current),M.current=setTimeout((function(){Z(!1),T.current=!1}),2e3))}),u,{leading:!0,trailing:!1})}),[u]),(0,g.y1)(p.ZP.ESC,(function(){a&&I()}),{enabled:a}),(0,h.useEffect)((function(){return function(){M.current&&clearTimeout(M.current),I.cancel()}}),[I]),{EscHint:S?(0,x.jsx)("div",{className:f.hintOverlay,children:l||d.formatMessage({id:"common.tips.escape.disable"})}):null}).EscHint;return(0,x.jsx)(x.Fragment,{children:(0,x.jsxs)(y.Z,o()(o()({},O),{},{closable:!1,maskClosable:L,title:(0,x.jsxs)("div",{className:"flex-between flex-center",children:[(0,x.jsx)("span",{style:{color:"var(--ant-color-text)",fontWeight:"var(--font-weight-medium)",fontSize:"var(--font-size-middle)"},children:E}),D&&(0,x.jsx)(_.ZP,{type:"text",size:"small",onClick:function(n){var t;null===(t=e.onClose)||void 0===t||t.call(e,n)},children:(0,x.jsx)(k.Z,{})})]}),children:[O.children,R]}))})}},53722:function(e,n,t){var r=t(26068),a=t.n(r),o=t(48305),l=t.n(o),i=t(67825),s=t.n(i),c=t(79312),u=t(25466),d=t(26965),p=t(89500),m=t(75271),f=t(83907),v=t(6840),h=t(29349),g=t(52676),x=["label","placeholder","required","description","isInFormItems","trim","onSelect","onBlur","checkStatus","extra","style","addAfter","loading","allowClear","clearSpaceOnBlur"],b=u.Z.Link;n.Z=function(e){var n=e.label,t=e.placeholder,r=e.required,o=e.description,i=e.isInFormItems,u=void 0===i||i,k=e.trim,y=void 0===k||k,_=e.onSelect,w=(e.onBlur,e.checkStatus),j=e.extra,C=e.style,S=(e.addAfter,e.loading),Z=e.allowClear,M=e.clearSpaceOnBlur,T=s()(e,x),I=(0,m.useState)(!1),E=l()(I,2),P=E[0],D=E[1],A=(0,m.useRef)(null),L="";if(u){var O,R,z=null===d.Z||void 0===d.Z||null===(O=d.Z.Item)||void 0===O||null===(R=O.useStatus)||void 0===R?void 0:R.call(O);L=(null==z?void 0:z.status)||""}(0,m.useEffect)((function(){e.value&&D(!0)}),[e.value]);return(0,g.jsx)(h.Z,{style:C,children:(0,g.jsx)(v.Z,{className:"seal-select-wrapper",status:w||L,extra:j,label:n,isFocus:P,required:r,description:o,disabled:e.disabled,onClick:function(){var n,t;e.disabled||P||(null===(n=A.current)||void 0===n||null===(t=n.focus)||void 0===t||t.call(n),D(!0))},children:(0,g.jsx)(p.Z,a()(a()({},T),{},{trim:y,ref:A,placeholder:P||!n?(0,g.jsx)("span",{style:{paddingLeft:"12px"},children:t}):"",allowClear:!S&&Z,suffixIcon:S?(0,g.jsx)(b,{children:(0,g.jsx)(c.Z,{})}):null,status:w||L,onSelect:function(e,n){null==_||_(e,n)},onFocus:function(n){var t;D(!0),null===(t=e.onFocus)||void 0===t||t.call(e,n)},onBlur:function(n){var t,r,a,o;(e.value||D(!1),M)?(n.target.value=null===(r=n.target.value)||void 0===r?void 0:r.replace(/\s+/g,""),null===(a=e.onChange)||void 0===a||a.call(e,n.target.value)):n.target.value=null===(o=n.target.value)||void 0===o?void 0:o.trim();null===(t=e.onBlur)||void 0===t||t.call(e,n)},onSearch:function(n){var t;null===(t=e.onSearch)||void 0===t||t.call(e,n)},onChange:function(n,t){var r,a,o,l=n;y&&(l=null===(a=l)||void 0===a||null===(o=a.trim)||void 0===o?void 0:o.call(a));null===(r=e.onChange)||void 0===r||r.call(e,l,t)},popupRender:function(e){return S?(0,g.jsx)(f.v,{}):e||null},onInput:function(n){var t,r;y&&(n.target.value=null===(r=n.target.value)||void 0===r?void 0:r.trim());null===(t=e.onInput)||void 0===t||t.call(e,n)}}))})})}},29349:function(e,n,t){var r,a=t(53649),o=t.n(a),l=t(67585),i=t(89894),s=l.ZP.div(r||(r=o()(["\n  .seal-select-wrapper {\n    border: none;\n    box-shadow: none;\n\n    &.dropdown-visible {\n      .__wrapper__ {\n        .ant-select-selector {\n          border-bottom: none !important;\n          border-radius: ","px ","px 0 0;\n          transition: all 0.2s ease;\n\n          &::before {\n            content: '';\n            position: absolute;\n            height: 1px;\n            margin-inline: 1px;\n            bottom: 0;\n            left: 0;\n            right: 0;\n            background-color: var(--ant-color-split);\n          }\n        }\n\n        .ant-select-dropdown {\n          box-shadow: none;\n          border-width: var(--ant-line-width);\n          border-style: var(--ant-line-type);\n          border-color: var(--ant-input-active-border-color);\n          border-top: none;\n        }\n\n        &:hover {\n          .ant-select-dropdown {\n            border-color: var(--ant-input-active-border-color);\n          }\n        }\n\n        &:focus-within {\n          border-color: var(--ant-input-active-border-color) !important;\n          outline: 0;\n          background-color: var(--ant-input-active-bg);\n        }\n      }\n    }\n\n    &:focus-within {\n      border: none;\n      box-shadow: none;\n    }\n    .__wrapper__ {\n      padding-block: 0;\n\n      .label {\n        left: ","px !important;\n        top: 11px;\n\n        &.isfoucs-has-value {\n          top: 11px;\n          transition: all 0.2s var(--seal-transition-func);\n        }\n\n        &.blur-no-value {\n          top: 21px;\n          transition: all 0.2s var(--seal-transition-func);\n        }\n\n        &.has-prefix {\n          top: 11px !important;\n        }\n      }\n      &.no-label {\n        padding-block: 0;\n\n        .ant-select-arrow {\n          top: 50%;\n        }\n\n        .ant-select-selector {\n          padding-block-start: 0 !important;\n        }\n\n        .ant-select .ant-select-selection-search {\n          top: 10px !important;\n        }\n      }\n    }\n    .ant-select-selection-overflow-item > span {\n      display: flex;\n      align-items: center;\n    }\n    .ant-select {\n      display: flex;\n      align-items: center;\n      height: 54px;\n\n      .ant-select-selection-wrap {\n        height: 100%;\n      }\n\n      &.ant-select-auto-complete {\n        .ant-select-selection-search {\n          padding-inline-start: ","px;\n        }\n      }\n      &.ant-select-multiple.ant-cascader .ant-select-selection-search {\n        top: 0 !important;\n      }\n    }\n\n    .ant-select-selector {\n      flex: 1;\n      padding-inline: ","px !important;\n      border-width: var(--ant-line-width);\n      border-style: var(--ant-line-type);\n      border-color: var(--ant-color-border);\n      border-radius: ","px;\n      height: 54px !important;\n      padding-block: 20px 0 !important;\n      box-shadow: none !important;\n\n      &:focus-within {\n        border-color: var(--ant-input-active-border-color) !important;\n        outline: 0;\n        background-color: var(--ant-input-active-bg);\n      }\n    }\n\n    .ant-select-multiple.ant-select-lg {\n      .ant-select-selection-search {\n        margin-inline-start: 0 !important;\n        left: 0 !important;\n      }\n    }\n\n    .ant-select-selection-item {\n      height: ","px !important;\n      padding-block: 5px !important;\n      line-height: 22px !important;\n      padding-inline-end: 0 !important;\n    }\n\n    .ant-select-auto-complete .ant-select-selector {\n      padding-inline: 0 !important;\n      flex: 1;\n    }\n\n    .ant-select-arrow {\n      top: 32px;\n    }\n\n    .ant-select-outlined.ant-select-disabled:not(.ant-select-customize-input)\n      .ant-select-selector {\n      background-color: transparent;\n    }\n\n    .ant-select-selection-search-input {\n      height: ","px !important;\n    }\n\n    &.validate-status-error {\n      .ant-select-selector {\n        border-width: var(--ant-line-width) !important;\n        border-style: var(--ant-line-type) !important;\n        border-color: var(--ant-color-error) !important;\n\n        &:hover {\n          border-color: var(--ant-color-error-border-hover) !important;\n        }\n\n        &:focus-within {\n          border-color: var(--ant-color-error) !important;\n        }\n      }\n\n      &.dropdown-visible {\n        .ant-select-dropdown {\n          border-color: var(--ant-color-error) !important;\n        }\n      }\n    }\n  }\n"])),i.HG,i.HG,i.xZ+1,i.xZ,i.xZ,i.HG,i.n1,i.n1);n.Z=s},24320:function(e,n,t){var r,a=t(26068),o=t.n(a),l=t(67825),i=t.n(l),s=t(53649),c=t.n(s),u=t(92900),d=t(68652),p=(t(75271),t(67585)),m=t(52676),f=["opacity","style","children"],v=(0,p.ZP)(d.Z)(r||(r=c()(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 2px 6px;\n  border-radius: 4px;\n  font-size: 12px;\n  height: 22px;\n  opacity: 0.7;\n  margin: 0;\n"]))),h=function(e){var n=e.opacity,t=e.style,r=e.children,a=i()(e,f),l=(0,u.Z)().userSettings.isDarkTheme;return(0,m.jsx)(v,o()(o()({},a),{},{style:o()(o()({},t),{},{opacity:l?1:n}),children:r}))};h.displayName="ThemeTag",n.Z=h},71920:function(e,n,t){t.d(n,{d4:function(){return i}});var r=t(48305),a=t.n(r),o=(0,t(48075).oc)(),l={CREATE:["Alt+Ctrl+N","Alt+Meta+N"],CLEAR:["Alt+Ctrl+K","Alt+Meta+K"],RIGHT:["Ctrl+RIGHT","Meta+RIGHT"],SAVE:["Ctrl+S","Meta+S"],SUBMIT:["Enter","Enter"],ENTER:["Enter","Enter"],SHIFT:["Shift","Shift"],CTRL:["Ctrl","Meta"],OPTION:["Alt","Option"],SAVEAS:["Alt+Ctrl+S","Alt+Meta+S"],OPEN:["Alt+Ctrl+O","Alt+Meta+O"],UNDO:["Ctrl+Z","Meta+Z"],CANCEL:["Ctrl+W","Meta+W"],DELETE:["delete"],COPY:["Ctrl+C","Meta+C"],REFRESH:["Ctrl+R","Meta+R"],EDIT:["Ctrl+E","Meta+E"],SEARCH:["Ctrl+K","Meta+K"],RESET:["Alt+Ctrl+R","Alt+Meta+R"],INPUT:["Ctrl+K","Meta+K"],NEW1:["Ctrl+1","Meta+1"],NEW2:["Ctrl+2","Meta+2"],NEW3:["Ctrl+3","Meta+3"],NEW4:["Ctrl+4","Meta+4"],FOCUS:["/","/"],ADD:["Alt+Ctrl+Enter","Alt+Meta+Enter"],ESC:["Esc","Esc"]},i=Object.entries(l).map((function(e){var n=a()(e,2),t=n[0],r=n[1],l=o.isMac&&r[1]||r[0];return{keybinding:l,command:t,textKeybinding:o.isMac?l.replace("Meta","Cmd").replace("Alt","Option"):l.replace("Ctrl","Ctrl"),iconKeybinding:o.isMac?l.replace("Meta","⌘").replace("Alt","⌥"):l.replace("Ctrl","Ctrl")}})).reduce((function(e,n){return e[n.command]=n,e}),{});n.ZP=l},21363:function(e,n,t){t.d(n,{Z:function(){return a}});var r=t(75271);function a(){var e=r.useRef(0),n=r.useRef({}),t=r.useRef(null),a=r.useRef(null),o=r.useRef(null),l=function(){var e;t.current=null===(e=window.__GPUSTACK_BODY_SCROLLER__)||void 0===e||null===(e=e.elements())||void 0===e?void 0:e.scrollEventElement,a.current=window.__GPUSTACK_BODY_SCROLLER__},i=r.useCallback((function(){var r,o,i,s;t.current||l(),n.current=null===(r=a.current)||void 0===r?void 0:r.state();var c=null===(o=n.current)||void 0===o||null===(o=o.overflowAmount)||void 0===o?void 0:o.y;e.current=c,null===(i=a.current)||void 0===i||null===(s=i.options)||void 0===s||s.call(i,{overflow:{x:"hidden",y:"visible"}})}),[]),s=r.useCallback((function(){o.current&&clearTimeout(o.current),o.current=setTimeout((function(){var e,n;null===(e=a.current)||void 0===e||null===(n=e.options)||void 0===n||n.call(e,{overflow:{x:"hidden",y:"scroll"}})}),500)}),[]);return r.useEffect((function(){return l(),function(){t.current=null,a.current=null}}),[]),{saveScrollHeight:i,restoreScrollHeight:s,bodyScroller:t.current}}},17912:function(e,n,t){t.d(n,{Z:function(){return j}});var r,a=t(26068),o=t.n(a),l=t(90228),i=t.n(l),s=t(87999),c=t.n(s),u=t(48305),d=t.n(u),p=t(53649),m=t.n(p),f=t(11401),v=t(75271),h=t(67585),g=t(92047),x=t(51349),b=t(52676),k=(h.ZP.div(r||(r=m()(["\n  margin: 0 auto;\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n  .command-info {\n    margin-bottom: 8px;\n  }\n"]))),function(e){var n=e||{},t=n.open,r=n.onCancel,a=n.provider,l=n.cluster_id,s=n.title,u=n.clusterList,p=n.stepList,m=void 0===p?[]:p,h=v.useRef(!0),k=v.useState({token:"",image:"",server_url:"",cluster_id:0}),y=d()(k,2),_=y[0],w=y[1],j=function(){var e=c()(i()().mark((function e(n,t){var r;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,g.zc)({id:n});case 3:r=e.sent,h.current=!1,w(o()(o()({},r),{},{cluster_id:n})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),h.current=!1;case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(n,t){return e.apply(this,arguments)}}();return(0,v.useEffect)((function(){return t&&l&&h.current&&j(l),function(){h.current=!0}}),[t,l]),(0,b.jsx)(f.Z,{title:s,open:t,centered:!0,onCancel:r,destroyOnHidden:!0,closeIcon:!0,maskClosable:!1,keyboard:!1,width:865,style:{},maxContentHeight:"max(calc(100vh - 200px), 600px)",footer:null,children:(0,b.jsx)(x.Z,{stepList:m,provider:a,clusterList:u,onClusterChange:j,registrationInfo:_})})}),y=t(53231),_=t(35421),w=t(73940),j=function(e){var n=(0,y.useIntl)(),t=(e||{}).clusterList,r=(0,v.useState)([]),a=d()(r,2),l=a[0],s=a[1],u=(0,v.useState)({open:!1,provider:null,title:"",cluster_id:0}),p=d()(u,2),m=p[0],f=p[1],h=function(){var e=c()(i()().mark((function e(t){var r;return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r=t.provider===w.dC.Docker?n.formatMessage({id:"resources.button.create"}):n.formatMessage({id:"clusters.button.register"}),null!=t&&t.id){e.next=4;break}return e.abrupt("return");case 4:f({open:!0,title:r,provider:t.provider,cluster_id:t.id}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),_.ZP.error((null===e.t0||void 0===e.t0?void 0:e.t0.message)||"Failed to fetch cluster token");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n){return e.apply(this,arguments)}}(),g=function(){var e=c()(i()().mark((function e(n,t){return i()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h(t);case 1:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),x=(0,v.useMemo)((function(){return null==t?void 0:t.map((function(e){return o()(o()({},e),{},{disabled:e.state!==w.Ur.Ready||e.provider!==w.dC.Docker})})).filter((function(e){return e.state===w.Ur.Ready}))}),[t]),j=(0,b.jsx)(k,{title:m.title,stepList:l||[],open:m.open,provider:m.provider,clusterList:x,cluster_id:m.cluster_id,onClusterChange:g,onCancel:function(){return f({open:!1,provider:null,title:"",cluster_id:0})}});return{handleAddWorker:h,AddWorkerModal:j,setStepList:s}}},67996:function(e,n,t){t.d(n,{$i:function(){return O},Ae:function(){return Z},Cz:function(){return P},Db:function(){return L},G:function(){return c},OI:function(){return I},TM:function(){return x},Tx:function(){return p},UM:function(){return m},Uf:function(){return b},Us:function(){return T},V6:function(){return M},WA:function(){return y},XI:function(){return s},Xl:function(){return v},YB:function(){return h},YK:function(){return g},ZT:function(){return u},_3:function(){return E},bI:function(){return f},bn:function(){return D},dY:function(){return j},fx:function(){return A},hg:function(){return d},i7:function(){return k},mW:function(){return C},pw:function(){return w},s0:function(){return _},tn:function(){return S}});t(48305);var r=t(82092),a=t.n(r),o=t(91315),l=t(13554),i=t(40562),s=[{title:i.sk.vllm,tips:"models.form.backend.vllm"},{title:i.sk.SGLang,tips:"models.form.backend.sglang"},{title:i.sk.ascendMindie,tips:"models.form.backend.mindie"},{title:i.sk.voxBox,tips:"models.form.backend.voxbox"}],c=[{title:{text:"models.localpath.gguf.tips.title",locale:!0},tips:"models.localpath.gguf.tips"},{title:{text:"models.localpath.shared.tips.title",locale:!0},tips:"models.localpath.chunks.tips"},{title:{text:"models.localpat.safe.tips.title",locale:!0},tips:"models.localpath.safe.tips"}],u=(a()(a()(a()(a()(a()({},i.sk.llamaBox,"llama-box"),i.sk.vllm,"vLLM"),i.sk.voxBox,"vox-box"),i.sk.ascendMindie,"Ascend MindIE"),i.sk.custom,"Custom"),a()(a()(a()(a()({},i.sk.llamaBox,{holder:"models.form.backend_parameters.llamabox.placeholder",tooltip:"models.form.backend_parameters.vllm.tips"}),i.sk.vllm,{holder:"models.form.backend_parameters.vllm.placeholder",tooltip:"models.form.backend_parameters.vllm.tips"}),i.sk.SGLang,{holder:"models.form.backend_parameters.sglang.placeholder",tooltip:""}),i.sk.voxBox,null)),d={textToSpeech:"text-to-speech",speechToText:"speech-to-text",textToText:"text-to-text",textToImage:"text-to-image",audio:"audio",image:"image"},p=a()(a()(a()(a()(a()({},d.textToSpeech,"text-to-speech"),d.speechToText,"auto-speech-recognition"),d.textToText,"TextToText"),d.textToImage,"text-to-image"),"audio",["text-to-speech","auto-speech-recognition"]),m=a()(a()(a()(a()(a()({},d.textToSpeech,"text-to-speech"),d.speechToText,"automatic-speech-recognition"),d.textToText,"text-2-text"),d.textToImage,"text-to-image"),"audio",["text-to-speech","automatic-speech-recognition"]),f={huggingface:"Hugging Face",huggingface_value:"huggingface",ollama_library:"Ollama Library",ollama_library_value:"ollama_library",modelScope:"ModelScope",modelscope_value:"model_scope",model_scope:"ModelScope",local_path:"Local Path",local_path_value:"local_path"},v=a()(a()(a()(a()({},f.huggingface_value,f.huggingface),f.ollama_library_value,f.ollama_library),f.modelscope_value,f.modelScope),f.local_path_value,f.local_path),h=[{label:"Hugging Face",value:f.huggingface_value,key:"huggingface"},{label:"ModelScope",value:f.modelscope_value,key:"model_scope"},{label:"models.form.localPath",locale:!0,value:f.local_path_value,key:"local_path"}],g={Initializing:"initializing",Starting:"starting",Pending:"pending",Running:"running",Scheduled:"scheduled",Error:"error",Downloading:"downloading",Unknown:"unknown",Analyzing:"analyzing",Unreachable:"unreachable"},x=[g.Downloading,g.Initializing,g.Starting],b=a()(a()(a()(a()(a()(a()(a()(a()(a()(a()({},g.Initializing,"Initializing"),g.Pending,"Pending"),g.Running,"Running"),g.Scheduled,"Scheduled"),g.Error,"Error"),g.Downloading,"Downloading"),g.Unknown,"Unknown"),g.Analyzing,"Analyzing"),g.Starting,"Starting"),g.Unreachable,"Unreachable"),k=a()(a()(a()(a()(a()(a()(a()(a()(a()(a()({},g.Running,o.iE.success),g.Pending,o.iE.transitioning),g.Initializing,o.iE.transitioning),g.Scheduled,o.iE.transitioning),g.Error,o.iE.error),g.Downloading,o.iE.transitioning),g.Unknown,o.iE.inactive),g.Analyzing,o.iE.transitioning),g.Starting,o.iE.transitioning),g.Unreachable,o.iE.error),y={Inactive:"Inactive",Degrade:"Degrade",Active:"Active"},_=a()(a()(a()({},y.Inactive,o.iE.inactive),y.Degrade,o.iE.error),y.Active,o.iE.success),w=a()(a()(a()({},y.Inactive,"models.mymodels.status.inactive"),y.Degrade,"models.mymodels.status.degrade"),y.Active,"models.mymodels.status.active"),j={Auto:"auto",Manual:"manual",SpecificGPUType:"specific_gpu_type"},C=[{label:"models.form.scheduletype.auto",locale:!0,value:j.Auto},{label:"models.form.scheduletype.manual",value:j.Manual,locale:!0}],S=(l.Z,l.Z,l.Z,{trendingScore:"trendingScore",likes:"likes",downloads:"downloads",lastModified:"lastModified"}),Z=a()(a()(a()(a()({},S.trendingScore,"Default"),S.likes,"StarsCount"),S.downloads,"DownloadsCount"),S.lastModified,"GmtModified"),M=[{label:"Spread",value:"spread"},{label:"Binpack",value:"binpack"}],T={image:"image",text_to_speech:"text_to_speech",speech_to_text:"speech_to_text",embedding:"embedding",reranker:"reranker",llm:"llm"},I=[{label:"LLM",value:T.llm},{label:"Embedding",value:T.embedding},{label:"Reranker",value:T.reranker},{label:"Image",value:T.image},{label:"Text-to-Speech",value:T.text_to_speech},{label:"Speech-to-Text",value:T.speech_to_text}],E=[{label:"common.options.auto",value:null,locale:!0}].concat(I),P=["model_scope_model_id","huggingface_repo_id","huggingface_filename","model_scope_file_path","name","description","env","source","cluster_id","quantization","size","restart_on_error","worker_selector","backend_parameters","local_path","backend_version","ollama_library_model_name","scheduleType","placement_strategy","backend","gpu_selector.gpu_ids","run_command","image_name","extended_kv_cache.enabled","extended_kv_cache.ram_size","speculative_config.enabled","speculative_config.draft_model"],D=["categories","replicas","description"],A={replicas:1,description:"",categories:null,env:{},scheduleType:j.Auto,placement_strategy:"spread",gpu_ids:null,gpu_selector:{},worker_selector:{},backend_parameters:[],backend_version:""},L=function(e){return e===i.sk.llamaBox?{backend:"llama-box",releases:"https://github.com/gpustack/llama-box/releases",link:"https://github.com/gpustack/llama-box?tab=readme-ov-file#usage",version:"v0.0.140"}:e===i.sk.vllm?{backend:"vLLM",releases:"https://github.com/vllm-project/vllm/releases",link:"https://docs.vllm.ai/en/stable/cli/serve.html",version:"v0.8.5"}:e===i.sk.ascendMindie?{backend:"Ascend MindIE",releases:"",link:"http://docs.gpustack.ai/latest/user-guide/inference-backends/#parameters-reference_2",version:"1.0.0"}:e===i.sk.SGLang?{backend:"SGLang",releases:"",link:"https://docs.sglang.ai/advanced_features/server_arguments.html",version:"v0.5.4"}:{backend:"vox-box",releases:"https://github.com/gpustack/vox-box/releases",link:"",version:"v0.0.13"}},O=function(e){return e.DEPLOYMENT="deployment",e.CATALOG="catalog",e}({})},13927:function(e,n,t){t.d(n,{I7:function(){return p},JI:function(){return d},Pe:function(){return T},QV:function(){return C},Sw:function(){return g},Vq:function(){return w},bO:function(){return Z},bk:function(){return v},lM:function(){return y},m_:function(){return E},oz:function(){return b},qx:function(){return m}});var r=t(90228),a=t.n(r),o=t(87999),l=t.n(o),i=t(93203),s=t(62998),c=t(53231),u=t(35421),d="/workers",p="/gpu-devices",m="/model-files",f=function(e){if(!e)return"";var n=e.match(/filename="?([^"]+)"?/);return n?n[1]:""};function v(e){return h.apply(this,arguments)}function h(){return(h=l()(a()().mark((function e(n){var t,r,o,l,c,p;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.id,r=n.name,e.prev=1,e.next=4,fetch("/".concat(i.qk).concat(d,"/").concat(t,"/privatekey"));case 4:if(o=e.sent,l=o.headers.get("content-Disposition"),c=f(l)||"".concat(r,"-privatekey.pem"),!o.ok){e.next=12;break}return e.next=10,o.blob();case 10:p=e.sent,(0,s.S)(p,c);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),u.ZP.error("Download failed");case 17:case"end":return e.stop()}}),e,null,[[1,14]])})))).apply(this,arguments)}function g(e){return x.apply(this,arguments)}function x(){return(x=l()(a()().mark((function e(n){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("".concat(d),{method:"GET",params:n}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e){return k.apply(this,arguments)}function k(){return(k=l()(a()().mark((function e(n){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("".concat(p),{methos:"GET",params:n}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){return _.apply(this,arguments)}function _(){return(_=l()(a()().mark((function e(n){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("".concat(d,"/").concat(n),{method:"DELETE"}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e,n){return j.apply(this,arguments)}function j(){return(j=l()(a()().mark((function e(n,t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("".concat(d,"/").concat(n),{method:"PUT",data:t}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e){return S.apply(this,arguments)}function S(){return(S=l()(a()().mark((function e(n){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)(m,{method:"GET",params:n}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(e,n){return M.apply(this,arguments)}function M(){return(M=l()(a()().mark((function e(n,t){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("".concat(m,"/").concat(n,"?cleanup=").concat(t.checked),{method:"DELETE"}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){return I.apply(this,arguments)}function I(){return(I=l()(a()().mark((function e(n){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)(m,{method:"POST",data:n}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e){return P.apply(this,arguments)}function P(){return(P=l()(a()().mark((function e(n){return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,c.request)("".concat(m,"/").concat(n,"/reset"),{method:"POST"}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},57563:function(e,n,t){t.r(n),t.d(n,{default:function(){return We}});var r,a,o,l=t(26068),i=t.n(l),s=t(90228),c=t.n(s),u=t(87999),d=t.n(u),p=t(48305),m=t.n(p),f=t(44471),v=t(3108),h=t(47778),g=t(94213),x=t(92047),b=t(21433),k=t(73940),y=t(17912),_=t(32914),w=t(92829),j=t(91315),C=t(93699),S=t(53231),Z=t(25383),M=t(26447),T=t(75271),I=t(52676),E=function(e){var n=(0,S.useIntl)(),t=(0,S.useNavigate)(),r=e.noClusters,a=e.noWorkers,o=e.defaultContent,l=e.loading,s=e.loadend,c=e.dataSource,u=e.queryParams,d=e.iconType,p=e.title,f=e.subTitle,v=(0,M.KO)(_.q_),h=m()(v,2)[1],g=(0,Z.Z)((function(){if(r)return h({firstAddWorker:!1,firstAddCluster:!0}),void t("/cluster-management/clusters/create?action=".concat(j.Kd.CREATE));a&&(h({firstAddWorker:!0,firstAddCluster:!1}),t("/cluster-management/clusters/list"))})),x=(0,T.useMemo)((function(){return r?{subTitle:f||n.formatMessage({id:"noresult.resources.cluster"}),noFoundText:(null==o?void 0:o.noFoundText)||"",buttonText:n.formatMessage({id:"noresult.resources.gotocluster"}),onClick:g}:a?{subTitle:f||n.formatMessage({id:"noresult.resources.worker"}),noFoundText:(null==o?void 0:o.noFoundText)||"",buttonText:n.formatMessage({id:"noresult.resources.gotoworker"}),onClick:g}:i()({},o)}),[r,a,n]);return{noResourceResult:(0,I.jsx)(C.Z,{loading:l,loadend:s,dataSource:c,image:(0,I.jsx)(w.Z,{type:d}),filters:u,noFoundText:x.noFoundText,title:p,subTitle:x.subTitle,onClick:x.onClick,buttonText:x.buttonText})}},P=t(35421),D=t(52506),A=t(92665),L=t(13927),O=t(85882),R=t(67760),z=t(53649),B=t.n(z),N=t(32699),F=t.n(N),W=t(67585),U=W.ZP.div(r||(r=B()(["\n  display: flex;\n  flex-wrap: wrap;\n  gap: 6px;\n"]))),q=function(e){var n=e.labels;return(0,I.jsx)(U,{children:F().map(n,(function(e,n){return(0,I.jsxs)(O.Z,{className:"m-r-0",maxWidth:155,style:{paddingInline:8,borderRadius:12},children:[(0,I.jsx)("span",{children:n}),(0,I.jsxs)("span",{children:[":",e]})]},n)}))})},H=t(15341),G=t(90670),K=t(59299),V=t(48075),Y=t(13554),Q=t(86422),X=t(90649),J=t(10326),$=t(38913),ee=t(50728),ne=t(25408),te=t(41550),re=[{label:"common.button.edit",key:"edit",icon:(0,I.jsx)(Y.Z,{})},{label:"resources.worker.download.privatekey",key:"download_ssh_key",icon:(0,I.jsx)(Q.Z,{})},{label:"resources.worker.maintenance.enable",key:"star_maintenance",icon:(0,I.jsx)(X.Z,{})},{label:"resources.worker.maintenance.disable",key:"stop_maintenance",icon:(0,I.jsx)(J.Z,{})},{label:"common.button.delete",key:"delete",props:{danger:!0},icon:(0,I.jsx)($.Z,{})}],ae=[{label:"resources.table.total",key:"total",locale:!0,render:function(e){return(0,V.hy)(e,0)}},{label:"resources.table.used",key:"used",locale:!0,render:function(e){return(0,V.hy)(e,0)}},{label:"resources.table.allocated",key:"allocated",locale:!0,render:function(e){return(0,V.hy)(e,0)}}],oe=function(e,n){return e&&n?F().round(e/n*100,0):0},le=function(e){var n=F().find(e,(function(e){return"/"===e.mount_point}));return n?oe(n.used,n.total):0},ie=function(e){var n=e.devices;return(0,I.jsx)("span",{className:"flex-column flex-gap-2",children:F().map(F().sortBy(n||[],["index"]),(function(e,n){var t;return(0,I.jsxs)("span",{className:"flex-center",children:[(0,I.jsxs)("span",{className:"m-r-5",style:{display:"flex",width:25},children:["[",e.index,"]"]}),e.core?(0,I.jsx)(H.Z,{percent:F().round(null===(t=e.core)||void 0===t?void 0:t.utilization_rate,0)}):"-"]},n)}))})},se=function(e){var n=e.devices,t=e.intl,r=e.rIndex,a=e.loadend,o=e.firstLoad;return(0,I.jsx)("span",{className:"flex-column flex-gap-2",children:F().map(F().sortBy(n||[],["index"]),(function(e,n){var l,i,s,c;return(0,I.jsxs)("span",{className:"flex-center",children:[(0,I.jsxs)("span",{className:"m-r-5",style:{display:"flex",width:25},children:["[",e.index,"]"]}),(0,I.jsx)(H.Z,{defaultOpen:0===r&&0===n&&a&&o,percent:null!==(l=e.memory)&&void 0!==l&&l.used?F().round(null===(i=e.memory)||void 0===i?void 0:i.utilization_rate,0):F().round((null===(s=e.memory)||void 0===s?void 0:s.allocated)/(null===(c=e.memory)||void 0===c?void 0:c.total)*100,0),label:(0,I.jsx)(G.Z,{fieldList:ae,data:e.memory})}),e.memory.is_unified_memory&&(0,I.jsx)(ne.Z,{title:t.formatMessage({id:"resources.table.unified"}),children:(0,I.jsx)(ee.Z,{className:"m-l-5",style:{color:"var(--ant-blue-5)"}})})]},n)}))})},ce=function(e){var n=e.files,t=F().find(n,(function(e){return"/"===e.mount_point}));return(0,I.jsx)(H.Z,{percent:le(n),label:t?(0,I.jsx)(G.Z,{fieldList:ae.filter((function(e){return"allocated"!==e.key})),data:t}):0})},ue=function(e){return te.jX.initializing!==e.state&&te.jX.provisioning!==e.state&&e.status},de=function(){return(0,I.jsx)("span",{children:"N/A"})},pe=function(e){var n=e.clusterData,t=e.loadend,r=e.firstLoad,a=e.handleSelect,o=(0,S.useIntl)();return(0,T.useMemo)((function(){return[{title:o.formatMessage({id:"common.table.name"}),dataIndex:"name",width:100,render:function(e){return(0,I.jsx)(O.Z,{ghost:!0,maxWidth:240,children:e})}},{title:o.formatMessage({id:"resources.table.labels"}),dataIndex:"labels",width:200,render:function(e,n){return(0,I.jsx)(q,{labels:n.labels})}},{title:o.formatMessage({id:"clusters.title"}),dataIndex:"cluster_id",render:function(e){return(0,I.jsx)(O.Z,{ghost:!0,maxWidth:240,children:F().get(n.data,e,"")})}},{title:o.formatMessage({id:"common.table.status"}),dataIndex:"state",render:function(e,n){return(0,I.jsx)(K.Z,{maxTooltipWidth:400,suffix:n.provision_progress,statusValue:{status:te.i7[n.state],text:te.S7[n.state],message:n.state_message}})}},{title:"IP",dataIndex:"ip",render:function(e){return(0,I.jsx)(O.Z,{ghost:!0,maxWidth:240,children:e})}},{title:"CPU",dataIndex:"cpu",render:function(e,n){var t;return ue(n)?(0,I.jsx)(H.Z,{percent:F().round(null==n||null===(t=n.status)||void 0===t||null===(t=t.cpu)||void 0===t?void 0:t.utilization_rate,0)}):(0,I.jsx)(de,{})}},{title:o.formatMessage({id:"resources.table.memory"}),dataIndex:"memory",render:function(e,n){var t,r;return ue(n)?(0,I.jsx)(H.Z,{percent:oe(null==n||null===(t=n.status)||void 0===t||null===(t=t.memory)||void 0===t?void 0:t.used,null==n||null===(r=n.status)||void 0===r||null===(r=r.memory)||void 0===r?void 0:r.total),label:(0,I.jsx)(G.Z,{fieldList:ae,data:n.status.memory})}):(0,I.jsx)(de,{})}},{title:"GPU",dataIndex:"gpu",render:function(e,n){var t;return ue(n)?(0,I.jsx)(ie,{devices:null==n||null===(t=n.status)||void 0===t?void 0:t.gpu_devices}):(0,I.jsx)(de,{})}},{title:o.formatMessage({id:"resources.table.vram"}),dataIndex:"vram",render:function(e,n,a){var l;return ue(n)?(0,I.jsx)(se,{devices:null==n||null===(l=n.status)||void 0===l?void 0:l.gpu_devices,intl:o,rIndex:a,loadend:t,firstLoad:r}):(0,I.jsx)(de,{})}},{title:o.formatMessage({id:"resources.table.disk"}),dataIndex:"storage",render:function(e,n){var t;return ue(n)?(0,I.jsx)(ce,{files:null===(t=n.status)||void 0===t?void 0:t.filesystem}):(0,I.jsx)(de,{})}},{title:o.formatMessage({id:"common.table.operation"}),key:"operation",render:function(e,n){return(0,I.jsx)(R.Z,{items:(t=n,re.filter((function(e){return"download_ssh_key"===e.key?!!t.ssh_key_id:"star_maintenance"===e.key?!(null!==(n=t.maintenance)&&void 0!==n&&n.enabled):"stop_maintenance"!==e.key||(null===(r=t.maintenance)||void 0===r?void 0:r.enabled);var n,r}))),onSelect:function(e){return a(e,n)}});var t}}]}),[o,n,t,r,a])},me=t(72742),fe=t(11401),ve=t(51143),he=t(1452),ge=t(26965),xe=function(e){var n=e.fetchData,t=(0,S.useIntl)(),r=ge.Z.useForm(),a=m()(r,1)[0],o=T.useState({open:!1,currentData:{}}),l=m()(o,2),i=l[0],s=l[1],u=function(){s({open:!1,currentData:{}})},p=function(){var e=d()(c()().mark((function e(r){return c()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,L.Vq)(i.currentData.id,{name:i.currentData.name,labels:i.currentData.labels,maintenance:{enabled:!0,message:r.remark}});case 3:P.ZP.success(t.formatMessage({id:"common.message.success"})),n(),u(),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(n){return e.apply(this,arguments)}}(),f=function(){var e=d()(c()().mark((function e(r){return c()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,L.Vq)(r.id,{name:r.name,labels:r.labels,maintenance:{enabled:!1,message:""}});case 3:P.ZP.success(t.formatMessage({id:"common.message.success"})),n(),u(),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(n){return e.apply(this,arguments)}}();return{MaintenanceModal:(0,I.jsx)(fe.Z,{title:t.formatMessage({id:"resources.worker.maintenance.title"}),open:i.open,centered:!0,onCancel:u,destroyOnHidden:!0,closeIcon:!0,maskClosable:!1,keyboard:!1,width:600,maxContentHeight:"max(calc(100vh - 300px), 500px)",footer:(0,I.jsx)(me.Z,{onOk:function(){a.submit()},onCancel:u}),children:(0,I.jsxs)(ge.Z,{form:a,onFinish:p,preserve:!1,clearOnDestroy:!0,initialValues:{name:i.currentData.name},children:[(0,I.jsx)(ge.Z.Item,{name:"name",children:(0,I.jsx)(ve.Z.Input,{label:t.formatMessage({id:"common.table.name"}),disabled:!0})}),(0,I.jsx)(ge.Z.Item,{name:"remark",rules:[{required:!1,message:t.formatMessage({id:"resources.worker.maintenance.remark.rules"})}],children:(0,I.jsx)(he.Z,{label:t.formatMessage({id:"resources.worker.maintenance.remark"}),description:t.formatMessage({id:"resources.worker.maintenance.tips"}),autoSize:{minRows:4,maxRows:6}})})]})}),handleStopMaintenance:f,setOpenStatus:s}},be=t(81305),ke=(t(5597),function(e){var n=e||{},t=n.open,r=n.onCancel,a=n.data,o=n.onOk,l=(0,S.useIntl)(),i=ge.Z.useForm(),s=m()(i,1)[0],c=ge.Z.useWatch("labels",s);return(0,I.jsx)(fe.Z,{title:l.formatMessage({id:"resources.button.edit"}),open:t,centered:!0,onCancel:r,destroyOnHidden:!0,closeIcon:!0,maskClosable:!1,keyboard:!1,width:600,maxContentHeight:"max(calc(100vh - 300px), 500px)",footer:(0,I.jsx)(me.Z,{onOk:function(){s.submit()},onCancel:r}),children:(0,I.jsxs)(ge.Z,{name:"deployModel",form:s,onFinish:o,preserve:!1,clearOnDestroy:!0,initialValues:{name:a.name,labels:a.labels},children:[(0,I.jsx)(ge.Z.Item,{name:"name",children:(0,I.jsx)(ve.Z.Input,{label:l.formatMessage({id:"common.table.name"}),disabled:!0})}),(0,I.jsx)(ge.Z.Item,{name:"labels",rules:[function(){return{validator:function(e,n){return F().keys(n).length>0&&F().some(F().keys(n),(function(e){return!n[e]}))?Promise.reject(l.formatMessage({id:"common.validate.value"},{name:l.formatMessage({id:"resources.form.label"})})):Promise.resolve()}}}],children:(0,I.jsx)(be.Z,{label:l.formatMessage({id:"resources.table.labels"}),labels:c,btnText:l.formatMessage({id:"common.button.addLabel"}),onChange:function(e){s.setFieldValue("labels",e)}})})]})})}),ye=t(19636),_e=t(82243),we=t(67996),je=t(65050),Ce=t(3453),Se=t(75846),Ze=t(24320),Me=t(79635),Te=W.ZP.span(a||(a=B()(["\n  display: flex;\n  flex-direction: column;\n  gap: 2px;\n"]))),Ie=W.ZP.div(o||(o=B()(["\n  display: flex;\n  align-items: center;\n  gap: 4px;\n"]))),Ee=[{label:"CPU",key:"cpuoffload",locale:!1},{label:"GPU",key:"gpuoffload",locale:!1}],Pe=function(e){return(0,I.jsx)(Te,{children:F().chunk(e,8).map((function(e,n){return(0,I.jsx)("span",{children:e.join(",")},n)}))})},De=[{title:"resources.worker",locale:!0,key:"worker_name",style:{wordBreak:"break-word"}},{title:"IP",key:"worker_ip",render:function(e){var n=e.row;return n.port?"".concat(n.worker_ip,":").concat(n.port):n.worker_ip}},{title:"models.table.gpuindex",locale:!0,key:"gpu_index",render:function(e){var n=e.row,t=F().sortBy(n.gpu_index,(function(e){return e}));return n.is_main?(0,I.jsxs)(I.Fragment,{children:[Pe(t),(0,I.jsx)("span",{children:"(main)"})]}):Pe(t)}},{title:"models.table.vram.allocated",locale:!0,key:"vram",render:function(e){e.rowIndex;var n=e.row;e.dataList;return(0,V.hy)(n.vram,1)}}],Ae=function(e,n){var t,r,a=[{worker_name:"".concat(n.worker_name),worker_ip:"".concat(n.worker_ip),port:"",vram:(r=(null===(t=n.computed_resource_claim)||void 0===t?void 0:t.vram)||{},F().sum(F().values(r))),is_main:!0,gpu_index:n.gpu_indexes}];return(0,I.jsx)("div",{children:(0,I.jsx)(Se.Z,{rowKey:"worker_name",columns:De,dataSource:[].concat(a)})})},Le=function(e){var n=e.instanceData,t=(0,S.useIntl)(),r=n.distributed_servers,a=(null==r?void 0:r.subordinate_workers)||[];return a.length?(0,I.jsx)(Ce.$R,{toolTipProps:{trigger:"hover",styles:{body:{width:"max-content",maxWidth:"520px",minWidth:"400px"}}},title:Ae(0,n),children:(0,I.jsxs)(Ze.Z,{opacity:.75,color:"processing",style:{marginRight:0,display:"flex",alignItems:"center",maxWidth:"100%",minWidth:50,textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",borderRadius:12},children:[(0,I.jsx)(ee.Z,{className:"m-r-5"}),t.formatMessage({id:"models.table.acrossworker"})]})}):null},Oe=function(e){var n,t,r,a,o,l=(0,S.useIntl)(),i=e.instanceData,s=null===(n=i.computed_resource_claim)||void 0===n?void 0:n.total_layers;if(s===(null===(t=i.computed_resource_claim)||void 0===t?void 0:t.offload_layers)||!s)return null;var c={cpuoffload:"".concat(F().subtract(null===(r=i.computed_resource_claim)||void 0===r?void 0:r.total_layers,null===(a=i.computed_resource_claim)||void 0===a?void 0:a.offload_layers)||0," ").concat(l.formatMessage({id:"models.table.layers"})),gpuoffload:"".concat(null===(o=i.computed_resource_claim)||void 0===o?void 0:o.offload_layers," ").concat(l.formatMessage({id:"models.table.layers"}))};return(0,I.jsx)(ne.Z,{styles:{body:{paddingInline:12}},title:(0,I.jsx)(G.Z,{fieldList:Ee,data:c}),children:(0,I.jsxs)(Ze.Z,{opacity:.75,color:"cyan",style:{display:"flex",alignItems:"center",maxWidth:"100%",minWidth:50,textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",borderRadius:12},children:[(0,I.jsx)(ee.Z,{className:"m-r-5"}),l.formatMessage({id:"models.table.cpuoffload"})]})})},Re=function(e){var n=(0,S.useIntl)(),t=e.instanceData;return t.state?(0,I.jsx)(I.Fragment,{children:(0,I.jsx)(K.Z,{download:t.state===we.YK.Downloading?{percent:t.download_progress}:void 0,extra:t.state===we.YK.Error&&t.worker_id?(0,I.jsx)(Me.ZP,{type:"link",size:"small",style:{paddingLeft:0},children:n.formatMessage({id:"models.list.more.logs"})}):null,statusValue:{status:t.state===we.YK.Downloading&&100===t.download_progress?we.i7[we.YK.Running]:we.i7[t.state],text:we.Uf[t.state],message:t.state===we.YK.Downloading&&100===t.download_progress?"":t.state_message}})}):null},ze=function(e){var n=e.clusterList,t=(0,S.useIntl)();return(0,T.useMemo)((function(){return[{title:t.formatMessage({id:"resources.model.instance"}),dataIndex:"name",width:240,render:function(e,n){return(0,I.jsx)(O.Z,{ghost:!0,maxWidth:240,children:e})}},{title:t.formatMessage({id:"resources.worker"}),dataIndex:"worker_name",render:function(e,n){return(0,I.jsx)(O.Z,{ghost:!0,children:e})}},{title:t.formatMessage({id:"models.title"}),dataIndex:"model_name",render:function(e,n){return(0,I.jsx)(O.Z,{ghost:!0,children:e})}},{title:t.formatMessage({id:"clusters.title"}),dataIndex:"cluster_id",render:function(e,t){var r;return(0,I.jsx)(O.Z,{ghost:!0,children:null===(r=n.find((function(n){return n.value===e})))||void 0===r?void 0:r.label})}},{title:t.formatMessage({id:"common.table.status"}),dataIndex:"state",render:function(e,n){return(0,I.jsxs)(Ie,{children:[(0,I.jsx)(Oe,{instanceData:n}),(0,I.jsx)(Le,{instanceData:n}),(0,I.jsx)(Re,{instanceData:n})]})}}]}),[t,n])},Be=Object.entries(we.YK).map((function(e){var n=m()(e,2);return{label:n[0],value:n[1]}})),Ne=function(e){var n=e.worker_id,t=(0,h.Z)({fetchAPI:_e.BP,polling:!1,API:_e.PS,defaultQueryParams:{worker_id:n}}),r=t.dataSource,a=t.queryParams,o=t.handlePageChange,l=t.handleTableChange,i=t.handleSearch,s=t.handleQueryChange,u=t.handleNameChange,p=(0,S.useIntl)(),f=(0,T.useState)([]),g=m()(f,2),b=g[0],k=g[1],y=function(){var e=d()(c()().mark((function e(){var n,t,r;return c()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,x.ax)({page:-1});case 3:t=e.sent,r=null===(n=t.items)||void 0===n?void 0:n.map((function(e){return{label:e.name,value:e.id}})),k(r||[]),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),k([]);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),_=ze({clusterList:b});return(0,T.useEffect)((function(){}),[_]),(0,T.useEffect)((function(){y()}),[]),(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(v.f,{marginBottom:22,marginTop:0,buttonText:p.formatMessage({id:"resources.button.create"}),handleSearch:i,handleSelectChange:function(e){s({state:e})},handleInputChange:u,selectHolder:p.formatMessage({id:"resources.filter.status"}),showSelect:!0,selectOptions:Be,width:{input:300}}),(0,I.jsx)(D.ZP,{renderEmpty:function(e){if("Table"===e)return r.loading||!r.loadend||r.dataList.length?(0,I.jsx)("div",{}):(0,I.jsx)(je.Z,{image:je.Z.PRESENTED_IMAGE_SIMPLE})},children:(0,I.jsx)(A.Z,{columns:_,style:{width:"100%"},tableLayout:r.loadend?"auto":"fixed",dataSource:r.dataList,loading:r.loading,rowKey:"id",onChange:l,pagination:{showSizeChanger:!0,pageSize:a.perPage,current:a.page,total:r.total,hideOnSinglePage:10===a.perPage,onChange:o}})})]})},Fe=function(e){var n=e.open,t=e.onClose,r=e.currentData;return(0,I.jsx)(ye.Z,{width:"calc(100vw - 200px)",title:"".concat(null==r?void 0:r.name),open:n,destroyOnHidden:!0,onClose:function(){null==t||t()},children:(0,I.jsx)(Ne,{worker_id:null==r?void 0:r.id})})},We=function(){var e=(0,h.Z)({fetchAPI:L.Sw,deleteAPI:L.lM,contentForDelete:"resources.worker",watch:!0,API:L.JI}),n=e.dataSource,t=e.rowSelection,r=e.queryParams,a=e.modalRef,o=e.extraStatus,l=e.handleDelete,s=e.handleDeleteBatch,u=e.fetchData,p=e.handlePageChange,_=e.handleTableChange,w=e.handleSearch,j=e.handleQueryChange,C=e.handleNameChange,M=xe({fetchData:w}),O=M.MaintenanceModal,R=M.handleStopMaintenance,z=M.setOpenStatus,B=(0,S.useIntl)(),N=(0,T.useState)({open:!1,data:{}}),F=m()(N,2),W=F[0],U=F[1],q=(0,T.useState)({list:[],data:{}}),H=m()(q,2),G=H[0],K=H[1],V=(0,T.useState)({open:!1,currentData:null}),Y=m()(V,2),Q=Y[0],X=Y[1],J=(0,y.Z)({clusterList:G.list}),$=J.handleAddWorker,ee=J.AddWorkerModal,ne=J.setStepList,te=function(){var e=d()(c()().mark((function e(){var n,t,r,a,o,l;return c()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r={page:-1},e.next=4,(0,x.ax)(r);case 4:a=e.sent,o=null==a||null===(n=a.items)||void 0===n?void 0:n.reduce((function(e,n){return e[n.id]=n.name,e}),{}),l=null==a||null===(t=a.items)||void 0===t?void 0:t.map((function(e){return{label:e.name,value:e.id,id:e.id,state:e.state,provider:e.provider}})),K({list:l,data:o}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),K({list:[],data:{}});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),re=function(){var e=d()(c()().mark((function e(n){return c()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,L.Vq)(W.data.id,i()(i()({},W.data),{},{labels:n.labels}));case 3:P.ZP.success(B.formatMessage({id:"common.message.success"})),u(),U({open:!1,data:{}}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(n){return e.apply(this,arguments)}}(),ae=(0,Z.Z)((function(e,n){"edit"!==e?("delete"===e&&l(n),"details"===e&&function(e){X({open:!0,currentData:e})}(n),"download_ssh_key"===e&&(0,L.bk)({id:n.id,name:n.name}),"star_maintenance"===e&&z({open:!0,currentData:n}),"stop_maintenance"===e&&R(n)):function(e){U({open:!0,data:i()({},e)})}(n)})),oe=function(){var e=G.list.find((function(e){return e.provider===k.dC.Docker&&e.state===k.Ur.Ready}));e||(e=G.list[0]),e?$(e):P.ZP.info(B.formatMessage({id:"noresult.resources.cluster"}))},le=E({loadend:n.loadend,loading:n.loading,dataSource:n.dataList,queryParams:r,iconType:"icon-resources",title:B.formatMessage({id:"noresult.workers.title"}),noClusters:!G.list.length,noWorkers:0===n.dataList.length&&G.list.length>0,defaultContent:{subTitle:B.formatMessage({id:"noresult.workers.subTitle"}),noFoundText:B.formatMessage({id:"noresult.workers.nofound"}),buttonText:B.formatMessage({id:"noresult.workers.button.add"}),onClick:oe}}).noResourceResult,ie=pe({clusterData:G,loadend:n.loadend,firstLoad:o.firstLoad,handleSelect:ae});return(0,T.useEffect)((function(){te(),ne(b.Mi)}),[]),(0,I.jsx)(I.Fragment,{children:(0,I.jsxs)(g.Z,{children:[(0,I.jsx)(v.f,{showSelect:!0,selectHolder:B.formatMessage({id:"clusters.filterBy.cluster"}),marginBottom:22,marginTop:30,buttonText:B.formatMessage({id:"resources.button.create"}),handleDeleteByBatch:s,handleSearch:w,handleSelectChange:function(e){j({page:1,cluster_id:e})},handleClickPrimary:oe,handleInputChange:C,rowSelection:t,selectOptions:G.list,width:{input:200}}),(0,I.jsx)(D.ZP,{renderEmpty:function(e){if("Table"===e)return le},children:(0,I.jsx)(A.Z,{columns:ie,tableLayout:n.loadend?"auto":"fixed",style:{width:"100%"},dataSource:n.dataList,loading:n.loading,rowKey:"id",onChange:_,rowSelection:t,pagination:{showSizeChanger:!0,pageSize:r.perPage,current:r.page,total:n.total,hideOnSinglePage:10===r.perPage,onChange:p}})}),(0,I.jsx)(f.Z,{ref:a}),(0,I.jsx)(ke,{open:W.open,onOk:re,onCancel:function(){U(i()(i()({},W),{},{open:!1}))},data:{name:W.data.name,labels:W.data.labels}}),(0,I.jsx)(Fe,{open:Q.open,currentData:Q.currentData,onClose:function(){return X({currentData:null,open:!1})}}),O,ee]})})}},62998:function(e,n,t){t.d(n,{S:function(){return a}});var r=t(11227),a=function(e,n){(0,r.saveAs)(e,n)}}}]);