"""
maria_summarize_text_ai_assistant.summarize
==========================================

This module provides functions that summarize text using the Groq API.
"""

import os
from dotenv import load_dotenv
from groq import Groq

# Load environment variables from .env file
load_dotenv()

# Initialize Groq client
client = Groq(api_key=os.getenv("GROQ_API_KEY"))

def summarize_text(text: str) -> str:
    """
    Summarize long text using Groq API.

    Parameters
    ----------
    text : str
        The long input text to summarize.

    Returns
    -------
    str
        A concise summary generated by Groq.

    Raises
    ------
    ValueError
        If input text is empty or API key is missing.
    """

    if not text or text.strip() == "":
        raise ValueError("Input text cannot be empty.")

    prompt = f"Please summarize the following text concisely:\n\n{text}"

    # Groq chat completion
    response = client.chat.completions.create(
        messages=[
            {
                "role": "user",
                "content": prompt
            }
        ],
        model="llama-3.1-8b-instant",  # Current Groq models: llama-3.1-8b-instant, llama-3.1-70b-versatile, mixtral-8x7b-32768
    )
    return response.choices[0].message.content
