"""
maria_summarize_text_ai_assistant.summarize
==========================================

This module provides functions that summarize text using the OpenAI API.

Functions
---------
summarize_text(text : str) -> str
    Summarizes long text using an AI model.

Example
-------
from maria_summarize_text_ai_assistant.summarize import summarize_text
result = summarize_text("Your long text here")
print(result)
"""

import os
from openai import OpenAI

client = OpenAI(api_key=os.getenv("OPENAI_API_KEY"))

def summarize_text(text: str) -> str:
    """
    Summarize long text using OpenAI models.

    Parameters
    ----------
    text : str
        The long input text to summarize.

    Returns
    -------
    str
        A concise summary generated by the AI model.

    Raises
    ------
    ValueError
        If input text is empty or API key is missing.

    Example
    -------
    >>> summarize_text("Artificial intelligence is transforming industries...")
    "AI is changing industries through automation and smart decision-making."
    """

    if not text or text.strip() == "":
        raise ValueError("Input text cannot be empty.")

    rsp = client.chat.completions.create(
        model="gpt-4o-mini",
        messages=[
            {"role": "system", "content": "Summarize the following text."},
            {"role": "user", "content": text}
        ]
    )

    return rsp.choices[0].message["content"]
