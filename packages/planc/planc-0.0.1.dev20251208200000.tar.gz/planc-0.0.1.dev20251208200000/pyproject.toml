[project]
name = "planc"
version = "0.0.1dev20251208200000"
# dynamic = ["version"] # todo 后面用 dynamic 替换掉 version 字段
license = { text = "MIT" }

description = "Add your description here"
readme = "README.md"
authors = [{ name = "Chen Peng" }]
urls = { "homepage" = "https://github.com/chen56/planc" }

requires-python = ">=3.12"
dependencies = []


[build-system]
requires = ["uv_build>=0.9.15,<0.10.0"]
build-backend = "uv_build"


#################################################################################
# 配置依赖组（Dependency Groups）
# - 开发者（Developer） 工具依赖（测试、Linting、文档）。
# - 不会包含在发布的包元数据中。它只在本地开发时使用。
# - 相对较新（PEP 735），支持工具（如 uv、Poetry 的部分功能）正在普及。
#################################################################################
[dependency-groups]
dev = ["keyring>=25.7.0", "pytest>=9.0.1", "ruff>=0.14.8"]

#################################################################################
# 可选依赖（Optional Dependencies）
# 终端用户（End-User） 可选功能依赖。
# 会 包含在发布的包元数据中（例如 .whl 文件），用户可通过 pip install package[xxx] 安装。
#################################################################################
[project.optional-dependencies]
hello = [
    "pandas>=2.0.0", # uv 可能会添加版本约束 puff
]
hello2 = ["matplotlib>=3.7.0"]


#################################################################################
# --- uv 配置 ---
#################################################################################

[[tool.uv.index]]
url = "https://pypi.tuna.tsinghua.edu.cn/simple/"
[[tool.uv.index]]
url = "https://mirrors.aliyun.com/pypi/simple/"


[tool.uv]
# `uv python install`的不是官网文件，而是这个项目打包的便携版: https://github.com/astral-sh/python-build-standalone/
# 镜像较少，参考: https://github.com/tuna/issues/issues/2125 
# 已知镜像站点：
# - https://mirror.nju.edu.cn/github-release/astral-sh/python-build-standalone/
# - https://registry.npmmirror.com/-/binary/python-build-standalone/
# - https://gh-proxy.com/github.com/indygreg/python-build-standalone/releases/download
# 镜像下载示例：
# - uv python install --mirror https://registry.npmmirror.com/-/binary/python-build-standalone/ 3.12
# - UV_PYTHON_INSTALL_MIRROR=https://mirror.nju.edu.cn/github-release/astral-sh/python-build-standalone/ uv python install 3.12
# pyproject.toml config ref: https://docs.astral.sh/uv/reference/settings/#python-install-mirror
python-install-mirror = "https://registry.npmmirror.com/-/binary/python-build-standalone/"


#################################################################################
# --- Ruff 配置 ---
#################################################################################

[tool.ruff]
# 告诉 Ruff 你的 Python 源代码在哪里
src = ["src"]
# 排除的文件或目录
exclude = [".git", "__pycache__", "build", "dist", ".venv"]

# 最大行长度
line-length = 120

[tool.ruff.lint]
# C901: 忽略函数复杂度检查
ignore = ["E501", "W293"]
select = [
    # "I", # I: isort (导入排序)
    "E", # E: Error (pycodestyle)
    "W", # W: Warning (pycodestyle)
    "F", # F: Pyflakes
    "B", # B: Bugbear
]
extend-select = [
    "UP", # pyupgrade
    "D",  # pydocstyle

]

[tool.ruff.lint.pydocstyle]
convention = "google" # 使用 Google 风格的 docstring 约定
