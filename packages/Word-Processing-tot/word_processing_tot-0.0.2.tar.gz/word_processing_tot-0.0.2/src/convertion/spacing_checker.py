"""
spacing_checker.py
ê°„ë‹¨í•œ í•œêµ­ì–´ ë„ì–´ì“°ê¸° ë³´ì • ëª¨ë“ˆ (ì…ë ¥ â†’ êµì • ê²°ê³¼ ì¶œë ¥)

ì‚¬ìš© ì˜ˆì‹œ
---------
python spacing_checker.py

ì…ë ¥: ê·¸ì¼ì€ìµœì„ ì„ë‹¤í• ë§Œí¼ê°€ì¹˜ê°€ìˆë‹¤ê³ í• ë§Œí•˜ë‹¤ í•œë²ˆì— ëë‚´ê³ ì‹¶ë‹¤ ì•Œìˆ˜ìˆë‹¤
êµì •: ê·¸ ì¼ì€ ìµœì„ ì„ ë‹¤í•  ë§Œí¼ ê°€ì¹˜ê°€ ìˆë‹¤ê³  í•  ë§Œí•˜ë‹¤ í•œ ë²ˆì— ëë‚´ê³  ì‹¶ë‹¤ ì•Œ ìˆ˜ ìˆë‹¤
"""

import re

# -----------------------------
# 1. ìì£¼ í‹€ë¦¬ëŠ” ë„ì–´ì“°ê¸° ì‚¬ì „
# -----------------------------
COMMON_ERRORS = {
    "ê·¸ì¼ì€ìµœì„ ì„ë‹¤í• ë§Œí¼ê°€ì¹˜ê°€ìˆë‹¤ê³ í• ë§Œí•˜ë‹¤": "ê·¸ ì¼ì€ ìµœì„ ì„ ë‹¤í•  ë§Œí¼ ê°€ì¹˜ê°€ ìˆë‹¤ê³  í•  ë§Œí•˜ë‹¤",
    "í•œë²ˆì—": "í•œ ë²ˆì—",
    "ë‘ë²ˆì—": "ë‘ ë²ˆì—",
    "ê·¸ëŸ´ìˆ˜ë„": "ê·¸ëŸ´ ìˆ˜ë„",
    "ì •ë§ì¢‹ë‹¤": "ì •ë§ ì¢‹ë‹¤",
    "ë¬¸ì œì—†ë‹¤": "ë¬¸ì œ ì—†ë‹¤",
    "ì§‘ê°€ê³ ì‹¶ë‹¤": "ì§‘ ê°€ê³  ì‹¶ë‹¤",
    "ë‹¤ìŒì£¼ì‹œí—˜": "ë‹¤ìŒ ì£¼ ì‹œí—˜",
    "ì•Œìˆ˜ìˆë‹¤": "ì•Œ ìˆ˜ ìˆë‹¤",
    "í• ìˆ˜ìˆë‹¤": "í•  ìˆ˜ ìˆë‹¤",
    "ë³¼ìˆ˜ìˆë‹¤": "ë³¼ ìˆ˜ ìˆë‹¤",
    "ê°ˆìˆ˜ìˆë‹¤": "ê°ˆ ìˆ˜ ìˆë‹¤",

     # ---- 'ìˆ˜ ìˆë‹¤' ê³„ì—´ í™•ì¥ ----
    "ì°¾ì„ìˆ˜ìˆë‹¤": "ì°¾ì„ ìˆ˜ ìˆë‹¤",
    "ì‚¬ìš©í• ìˆ˜ìˆë‹¤": "ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤",
    "ì´í•´í• ìˆ˜ìˆë‹¤": "ì´í•´í•  ìˆ˜ ìˆë‹¤",
    "í™•ì¸í• ìˆ˜ìˆë‹¤": "í™•ì¸í•  ìˆ˜ ìˆë‹¤",
    "ë¹„êµí• ìˆ˜ìˆë‹¤": "ë¹„êµí•  ìˆ˜ ìˆë‹¤",
    "ì‘ìš©í• ìˆ˜ìˆë‹¤": "ì‘ìš©í•  ìˆ˜ ìˆë‹¤",
    "ì„¤ëª…í• ìˆ˜ìˆë‹¤": "ì„¤ëª…í•  ìˆ˜ ìˆë‹¤",
    "ê´€ë¦¬í• ìˆ˜ìˆë‹¤": "ê´€ë¦¬í•  ìˆ˜ ìˆë‹¤",
    "í•´ê²°í• ìˆ˜ìˆë‹¤": "í•´ê²°í•  ìˆ˜ ìˆë‹¤",

    # ---- 'ì‹¶ë‹¤' ê³„ì—´(ë¶™ì—¬ ì“°ê¸° ì‰¬ìš´ í‘œí˜„) ----
    "ëë‚´ê³ ì‹¶ë‹¤": "ëë‚´ê³  ì‹¶ë‹¤",
    "ì§‘ì—ê°€ê³ ì‹¶ë‹¤": "ì§‘ì— ê°€ê³  ì‹¶ë‹¤",
    "ì•Œê³ ì‹¶ë‹¤": "ì•Œê³  ì‹¶ë‹¤",
    "ë‹¤ì‹œí•˜ê³ ì‹¶ë‹¤": "ë‹¤ì‹œ í•˜ê³  ì‹¶ë‹¤",
    "í™•ì¸í•˜ê³ ì‹¶ë‹¤": "í™•ì¸í•˜ê³  ì‹¶ë‹¤",
    "ê·¸ë§Œë‘ê³ ì‹¶ë‹¤": "ê·¸ë§Œë‘ê³  ì‹¶ë‹¤",
    "ë„ì „í•´ë³´ê³ ì‹¶ë‹¤": "ë„ì „í•´ ë³´ê³  ì‹¶ë‹¤",
    "ë‹¤í•´ë³´ê³ ì‹¶ë‹¤": "ë‹¤ í•´ ë³´ê³  ì‹¶ë‹¤",

      # ---- 'í•œ/ë‘/ì„¸ ë²ˆ' ê³„ì—´ ----
    "í•œë²ˆì”©": "í•œ ë²ˆì”©",
    "ë‘ë²ˆì”©": "ë‘ ë²ˆì”©",
    "ì„¸ë²ˆì”©": "ì„¸ ë²ˆì”©",
    "í•œë²ˆë”": "í•œ ë²ˆ ë”",
    "ë‘ë²ˆë”": "ë‘ ë²ˆ ë”",
    "ì„¸ë²ˆë”": "ì„¸ ë²ˆ ë”",

     # ---- 'ì¢€/í›¨ì”¬/ë”' ê³„ì—´ ----
    "ì¢€ë”": "ì¢€ ë”",
    "í›¨ì”¬ë”": "í›¨ì”¬ ë”",
    "ì¡°ê¸ˆë”": "ì¡°ê¸ˆ ë”",

    # ---- 'ê²ƒ' ê³„ì—´ ----
    "ëª¨ë¥´ëŠ”ê²ƒ": "ëª¨ë¥´ëŠ” ê²ƒ",
    "ì•„ëŠ”ê²ƒ": "ì•„ëŠ” ê²ƒ",
    "ì¤‘ìš”í•œê²ƒ": "ì¤‘ìš”í•œ ê²ƒ",
    "í•´ì•¼í• ê²ƒ": "í•´ì•¼ í•  ê²ƒ",
    "í•´ì•¼í•˜ëŠ”ê²ƒ": "í•´ì•¼ í•˜ëŠ” ê²ƒ",
    "í•˜ê³ ì‹¶ì€ê²ƒ": "í•˜ê³  ì‹¶ì€ ê²ƒ",
    "í• ìˆ˜ìˆëŠ”ê²ƒ": "í•  ìˆ˜ ìˆëŠ” ê²ƒ",

     # ---- 'ì²˜ëŸ¼ / ë§Œí¼ / ë§Œí¼ì˜' ----
    "ì–¸ì œì²˜ëŸ¼": "ì–¸ì œì²˜ëŸ¼",  # ì• ë§¤í•œ ê²ƒë“¤ì€ ê·¸ëŒ€ë¡œ ë‘ì§€ë§Œ,
    "ì˜ˆì „ì²˜ëŸ¼ì˜": "ì˜ˆì „ì²˜ëŸ¼ ì˜",
    "ì „ì—ë¹„í•´ë”": "ì „ì— ë¹„í•´ ë”",
    "ìƒê°í•œë§Œí¼": "ìƒê°í•œ ë§Œí¼",
    "ì›í•˜ëŠ”ë§Œí¼": "ì›í•˜ëŠ” ë§Œí¼",
    "ì›í•˜ëŠ”ë§Œí¼ì˜": "ì›í•˜ëŠ” ë§Œí¼ì˜",

     # ---- 'ì´ë²ˆ / ë‹¤ìŒ / ì§€ë‚œ' + ëª…ì‚¬ ----
    "ì´ë²ˆí•™ê¸°ìˆ˜ì—…": "ì´ë²ˆ í•™ê¸° ìˆ˜ì—…",
    "ì´ë²ˆí•™ê¸°ì‹œí—˜": "ì´ë²ˆ í•™ê¸° ì‹œí—˜",
    "ë‹¤ìŒì£¼ê³¼ì œ": "ë‹¤ìŒ ì£¼ ê³¼ì œ",
    "ë‹¤ìŒì£¼ë°œí‘œ": "ë‹¤ìŒ ì£¼ ë°œí‘œ",
    "ì§€ë‚œì£¼ì‹œí—˜": "ì§€ë‚œ ì£¼ ì‹œí—˜",
    "ì§€ë‚œì£¼ê³¼ì œ": "ì§€ë‚œ ì£¼ ê³¼ì œ",

    # ---- ì‹œê°„/ë¹ˆë„ í‘œí˜„ ----
    "í•˜ë£¨ì¢…ì¼": "í•˜ë£¨ ì¢…ì¼",
    "ì¼ë…„ë‚´ë‚´": "ì¼ ë…„ ë‚´ë‚´",
    "í•œë²ˆì”©ì€": "í•œ ë²ˆì”©ì€",
    "ê°€ë”ì”©ì€": "ê°€ë”ì”©ì€",

      # ---- ê·¸ ì™¸ ìì£¼ ë‚˜ì˜¤ëŠ” í•™êµ/ê³¼ì œ ë¬¸ì¥ íŒ¨í„´ ----
    "ë‹¤ì‹œê²€í† í•´ë´ì•¼í•œë‹¤": "ë‹¤ì‹œ ê²€í† í•´ ë´ì•¼ í•œë‹¤",
    "ë‹¤ì‹œìƒê°í•´ë´ì•¼í•œë‹¤": "ë‹¤ì‹œ ìƒê°í•´ ë´ì•¼ í•œë‹¤",
    "ì‹œê°„ì´ì—†ë‹¤": "ì‹œê°„ì´ ì—†ë‹¤",
    "ì‹œê°„ì„ë‚´ê¸°ì–´ë µë‹¤": "ì‹œê°„ì„ ë‚´ê¸° ì–´ë µë‹¤",
    "ê³µë¶€í•´ì•¼í•œë‹¤": "ê³µë¶€í•´ì•¼ í•œë‹¤",
    "ì¤€ë¹„í•´ì•¼í•œë‹¤": "ì¤€ë¹„í•´ì•¼ í•œë‹¤",
    "ì œì¶œí•´ì•¼í•œë‹¤": "ì œì¶œí•´ì•¼ í•œë‹¤",
}

# -----------------------------
# 2. ì •ê·œì‹ ê¸°ë°˜ ìë™ ìˆ˜ì • ê·œì¹™
# -----------------------------
REGEX_RULES = [
    # ~ê³ ì‹¶ë‹¤ ê³„ì—´
    (r"([ê°€-í£]+ê³ )(ì‹¶ë‹¤)", r"\1 \2"),
    (r"([ê°€-í£]+ê³ )(ì‹¶ì–´)", r"\1 \2"),
    (r"([ê°€-í£]+ê³ )(ì‹¶ì–´ìš”)", r"\1 \2"),

    # '~ìˆ˜ìˆë‹¤' íŒ¨í„´ ì¼ë°˜í™”
    (r"([ê°€-í£]+)(ìˆ˜ìˆë‹¤)", r"\1 ìˆ˜ ìˆë‹¤"),

    # '~í• ë§Œí•˜ë‹¤' íŒ¨í„´
    (r"([ê°€-í£]+)(í• ë§Œí•˜ë‹¤)", r"\1 í•  ë§Œí•˜ë‹¤"),
]

def _apply_common_errors(text: str) -> str:
    """COMMON_ERRORS ì‚¬ì „ì— ìˆëŠ” í‘œí˜„ì„ ë¨¼ì € ì¼ê´„ êµì •"""
    for wrong, correct in COMMON_ERRORS.items():
        if wrong in text:
            text = text.replace(wrong, correct)
    return text

def _apply_regex_rules(text: str) -> str:
    """ì •ê·œì‹ ê·œì¹™ì„ ì ìš©í•˜ì—¬ ìë™ ë„ì–´ì“°ê¸°"""
    for pattern, repl in REGEX_RULES:
        text = re.sub(pattern, repl, text)
    return text

def correct_spacing(text: str) -> str:
    """ë„ì–´ì“°ê¸° êµì • ë©”ì¸ í•¨ìˆ˜"""
    text = _apply_common_errors(text)
    text = _apply_regex_rules(text)
    return text

# ---------------------------------
# 3. ì…ë ¥ë°›ê³  ì¶œë ¥í•˜ëŠ” ì¸í„°í˜ì´ìŠ¤
# ---------------------------------
if __name__ == "__main__":
    while True:
        text = input("\nğŸ“ ë„ì–´ì“°ê¸° ê²€ì‚¬í•  ë¬¸ì¥ì„ ì…ë ¥í•˜ì„¸ìš” (ì¢…ë£Œ: q): ")
        
        if text.lower() == "q":
            print("í”„ë¡œê·¸ë¨ì„ ì¢…ë£Œí•©ë‹ˆë‹¤.")
            break
        
        result = correct_spacing(text)
        print(f" êµì • ê²°ê³¼: {result}")
