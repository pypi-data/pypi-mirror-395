"{\"name\":\"Enterprise CI/CD Pipeline\",\"run_name\":\"Deploy to ${{ inputs.environment }} by @${{ github.actor }}\",\"on\":{\"branch_protection_rule\":null,\"check_run\":null,\"check_suite\":null,\"create\":null,\"delete\":null,\"deployment\":null,\"deployment_status\":null,\"discussion\":null,\"discussion_comment\":null,\"fork\":null,\"gollum\":null,\"issue_comment\":null,\"issues\":null,\"label\":null,\"merge_group\":null,\"milestone\":null,\"page_build\":null,\"project\":null,\"project_card\":null,\"project_column\":null,\"public\":null,\"pull_request\":{\"branches\":[\"main\",\"develop\"],\"branches_ignore\":null,\"tags\":null,\"tags_ignore\":null,\"paths\":[\"src/**\",\"tests/**\"],\"paths_ignore\":null,\"types\":[\"opened\",\"synchronize\",\"reopened\",\"ready_for_review\"]},\"pull_request_review\":null,\"pull_request_review_comment\":null,\"pull_request_target\":{\"branches\":null,\"branches_ignore\":null,\"tags\":null,\"tags_ignore\":null,\"paths\":null,\"paths_ignore\":null,\"types\":[\"opened\",\"labeled\"]},\"push\":{\"branches\":[\"main\",\"develop\",\"release/**\",\"hotfix/**\"],\"branches_ignore\":null,\"tags\":[\"v*.*.*\"],\"tags_ignore\":null,\"paths\":[\"src/**\",\"tests/**\",\".github/workflows/**\"],\"paths_ignore\":null},\"registry_package\":null,\"release\":null,\"status\":null,\"watch\":null,\"workflow_call\":{\"inputs\":{\"config-path\":{\"description\":null,\"required\":true,\"type\":\"string\",\"default\":null},\"perform-deploy\":{\"description\":null,\"required\":false,\"type\":\"boolean\",\"default\":false}},\"outputs\":{\"build-version\":{\"description\":\"The version that was built\",\"value\":\"${{ jobs.build.outputs.version }}\"},\"deploy-url\":{\"description\":\"The deployment URL\",\"value\":\"${{ jobs.deploy.outputs.url }}\"}},\"secrets\":{\"token\":{\"description\":null,\"required\":true},\"api-key\":{\"description\":null,\"required\":false}}},\"workflow_dispatch\":{\"inputs\":{\"environment\":{\"description\":\"Target deployment environment\",\"deprecation_message\":null,\"required\":true,\"default\":\"development\",\"type\":\"choice\",\"options\":[\"development\",\"staging\",\"production\"]},\"debug_enabled\":{\"description\":\"Enable debug mode\",\"deprecation_message\":null,\"required\":false,\"default\":false,\"type\":\"boolean\",\"options\":null},\"version\":{\"description\":\"Version to deploy\",\"deprecation_message\":null,\"required\":false,\"default\":null,\"type\":\"string\",\"options\":null}}},\"workflow_run\":{\"types\":[\"completed\"],\"workflows\":[\"Security Scan\",\"Dependency Check\"],\"branches\":[\"main\"],\"branches_ignore\":null},\"repository_dispatch\":null,\"schedule\":[{\"cron\":\"0 2 * * 1\"},{\"cron\":\"0 14 * * 5\"}]},\"env\":{\"NODE_VERSION\":\"20.x\",\"PYTHON_VERSION\":\"3.11\",\"DOCKER_REGISTRY\":\"ghcr.io\",\"BUILD_CACHE_KEY\":\"build-cache-v1\",\"DEPLOYMENT_TIMEOUT\":600},\"defaults\":{\"run\":{\"shell\":\"bash\",\"working_directory\":\"./src\"}},\"concurrency\":{\"group\":\"${{ github.workflow }}-${{ github.ref }}-${{ github.event_name }}\",\"cancel_in_progress\":\"${{ github.ref != 'refs/heads/main' }}\"},\"jobs\":{\"setup\":{\"name\":\"Setup and Validation\",\"needs\":null,\"permissions\":null,\"runs_on\":\"ubuntu-latest\",\"environment\":null,\"outputs\":{\"cache-key\":\"${{ steps.cache.outputs.key }}\",\"version\":\"${{ steps.version.outputs.version }}\",\"should-deploy\":\"${{ steps.check.outputs.deploy }}\"},\"env\":null,\"defaults\":null,\"if_\":null,\"steps\":[{\"id\":null,\"if_\":null,\"name\":\"Checkout repository\",\"uses\":\"actions/checkout@v4\",\"run\":null,\"working_directory\":null,\"shell\":null,\"with_\":{\"fetch-depth\":0,\"submodules\":\"recursive\",\"token\":\"${{ secrets.GITHUB_TOKEN }}\"},\"env\":null,\"continue_on_error\":false,\"timeout_minutes\":null},{\"id\":null,\"if_\":null,\"name\":\"Setup Node.js\",\"uses\":\"actions/setup-node@v4\",\"run\":null,\"working_directory\":null,\"shell\":null,\"with_\":{\"node-version\":\"${{ env.NODE_VERSION }}\",\"cache\":\"npm\",\"cache-dependency-path\":\"**/package-lock.json\"},\"env\":null,\"continue_on_error\":false,\"timeout_minutes\":null},{\"id\":\"cache\",\"if_\":null,\"name\":\"Generate cache key\",\"uses\":null,\"run\":\"echo \\\"key=${{ runner.os }}-build-${{ hashFiles('**/package-lock.json') }}\\\" >> $GITHUB_OUTPUT\",\"working_directory\":null,\"shell\":null,\"with_\":null,\"env\":null,\"continue_on_error\":false,\"timeout_minutes\":null},{\"id\":\"version\",\"if_\":null,\"name\":\"Calculate version\",\"uses\":null,\"run\":\"if [[ \\\"${{ github.ref }}\\\" == refs/tags/* ]]; then\\n  echo \\\"version=${GITHUB_REF#refs/tags/}\\\" >> $GITHUB_OUTPUT\\nelse\\n  echo \\\"version=${{ github.sha }}\\\" >> $GITHUB_OUTPUT\\nfi\\n\",\"working_directory\":null,\"shell\":null,\"with_\":null,\"env\":null,\"continue_on_error\":false,\"timeout_minutes\":null},{\"id\":\"check\",\"if_\":null,\"name\":\"Check deployment conditions\",\"uses\":null,\"run\":\"if [[ \\\"${{ github.ref }}\\\" == \\\"refs/heads/main\\\" ]] || [[ \\\"${{ inputs.perform-deploy }}\\\" == \\\"true\\\" ]]; then\\n  echo \\\"deploy=true\\\" >> $GITHUB_OUTPUT\\nelse\\n  echo \\\"deploy=false\\\" >> $GITHUB_OUTPUT\\nfi\\n\",\"working_directory\":null,\"shell\":null,\"with_\":null,\"env\":null,\"continue_on_error\":false,\"timeout_minutes\":null}],\"timeout_minutes\":10,\"strategy\":null,\"continue_on_error\":null,\"container\":null,\"services\":null,\"concurrency\":null},\"lint\":{\"name\":\"Code Quality Checks\",\"needs\":\"setup\",\"permissions\":{\"contents\":\"read\",\"pull-requests\":\"write\"},\"runs_on\":\"ubuntu-latest\",\"environment\":null,\"outputs\":null,\"env\":null,\"defaults\":null,\"if_\":null,\"steps\":[{\"id\":null,\"if_\":null,\"name\":null,\"uses\":\"actions/checkout@v4\",\"run\":null,\"working_directory\":null,\"shell\":null,\"with_\":null,\"env\":null,\"continue_on_error\":false,\"timeout_minutes\":null},{\"id\":null,\"if_\":null,\"name\":\"Setup Node.js\",\"uses\":\"actions/setup-node@v4\",\"run\":null,\"working_directory\":null,\"shell\":null,\"with_\":{\"node-version\":\"${{ env.NODE_VERSION }}\"},\"env\":null,\"continue_on_error\":false,\"timeout_minutes\":null},{\"id\":null,\"if_\":null,\"name\":\"Install dependencies\",\"uses\":null,\"run\":\"npm ci\",\"working_directory\":null,\"shell\":null,\"with_\":null,\"env\":null,\"continue_on_error\":false,\"timeout_minutes\":null},{\"id\":null,\"if_\":null,\"name\":\"Run ESLint\",\"uses\":null,\"run\":\"npm run lint\",\"working_directory\":null,\"shell\":null,\"with_\":null,\"env\":null,\"continue_on_error\":false,\"timeout_minutes\":null},{\"id\":null,\"if_\":null,\"name\":\"Run Prettier\",\"uses\":null,\"run\":\"npm run format:check\",\"working_directory\":null,\"shell\":null,\"with_\":null,\"env\":null,\"continue_on_error\":false,\"timeout_minutes\":null},{\"id\":null,\"if_\":null,\"name\":\"TypeScript type check\",\"uses\":null,\"run\":\"npm run type-check\",\"working_directory\":null,\"shell\":null,\"with_\":null,\"env\":null,\"continue_on_error\":false,\"timeout_minutes\":null}],\"timeout_minutes\":360,\"strategy\":null,\"continue_on_error\":null,\"container\":null,\"services\":null,\"concurrency\":null},\"security\":{\"name\":\"Security Scanning\",\"needs\":\"setup\",\"permissions\":{\"security-events\":\"write\",\"contents\":\"read\"},\"runs_on\":\"ubuntu-latest\",\"environment\":null,\"outputs\":null,\"env\":null,\"defaults\":null,\"if_\":null,\"steps\":[{\"id\":null,\"if_\":null,\"name\":null,\"uses\":\"actions/checkout@v4\",\"run\":null,\"working_directory\":null,\"shell\":null,\"with_\":null,\"env\":null,\"continue_on_error\":false,\"timeout_minutes\":null},{\"id\":null,\"if_\":null,\"name\":\"Run Trivy vulnerability scanner\",\"uses\":\"aquasecurity/trivy-action@master\",\"run\":null,\"working_directory\":null,\"shell\":null,\"with_\":{\"scan-type\":\"fs\",\"scan-ref\":\".\",\"format\":\"sarif\",\"output\":\"trivy-results.sarif\"},\"env\":null,\"continue_on_error\":false,\"timeout_minutes\":null},{\"id\":null,\"if_\":null,\"name\":\"Upload Trivy results\",\"uses\":\"github/codeql-action/upload-sarif@v3\",\"run\":null,\"working_directory\":null,\"shell\":null,\"with_\":{\"sarif_file\":\"trivy-results.sarif\"},\"env\":null,\"continue_on_error\":false,\"timeout_minutes\":null}],\"timeout_minutes\":360,\"strategy\":null,\"continue_on_error\":null,\"container\":null,\"services\":null,\"concurrency\":null},\"test\":{\"name\":\"Test Suite\",\"needs\":[\"setup\",\"lint\"],\"permissions\":null,\"runs_on\":\"${{ matrix.os }}\",\"environment\":null,\"outputs\":null,\"env\":{\"DATABASE_URL\":\"postgresql://postgres:postgres@postgres:5432/test_db\",\"REDIS_URL\":\"redis://redis:6379\",\"TEST_COVERAGE_THRESHOLD\":80},\"defaults\":null,\"if_\":\"github.event.pull_request.draft == false\",\"steps\":[{\"id\":null,\"if_\":null,\"name\":\"Checkout code\",\"uses\":\"actions/checkout@v4\",\"run\":null,\"working_directory\":null,\"shell\":null,\"with_\":null,\"env\":null,\"continue_on_error\":false,\"timeout_minutes\":null},{\"id\":null,\"if_\":null,\"name\":\"Setup Node.js ${{ matrix.node-version }}\",\"uses\":\"actions/setup-node@v4\",\"run\":null,\"working_directory\":null,\"shell\":null,\"with_\":{\"node-version\":\"${{ matrix.node-version }}\",\"architecture\":\"${{ matrix.architecture }}\"},\"env\":null,\"continue_on_error\":false,\"timeout_minutes\":null},{\"id\":null,\"if_\":null,\"name\":\"Cache dependencies\",\"uses\":\"actions/cache@v4\",\"run\":null,\"working_directory\":null,\"shell\":null,\"with_\":{\"path\":\"~/.npm\\nnode_modules\\n\",\"key\":\"${{ needs.setup.outputs.cache-key }}-${{ matrix.os }}-${{ matrix.node-version }}\",\"restore-keys\":\"${{ needs.setup.outputs.cache-key }}-${{ matrix.os }}-\\n${{ needs.setup.outputs.cache-key }}-\\n\"},\"env\":null,\"continue_on_error\":false,\"timeout_minutes\":null},{\"id\":null,\"if_\":null,\"name\":\"Install dependencies\",\"uses\":null,\"run\":\"npm ci\",\"working_directory\":null,\"shell\":null,\"with_\":null,\"env\":null,\"continue_on_error\":false,\"timeout_minutes\":null},{\"id\":null,\"if_\":null,\"name\":\"Run unit tests\",\"uses\":null,\"run\":\"npm run test:unit -- --coverage\",\"working_directory\":null,\"shell\":null,\"with_\":null,\"env\":null,\"continue_on_error\":false,\"timeout_minutes\":null},{\"id\":null,\"if_\":null,\"name\":\"Run integration tests\",\"uses\":null,\"run\":\"npm run test:integration\",\"working_directory\":null,\"shell\":null,\"with_\":null,\"env\":{\"API_KEY\":\"${{ secrets.api-key }}\"},\"continue_on_error\":false,\"timeout_minutes\":null},{\"id\":null,\"if_\":\"matrix.os == 'ubuntu-latest' && matrix.node-version == '20.x'\",\"name\":\"Upload coverage reports\",\"uses\":\"codecov/codecov-action@v4\",\"run\":null,\"working_directory\":null,\"shell\":null,\"with_\":{\"token\":\"${{ secrets.CODECOV_TOKEN }}\",\"files\":\"./coverage/coverage-final.json\",\"flags\":\"unittests\",\"name\":\"codecov-${{ matrix.os }}-${{ matrix.node-version }}\"},\"env\":null,\"continue_on_error\":false,\"timeout_minutes\":null}],\"timeout_minutes\":30,\"strategy\":{\"matrix\":{\"include\":[{\"os\":\"ubuntu-latest\",\"node-version\":\"20.x\",\"architecture\":\"arm64\"},{\"os\":\"macos-latest\",\"node-version\":\"20.x\",\"architecture\":\"arm64\"}],\"exclude\":[{\"os\":\"windows-latest\",\"node-version\":\"21.x\"}],\"os\":[\"ubuntu-latest\",\"windows-latest\",\"macos-latest\"],\"node-version\":[\"18.x\",\"20.x\",\"21.x\"],\"architecture\":[\"x64\"]},\"fail_fast\":false,\"max_parallel\":null},\"continue_on_error\":null,\"container\":{\"image\":\"node:${{ matrix.node-version }}-alpine\",\"credentials\":{\"username\":\"${{ github.actor }}\",\"password\":\"${{ secrets.GITHUB_TOKEN }}\"},\"env\":{\"NODE_ENV\":\"test\",\"CI\":true},\"ports\":null,\"volumes\":[\"/tmp:/tmp\"],\"options\":\"--cpus 2 --memory 4g\"},\"services\":{\"postgres\":{\"image\":\"postgres:15-alpine\",\"credentials\":null,\"env\":{\"POSTGRES_PASSWORD\":\"postgres\",\"POSTGRES_DB\":\"test_db\"},\"ports\":[\"5432:5432\"],\"volumes\":null,\"options\":\"--health-cmd pg_isready --health-interval 10s --health-timeout 5s --health-retries 5\"},\"redis\":{\"image\":\"redis:7-alpine\",\"credentials\":null,\"env\":null,\"ports\":[\"6379:6379\"],\"volumes\":null,\"options\":\"--health-cmd \\\"redis-cli ping\\\" --health-interval 10s --health-timeout 5s --health-retries 5\"}},\"concurrency\":null},\"build\":{\"name\":\"Build Application\",\"needs\":[\"test\",\"security\"],\"permissions\":null,\"runs_on\":\"ubuntu-latest\",\"environment\":{\"name\":\"build\",\"url\":null},\"outputs\":{\"version\":\"${{ steps.meta.outputs.version }}\",\"tags\":\"${{ steps.meta.outputs.tags }}\",\"artifact-url\":\"${{ steps.upload.outputs.artifact-url }}\"},\"env\":null,\"defaults\":null,\"if_\":null,\"steps\":[{\"id\":null,\"if_\":null,\"name\":null,\"uses\":\"actions/checkout@v4\",\"run\":null,\"working_directory\":null,\"shell\":null,\"with_\":null,\"env\":null,\"continue_on_error\":false,\"timeout_minutes\":null},{\"id\":null,\"if_\":null,\"name\":\"Setup Node.js\",\"uses\":\"actions/setup-node@v4\",\"run\":null,\"working_directory\":null,\"shell\":null,\"with_\":{\"node-version\":\"${{ env.NODE_VERSION }}\"},\"env\":null,\"continue_on_error\":false,\"timeout_minutes\":null},{\"id\":null,\"if_\":null,\"name\":\"Install dependencies\",\"uses\":null,\"run\":\"npm ci\",\"working_directory\":null,\"shell\":null,\"with_\":null,\"env\":null,\"continue_on_error\":false,\"timeout_minutes\":null},{\"id\":null,\"if_\":null,\"name\":\"Build application\",\"uses\":null,\"run\":\"npm run build\",\"working_directory\":null,\"shell\":null,\"with_\":null,\"env\":{\"NODE_ENV\":\"production\",\"VERSION\":\"${{ needs.setup.outputs.version }}\"},\"continue_on_error\":false,\"timeout_minutes\":null},{\"id\":\"meta\",\"if_\":null,\"name\":\"Extract metadata\",\"uses\":null,\"run\":\"echo \\\"version=${{ needs.setup.outputs.version }}\\\" >> $GITHUB_OUTPUT\\necho \\\"tags=${{ env.DOCKER_REGISTRY }}/${{ github.repository }}:${{ needs.setup.outputs.version }}\\\" >> $GITHUB_OUTPUT\\n\",\"working_directory\":null,\"shell\":null,\"with_\":null,\"env\":null,\"continue_on_error\":false,\"timeout_minutes\":null},{\"id\":\"upload\",\"if_\":null,\"name\":\"Upload build artifacts\",\"uses\":\"actions/upload-artifact@v4\",\"run\":null,\"working_directory\":null,\"shell\":null,\"with_\":{\"name\":\"build-artifacts-${{ needs.setup.outputs.version }}\",\"path\":\"dist/\\nbuild/\\n\",\"retention-days\":30,\"compression-level\":9},\"env\":null,\"continue_on_error\":false,\"timeout_minutes\":null}],\"timeout_minutes\":360,\"strategy\":null,\"continue_on_error\":null,\"container\":null,\"services\":null,\"concurrency\":null},\"docker\":{\"name\":\"Build Docker Image\",\"needs\":[\"build\"],\"permissions\":{\"packages\":\"write\",\"contents\":\"read\"},\"runs_on\":\"ubuntu-latest\",\"environment\":null,\"outputs\":null,\"env\":null,\"defaults\":null,\"if_\":\"github.event_name != 'pull_request'\",\"steps\":[{\"id\":null,\"if_\":null,\"name\":null,\"uses\":\"actions/checkout@v4\",\"run\":null,\"working_directory\":null,\"shell\":null,\"with_\":null,\"env\":null,\"continue_on_error\":false,\"timeout_minutes\":null},{\"id\":null,\"if_\":null,\"name\":\"Set up Docker Buildx\",\"uses\":\"docker/setup-buildx-action@v3\",\"run\":null,\"working_directory\":null,\"shell\":null,\"with_\":null,\"env\":null,\"continue_on_error\":false,\"timeout_minutes\":null},{\"id\":null,\"if_\":null,\"name\":\"Log in to Container Registry\",\"uses\":\"docker/login-action@v3\",\"run\":null,\"working_directory\":null,\"shell\":null,\"with_\":{\"registry\":\"${{ env.DOCKER_REGISTRY }}\",\"username\":\"${{ github.actor }}\",\"password\":\"${{ secrets.GITHUB_TOKEN }}\"},\"env\":null,\"continue_on_error\":false,\"timeout_minutes\":null},{\"id\":null,\"if_\":null,\"name\":\"Build and push Docker image\",\"uses\":\"docker/build-push-action@v5\",\"run\":null,\"working_directory\":null,\"shell\":null,\"with_\":{\"context\":\".\",\"push\":true,\"tags\":\"${{ needs.build.outputs.tags }}\",\"cache-from\":\"type=gha\",\"cache-to\":\"type=gha,mode=max\",\"platforms\":\"linux/amd64,linux/arm64\",\"build-args\":\"VERSION=${{ needs.build.outputs.version }}\\nBUILD_DATE=${{ github.event.head_commit.timestamp }}\\n\"},\"env\":null,\"continue_on_error\":false,\"timeout_minutes\":null}],\"timeout_minutes\":360,\"strategy\":null,\"continue_on_error\":null,\"container\":null,\"services\":null,\"concurrency\":null},\"deploy-staging\":{\"name\":\"Deploy to Staging\",\"needs\":[\"docker\"],\"permissions\":null,\"runs_on\":\"ubuntu-latest\",\"environment\":{\"name\":\"staging\",\"url\":\"https://staging.example.com\"},\"outputs\":{\"url\":\"${{ steps.deploy.outputs.url }}\"},\"env\":null,\"defaults\":null,\"if_\":\"needs.setup.outputs.should-deploy == 'true' && github.ref == 'refs/heads/develop'\",\"steps\":[{\"id\":\"deploy\",\"if_\":null,\"name\":\"Deploy to staging\",\"uses\":null,\"run\":\"echo \\\"Deploying to staging...\\\"\\necho \\\"url=https://staging.example.com\\\" >> $GITHUB_OUTPUT\\n\",\"working_directory\":null,\"shell\":null,\"with_\":null,\"env\":null,\"continue_on_error\":false,\"timeout_minutes\":null},{\"id\":null,\"if_\":null,\"name\":\"Run smoke tests\",\"uses\":null,\"run\":\"echo \\\"Running smoke tests...\\\"\\ncurl -f https://staging.example.com/health || exit 1\\n\",\"working_directory\":null,\"shell\":null,\"with_\":null,\"env\":null,\"continue_on_error\":false,\"timeout_minutes\":null}],\"timeout_minutes\":360,\"strategy\":null,\"continue_on_error\":null,\"container\":null,\"services\":null,\"concurrency\":{\"group\":\"deploy-staging\",\"cancel_in_progress\":false}},\"deploy-production\":{\"name\":\"Deploy to Production\",\"needs\":[\"docker\",\"deploy-staging\"],\"permissions\":null,\"runs_on\":\"ubuntu-latest\",\"environment\":{\"name\":\"production\",\"url\":\"https://example.com\"},\"outputs\":{\"url\":\"${{ steps.deploy.outputs.url }}\",\"deployment-id\":\"${{ steps.deploy.outputs.deployment-id }}\"},\"env\":null,\"defaults\":null,\"if_\":\"needs.setup.outputs.should-deploy == 'true' && github.ref == 'refs/heads/main'\",\"steps\":[{\"id\":\"deploy\",\"if_\":null,\"name\":\"Deploy to production\",\"uses\":null,\"run\":\"echo \\\"Deploying to production...\\\"\\necho \\\"url=https://example.com\\\" >> $GITHUB_OUTPUT\\necho \\\"deployment-id=${{ github.run_id }}\\\" >> $GITHUB_OUTPUT\\n\",\"working_directory\":null,\"shell\":null,\"with_\":null,\"env\":null,\"continue_on_error\":false,\"timeout_minutes\":null},{\"id\":null,\"if_\":null,\"name\":\"Run smoke tests\",\"uses\":null,\"run\":\"echo \\\"Running production smoke tests...\\\"\\ncurl -f https://example.com/health || exit 1\\n\",\"working_directory\":null,\"shell\":null,\"with_\":null,\"env\":null,\"continue_on_error\":false,\"timeout_minutes\":null},{\"id\":null,\"if_\":null,\"name\":\"Create deployment\",\"uses\":\"actions/github-script@v7\",\"run\":null,\"working_directory\":null,\"shell\":null,\"with_\":{\"script\":\"await github.rest.repos.createDeployment({\\n  owner: context.repo.owner,\\n  repo: context.repo.repo,\\n  ref: context.ref,\\n  environment: 'production',\\n  auto_merge: false\\n});\\n\"},\"env\":null,\"continue_on_error\":false,\"timeout_minutes\":null}],\"timeout_minutes\":360,\"strategy\":null,\"continue_on_error\":null,\"container\":null,\"services\":null,\"concurrency\":{\"group\":\"deploy-production\",\"cancel_in_progress\":false}},\"reusable-workflow\":{\"name\":\"Call Reusable Workflow\",\"needs\":[\"build\"],\"permissions\":null,\"if_\":null,\"uses\":\"./.github/workflows/shared.yml\",\"with_\":{\"environment\":\"staging\",\"version\":\"${{ needs.build.outputs.version }}\"},\"secrets\":{\"deploy-token\":\"${{ secrets.DEPLOY_TOKEN }}\"},\"strategy\":null,\"concurrency\":null},\"notify\":{\"name\":\"Send Notifications\",\"needs\":[\"deploy-production\"],\"permissions\":null,\"runs_on\":\"ubuntu-latest\",\"environment\":null,\"outputs\":null,\"env\":null,\"defaults\":null,\"if_\":\"always()\",\"steps\":[{\"id\":null,\"if_\":\"success()\",\"name\":\"Notify on success\",\"uses\":null,\"run\":\"echo \\\"Deployment successful!\\\"\",\"working_directory\":null,\"shell\":null,\"with_\":null,\"env\":null,\"continue_on_error\":false,\"timeout_minutes\":null},{\"id\":null,\"if_\":\"failure()\",\"name\":\"Notify on failure\",\"uses\":null,\"run\":\"echo \\\"Deployment failed!\\\"\",\"working_directory\":null,\"shell\":null,\"with_\":null,\"env\":null,\"continue_on_error\":false,\"timeout_minutes\":null},{\"id\":null,\"if_\":\"cancelled()\",\"name\":\"Notify on cancellation\",\"uses\":null,\"run\":\"echo \\\"Deployment cancelled!\\\"\",\"working_directory\":null,\"shell\":null,\"with_\":null,\"env\":null,\"continue_on_error\":false,\"timeout_minutes\":null}],\"timeout_minutes\":360,\"strategy\":null,\"continue_on_error\":null,\"container\":null,\"services\":null,\"concurrency\":null},\"cleanup\":{\"name\":\"Cleanup Resources\",\"needs\":[\"deploy-production\"],\"permissions\":{\"contents\":\"write\"},\"runs_on\":\"ubuntu-latest\",\"environment\":null,\"outputs\":null,\"env\":null,\"defaults\":null,\"if_\":\"always()\",\"steps\":[{\"id\":null,\"if_\":null,\"name\":\"Clean up old artifacts\",\"uses\":\"actions/github-script@v7\",\"run\":null,\"working_directory\":null,\"shell\":null,\"with_\":{\"script\":\"const artifacts = await github.rest.actions.listArtifactsForRepo({\\n  owner: context.repo.owner,\\n  repo: context.repo.repo,\\n});\\n\\nconst oldArtifacts = artifacts.data.artifacts\\n  .filter(a => Date.now() - new Date(a.created_at).getTime() > 30 * 24 * 60 * 60 * 1000);\\n\\nfor (const artifact of oldArtifacts) {\\n  await github.rest.actions.deleteArtifact({\\n    owner: context.repo.owner,\\n    repo: context.repo.repo,\\n    artifact_id: artifact.id,\\n  });\\n}\\n\"},\"env\":null,\"continue_on_error\":false,\"timeout_minutes\":null}],\"timeout_minutes\":360,\"strategy\":null,\"continue_on_error\":null,\"container\":null,\"services\":null,\"concurrency\":null}},\"permissions\":{\"actions\":null,\"attestations\":null,\"checks\":null,\"contents\":\"read\",\"deployments\":\"write\",\"discussions\":null,\"id_token\":\"write\",\"issues\":\"read\",\"models\":null,\"packages\":\"write\",\"pages\":null,\"pull_requests\":\"write\",\"repository_projects\":null,\"security_events\":\"write\",\"statuses\":null}}"