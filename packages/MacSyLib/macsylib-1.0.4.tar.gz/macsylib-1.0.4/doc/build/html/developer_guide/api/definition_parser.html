

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>definition_parser &mdash; MacSyLib 1.0.4 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css?v=4ae1632d" />
      <link rel="stylesheet" type="text/css" href="../../_static/_css/custom.css?v=b89f2dfc" />

  
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=71272d9f"></script>
      <script src="../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="model" href="model.html" />
    <link rel="prev" title="registries" href="registries.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            MacSyLib
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../user_guide/index.html">User Guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../modeler_guide/index.html">Modeller Guide</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Developer Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../overview.html">MacSyLib implementation overview</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">MacSyLib API documentation</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="config.html">configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="model_conf_parser.html">model_conf_parser</a></li>
<li class="toctree-l3"><a class="reference internal" href="registries.html">registries</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">definition_parser</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#defintion-parser-api-reference">defintion_parser API reference</a></li>
<li class="toctree-l4"><a class="reference internal" href="#module-macsylib.definition_parser">DefinitionParser</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="model.html">model</a></li>
<li class="toctree-l3"><a class="reference internal" href="gene.html">gene</a></li>
<li class="toctree-l3"><a class="reference internal" href="profile.html">profile</a></li>
<li class="toctree-l3"><a class="reference internal" href="hit.html">hit</a></li>
<li class="toctree-l3"><a class="reference internal" href="cluster.html">cluster</a></li>
<li class="toctree-l3"><a class="reference internal" href="system.html">system</a></li>
<li class="toctree-l3"><a class="reference internal" href="report.html">report</a></li>
<li class="toctree-l3"><a class="reference internal" href="search_genes.html">search_genes</a></li>
<li class="toctree-l3"><a class="reference internal" href="solution.html">solution</a></li>
<li class="toctree-l3"><a class="reference internal" href="serialization.html">serialization</a></li>
<li class="toctree-l3"><a class="reference internal" href="database.html">database</a></li>
<li class="toctree-l3"><a class="reference internal" href="error.html">errors</a></li>
<li class="toctree-l3"><a class="reference internal" href="utils.html">utils</a></li>
<li class="toctree-l3"><a class="reference internal" href="package.html">package</a></li>
<li class="toctree-l3"><a class="reference internal" href="scripts.html">scripts</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">MacSyLib</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Developer Guide</a></li>
          <li class="breadcrumb-item"><a href="index.html">MacSyLib API documentation</a></li>
      <li class="breadcrumb-item active">definition_parser</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="definition-parser">
<span id="id1"></span><h1>definition_parser<a class="headerlink" href="#definition-parser" title="Link to this heading"></a></h1>
<p>The model definition parser object “DefinitionParser” instantiates Models and Genes objects from
XML model definitions (see <a class="reference internal" href="../../user_guide/model_definition.html#model-definition"><span class="std std-ref">Macromolecular models</span></a>).
The parsing consists in three phases.</p>
<p>Phase 1.</p>
<blockquote>
<div><ul class="simple">
<li><p>For each model to parse</p>
<ul>
<li><p>create the Model</p></li>
<li><p>add this Model to the model_bank</p></li>
<li><p>findall genes defined in this model what are the level in the model definition.</p></li>
<li><p>create the CoreGene (a Gene which is not bind to a model).
For each gene name there is only one instance of CoreGene</p></li>
<li><p>add these CoreGene in the gene_bank</p></li>
</ul>
</li>
</ul>
</div></blockquote>
<p>Phase 2.</p>
<blockquote>
<div><ul>
<li><p>For each model to search</p>
<ul>
<li><p>For each Gene defined in this System:</p>
<blockquote>
<div><ul class="simple">
<li><p>link the gene to the model. Create a ModelGene by encapsulating CoreGene from the gene_bank
It can exists at each run several ModelGene for one CoreGene</p></li>
<li><p>If a gene has exchangeables create them (an Exchangeable inherits from ModeleGene)
and add them to the current ModelGene</p></li>
</ul>
</div></blockquote>
</li>
</ul>
</li>
</ul>
</div></blockquote>
<p>For instance:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Syst_1
&lt;system inter_gene_max_space=&quot;10&quot;&gt;
    &lt;gene name=”A” mandatory=”1” loner=&quot;1&quot;&gt;
        &lt;exchangeables&gt;
            &lt;gene name=”B”&gt;
        &lt;/exchangeables&gt;
    &lt;/gene&gt;
&lt;system&gt;

Syst_2
&lt;system inter_gene_max_space=&quot;15&quot;&gt;
    &lt;gene name=”B” mandatory=”1”&gt;
        &lt;exchangeables&gt;
            &lt;gene name=”C”&gt;
        &lt;/exchangeables&gt;
    &lt;/gene&gt;
&lt;system&gt;

Syst_3
&lt;system inter_gene_max_space=&quot;20&quot;&gt;
    &lt;gene name=”c” mandatory=”1” /&gt;
&lt;system&gt;
</pre></div>
</div>
<p>With the example above:</p>
<ul class="simple">
<li><p>the CoreGene A, B, C will be created</p></li>
<li><p>the ModelGene (Syst_1, A)  (Syst_1, B), (Syst_2, B), (Syst_2, C), (Syst_3, C)</p></li>
<li><p>The ModeleGene (Syst_1, A), (Syst_2, B) and (Syst_3, C) are directly link to their respective Models</p></li>
<li><p>and where (Syst_1, B) (Syst_2, C) are exchangeables and link respectively to (Syst_1, A) and (Syst_2, B)</p></li>
<li><p>the ModelGene has attributes defined in the model where they appear
(Syst_1, B) inter_gene_max_space=”10”
(Syst_2, B) inter_gene_max_space=”15”</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The only “full” Systems (<em>i.e.,</em> with all corresponding Genes created) are those to detect.</p>
</div>
<section id="defintion-parser-api-reference">
<span id="defintion-parser-api"></span><h2>defintion_parser API reference<a class="headerlink" href="#defintion-parser-api-reference" title="Link to this heading"></a></h2>
</section>
<section id="module-macsylib.definition_parser">
<span id="definitionparser"></span><h2>DefinitionParser<a class="headerlink" href="#module-macsylib.definition_parser" title="Link to this heading"></a></h2>
<p>Module use to parse XML model defintion and create a python Model and Genes, …</p>
<dl class="py class">
<dt class="sig sig-object py" id="macsylib.definition_parser.DefinitionParser">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">macsylib.definition_parser.</span></span><span class="sig-name descname"><span class="pre">DefinitionParser</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cfg</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="config.html#macsylib.config.Config" title="macsylib.config.Config"><span class="pre">Config</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="config.html#macsylib.config.NoneConfig" title="macsylib.config.NoneConfig"><span class="pre">NoneConfig</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_bank</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="model.html#macsylib.model.ModelBank" title="macsylib.model.ModelBank"><span class="pre">ModelBank</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">gene_bank</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="gene.html#macsylib.gene.GeneBank" title="macsylib.gene.GeneBank"><span class="pre">GeneBank</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_registry</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="registries.html#macsylib.registries.ModelRegistry" title="macsylib.registries.ModelRegistry"><span class="pre">ModelRegistry</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">profile_factory</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="profile.html#macsylib.profile.ProfileFactory" title="macsylib.profile.ProfileFactory"><span class="pre">ProfileFactory</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/macsylib/definition_parser.html#DefinitionParser"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#macsylib.definition_parser.DefinitionParser" title="Link to this definition"></a></dt>
<dd><p>Build a Model instance from the corresponding model definition described in the XML file.</p>
<dl class="py method">
<dt class="sig sig-object py" id="macsylib.definition_parser.DefinitionParser.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cfg</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="config.html#macsylib.config.Config" title="macsylib.config.Config"><span class="pre">Config</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="config.html#macsylib.config.NoneConfig" title="macsylib.config.NoneConfig"><span class="pre">NoneConfig</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_bank</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="model.html#macsylib.model.ModelBank" title="macsylib.model.ModelBank"><span class="pre">ModelBank</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">gene_bank</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="gene.html#macsylib.gene.GeneBank" title="macsylib.gene.GeneBank"><span class="pre">GeneBank</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_registry</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="registries.html#macsylib.registries.ModelRegistry" title="macsylib.registries.ModelRegistry"><span class="pre">ModelRegistry</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">profile_factory</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="profile.html#macsylib.profile.ProfileFactory" title="macsylib.profile.ProfileFactory"><span class="pre">ProfileFactory</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../../_modules/macsylib/definition_parser.html#DefinitionParser.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#macsylib.definition_parser.DefinitionParser.__init__" title="Link to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cfg</strong> – the configuration object of this run</p></li>
<li><p><strong>model_bank</strong> – the model factory</p></li>
<li><p><strong>gene_bank</strong> – the gene factory</p></li>
<li><p><strong>model_registry</strong> – The registry with all model location</p></li>
<li><p><strong>profile_factory</strong> – The profile factory</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="macsylib.definition_parser.DefinitionParser.__weakref__">
<span class="sig-name descname"><span class="pre">__weakref__</span></span><a class="headerlink" href="#macsylib.definition_parser.DefinitionParser.__weakref__" title="Link to this definition"></a></dt>
<dd><p>list of weak references to the object</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="macsylib.definition_parser.DefinitionParser._check_syntax">
<span class="sig-name descname"><span class="pre">_check_syntax</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model_node</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ElementTree</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../../_modules/macsylib/definition_parser.html#DefinitionParser._check_syntax"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#macsylib.definition_parser.DefinitionParser._check_syntax" title="Link to this definition"></a></dt>
<dd><p>Check if the definition does not contain logical error which is allowed by syntax
and absence of explicit grammar.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model_node</strong> – the node corresponding to the model</p></li>
<li><p><strong>path</strong> – the path of the definition.</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="error.html#macsylib.error.ModelInconsistencyError" title="macsylib.error.ModelInconsistencyError"><strong>ModelInconsistencyError</strong></a> – if an error is encountered in the document.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="macsylib.definition_parser.DefinitionParser._create_model">
<span class="sig-name descname"><span class="pre">_create_model</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">def_loc</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="registries.html#macsylib.registries.DefinitionLocation" title="macsylib.registries.DefinitionLocation"><span class="pre">DefinitionLocation</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_node</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ElementTree</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="model.html#macsylib.model.Model" title="macsylib.model.Model"><span class="pre">Model</span></a></span></span><a class="reference internal" href="../../_modules/macsylib/definition_parser.html#DefinitionParser._create_model"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#macsylib.definition_parser.DefinitionParser._create_model" title="Link to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>def_loc</strong> – the definition location to parse.</p></li>
<li><p><strong>model_node</strong> – the node corresponding to the model.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>the model corresponding to the definition location.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="macsylib.definition_parser.DefinitionParser._fill_gene_bank">
<span class="sig-name descname"><span class="pre">_fill_gene_bank</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model_node</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ElementTree</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_location</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="registries.html#macsylib.registries.ModelLocation" title="macsylib.registries.ModelLocation"><span class="pre">ModelLocation</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">def_loc</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="registries.html#macsylib.registries.DefinitionLocation" title="macsylib.registries.DefinitionLocation"><span class="pre">DefinitionLocation</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../../_modules/macsylib/definition_parser.html#DefinitionParser._fill_gene_bank"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#macsylib.definition_parser.DefinitionParser._fill_gene_bank" title="Link to this definition"></a></dt>
<dd><p>find all gene node and add them to the gene_bank</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model_node</strong> – the node corresponding to the model.</p></li>
<li><p><strong>model_location</strong></p></li>
<li><p><strong>def_loc</strong> – a definition location corresponding to the ‘model’ to parse.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="macsylib.definition_parser.DefinitionParser._get_model_node">
<span class="sig-name descname"><span class="pre">_get_model_node</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">def_loc</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="registries.html#macsylib.registries.DefinitionLocation" title="macsylib.registries.DefinitionLocation"><span class="pre">DefinitionLocation</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ElementTree</span></span></span><a class="reference internal" href="../../_modules/macsylib/definition_parser.html#DefinitionParser._get_model_node"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#macsylib.definition_parser.DefinitionParser._get_model_node" title="Link to this definition"></a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>def_loc</strong> (<em>return the node corresponding to the 'model' tag</em>) – a definition location to parse.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="macsylib.definition_parser.DefinitionParser._parse_exchangeable">
<span class="sig-name descname"><span class="pre">_parse_exchangeable</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">gene_node</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ElementTree</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gene_ref</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="gene.html#macsylib.gene.ModelGene" title="macsylib.gene.ModelGene"><span class="pre">ModelGene</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">curr_model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="model.html#macsylib.model.Model" title="macsylib.model.Model"><span class="pre">Model</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="gene.html#macsylib.gene.Exchangeable" title="macsylib.gene.Exchangeable"><span class="pre">Exchangeable</span></a></span></span><a class="reference internal" href="../../_modules/macsylib/definition_parser.html#DefinitionParser._parse_exchangeable"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#macsylib.definition_parser.DefinitionParser._parse_exchangeable" title="Link to this definition"></a></dt>
<dd><p>Parse a xml element gene child of exchangeable and build the corresponding object</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>gene_node</strong> – a “node” corresponding to the gene element in the XML hierarchy</p></li>
<li><p><strong>gene_ref</strong> – the gene which this gene is homolog to</p></li>
<li><p><strong>curr_model</strong> – the model being parsed .</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>the gene object corresponding to the node</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="macsylib.definition_parser.DefinitionParser._parse_genes">
<span class="sig-name descname"><span class="pre">_parse_genes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="model.html#macsylib.model.Model" title="macsylib.model.Model"><span class="pre">Model</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_node</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ElementTree</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../../_modules/macsylib/definition_parser.html#DefinitionParser._parse_genes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#macsylib.definition_parser.DefinitionParser._parse_genes" title="Link to this definition"></a></dt>
<dd><p>Create genes belonging to the models.
Each gene is directly added to the model in its right category (‘mandatory, accessory, …)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>model</strong> – the Model currently parsing</p></li>
<li><p><strong>model_node</strong> – the element ‘model’</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="macsylib.definition_parser.DefinitionParser.check_consistency">
<span class="sig-name descname"><span class="pre">check_consistency</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">models</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="model.html#macsylib.model.Model" title="macsylib.model.Model"><span class="pre">Model</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../../_modules/macsylib/definition_parser.html#DefinitionParser.check_consistency"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#macsylib.definition_parser.DefinitionParser.check_consistency" title="Link to this definition"></a></dt>
<dd><p>Check the consistency of the co-localization features between the different values given as an input:
between XML definitions, configuration file, and command-line options.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>models</strong> – the list of models to check</p>
</dd>
<dt class="field-even">Raise<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="error.html#macsylib.error.ModelInconsistencyError" title="macsylib.error.ModelInconsistencyError"><code class="xref py py-class docutils literal notranslate"><span class="pre">macsylib.error.ModelInconsistencyError</span></code></a> if one test fails</p>
</dd>
</dl>
<p>(see <a class="reference external" href="https://projets.pasteur.fr/issues/1850">feature</a>)</p>
<p>In the different possible situations, different requirements need to be fulfilled
(“mandatory_genes” and “accessory_genes” consist of lists of genes defined as such in the model definition):</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>If:</strong> min_mandatory_genes_required = None  ; min_genes_required = None</p></li>
<li><p><strong>Then:</strong> min_mandatory_genes_required = min_genes_required = len(mandatory_genes)</p></li>
</ul>
<p><em>always True by Models design</em></p>
<ul class="simple">
<li><p><strong>If:</strong> min_mandatory_genes_required = value  ; min_genes_required = None</p></li>
<li><p><strong>Then:</strong> min_mandatory_genes_required &lt;= len(mandatory_genes)</p></li>
<li><p>AND min_genes_required = min_mandatory_genes_required</p></li>
</ul>
<p><em>always True by design</em></p>
<ul class="simple">
<li><p><strong>If:</strong> min_mandatory_genes_required =  None ; min_genes_required = Value</p></li>
<li><p><strong>Then:</strong> min_mandatory_genes_required = len(mandatory_genes)</p></li>
<li><p>AND min_genes_required &gt;= min_mandatory_genes_required</p></li>
<li><p>AND min_genes_required &lt;= len(mandatory_genes+accessory_genes)</p></li>
</ul>
<p><em>to be checked</em></p>
<ul class="simple">
<li><p><strong>If:</strong> min_mandatory_genes_required =  Value ; min_genes_required = Value</p></li>
<li><p><strong>Then:</strong> min_genes_required &lt;= len(accessory_genes+mandatory_genes)</p></li>
<li><p>AND min_genes_required &gt;= min_mandatory_genes_required</p></li>
<li><p>AND min_mandatory_genes_required &lt;= len(mandatory_genes)</p></li>
</ul>
<p><em>to be checked</em></p>
</div></blockquote>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="macsylib.definition_parser.DefinitionParser.parse">
<span class="sig-name descname"><span class="pre">parse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">models_2_detect</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="registries.html#macsylib.registries.DefinitionLocation" title="macsylib.registries.DefinitionLocation"><span class="pre">DefinitionLocation</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../../_modules/macsylib/definition_parser.html#DefinitionParser.parse"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#macsylib.definition_parser.DefinitionParser.parse" title="Link to this definition"></a></dt>
<dd><p>Parse models definition in XML format to build the corresponding Model objects,
and add them to the model factory after checking its consistency.
To get the model ask it to model_bank</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>models_2_detect</strong> – a list of model definition to parse.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="registries.html" class="btn btn-neutral float-left" title="registries" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="model.html" class="btn btn-neutral float-right" title="model" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2014-2025, Bertrand Néron, Sophie Abby.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
  

<div class="licensing">
  <p>
    This documentation is licensed under <a href="http://creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License
      <img src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png">.
    </a>
  </p>
</div>


</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

<a class="github" href="https://github.com/gem-pasteur/macsylib">
    <img style="position: absolute; top: 0; right: 0; border: 0;"
         src="https://raw.githubusercontent.com/gem-pasteur/macsylib/refs/heads/main/doc/source/_static/github-banner.svg"
         alt="Fork me on GitHub" />
</a>



</body>
</html>