Metadata-Version: 2.4
Name: laelaps
Version: 0.0.6
Summary: Catchall email alias monitor and verifier
Author-email: Jan Maarten van Doorn <laelaps@vandoorn.cloud>
License: MPL-2.0
Project-URL: Homepage, https://github.com/JanMaartenvanDoorn/Laelaps
Keywords: catchall,email,alias,monitor,verification
Classifier: License :: OSI Approved :: Mozilla Public License 2.0 (MPL 2.0)
Classifier: Programming Language :: Python
Classifier: Programming Language :: Python :: 3.14
Requires-Python: >=3.14.0
Description-Content-Type: text/markdown
License-File: LICENSE
Requires-Dist: aioimaplib==2.0.1
Requires-Dist: email_validator==2.3.0
Requires-Dist: IMAPClient==3.0.1
Requires-Dist: nest_asyncio==1.6.0
Requires-Dist: numpy==2.3.5
Requires-Dist: pandas==2.3.3
Requires-Dist: pydantic==2.12.5
Requires-Dist: pydantic-settings==2.12.0
Requires-Dist: cryptography==46.0.3
Requires-Dist: structlog==25.5.0
Requires-Dist: toml==0.10.2
Provides-Extra: test
Requires-Dist: pandas-stubs==2.3.3.251201; extra == "test"
Requires-Dist: types-toml==0.10.8.20240310; extra == "test"
Requires-Dist: autoflake==2.2.0; extra == "test"
Requires-Dist: bandit==1.9.2; extra == "test"
Requires-Dist: black==25.11.0; extra == "test"
Requires-Dist: flake8~=7.1.1; extra == "test"
Requires-Dist: mypy==1.19.0; extra == "test"
Requires-Dist: mypy-extensions==1.1.0; extra == "test"
Requires-Dist: pydocstyle==6.3.0; extra == "test"
Requires-Dist: pytest==9.0.1; extra == "test"
Requires-Dist: pytest-cov==7.0.0; extra == "test"
Requires-Dist: pylint==4.0.4; extra == "test"
Requires-Dist: pylint-gitlab==2.1.1; extra == "test"
Requires-Dist: Flake8-pyproject==1.2.4; extra == "test"
Requires-Dist: reuse==6.2.0; extra == "test"
Requires-Dist: annotated-types; extra == "test"
Requires-Dist: annotated_types; extra == "test"
Requires-Dist: markupsafe; extra == "test"
Requires-Dist: typing_inspection; extra == "test"
Requires-Dist: pydantic_core; extra == "test"
Requires-Dist: pytokens; extra == "test"
Requires-Dist: librt; extra == "test"
Requires-Dist: tomlkit; extra == "test"
Requires-Dist: jinja2; extra == "test"
Requires-Dist: pygments; extra == "test"
Requires-Dist: pyyaml; extra == "test"
Requires-Dist: click; extra == "test"
Requires-Dist: isort; extra == "test"
Requires-Dist: pycodestyle; extra == "test"
Requires-Dist: snowballstemmer; extra == "test"
Requires-Dist: typing_extensions; extra == "test"
Requires-Dist: astroid; extra == "test"
Requires-Dist: boolean.py==4.0; extra == "test"
Requires-Dist: pluggy; extra == "test"
Requires-Dist: pathspec; extra == "test"
Requires-Dist: iniconfig; extra == "test"
Requires-Dist: coverage; extra == "test"
Requires-Dist: idna; extra == "test"
Requires-Dist: platformdirs; extra == "test"
Requires-Dist: stevedore; extra == "test"
Requires-Dist: packaging; extra == "test"
Requires-Dist: rich; extra == "test"
Requires-Dist: dill; extra == "test"
Requires-Dist: dotenv; extra == "test"
Requires-Dist: license_expression; extra == "test"
Requires-Dist: python-dotenv; extra == "test"
Requires-Dist: cffi; extra == "test"
Requires-Dist: dnspython; extra == "test"
Dynamic: license-file

<!--
SPDX-FileCopyrightText: 2026 Jan Maarten van Doorn <laelaps@vandoorn.cloud>

SPDX-License-Identifier: MPL-2.0
-->

# Laelaps

Laelaps is an IMAP monitoring application that is capable of verifying signed aliases. This is particularly useful when using different catchall-based aliases. Catchall-based aliases are a convenient way to generate unique email addresses for online accounts and reduce the impact of potential data leaks. However with catchall mode turned on there is a risk of attracting lots of spam.

Laelaps solves this problem by verifying whether an alias is indeed generated by the user and not by some other random party such as a spammer. This is achieved without registering the known aliases by using cryptographic signatures within generated aliases themselves. In practice a user generates an alias using a private key and the [TeumessianFox](https://github.com/Marmalade8478/TeumessianFox) browser extension and Lealaps will separate spam from emails that are send to genuine aliases. This way the user can easily generate new aliases and still be in full control of messages send to her/his inbox.

As a bonus, albeit rather experimental, Laelaps can perform other checks on incoming email messages by analyzing the message headers, these checks include:

- Verifying whether SPF, DMARC and DKIM passed.
- Possibility to register an aliases for a specific domain that is allowed to send messages only to this specific alias.
- Check wether the email was send with TLS enabled
- Check wether the sending email address exists

Laelaps moves incoming messages either to an inbox folder for messages that passed validation or to a folder that failed validation.

## Install

### Install from pypi

```shell
pip install laelaps
```


### Setting up with UV for local development

1. **Create a virtual environment**:

```shell
uv venv .venv
source .venv/bin/activate
```

2. **Install dependencies**:

```shell
uv pip sync pyproject.toml
```

To include test/dev dependencies:

```shell
uv pip sync --extra test pyproject.toml
```

## Configure

Create a `config.toml` with the following contents in your working directory:

```toml
[imap]
host = "your.imap.server.host"
username = "yourImapUserName"
password = "ImapPassword"
mailbox = "FolderToMonitor"

[encryption]
# Generate yourself and keep safe!
key = "32CharacterStringEncryptionKey00"

[user]
own_domains = [ "list.of", "catchall.domains"]
target_folder_verified = "FolderToForVerifiedEmails"
target_folder_failed_validation = "FolderToForFailedVerificationEmails"
```

### Configuring using environment variables

When running Laelaps in a container, it may be useful to configure it using environment variables. If the configuration file cannot be found Laelqaps will look for the following variables:

```shell
LAELAPS_IMAP__HOST=your.imap.server.host
LAELAPS_IMAP__MAILBOX=FolderToMonitor
LAELAPS_IMAP__USERNAME=yourImapUserName
LAELAPS_IMAP__PASSWORD=ImapPassword
LAELAPS_USER__OWN_DOMAINS=list.of,own.domains
LAELAPS_USER__TARGET_FOLDER_VERIFIED=FolderToForVerifiedEmails
LAELAPS_USER__TARGET_FOLDER_FAILED_VALIDATION=FolderToForFailedVerificationEmails
LAELAPS_ENCRYPTION__KEY=32CharacterStringEncryptionKey00
```

## Run

Start laelaps with:

```shell
python -m laelaps
```

Stop laelaps with
<kbd>ctrl</kbd>+<kbd>C</kbd>

### Run with Docker
Make sure to have a configuration ready.

From the root of the repository run
```shell
docker compose up
```

