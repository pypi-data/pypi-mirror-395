import{b as D,j as s}from"./query-vendor-DJBV9M4k.js";import{c as F,a as $,L as B,C as R,b as A,d as L,e as T,g as E,B as M}from"./index-DmhZNddw.js";import{a as H}from"./api-BHN6AyqB.js";import{C as I}from"./circle-x-CcYernfK.js";import{A as q}from"./activity-BiiKT4VQ.js";import{C as Q}from"./clock-CiOYXKHQ.js";import{C as K}from"./circle-check-BT3lGC8x.js";import"./react-vendor-UO7EsjdD.js";import"./ui-vendor-CGdvvLxe.js";const O=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],P=F("trending-up",O);function U(e){const t=a=>e.by_status?.find(x=>x.status===a)?.count??0;return{total_tasks:e.total_tasks??0,running_tasks:e.running_count??t("running"),pending_tasks:e.pending_count??t("pending"),completed_tasks:t("completed"),failed_tasks:e.failed_count??t("failed"),success_rate:e.success_rate??0,queues:(e.queues??[]).map(a=>({name:a.name,depth:a.pending??0,processing:a.running??0})),recent_activity:[]}}function C(e){const t=$.c(20),{title:a,value:d,icon:x,trend:n,className:m}=e,r=m===void 0?"":m;let l;t[0]!==a?(l=s.jsx("p",{className:"text-sm font-medium text-zinc-500 dark:text-zinc-400",children:a}),t[0]=a,t[1]=l):l=t[1];let i;t[2]!==d?(i=typeof d=="number"?d.toLocaleString():d,t[2]=d,t[3]=i):i=t[3];let u;t[4]!==i?(u=s.jsx("p",{className:"mt-2 text-3xl font-semibold text-zinc-900 dark:text-zinc-100",children:i}),t[4]=i,t[5]=u):u=t[5];let o;t[6]!==n?(o=n&&s.jsxs("div",{className:"mt-2 flex items-center gap-1",children:[s.jsx(P,{className:`h-4 w-4 ${n.value>=0?"text-emerald-500":"text-red-500"}`}),s.jsxs("span",{className:`text-sm font-medium ${n.value>=0?"text-emerald-600":"text-red-600"}`,children:[n.value>=0?"+":"",n.value,"%"]}),s.jsx("span",{className:"text-sm text-zinc-500 dark:text-zinc-400",children:n.label})]}),t[6]=n,t[7]=o):o=t[7];let f;t[8]!==l||t[9]!==u||t[10]!==o?(f=s.jsxs("div",{className:"flex-1",children:[l,u,o]}),t[8]=l,t[9]=u,t[10]=o,t[11]=f):f=t[11];let h;t[12]!==x?(h=s.jsx("div",{className:"rounded-lg bg-blue-50 p-3 dark:bg-blue-900/30",children:x}),t[12]=x,t[13]=h):h=t[13];let p;t[14]!==f||t[15]!==h?(p=s.jsx(T,{className:"p-6",children:s.jsxs("div",{className:"flex items-start justify-between",children:[f,h]})}),t[14]=f,t[15]=h,t[16]=p):p=t[16];let j;return t[17]!==r||t[18]!==p?(j=s.jsx(L,{className:r,children:p}),t[17]=r,t[18]=p,t[19]=j):j=t[19],j}function V(e){const t=$.c(16),{task:a}=e;let d;t[0]===Symbol.for("react.memo_cache_sentinel")?(d=s.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-zinc-100 dark:bg-zinc-800",children:s.jsx(q,{className:"h-4 w-4 text-zinc-600 dark:text-zinc-400"})}),t[0]=d):d=t[0];let x;t[1]!==a.name?(x=s.jsx("p",{className:"text-sm font-medium text-zinc-900 dark:text-zinc-100",children:a.name}),t[1]=a.name,t[2]=x):x=t[2];let n;t[3]!==a.queue?(n=s.jsx("p",{className:"text-xs text-zinc-500 dark:text-zinc-400",children:a.queue}),t[3]=a.queue,t[4]=n):n=t[4];let m;t[5]!==x||t[6]!==n?(m=s.jsxs("div",{className:"flex items-center gap-3",children:[d,s.jsxs("div",{children:[x,n]})]}),t[5]=x,t[6]=n,t[7]=m):m=t[7];let r;t[8]!==a.status?(r=E(a.status),t[8]=a.status,t[9]=r):r=t[9];let l;t[10]!==r||t[11]!==a.status?(l=s.jsx(M,{variant:r,dot:!0,children:a.status}),t[10]=r,t[11]=a.status,t[12]=l):l=t[12];let i;return t[13]!==m||t[14]!==l?(i=s.jsxs("div",{className:"flex items-center justify-between py-3",children:[m,l]}),t[13]=m,t[14]=l,t[15]=i):i=t[15],i}function ie(){const e=$.c(41);let t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t=["dashboard"],e[0]=t):t=e[0];let a;e[1]===Symbol.for("react.memo_cache_sentinel")?(a={queryKey:t,queryFn:H.getDashboardSummary,refetchInterval:5e3},e[1]=a):a=e[1];const{data:d,isLoading:x,error:n}=D(a);if(x){let c;return e[2]===Symbol.for("react.memo_cache_sentinel")?(c=s.jsx(B,{label:"Loading dashboard..."}),e[2]=c):c=e[2],c}if(n){let c,g;e[3]===Symbol.for("react.memo_cache_sentinel")?(c=s.jsx(I,{className:"h-12 w-12 text-red-500"}),g=s.jsx("p",{className:"text-lg font-medium text-zinc-900 dark:text-zinc-100",children:"Failed to load dashboard"}),e[3]=c,e[4]=g):(c=e[3],g=e[4]);const _=n instanceof Error?n.message:"An error occurred";let v;return e[5]!==_?(v=s.jsxs("div",{className:"flex flex-col items-center justify-center gap-4 p-12",children:[c,g,s.jsx("p",{className:"text-sm text-zinc-500",children:_})]}),e[5]=_,e[6]=v):v=e[6],v}let m,r,l,i,u,o,f,h;if(e[7]!==d){const c=d?U(d):{total_tasks:0,running_tasks:0,failed_tasks:0,success_rate:0,queues:[],recent_activity:[]};f="space-y-6";let g;e[16]===Symbol.for("react.memo_cache_sentinel")?(g=s.jsx(q,{className:"h-6 w-6 text-blue-600"}),e[16]=g):g=e[16];let _;e[17]===Symbol.for("react.memo_cache_sentinel")?(_=s.jsx(Q,{className:"h-6 w-6 text-cyan-600"}),e[17]=_):_=e[17];const v=`${c.success_rate.toFixed(1)}%`;let b;e[18]===Symbol.for("react.memo_cache_sentinel")?(b=s.jsx(K,{className:"h-6 w-6 text-emerald-600"}),e[18]=b):b=e[18];let k;e[19]!==v?(k=s.jsx(C,{title:"Success Rate",value:v,icon:b}),e[19]=v,e[20]=k):k=e[20];let z;e[21]===Symbol.for("react.memo_cache_sentinel")?(z=s.jsx(I,{className:"h-6 w-6 text-red-600"}),e[21]=z):z=e[21],h=s.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[s.jsx(C,{title:"Total Tasks",value:c.total_tasks,icon:g}),s.jsx(C,{title:"Running",value:c.running_tasks,icon:_}),k,s.jsx(C,{title:"Failed",value:c.failed_tasks,icon:z})]}),u="grid gap-6 lg:grid-cols-3";let S;e[22]===Symbol.for("react.memo_cache_sentinel")?(S=s.jsx(R,{children:s.jsx(A,{children:"Recent Activity"})}),e[22]=S):S=e[22];const w=c.recent_activity.length>0?s.jsx("div",{className:"divide-y divide-zinc-200 dark:divide-zinc-800",children:c.recent_activity.slice(0,10).map(G)}):s.jsx("p",{className:"py-8 text-center text-sm text-zinc-500",children:"No recent activity"});e[23]!==w?(o=s.jsxs(L,{className:"lg:col-span-2",children:[S,s.jsx(T,{children:w})]}),e[23]=w,e[24]=o):o=e[24],r=L,e[25]===Symbol.for("react.memo_cache_sentinel")?(i=s.jsx(R,{children:s.jsx(A,{children:"Queue Health"})}),e[25]=i):i=e[25],m=T,l=c.queues.length>0?s.jsx("div",{className:"space-y-4",children:c.queues.map(X)}):s.jsx("p",{className:"py-8 text-center text-sm text-zinc-500",children:"No queues configured"}),e[7]=d,e[8]=m,e[9]=r,e[10]=l,e[11]=i,e[12]=u,e[13]=o,e[14]=f,e[15]=h}else m=e[8],r=e[9],l=e[10],i=e[11],u=e[12],o=e[13],f=e[14],h=e[15];let p;e[26]!==m||e[27]!==l?(p=s.jsx(m,{children:l}),e[26]=m,e[27]=l,e[28]=p):p=e[28];let j;e[29]!==r||e[30]!==i||e[31]!==p?(j=s.jsxs(r,{children:[i,p]}),e[29]=r,e[30]=i,e[31]=p,e[32]=j):j=e[32];let y;e[33]!==u||e[34]!==o||e[35]!==j?(y=s.jsxs("div",{className:u,children:[o,j]}),e[33]=u,e[34]=o,e[35]=j,e[36]=y):y=e[36];let N;return e[37]!==y||e[38]!==f||e[39]!==h?(N=s.jsxs("div",{className:f,children:[h,y]}),e[37]=y,e[38]=f,e[39]=h,e[40]=N):N=e[40],N}function X(e){return s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"font-medium text-zinc-900 dark:text-zinc-100",children:e.name}),s.jsxs("span",{className:"text-zinc-500 dark:text-zinc-400",children:[e.depth," pending"]})]}),s.jsx("div",{className:"mt-1 h-2 rounded-full bg-zinc-200 dark:bg-zinc-700",children:s.jsx("div",{className:"h-2 rounded-full bg-blue-600",style:{width:`${Math.min(e.processing/Math.max(e.depth+e.processing,1)*100,100)}%`}})})]},e.name)}function G(e){return s.jsx(V,{task:e},e.id)}export{ie as default};
