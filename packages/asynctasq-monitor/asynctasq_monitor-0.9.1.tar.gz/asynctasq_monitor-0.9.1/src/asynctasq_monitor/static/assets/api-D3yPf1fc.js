const n="/api";class c extends Error{status;detail;constructor(t,r,a){super(r),this.name="ApiError",this.status=t,this.detail=a}}async function s(e,t){const r=await fetch(`${n}${e}`,{headers:{"Content-Type":"application/json",...t?.headers},...t});if(!r.ok){let a;try{const u=await r.json();typeof u=="object"&&u!==null&&"detail"in u&&(a=String(u.detail))}catch{}throw new c(r.status,`HTTP ${r.status}: ${r.statusText}`,a)}return r.json()}function o(e){const t=new URLSearchParams;for(const[r,a]of Object.entries(e))if(a!==void 0)if(Array.isArray(a))for(const u of a)t.append(r,u);else t.append(r,String(a));return t}const i={getDashboardSummary:()=>s("/dashboard/summary"),getTasks:(e,t=50,r=0)=>{const a=o({status:e?.status,queue:e?.queue,worker_id:e?.worker_id,search:e?.search,from_date:e?.from_date,to_date:e?.to_date,tags:e?.tags,limit:t,offset:r});return s(`/tasks?${a.toString()}`)},getTaskById:e=>s(`/tasks/${e}`),retryTask:async e=>{await s(`/tasks/${e}/retry`,{method:"POST"})},deleteTask:async e=>{await s(`/tasks/${e}`,{method:"DELETE"})},bulkRetryTasks:async e=>{await s("/tasks/bulk/retry",{method:"POST",body:JSON.stringify({task_ids:e})})},bulkDeleteTasks:async e=>{await s("/tasks/bulk/delete",{method:"POST",body:JSON.stringify({task_ids:e})})},getWorkers:e=>{const r=o({status:e?.status,queue:e?.queue,search:e?.search,is_paused:e?.is_paused,has_current_task:e?.has_current_task}).toString();return s(`/workers${r?`?${r}`:""}`)},getWorkerById:e=>s(`/workers/${e}`),getWorkerDetail:e=>s(`/workers/${e}/detail`),performWorkerAction:(e,t,r=!1)=>s(`/workers/${e}/action`,{method:"POST",body:JSON.stringify({action:t,force:r})}),pauseWorker:async e=>s(`/workers/${e}/pause`,{method:"POST"}),resumeWorker:async e=>s(`/workers/${e}/resume`,{method:"POST"}),shutdownWorker:async e=>s(`/workers/${e}/shutdown`,{method:"POST"}),killWorker:async(e,t=!1)=>{const r=o({force:t});return s(`/workers/${e}/kill?${r.toString()}`,{method:"POST"})},getWorkerLogs:(e,t)=>{const a=o({level:t?.level,search:t?.search,limit:t?.limit,offset:t?.offset}).toString();return s(`/workers/${e}/logs${a?`?${a}`:""}`)},getQueues:e=>{const r=o({status:e?.status,search:e?.search,min_depth:e?.min_depth,alert_level:e?.alert_level}).toString();return s(`/queues${r?`?${r}`:""}`)},getQueueByName:e=>s(`/queues/${e}`),pauseQueue:async(e,t)=>{const r={method:"POST"};return t&&(r.body=JSON.stringify({reason:t})),s(`/queues/${e}/pause`,r)},resumeQueue:async e=>s(`/queues/${e}/resume`,{method:"POST"}),clearQueue:async e=>s(`/queues/${e}`,{method:"DELETE"}),getMetricsSummary:e=>s(`/metrics/summary?time_range=${encodeURIComponent(e)}`),getThroughputMetrics:e=>{const t=o({from:e.from,to:e.to,interval:e.interval});return s(`/metrics/throughput?${t.toString()}`)},getDurationMetrics:e=>{const t=o({from:e.from,to:e.to,queue:e.queue});return s(`/metrics/duration?${t.toString()}`)}};export{i as a};
