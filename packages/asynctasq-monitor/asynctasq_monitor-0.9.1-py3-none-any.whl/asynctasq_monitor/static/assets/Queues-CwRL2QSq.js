import{u as fe,b as he,c as se,j as t}from"./query-vendor-DJBV9M4k.js";import{c as ae,i as D,S as re,T as ge,a as z,C as q,M as U,B as pe,m as le}from"./index-Bd7Eqoup.js";import{r as ee}from"./react-vendor-UO7EsjdD.js";import{a as te}from"./api-D3yPf1fc.js";import{R as ne}from"./refresh-cw-B86pDpSY.js";import{P as ie}from"./pause-YJP2ND8u.js";import{P as ce,T as ye}from"./triangle-alert-DjEu55UI.js";import{C as oe}from"./circle-check-BD6xzXDv.js";import{C as de}from"./circle-x-CnIbKxAQ.js";import{C as me}from"./clock-DFfU30N8.js";import{T as je}from"./trash-2-BADSWweE.js";import{X as be,Y as ve,T as Ne,A as _e,R as ke,a as we}from"./chart-vendor-DrD9aRso.js";import"./ui-vendor-CGdvvLxe.js";const Ce=[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]],ue=ae("arrow-down-right",Ce);const Se=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],Ae=ae("arrow-up-right",Se);const Pe=[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]],xe=ae("inbox",Pe),Te={active:{color:"success",icon:ce},paused:{color:"warning",icon:ie},draining:{color:"error",icon:ue}};function qe(l){const e=z.c(6),{status:s}=l,r=Te[s],o=r.icon;let a;e[0]!==o?(a=t.jsx(o,{className:"h-3 w-3"}),e[0]=o,e[1]=a):a=e[1];let n;return e[2]!==r.color||e[3]!==s||e[4]!==a?(n=t.jsxs(pe,{variant:r.color,className:"inline-flex items-center gap-1",children:[a,s]}),e[2]=r.color,e[3]=s,e[4]=a,e[5]=n):n=e[5],n}function Qe(l){const e=z.c(20),{data:s}=l;let r;e[0]!==s?(r=s.map(Me),e[0]=s,e[1]=r):r=e[1];const o=r;let a;e:{if(s.length<2){a=0;break e}const j=s[s.length-1]??0,h=s[s.length-2]??0;if(h===0){a=0;break e}a=(j-h)/h*100}const n=a;let u;e[2]===Symbol.for("react.memo_cache_sentinel")?(u=t.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Throughput (last hour)"}),e[2]=u):u=e[2];const b=`flex items-center gap-1 text-sm font-medium ${n>=0?"text-green-600":"text-red-600"}`;let d,x;e[3]!==n?(d=n>=0?t.jsx(Ae,{className:"h-4 w-4"}):t.jsx(ue,{className:"h-4 w-4"}),x=Math.abs(n).toFixed(1),e[3]=n,e[4]=d,e[5]=x):(d=e[4],x=e[5]);let p;e[6]!==b||e[7]!==d||e[8]!==x?(p=t.jsxs("div",{className:"flex items-center justify-between",children:[u,t.jsxs("div",{className:b,children:[d,x,"%"]})]}),e[6]=b,e[7]=d,e[8]=x,e[9]=p):p=e[9];let N,f;e[10]===Symbol.for("react.memo_cache_sentinel")?(N=t.jsx("defs",{children:t.jsxs("linearGradient",{id:"throughputGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[t.jsx("stop",{offset:"0%",stopColor:"#3b82f6",stopOpacity:.3}),t.jsx("stop",{offset:"100%",stopColor:"#3b82f6",stopOpacity:0})]})}),f=t.jsx(be,{dataKey:"time",hide:!0}),e[10]=N,e[11]=f):(N=e[10],f=e[11]);let v;e[12]===Symbol.for("react.memo_cache_sentinel")?(v=t.jsx(ve,{hide:!0,domain:["auto","auto"]}),e[12]=v):v=e[12];let _,i;e[13]===Symbol.for("react.memo_cache_sentinel")?(_=t.jsx(Ne,{contentStyle:{backgroundColor:"var(--tooltip-bg, #1f2937)",border:"none",borderRadius:"0.5rem",color:"var(--tooltip-text, #f9fafb)"},formatter:$e,labelFormatter:Fe}),i=t.jsx(_e,{type:"monotone",dataKey:"value",stroke:"#3b82f6",strokeWidth:2,fill:"url(#throughputGradient)"}),e[13]=_,e[14]=i):(_=e[13],i=e[14]);let y;e[15]!==o?(y=t.jsx("div",{className:"h-16",children:t.jsx(ke,{width:"100%",height:"100%",children:t.jsxs(we,{data:o,children:[N,f,v,_,i]})})}),e[15]=o,e[16]=y):y=e[16];let m;return e[17]!==y||e[18]!==p?(m=t.jsxs("div",{className:"space-y-2",children:[p,y]}),e[17]=y,e[18]=p,e[19]=m):m=e[19],m}function Fe(){return""}function $e(l){return[`${l} tasks/min`,"Throughput"]}function Me(l,e){return{time:e,value:l}}function Re(l){const e=z.c(80),{queue:s,onAction:r}=l,o=s.status==="active",a=s.status==="paused",n=s.depth>0?Math.floor(s.depth/10):5;let u;e[0]!==n?(u=Array.from({length:12},(R,X)=>Math.max(0,n+Math.floor(Math.random()*10)-5+X)),e[0]=n,e[1]=u):u=e[1];const b=u;let d;e:{if(s.avg_duration_seconds!==null){let R;e[2]!==s.avg_duration_seconds?(R=s.avg_duration_seconds.toFixed(2),e[2]=s.avg_duration_seconds,e[3]=R):R=e[3],d=`${R}s`;break e}if(s.avg_duration_ms!==null){const R=s.avg_duration_ms/1e3;let X;e[4]!==R?(X=R.toFixed(2),e[4]=R,e[5]=X):X=e[5],d=`${X}s`;break e}d="N/A"}const x=d,p=`
              flex h-10 w-10 items-center justify-center rounded-lg
              ${o?"bg-blue-100 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400":"bg-gray-100 text-gray-400 dark:bg-gray-800 dark:text-gray-500"}
            `;let N;e[6]===Symbol.for("react.memo_cache_sentinel")?(N=t.jsx(le,{className:"h-5 w-5"}),e[6]=N):N=e[6];let f;e[7]!==p?(f=t.jsx("div",{className:p,children:N}),e[7]=p,e[8]=f):f=e[8];let v;e[9]!==s.name?(v=t.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:s.name}),e[9]=s.name,e[10]=v):v=e[10];const _=s.workers_assigned!==1?"s":"";let i;e[11]!==s.workers_assigned||e[12]!==_?(i=t.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[s.workers_assigned," worker",_," assigned"]}),e[11]=s.workers_assigned,e[12]=_,e[13]=i):i=e[13];let y;e[14]!==v||e[15]!==i?(y=t.jsxs("div",{children:[v,i]}),e[14]=v,e[15]=i,e[16]=y):y=e[16];let m;e[17]!==f||e[18]!==y?(m=t.jsxs("div",{className:"flex items-center gap-3",children:[f,y]}),e[17]=f,e[18]=y,e[19]=m):m=e[19];let j;e[20]!==s.status?(j=t.jsx(qe,{status:s.status}),e[20]=s.status,e[21]=j):j=e[21];let h;e[22]!==m||e[23]!==j?(h=t.jsx(q.Header,{children:t.jsxs("div",{className:"flex items-start justify-between",children:[m,j]})}),e[22]=m,e[23]=j,e[24]=h):h=e[24];let c;e[25]===Symbol.for("react.memo_cache_sentinel")?(c=t.jsx("div",{className:"flex items-center justify-center gap-1 text-blue-600 dark:text-blue-400 mb-1",children:t.jsx(xe,{className:"h-4 w-4"})}),e[25]=c):c=e[25];let g;e[26]!==s.depth?(g=s.depth.toLocaleString(),e[26]=s.depth,e[27]=g):g=e[27];let k;e[28]!==g?(k=t.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:g}),e[28]=g,e[29]=k):k=e[29];let w;e[30]===Symbol.for("react.memo_cache_sentinel")?(w=t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Pending"}),e[30]=w):w=e[30];let C;e[31]!==k?(C=t.jsxs("div",{className:"text-center rounded-lg bg-gray-50 dark:bg-gray-800/50 p-3",children:[c,k,w]}),e[31]=k,e[32]=C):C=e[32];let P;e[33]===Symbol.for("react.memo_cache_sentinel")?(P=t.jsx("div",{className:"flex items-center justify-center gap-1 text-green-600 dark:text-green-400 mb-1",children:t.jsx(oe,{className:"h-4 w-4"})}),e[33]=P):P=e[33];let S;e[34]!==s.completed_total?(S=s.completed_total.toLocaleString(),e[34]=s.completed_total,e[35]=S):S=e[35];let A;e[36]!==S?(A=t.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:S}),e[36]=S,e[37]=A):A=e[37];let M;e[38]===Symbol.for("react.memo_cache_sentinel")?(M=t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Completed"}),e[38]=M):M=e[38];let Q;e[39]!==A?(Q=t.jsxs("div",{className:"text-center rounded-lg bg-gray-50 dark:bg-gray-800/50 p-3",children:[P,A,M]}),e[39]=A,e[40]=Q):Q=e[40];let F;e[41]===Symbol.for("react.memo_cache_sentinel")?(F=t.jsx("div",{className:"flex items-center justify-center gap-1 text-red-600 dark:text-red-400 mb-1",children:t.jsx(de,{className:"h-4 w-4"})}),e[41]=F):F=e[41];let T;e[42]!==s.failed_total?(T=s.failed_total.toLocaleString(),e[42]=s.failed_total,e[43]=T):T=e[43];let $;e[44]!==T?($=t.jsx("p",{className:"text-lg font-bold text-gray-900 dark:text-white",children:T}),e[44]=T,e[45]=$):$=e[45];let L;e[46]===Symbol.for("react.memo_cache_sentinel")?(L=t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Failed"}),e[46]=L):L=e[46];let E;e[47]!==$?(E=t.jsxs("div",{className:"text-center rounded-lg bg-gray-50 dark:bg-gray-800/50 p-3",children:[F,$,L]}),e[47]=$,e[48]=E):E=e[48];let K;e[49]!==C||e[50]!==Q||e[51]!==E?(K=t.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[C,Q,E]}),e[49]=C,e[50]=Q,e[51]=E,e[52]=K):K=e[52];let B;e[53]!==b?(B=t.jsx(Qe,{data:b}),e[53]=b,e[54]=B):B=e[54];let Y;e[55]===Symbol.for("react.memo_cache_sentinel")?(Y=t.jsxs("span",{className:"flex items-center gap-1 text-gray-500 dark:text-gray-400",children:[t.jsx(me,{className:"h-4 w-4"}),"Avg. Processing Time"]}),e[55]=Y):Y=e[55];let H;e[56]!==x?(H=t.jsxs("div",{className:"flex items-center justify-between text-sm",children:[Y,t.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:x})]}),e[56]=x,e[57]=H):H=e[57];let I;e[58]!==o||e[59]!==a||e[60]!==r||e[61]!==s?(I=o?t.jsxs(D,{variant:"outline",size:"sm",className:"flex-1",onPress:()=>r("pause",s),children:[t.jsx(ie,{className:"h-4 w-4"}),"Pause"]}):a?t.jsxs(D,{variant:"primary",size:"sm",className:"flex-1",onPress:()=>r("resume",s),children:[t.jsx(ce,{className:"h-4 w-4"}),"Resume"]}):null,e[58]=o,e[59]=a,e[60]=r,e[61]=s,e[62]=I):I=e[62];let O;e[63]!==r||e[64]!==s?(O=()=>r("clear",s),e[63]=r,e[64]=s,e[65]=O):O=e[65];let J;e[66]===Symbol.for("react.memo_cache_sentinel")?(J=t.jsx(je,{className:"h-4 w-4"}),e[66]=J):J=e[66];let G;e[67]!==O?(G=t.jsx(D,{variant:"danger",size:"sm",onPress:O,children:J}),e[67]=O,e[68]=G):G=e[68];let V;e[69]!==I||e[70]!==G?(V=t.jsxs("div",{className:"flex gap-2 pt-2 border-t border-gray-100 dark:border-gray-700",children:[I,G]}),e[69]=I,e[70]=G,e[71]=V):V=e[71];let W;e[72]!==K||e[73]!==B||e[74]!==H||e[75]!==V?(W=t.jsxs(q.Content,{className:"space-y-4",children:[K,B,H,V]}),e[72]=K,e[73]=B,e[74]=H,e[75]=V,e[76]=W):W=e[76];let Z;return e[77]!==h||e[78]!==W?(Z=t.jsxs(q,{className:"hover:border-gray-300 dark:hover:border-gray-600 transition-colors",children:[h,W]}),e[77]=h,e[78]=W,e[79]=Z):Z=e[79],Z}function Le(l){const e=z.c(51),{queues:s}=l;let r;e[0]!==s?(r=s.filter(Oe),e[0]=s,e[1]=r):r=e[1];const o=r.length;let a;e[2]!==s?(a=s.reduce(Ie,0),e[2]=s,e[3]=a):a=e[3];const n=a;let u;e[4]!==s?(u=s.reduce(He,0),e[4]=s,e[5]=u):u=e[5];const b=u;let d;e[6]!==s?(d=s.reduce(Be,0),e[6]=s,e[7]=d):d=e[7];const x=d;let p;e[8]!==s?(p=s.reduce(Ke,0),e[8]=s,e[9]=p):p=e[9];const N=p;let f;if(e[10]!==s){const L=s.map(Ee).filter(ze);f=L.length>0?L.reduce(De,0)/L.length:0,e[10]=s,e[11]=f}else f=e[11];const v=f;let _;e[12]!==o||e[13]!==v||e[14]!==s.length||e[15]!==b||e[16]!==n||e[17]!==x||e[18]!==N?(_={total:s.length,active:o,totalDepth:n,totalCompleted:b,totalFailed:x,totalWorkers:N,avgTime:v},e[12]=o,e[13]=v,e[14]=s.length,e[15]=b,e[16]=n,e[17]=x,e[18]=N,e[19]=_):_=e[19];const i=_;let y;e[20]===Symbol.for("react.memo_cache_sentinel")?(y=t.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-blue-100 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400",children:t.jsx(le,{className:"h-5 w-5"})}),e[20]=y):y=e[20];let m;e[21]!==i.active?(m=t.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[i.active," Active"]}),e[21]=i.active,e[22]=m):m=e[22];let j;e[23]!==i.total?(j=t.jsxs("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:[i.total," Queues"]}),e[23]=i.total,e[24]=j):j=e[24];let h;e[25]!==j||e[26]!==m?(h=t.jsx(q,{children:t.jsx(q.Content,{className:"p-4",children:t.jsxs("div",{className:"flex items-center gap-3",children:[y,t.jsxs("div",{children:[m,j]})]})})}),e[25]=j,e[26]=m,e[27]=h):h=e[27];let c,g;e[28]===Symbol.for("react.memo_cache_sentinel")?(c=t.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-yellow-100 text-yellow-600 dark:bg-yellow-900/30 dark:text-yellow-400",children:t.jsx(xe,{className:"h-5 w-5"})}),g=t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Pending"}),e[28]=c,e[29]=g):(c=e[28],g=e[29]);let k;e[30]!==i.totalDepth?(k=i.totalDepth.toLocaleString(),e[30]=i.totalDepth,e[31]=k):k=e[31];let w;e[32]!==k?(w=t.jsx(q,{children:t.jsx(q.Content,{className:"p-4",children:t.jsxs("div",{className:"flex items-center gap-3",children:[c,t.jsxs("div",{children:[g,t.jsx("p",{className:"text-xl font-bold text-yellow-600 dark:text-yellow-400",children:k})]})]})})}),e[32]=k,e[33]=w):w=e[33];let C,P;e[34]===Symbol.for("react.memo_cache_sentinel")?(C=t.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-green-100 text-green-600 dark:bg-green-900/30 dark:text-green-400",children:t.jsx(oe,{className:"h-5 w-5"})}),P=t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Completed"}),e[34]=C,e[35]=P):(C=e[34],P=e[35]);let S;e[36]!==i.totalCompleted?(S=i.totalCompleted.toLocaleString(),e[36]=i.totalCompleted,e[37]=S):S=e[37];let A;e[38]!==S?(A=t.jsx(q,{children:t.jsx(q.Content,{className:"p-4",children:t.jsxs("div",{className:"flex items-center gap-3",children:[C,t.jsxs("div",{children:[P,t.jsx("p",{className:"text-xl font-bold text-green-600 dark:text-green-400",children:S})]})]})})}),e[38]=S,e[39]=A):A=e[39];let M,Q;e[40]===Symbol.for("react.memo_cache_sentinel")?(M=t.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-purple-100 text-purple-600 dark:bg-purple-900/30 dark:text-purple-400",children:t.jsx(me,{className:"h-5 w-5"})}),Q=t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Avg. Time"}),e[40]=M,e[41]=Q):(M=e[40],Q=e[41]);let F;e[42]!==i.avgTime?(F=i.avgTime.toFixed(2),e[42]=i.avgTime,e[43]=F):F=e[43];let T;e[44]!==F?(T=t.jsx(q,{children:t.jsx(q.Content,{className:"p-4",children:t.jsxs("div",{className:"flex items-center gap-3",children:[M,t.jsxs("div",{children:[Q,t.jsxs("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:[F,"s"]})]})]})})}),e[44]=F,e[45]=T):T=e[45];let $;return e[46]!==h||e[47]!==w||e[48]!==A||e[49]!==T?($=t.jsxs("div",{className:"grid grid-cols-2 gap-4 lg:grid-cols-4",children:[h,w,A,T]}),e[46]=h,e[47]=w,e[48]=A,e[49]=T,e[50]=$):$=e[50],$}function De(l,e){return l+e}function ze(l){return l!==null}function Ee(l){return l.avg_duration_seconds!==null?l.avg_duration_seconds:l.avg_duration_ms!==null?l.avg_duration_ms/1e3:null}function Ke(l,e){return l+e.workers_assigned}function Be(l,e){return l+e.failed_total}function He(l,e){return l+e.completed_total}function Ie(l,e){return l+e.depth}function Oe(l){return l.status==="active"}function Ge(l){const e=z.c(10),{error:s,onRetry:r}=l;let o,a;e[0]===Symbol.for("react.memo_cache_sentinel")?(o=t.jsx(de,{className:"h-12 w-12 text-red-500 mb-4"}),a=t.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Failed to load queues"}),e[0]=o,e[1]=a):(o=e[0],a=e[1]);const n=s instanceof Error?s.message:"An error occurred";let u;e[2]!==n?(u=t.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:n}),e[2]=n,e[3]=u):u=e[3];let b;e[4]===Symbol.for("react.memo_cache_sentinel")?(b=t.jsx(ne,{className:"h-4 w-4"}),e[4]=b):b=e[4];let d;e[5]!==r?(d=t.jsxs(D,{onPress:r,children:[b,"Try Again"]}),e[5]=r,e[6]=d):d=e[6];let x;return e[7]!==u||e[8]!==d?(x=t.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[o,a,u,d]}),e[7]=u,e[8]=d,e[9]=x):x=e[9],x}function Ve(l){const e=z.c(4),{hasFilters:s}=l;let r,o;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=t.jsx(le,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),o=t.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-1",children:"No queues found"}),e[0]=r,e[1]=o):(r=e[0],o=e[1]);const a=s?"Try adjusting your search or filter criteria":"No queues are currently configured";let n;return e[2]!==a?(n=t.jsx(q,{children:t.jsxs(q.Content,{className:"py-12 text-center",children:[r,o,t.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:a})]})}),e[2]=a,e[3]=n):n=e[3],n}function We(l){const e=z.c(36),{confirmAction:s,onClose:r,onConfirm:o,isPending:a}=l;let n;e[0]!==s?.action?(n=()=>s?.action==="clear"?"Clear Queue":s?.action==="pause"?"Pause Queue":"Resume Queue",e[0]=s?.action,e[1]=n):n=e[1];const u=n;let b;e[2]!==s?(b=()=>{if(!s)return"";const{action:S,queue:A}=s;return S==="clear"?`Are you sure you want to clear all ${A.depth.toLocaleString()} pending tasks from "${A.name}"? This action cannot be undone.`:S==="pause"?`Are you sure you want to pause the queue "${A.name}"? Workers will stop processing new tasks.`:`Resume processing tasks in queue "${A.name}"?`},e[2]=s,e[3]=b):b=e[3];const d=b,x=s!==null;let p;e[4]!==r?(p=S=>!S&&r(),e[4]=r,e[5]=p):p=e[5];const N=u();let f;e[6]!==N?(f=t.jsx(U.Header,{children:t.jsx(U.Title,{children:N})}),e[6]=N,e[7]=f):f=e[7];const v=`
							flex h-10 w-10 items-center justify-center rounded-full shrink-0
							${s?.action==="clear"?"bg-red-100 text-red-600":"bg-yellow-100 text-yellow-600"}
						`;let _;e[8]===Symbol.for("react.memo_cache_sentinel")?(_=t.jsx(ye,{className:"h-5 w-5"}),e[8]=_):_=e[8];let i;e[9]!==v?(i=t.jsx("div",{className:v,children:_}),e[9]=v,e[10]=i):i=e[10];const y=d();let m;e[11]!==y?(m=t.jsx("div",{children:t.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:y})}),e[11]=y,e[12]=m):m=e[12];let j;e[13]!==m||e[14]!==i?(j=t.jsx(U.Body,{children:t.jsxs("div",{className:"flex items-start gap-3",children:[i,m]})}),e[13]=m,e[14]=i,e[15]=j):j=e[15];let h;e[16]!==a||e[17]!==r?(h=t.jsx(D,{variant:"ghost",onPress:r,isDisabled:a,children:"Cancel"}),e[16]=a,e[17]=r,e[18]=h):h=e[18];const c=s?.action==="clear"?"danger":"primary";let g;e[19]!==a?(g=a?t.jsx(re,{size:"sm"}):null,e[19]=a,e[20]=g):g=e[20];const k=u();let w;e[21]!==a||e[22]!==o||e[23]!==c||e[24]!==g||e[25]!==k?(w=t.jsxs(D,{variant:c,onPress:o,isDisabled:a,children:[g,k]}),e[21]=a,e[22]=o,e[23]=c,e[24]=g,e[25]=k,e[26]=w):w=e[26];let C;e[27]!==h||e[28]!==w?(C=t.jsxs(U.Footer,{children:[h,w]}),e[27]=h,e[28]=w,e[29]=C):C=e[29];let P;return e[30]!==j||e[31]!==C||e[32]!==x||e[33]!==p||e[34]!==f?(P=t.jsxs(U,{isOpen:x,onOpenChange:p,children:[f,j,C]}),e[30]=j,e[31]=C,e[32]=x,e[33]=p,e[34]=f,e[35]=P):P=e[35],P}function ct(){const[l,e]=ee.useState(""),[s,r]=ee.useState("all"),[o,a]=ee.useState(null),n=fe(),{data:u,isLoading:b,error:d,refetch:x,isFetching:p}=he({queryKey:["queues"],queryFn:()=>te.getQueues(),refetchInterval:1e4}),N=u?.items??[],f=se({mutationFn:c=>te.pauseQueue(c),onSuccess:()=>{n.invalidateQueries({queryKey:["queues"]})}}),v=se({mutationFn:c=>te.resumeQueue(c),onSuccess:()=>{n.invalidateQueries({queryKey:["queues"]})}}),_=se({mutationFn:c=>te.clearQueue(c),onSuccess:()=>{n.invalidateQueries({queryKey:["queues"]})}}),i=f.isPending||v.isPending||_.isPending,y=ee.useMemo(()=>N.filter(c=>{const g=c.name.toLowerCase().includes(l.toLowerCase()),k=s==="all"||c.status===s;return g&&k}),[N,l,s]),m=(c,g)=>{a({action:c,queue:g})},j=async()=>{if(!o)return;const{action:c,queue:g}=o;try{switch(c){case"pause":await f.mutateAsync(g.name);break;case"resume":await v.mutateAsync(g.name);break;case"clear":await _.mutateAsync(g.name);break}}finally{a(null)}};if(d)return t.jsx(Ge,{error:d,onRetry:()=>x()});const h=l!==""||s!=="all";return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Queues"}),t.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Monitor and manage your task queues"})]}),t.jsxs(D,{variant:"outline",onPress:()=>x(),isDisabled:p,children:[t.jsx(ne,{className:`h-4 w-4 ${p?"animate-spin":""}`}),"Refresh"]})]}),b?t.jsx("div",{className:"flex items-center justify-center py-12",children:t.jsx(re,{size:"lg"})}):t.jsxs(t.Fragment,{children:[t.jsx(Le,{queues:N}),t.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row",children:[t.jsx("div",{className:"flex-1 max-w-md",children:t.jsx(ge,{placeholder:"Search queues...",value:l,onChange:e})}),t.jsx("div",{className:"flex gap-2",children:["all","active","paused","draining"].map(c=>t.jsx(D,{variant:s===c?"primary":"outline",size:"sm",onPress:()=>r(c),children:c.charAt(0).toUpperCase()+c.slice(1)},c))})]}),y.length===0?t.jsx(Ve,{hasFilters:h}):t.jsx("div",{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-3",children:y.map(c=>t.jsx(Re,{queue:c,onAction:m},c.name))})]}),t.jsx(We,{confirmAction:o,onClose:()=>a(null),onConfirm:j,isPending:i})]})}export{ct as default};
