import{b as F,j as s}from"./query-vendor-DJBV9M4k.js";import{c as B,a as T,C as w,b as L,L as E,d as $,e as q,g as I,B as M}from"./index-Bd7Eqoup.js";import{a as D}from"./api-D3yPf1fc.js";import{C as R}from"./circle-x-CnIbKxAQ.js";import{A}from"./activity-CyTRiyfQ.js";import{C as H}from"./clock-DFfU30N8.js";import{C as Q}from"./circle-check-BD6xzXDv.js";import"./react-vendor-UO7EsjdD.js";import"./ui-vendor-CGdvvLxe.js";const K=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],O=B("trending-up",K);function C(e){const t=T.c(20),{title:i,value:j,icon:m,trend:a,className:r}=e,l=r===void 0?"":r;let c;t[0]!==i?(c=s.jsx("p",{className:"text-sm font-medium text-zinc-500 dark:text-zinc-400",children:i}),t[0]=i,t[1]=c):c=t[1];let n;t[2]!==j?(n=typeof j=="number"?j.toLocaleString():j,t[2]=j,t[3]=n):n=t[3];let d;t[4]!==n?(d=s.jsx("p",{className:"mt-2 text-3xl font-semibold text-zinc-900 dark:text-zinc-100",children:n}),t[4]=n,t[5]=d):d=t[5];let x;t[6]!==a?(x=a&&s.jsxs("div",{className:"mt-2 flex items-center gap-1",children:[s.jsx(O,{className:`h-4 w-4 ${a.value>=0?"text-emerald-500":"text-red-500"}`}),s.jsxs("span",{className:`text-sm font-medium ${a.value>=0?"text-emerald-600":"text-red-600"}`,children:[a.value>=0?"+":"",a.value,"%"]}),s.jsx("span",{className:"text-sm text-zinc-500 dark:text-zinc-400",children:a.label})]}),t[6]=a,t[7]=x):x=t[7];let f;t[8]!==c||t[9]!==d||t[10]!==x?(f=s.jsxs("div",{className:"flex-1",children:[c,d,x]}),t[8]=c,t[9]=d,t[10]=x,t[11]=f):f=t[11];let u;t[12]!==m?(u=s.jsx("div",{className:"rounded-lg bg-blue-50 p-3 dark:bg-blue-900/30",children:m}),t[12]=m,t[13]=u):u=t[13];let h;t[14]!==f||t[15]!==u?(h=s.jsx(L,{className:"p-6",children:s.jsxs("div",{className:"flex items-start justify-between",children:[f,u]})}),t[14]=f,t[15]=u,t[16]=h):h=t[16];let p;return t[17]!==l||t[18]!==h?(p=s.jsx(w,{className:l,children:h}),t[17]=l,t[18]=h,t[19]=p):p=t[19],p}function P(e){const t=T.c(16),{task:i}=e;let j;t[0]===Symbol.for("react.memo_cache_sentinel")?(j=s.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-zinc-100 dark:bg-zinc-800",children:s.jsx(A,{className:"h-4 w-4 text-zinc-600 dark:text-zinc-400"})}),t[0]=j):j=t[0];let m;t[1]!==i.name?(m=s.jsx("p",{className:"text-sm font-medium text-zinc-900 dark:text-zinc-100",children:i.name}),t[1]=i.name,t[2]=m):m=t[2];let a;t[3]!==i.queue?(a=s.jsx("p",{className:"text-xs text-zinc-500 dark:text-zinc-400",children:i.queue}),t[3]=i.queue,t[4]=a):a=t[4];let r;t[5]!==m||t[6]!==a?(r=s.jsxs("div",{className:"flex items-center gap-3",children:[j,s.jsxs("div",{children:[m,a]})]}),t[5]=m,t[6]=a,t[7]=r):r=t[7];let l;t[8]!==i.status?(l=I(i.status),t[8]=i.status,t[9]=l):l=t[9];let c;t[10]!==l||t[11]!==i.status?(c=s.jsx(M,{variant:l,dot:!0,children:i.status}),t[10]=l,t[11]=i.status,t[12]=c):c=t[12];let n;return t[13]!==r||t[14]!==c?(n=s.jsxs("div",{className:"flex items-center justify-between py-3",children:[r,c]}),t[13]=r,t[14]=c,t[15]=n):n=t[15],n}function le(){const e=T.c(42);let t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t={queryKey:["dashboard"],queryFn:D.getDashboardSummary,refetchInterval:5e3},e[0]=t):t=e[0];const{data:i,isLoading:j,error:m}=F(t);if(j){let o;return e[1]===Symbol.for("react.memo_cache_sentinel")?(o=s.jsx(E,{label:"Loading dashboard..."}),e[1]=o):o=e[1],o}if(m){let o,g;e[2]===Symbol.for("react.memo_cache_sentinel")?(o=s.jsx(R,{className:"h-12 w-12 text-red-500"}),g=s.jsx("p",{className:"text-lg font-medium text-zinc-900 dark:text-zinc-100",children:"Failed to load dashboard"}),e[2]=o,e[3]=g):(o=e[2],g=e[3]);const N=m instanceof Error?m.message:"An error occurred";let v;return e[4]!==N?(v=s.jsxs("div",{className:"flex flex-col items-center justify-center gap-4 p-12",children:[o,g,s.jsx("p",{className:"text-sm text-zinc-500",children:N})]}),e[4]=N,e[5]=v):v=e[5],v}let a,r,l,c,n,d,x,f,u;if(e[6]!==i){l=i??{total_tasks:0,running_tasks:0,pending_tasks:0,completed_tasks:0,failed_tasks:0,success_rate:0,queues:[],workers:[],recent_activity:[]},f="space-y-6";let o;e[16]===Symbol.for("react.memo_cache_sentinel")?(o=s.jsx(A,{className:"h-6 w-6 text-blue-600"}),e[16]=o):o=e[16];let g;e[17]===Symbol.for("react.memo_cache_sentinel")?(g=s.jsx(H,{className:"h-6 w-6 text-cyan-600"}),e[17]=g):g=e[17];const N=`${l.success_rate.toFixed(1)}%`;let v;e[18]===Symbol.for("react.memo_cache_sentinel")?(v=s.jsx(Q,{className:"h-6 w-6 text-emerald-600"}),e[18]=v):v=e[18];let z;e[19]!==N?(z=s.jsx(C,{title:"Success Rate",value:N,icon:v}),e[19]=N,e[20]=z):z=e[20];let S;e[21]===Symbol.for("react.memo_cache_sentinel")?(S=s.jsx(R,{className:"h-6 w-6 text-red-600"}),e[21]=S):S=e[21],u=s.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[s.jsx(C,{title:"Total Tasks",value:l.total_tasks,icon:o}),s.jsx(C,{title:"Running",value:l.running_tasks,icon:g}),z,s.jsx(C,{title:"Failed",value:l.failed_tasks,icon:S})]}),x="grid gap-6 lg:grid-cols-3",r=w,n="lg:col-span-2",e[22]===Symbol.for("react.memo_cache_sentinel")?(d=s.jsx($,{children:s.jsx(q,{children:"Recent Activity"})}),e[22]=d):d=e[22],a=L,c=l.recent_activity.length>0?s.jsx("div",{className:"divide-y divide-zinc-200 dark:divide-zinc-800",children:l.recent_activity.slice(0,10).map(V)}):s.jsx("p",{className:"py-8 text-center text-sm text-zinc-500",children:"No recent activity"}),e[6]=i,e[7]=a,e[8]=r,e[9]=l,e[10]=c,e[11]=n,e[12]=d,e[13]=x,e[14]=f,e[15]=u}else a=e[7],r=e[8],l=e[9],c=e[10],n=e[11],d=e[12],x=e[13],f=e[14],u=e[15];let h;e[23]!==a||e[24]!==c?(h=s.jsx(a,{children:c}),e[23]=a,e[24]=c,e[25]=h):h=e[25];let p;e[26]!==r||e[27]!==n||e[28]!==d||e[29]!==h?(p=s.jsxs(r,{className:n,children:[d,h]}),e[26]=r,e[27]=n,e[28]=d,e[29]=h,e[30]=p):p=e[30];let b;e[31]===Symbol.for("react.memo_cache_sentinel")?(b=s.jsx($,{children:s.jsx(q,{children:"Queue Health"})}),e[31]=b):b=e[31];let y;e[32]!==l.queues?(y=s.jsxs(w,{children:[b,s.jsx(L,{children:l.queues.length>0?s.jsx("div",{className:"space-y-4",children:l.queues.map(U)}):s.jsx("p",{className:"py-8 text-center text-sm text-zinc-500",children:"No queues configured"})})]}),e[32]=l.queues,e[33]=y):y=e[33];let _;e[34]!==y||e[35]!==x||e[36]!==p?(_=s.jsxs("div",{className:x,children:[p,y]}),e[34]=y,e[35]=x,e[36]=p,e[37]=_):_=e[37];let k;return e[38]!==_||e[39]!==f||e[40]!==u?(k=s.jsxs("div",{className:f,children:[u,_]}),e[38]=_,e[39]=f,e[40]=u,e[41]=k):k=e[41],k}function U(e){return s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"font-medium text-zinc-900 dark:text-zinc-100",children:e.name}),s.jsxs("span",{className:"text-zinc-500 dark:text-zinc-400",children:[e.depth," pending"]})]}),s.jsx("div",{className:"mt-1 h-2 rounded-full bg-zinc-200 dark:bg-zinc-700",children:s.jsx("div",{className:"h-2 rounded-full bg-blue-600",style:{width:`${Math.min(e.processing/Math.max(e.depth+e.processing,1)*100,100)}%`}})})]},e.name)}function V(e){return s.jsx(P,{task:e},e.id)}export{le as default};
