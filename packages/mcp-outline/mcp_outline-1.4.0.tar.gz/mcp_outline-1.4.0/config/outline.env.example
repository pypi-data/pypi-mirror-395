# Outline Configuration for Local Development
# Copy this file to config/outline.env and fill in the values

# ============================================================================
# SECURITY KEYS (REQUIRED)
# ============================================================================
# Generate with: openssl rand -hex 32
# IMPORTANT: Replace both values below with unique generated keys
SECRET_KEY=REPLACE_WITH_openssl_rand_hex_32_OUTPUT
UTILS_SECRET=REPLACE_WITH_openssl_rand_hex_32_OUTPUT

# ============================================================================
# APPLICATION URL (REQUIRED)
# ============================================================================
# Outline runs on port 3030 internally (separate from MCP server port 3000)
# Access Outline at http://localhost:3030
URL=http://localhost:3030
PORT=3030
NODE_ENV=development
FORCE_HTTPS=false

# ============================================================================
# DATABASE (REQUIRED)
# ============================================================================
# PostgreSQL connection string
DATABASE_URL=postgres://outline:outline@postgres:5432/outline
DATABASE_CONNECTION_POOL_MIN=2
DATABASE_CONNECTION_POOL_MAX=10
PGSSLMODE=disable

# ============================================================================
# REDIS (REQUIRED)
# ============================================================================
# Redis connection string for caching and sessions
REDIS_URL=redis://redis:6379

# ============================================================================
# FILE STORAGE (REQUIRED)
# ============================================================================
# Local file storage configuration
FILE_STORAGE=local
FILE_STORAGE_LOCAL_ROOT_DIR=/var/lib/outline/data
FILE_STORAGE_UPLOAD_MAX_SIZE=262144000
FILE_STORAGE_IMPORT_MAX_SIZE=52428800
FILE_STORAGE_WORKSPACE_IMPORT_MAX_SIZE=52428800

# ============================================================================
# AUTHENTICATION - OIDC (Dex for local development)
# ============================================================================
# OpenID Connect configuration - using Dex as the auth provider
OIDC_CLIENT_ID=outline
OIDC_CLIENT_SECRET=outline-secret
OIDC_AUTH_URI=http://localhost:5556/dex/auth
OIDC_TOKEN_URI=http://dex:5556/dex/token
OIDC_USERINFO_URI=http://dex:5556/dex/userinfo
OIDC_LOGOUT_URI=http://dex:5556/dex/end_session
OIDC_USERNAME_CLAIM=preferred_username
OIDC_DISPLAY_NAME=Dex (Development)
OIDC_SCOPES=openid profile email

# ============================================================================
# RATE LIMITING
# ============================================================================
RATE_LIMITER_ENABLED=true
RATE_LIMITER_REQUESTS=1000
RATE_LIMITER_DURATION_WINDOW=60

# ============================================================================
# LOGGING
# ============================================================================
LOG_LEVEL=info
# Uncomment to enable debug logging for specific modules
# DEBUG=cache,presenters,events,http

# ============================================================================
# OPTIONAL FEATURES
# ============================================================================
# Disable update checks in development
ENABLE_UPDATES=false

# Uncomment to enable email notifications (requires SMTP server)
# SMTP_HOST=
# SMTP_PORT=587
# SMTP_USERNAME=
# SMTP_PASSWORD=
# SMTP_FROM_EMAIL=outline@example.com
# SMTP_REPLY_EMAIL=noreply@example.com
# SMTP_TLS_CIPHERS=
# SMTP_SECURE=true

# Uncomment for real-time collaboration features
# COLLABORATION_URL=

# Uncomment to customize default language
# DEFAULT_LANGUAGE=en_US

# Uncomment to allow public document sharing
# ENABLE_LINK_PREVIEWS=true
