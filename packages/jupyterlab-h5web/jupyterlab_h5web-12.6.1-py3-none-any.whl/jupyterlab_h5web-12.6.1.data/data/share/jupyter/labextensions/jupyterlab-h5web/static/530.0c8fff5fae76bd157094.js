/*! For license information please see 530.0c8fff5fae76bd157094.js.LICENSE.txt */
"use strict";(self.webpackChunkjupyterlab_h5web=self.webpackChunkjupyterlab_h5web||[]).push([[179,530],{1020:(e,t,r)=>{var n=r(3345),a=Symbol.for("react.element"),o=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,c=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function d(e,t,r){var n,o={},d=null,l=null;for(n in void 0!==r&&(d=""+r),void 0!==t.key&&(d=""+t.key),void 0!==t.ref&&(l=t.ref),t)i.call(t,n)&&!s.hasOwnProperty(n)&&(o[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===o[n]&&(o[n]=t[n]);return{$$typeof:a,type:e,key:d,ref:l,props:o,_owner:c.current}}t.Fragment=o,t.jsx=d,t.jsxs=d},2530:(e,t,r)=>{r.r(t),r.d(t,{default:()=>A});var n={};r.r(n),r.d(n,{default:()=>M});var a=r(9715),o=r(8134),i=r(4100),c=r(1593),s=r(9159),d=r(7262),l=r(5197);const u=new d.Token("@jupyterlab/application:ILayoutRestorer","A service providing application layout restoration functionality. Use this to have your activities restored across page loads.");var p;!function(e){function t(r){return r&&r.type?"tab-area"===r.type?{type:"tab-area",currentIndex:r.currentIndex,widgets:r.widgets.map(t=>e.nameProperty.get(t)).filter(e=>!!e)}:{type:"split-area",orientation:r.orientation,sizes:r.sizes,children:r.children.map(t).filter(e=>!!e)}:null}function r(e,t){if(!e)return null;const n=e.type||"unknown";if("unknown"===n||"tab-area"!==n&&"split-area"!==n)return console.warn(`Attempted to deserialize unknown type: ${n}`),null;if("tab-area"===n){const{currentIndex:r,widgets:n}=e,a={type:"tab-area",currentIndex:r||0,widgets:n&&n.map(e=>t.get(e)).filter(e=>!!e)||[]};return a.currentIndex>a.widgets.length-1&&(a.currentIndex=0),a}const{orientation:a,sizes:o,children:i}=e;return{type:"split-area",orientation:a,sizes:o||[],children:i&&i.map(e=>r(e,t)).filter(e=>!!e)||[]}}e.nameProperty=new l.AttachedProperty({name:"name",create:e=>""}),e.serializeMain=function(r){const n={dock:r&&r.dock&&t(r.dock.main)||null};if(r&&r.currentWidget){const t=e.nameProperty.get(r.currentWidget);t&&(n.current=t)}return n},e.deserializeMain=function(e,t){if(!e)return null;const n=e.current||null,a=e.dock||null;return{currentWidget:n&&t.has(n)&&t.get(n)||null,dock:a?{main:r(a,t)}:null}}}(p||(p={}));const m=new d.Token("@jupyterlab/application:IMimeDocumentTracker","A widget tracker for documents rendered using a mime renderer extension. Use this if you want to list and interact with documents rendered by such extensions.");var f;!function(e){e.factoryNameProperty=new l.AttachedProperty({name:"factoryName",create:()=>{}})}(f||(f={}));var y=r(3427),h=r(438),g=r(2310);const v=new s.LabIcon({name:"hdf5-icon",svgstr:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n <defs>\n  <linearGradient id="BlueGreen" x2="0" y1="20" y2="180" gradientTransform="matrix(.032652 0 0 .032652 -.16134 3.4472)" gradientUnits="userSpaceOnUse">\n   <stop stop-color="#0515fe" offset="0"/>\n   <stop stop-color="#2cab28" offset="1"/>\n  </linearGradient>\n </defs>\n <path d="m5.2622 3.5865a0.78373 0.78373 0 0 0-0.77185 0.79475v2.7847h-2.9229v-2.7738a0.78373 0.78373 0 0 0-0.79545-0.79475 0.78373 0.78373 0 0 0-0.77185 0.79475v7.1622a0.78373 0.78373 0 1 0 1.5673 0v-2.8211h4.4902v-3.5327c2.3805 0.22492 3.3059 1.5899 3.2949 2.8309-0.012074 1.3686-1.1541 2.8626-4.1233 2.7672a0.78373 0.78373 0 1 0-0.050317 1.5665c2.1801 0.07003 3.8328-0.70129 4.7927-1.8367v1.0903a0.78373 0.78373 0 1 0 1.5673 0v-2.8462h2.6107a0.78373 0.78373 0 1 0 0-1.5673h-2.6107v-2.0404h3.6663a0.78373 0.78373 0 1 0 0-1.5673h-9.8031a0.78373 0.78373 0 0 0-0.13992-0.011092z" fill="url(#BlueGreen)" stroke-width=".032652"/>\n</svg>\n'}),w=new s.LabIcon({name:"h5web-icon",svgstr:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" viewBox="0 0 192 192" xmlns="http://www.w3.org/2000/svg">\n <path class="h5web-icon" fill="#5500aa" d="m13.774 190.86c-5.2034-1.383-11.266-7.7278-12.655-13.244-1.5699-6.2347-1.5699-156.88 0-163.12 1.493-5.9294 7.3929-11.829 13.322-13.322 6.2347-1.5699 156.88-1.5699 163.12 0 5.9294 1.493 11.829 7.3929 13.322 13.322 1.5699 6.2347 1.5699 156.88 0 163.12-1.493 5.9294-7.3929 11.829-13.322 13.322-5.7714 1.4532-158.3 1.3806-163.78-0.078zm90.226-42.803v-8l-8.75-0.0137c-13.925-0.0217-13.138 0.69903-13.468-12.345l-0.28174-11.142h-11.5c-6.325 0-12.288 0.32338-13.25 0.71862-1.5561 0.63898-1.75 2.3678-1.75 15.602 0 13.801 0.1645 15.128 2.2612 18.239 1.2437 1.8455 3.3812 3.6672 4.75 4.0482 1.3688 0.38101 11.376 0.73761 22.239 0.79243l19.75 0.0997zm28.035 5.5c4.5796-4.0878 4.9646-6.7681 4.9646-34.564 0-35.16 0.58689-34.289-23.75-35.259l-14.25-0.56778v16.786l10.5 0.60452 0.26598 27.843 0.26599 27.843 9.8814-0.34321c8.1583-0.28336 10.272-0.69198 12.122-2.3432zm-39.535-62v-8l-8-1-0.5374-46.72-10.969 0.37544c-16.388 0.56092-15.431-1.2993-15.754 30.621-0.19704 19.438 0.0537 26.335 1.0261 28.224 2.0026 3.8907 6.7345 4.9397 21.235 4.7079l13-0.20788zm43.5-36.477c1.1477-0.72437 1.5-3.0106 1.5-9.7347v-8.788l-47.5-0.5362v20.036l22.25-0.01531c12.246-0.0084 22.924-0.44099 23.75-0.96202z"/>\n</svg>\n'}),b={name:"hdf5file",icon:v,displayName:"HDF5 File",extensions:[".h5",".hdf",".hdf5",".hf5",".nx",".nxs",".nx5",".nexus",".cxi",".nc",".nc4",".loom",".jld2",".h5ebsd",".edaxh5",".oh5",".dream3d",".geoh5",".h5oina",".h5ad"],mimeTypes:["application/x-hdf5"],fileFormat:"base64"};var x=r(4848),F=r(3480),T=r(1269),k=r(3345);const P=function(e){const{filePath:t}=e,{baseUrl:r,token:n}=T.ServerConnection.makeSettings(),a=(0,k.useMemo)(()=>(0,F.createBasicFetcher)({headers:n?{Authorization:`token ${n}`}:{}}),[n]);return(0,x.jsx)("div",{className:"h5web-root",children:(0,x.jsx)(F.H5GroveProvider,{url:`${r.endsWith("/")?r.slice(0,-1):r}/h5web`,filepath:t,fetcher:a,children:(0,x.jsx)(F.App,{disableDarkMode:!0,getFeedbackURL:e=>(0,F.getFeedbackMailto)(e,"h5web@esrf.fr")})})})};class j extends a.ReactWidget{constructor(e){super(),Object.defineProperty(this,"filePath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.addClass("jp-ReactWidget"),this.filePath=e,this.title.icon=w}render(){return(0,x.jsx)(P,{filePath:this.filePath})}}o.ABCWidgetFactory;const R="h5web-open";var I=r(5256),_=r(5338),W=r(5849);const O=function(e){const{path:t}=e,[r,n]=(0,W.useMeasure)();return(0,x.jsx)("div",{ref:n,className:"h5web-in-cell",children:r&&r.width>0&&(0,x.jsx)(P,{filePath:t})})};class z extends I.Widget{constructor(e){super(),Object.defineProperty(this,"mimeType",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.mimeType=e.mimeType}async renderModel(e){const t=e.data[this.mimeType];if("string"!=typeof t)throw new TypeError("Expected string");(0,_.H)(this.node).render((0,x.jsx)(O,{path:t}))}}const M={id:"jupyter-h5web:mime-plugin",rendererFactory:{safe:!0,mimeTypes:b.mimeTypes,createRenderer:e=>new z(e)},rank:0,dataType:"string"},A={id:"jupyterlab-h5web",autoStart:!0,requires:[h.IDefaultFileBrowser,i.IRenderMimeRegistry,y.IDocumentManager],activate:(e,t,r,d)=>{console.log("JupyterLab extension jupyterlab-h5web is activated!"),e.docRegistry.addFileType(b);const[l]=function(e){const t=[],r=new a.WidgetTracker({namespace:"application-mimedocuments"});return e.forEach(e=>{let n=e.default;e.hasOwnProperty("__esModule")||(n=e),Array.isArray(n)||(n=[n]),n.forEach(e=>{t.push(function(e,t){return{id:t.id,description:t.description,requires:[i.IRenderMimeRegistry,c.ITranslator],autoStart:!0,activate:(r,n,a)=>{if(void 0!==t.rank?n.addFactory(t.rendererFactory,t.rank):n.addFactory(t.rendererFactory),!t.documentWidgetFactoryOptions)return;const i=r.docRegistry;let c=[];c=Array.isArray(t.documentWidgetFactoryOptions)?t.documentWidgetFactoryOptions:[t.documentWidgetFactoryOptions],t.fileTypes&&t.fileTypes.forEach(e=>{e.icon&&(e={...e,icon:s.LabIcon.resolve({icon:e.icon})}),r.docRegistry.addFileType(e)}),c.forEach(r=>{const c=r.toolbarFactory?e=>r.toolbarFactory(e.content.renderer):void 0,s=new o.MimeDocumentFactory({renderTimeout:t.renderTimeout,dataType:t.dataType,rendermime:n,modelName:r.modelName,name:r.name,primaryFileType:i.getFileType(r.primaryFileType),fileTypes:r.fileTypes,defaultFor:r.defaultFor,defaultRendered:r.defaultRendered,toolbarFactory:c,translator:a,factory:t.rendererFactory});i.addWidgetFactory(s),s.widgetCreated.connect((t,r)=>{f.factoryNameProperty.set(r,s.name),r.context.pathChanged.connect(()=>{e.save(r)}),e.add(r)})})}}}(r,e))})}),t.push({id:"@jupyterlab/application-extension:mimedocument",description:"Provides a mime document widget tracker.",optional:[u],provides:m,autoStart:!0,activate:(e,t)=>(t&&t.restore(r,{command:"docmanager:open",args:e=>({path:e.context.path,factory:f.factoryNameProperty.get(e)}),name:e=>`${e.context.path}:${f.factoryNameProperty.get(e)}`}),r)}),t}([n]);e.registerPlugin(l),l.activate(e,r),function(e,t,r){const{commands:n}=e;n.addCommand(R,{label:"View HDF5 file contents",caption:"Explore and visualize the contents of the HDF5 file",icon:w,execute:()=>{const[r]=[...t.selectedItems()],n=r.path,o=n.startsWith("RTC:")?n.slice(4):n,i=new j(o),c=new a.MainAreaWidget({content:i});c.title.label=r.name,e.shell.add(c,"main")}}),function(e,t){const{commands:r}=e,n=t.open.bind(t);t.open=(e,a="default",o,i)=>{if(!b.extensions.includes(g.PathExt.extname(e)))return n.call(t,e,a,o,i);r.execute(R)}}(e,r),e.contextMenu.addItem({command:R,selector:`.jp-DirListing-item[data-file-type="${b.name}"]`,rank:0})}(e,t,d)}}},4848:(e,t,r)=>{e.exports=r(1020)},5338:(e,t,r)=>{var n=r(7628);t.H=n.createRoot,n.hydrateRoot}}]);