# -*- coding: utf-8 -*-
"""Evolution Module

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/13Uzg5q0FiRozf-GB4uZKRNUKuk_lqzWp
"""

import json
import os
import time

EVOLUTION_FILE = "evolution.json"

def enable_evolution():
    """
    Enables the self-growing organ.
    Initializes a local JSON store that tracks the system's growth over time.
    """
    if not os.path.exists(EVOLUTION_FILE):
        initial_state = {
            "epoch": 0,
            "born_at": time.time(),
            "knowledge_nodes": 1
        }
        with open(EVOLUTION_FILE, 'w') as f:
            json.dump(initial_state, f)
        print(f"   [Evolution] Genesis block created at {EVOLUTION_FILE}")
    else:
        print(f"   [Evolution] Existing evolution data loaded from {EVOLUTION_FILE}")

    # Simulate a growth step
    update_evolution()

def update_evolution():
    try:
        with open(EVOLUTION_FILE, 'r+') as f:
            data = json.load(f)
            data['epoch'] += 1
            data['knowledge_nodes'] += 1
            f.seek(0)
            json.dump(data, f, indent=4)
            f.truncate()
    except Exception as e:
        print(f"   [Evolution] Growth inhibited: {e}")