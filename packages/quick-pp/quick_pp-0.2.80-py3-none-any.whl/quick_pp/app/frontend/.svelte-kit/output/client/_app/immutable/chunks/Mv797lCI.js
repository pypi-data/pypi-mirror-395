import{w as f,g as m}from"./Bq8R8u3d.js";const h="http://localhost:6312",l=f([]);async function g(){try{const e=await fetch(`${h}/quick_pp/database/projects`);if(!e.ok){l.set([]);return}const t=await e.json();l.set(Array.isArray(t)?t:[])}catch(e){console.error("loadProjects error",e),l.set([])}}function j(e){l.update(t=>{const n=t.findIndex(r=>String(r.project_id)===String(e.project_id));if(n===-1)return[e,...t];const a=[...t];return a[n]={...a[n],...e},a})}const i=f({title:"QPP - Petrophysical Analysis",subtitle:void 0,project:null,depthFilter:{enabled:!1,minDepth:null,maxDepth:null},zoneFilter:{enabled:!1,zones:[]}});function S(e,t){i.update(n=>({...n,title:e,subtitle:t}))}function b(e,t){i.update(n=>{const a=n.subtitle??"",r=t??"";return n.title===e&&a===r?n:{...n,title:e,subtitle:t}})}function P(e){i.update(t=>{const n=t.project&&t.project.project_id!=null?String(t.project.project_id):null,a=e&&e.project_id!=null?String(e.project_id):null,r=t.project&&t.project.name?t.project.name:null;let o=null;if(e&&e.name)o=e.name;else if(e&&e.project_id)try{const u=(m(l)||[]).find(d=>String(d.project_id)===String(e.project_id));u&&u.name&&(o=u.name)}catch{}const s=o;if(n===a&&r===s)return t;const c=e?{...e,...s?{name:s}:{}}:null;return{...t,project:c,title:c?c.name??"QPP - Petrophysical Analysis":"QPP - Petrophysical Analysis"}})}function _(e){i.update(t=>({...t,selectedWell:e}))}function N(e,t,n){i.update(a=>({...a,depthFilter:{enabled:e,minDepth:t??null,maxDepth:n??null}}))}function x(){i.update(e=>({...e,depthFilter:{enabled:!1,minDepth:null,maxDepth:null}}))}function A(e,t){i.update(n=>({...n,zoneFilter:{enabled:e,zones:t&&Array.isArray(t)?t.map(a=>String(a)):[]}}))}function k(){i.update(e=>({...e,zoneFilter:{enabled:!1,zones:[]}}))}function z(e,t){return!t?.enabled||!t.minDepth&&!t.maxDepth?e:e.filter(n=>{const a=Number(n.depth??n.DEPTH??n.Depth??NaN);return!(isNaN(a)||t.minDepth!==null&&a<t.minDepth||t.maxDepth!==null&&a>t.maxDepth)})}function y(e){if(!e||typeof e!="object")return null;const t=["name","zone","Zone","ZONE","formation","formation_name","formationName","FORMATION","formation_top","formationTop"];for(const n of t)if(n in e&&e[n]!==null&&e[n]!==void 0&&String(e[n]).trim()!=="")return String(e[n]);for(const n of Object.keys(e))if(/zone|formation/i.test(n)&&e[n]!==null&&e[n]!==void 0&&String(e[n]).trim()!=="")return String(e[n]);return null}function I(e,t){if(!t?.enabled||!t.zones||t.zones.length===0)return e;const n=new Set(t.zones.map(a=>String(a)));return e.filter(a=>{const r=y(a);return r===null?!1:n.has(r)})}export{S as a,_ as b,b as c,I as d,z as e,N as f,x as g,A as h,k as i,g as l,l as p,P as s,j as u,i as w};
