[tool.poetry]
name = "wedge-lib"
version = "3.1.29"
description = "Wedge library for django application"
authors = ["Fran√ßois Schneider <francois.schneider@wedge-digital.com>"]
license = "MIT"
readme = "README.md"
packages = [{ include = "w" }]
exclude = ["w/tests/fixtures/resultsets", "w/tests/fixtures/sandbox", "w/tests/services"]


[tool.poetry.dependencies]
python = "^3.12"
argon2-cffi = "*"
arrow = "*"
cryptography = "*"
django = "*"
djangorestframework = "*"
djangorestframework-api-key = "*"
mergedeep = "*"
openpyxl = "*"
pandas = "*"
python-dateutil = "*"
python-keycloak = "*"
pyyaml = ">=6.0.3"
pyzstd = "*"
requests = "*"
serpy = "*"
validators = "*"
var-dump = "*"
django-sms = "^0.7.0"
python-ulid = "^3.0.0"


[tool.poetry.group.dev.dependencies]
boto3 = "*"
botocore = "*"
cloudinary = "*"
django-extensions = "*"
factory-boy = "*"
moto = "==4.1.10"
psycopg2-binary = "*"
pydantic = "*"
pytest = "*"
pytest-cov = "*"
pytest-django = "*"
python-dotenv = "^1.1.0"
ruff = "*"
setuptools = "*"
twine = "*"
weasyprint = "*"
wheel = "*"
clicksend-client = "^5.0.78"
stripe = "^12.2.0"
docxtpl = "^0.20.0"
docx2txt = "^0.9"
pypdf = "*"


[build-system]
requires = ["poetry-core"]
build-backend = "poetry.core.masonry.api"

[tool.pytest.ini_options]
python_files = "test_*.py"
addopts = "--reuse-db --nomigrations -p no:warnings --tb=short"
testpaths = "w/tests"

[tool.coverage.run]
omit = [
    "*/.local/*",
    "w/debug.py",
    "w/utils.py",
    "w/ddd/*",
    "w/tests/*",
    "w/test_utils/*",
    "w/django/models.py",
    "w/django/tests/*",
    "w/drf/viewsets.py",
    "w/drf/tests/*",
    "w/drf/middlewares/cypress_middleware.py",
    "w/drf/exception_handler.py",
    "w/**/*mixin.py",
    "w/enums.py",
    "w/exceptions.py",
    # may be on day we will have to test this to avoid O% coverage
    "show_urls.py",
    "w/django/commands/abstract_maintenance_mode_command.py",
    "w/django/services/business/user_service.py",
    "w/django/templatetags/util_filters.py",
    "w/django/w_command.py",
    "w/drf/decorators/group_required.py",
    "w/drf/jwt/jwt_authentication_backend.py",
    "w/drf/jwt/jwt_viewset.py",
    "w/drf/jwt/login_viewset.py",
    "w/drf/serializers/fields.py",
    "w/drf/validators/drf_validator.py",
    "w/services/technical/backends/hasher/fake_hasher_backend.py",
    "w/services/technical/db_service.py",
]

[tool.ruff.lint.per-file-ignores]
"w/serializers/serializer.py" = ["F403", "F405"]
