{
  "version": "1",
  "metadata": {
    "marimo_version": "0.18.3"
  },
  "cells": [
    {
      "id": "Hbol",
      "code_hash": "75c59890e1382ab025bf98e77ec7d2e6",
      "outputs": [
        {
          "type": "data",
          "data": {
            "text/plain": ""
          }
        }
      ],
      "console": []
    },
    {
      "id": "MJUe",
      "code_hash": "5acc9a7e51fd94ca7def82bfdda836c9",
      "outputs": [
        {
          "type": "data",
          "data": {
            "text/markdown": "<span class=\"markdown prose dark:prose-invert contents\"><h1 id=\"ontonaut-chatbot-examples\">Ontonaut ChatBot Examples</h1>\n<span class=\"paragraph\">Stream AI responses in marimo with custom backends!</span></span>"
          }
        }
      ],
      "console": []
    },
    {
      "id": "vblA",
      "code_hash": "59818ff322cd7db8baefd658f3125a5b",
      "outputs": [
        {
          "type": "data",
          "data": {
            "text/markdown": "<span class=\"markdown prose dark:prose-invert contents\"><h2 id=\"example-1-echo-handler-testing\">Example 1: Echo Handler (Testing)</h2>\n<span class=\"paragraph\">Simple echo handler that streams your message back.</span></span>"
          }
        }
      ],
      "console": []
    },
    {
      "id": "bkHC",
      "code_hash": "411a425537db1fbcef16a65b62978a9a",
      "outputs": [
        {
          "type": "data",
          "data": {
            "text/html": "<marimo-ui-element object-id='bkHC-0' random-id='2a47036a-eeae-6a81-f6a0-d233da4a4c15'><marimo-anywidget data-initial-value='{&quot;input_text&quot;:&quot;&quot;,&quot;is_streaming&quot;:false,&quot;max_height&quot;:&quot;600px&quot;,&quot;messages&quot;:[],&quot;placeholder&quot;:&quot;Type a message to echo back...&quot;,&quot;show_timestamps&quot;:false,&quot;streaming_content&quot;:&quot;&quot;,&quot;theme&quot;:&quot;light&quot;}' data-label='null' data-js-url='&quot;./@file/5283-4487742-Zoyq3XUr.js&quot;' data-js-hash='&quot;9924e35012cc43b19df4a4bcbb6646be&quot;' data-css='&quot;/**&#92;n * Ontonaut ChatBot Styles&#92;n * Sleek, modern chat interface&#92;n */&#92;n&#92;n.ontonaut-chat-container {&#92;n  font-family: -apple-system, BlinkMacSystemFont, &#92;&quot;Segoe UI&#92;&quot;, Roboto, &#92;&quot;Helvetica Neue&#92;&quot;, Arial, sans-serif;&#92;n  border: 1px solid #e8eaed;&#92;n  border-radius: 12px;&#92;n  overflow: hidden;&#92;n  background: white;&#92;n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);&#92;n  margin: 12px 0;&#92;n  display: flex;&#92;n  flex-direction: column;&#92;n  max-width: 800px;&#92;n  transition: box-shadow 0.2s ease;&#92;n}&#92;n&#92;n.ontonaut-chat-container:hover {&#92;n  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);&#92;n}&#92;n&#92;n.ontonaut-chat-container[data-theme=&#92;&quot;dark&#92;&quot;] {&#92;n  background: #1a1a1a;&#92;n  border-color: #333333;&#92;n  color: #e0e0e0;&#92;n}&#92;n&#92;n/* Messages Area */&#92;n.ontonaut-chat-messages {&#92;n  flex: 1;&#92;n  overflow-y: auto;&#92;n  padding: 20px;&#92;n  display: flex;&#92;n  flex-direction: column;&#92;n  gap: 16px;&#92;n  max-height: 600px;&#92;n  min-height: 300px;&#92;n  background: #fafbfc;&#92;n  scroll-behavior: smooth;&#92;n}&#92;n&#92;n.ontonaut-chat-container[data-theme=&#92;&quot;dark&#92;&quot;] .ontonaut-chat-messages {&#92;n  background: #1a1a1a;&#92;n}&#92;n&#92;n/* Scrollbar styling */&#92;n.ontonaut-chat-messages::-webkit-scrollbar {&#92;n  width: 6px;&#92;n}&#92;n&#92;n.ontonaut-chat-messages::-webkit-scrollbar-track {&#92;n  background: transparent;&#92;n}&#92;n&#92;n.ontonaut-chat-messages::-webkit-scrollbar-thumb {&#92;n  background: #d1d5db;&#92;n  border-radius: 3px;&#92;n}&#92;n&#92;n.ontonaut-chat-messages::-webkit-scrollbar-thumb:hover {&#92;n  background: #9ca3af;&#92;n}&#92;n&#92;n.ontonaut-chat-container[data-theme=&#92;&quot;dark&#92;&quot;] .ontonaut-chat-messages::-webkit-scrollbar-thumb {&#92;n  background: #404040;&#92;n}&#92;n&#92;n/* Empty State */&#92;n.ontonaut-chat-empty {&#92;n  display: flex;&#92;n  align-items: center;&#92;n  justify-content: center;&#92;n  height: 100%;&#92;n  color: #9ca3af;&#92;n  font-size: 14px;&#92;n  font-style: italic;&#92;n}&#92;n&#92;n/* Message */&#92;n.ontonaut-chat-message {&#92;n  display: flex;&#92;n  gap: 12px;&#92;n  align-items: flex-start;&#92;n  animation: slideIn 0.2s ease-out;&#92;n}&#92;n&#92;n@keyframes slideIn {&#92;n  from {&#92;n    opacity: 0;&#92;n    transform: translateY(10px);&#92;n  }&#92;n  to {&#92;n    opacity: 1;&#92;n    transform: translateY(0);&#92;n  }&#92;n}&#92;n&#92;n.ontonaut-chat-message-user {&#92;n  flex-direction: row-reverse;&#92;n}&#92;n&#92;n/* Avatar */&#92;n.ontonaut-chat-avatar {&#92;n  width: 32px;&#92;n  height: 32px;&#92;n  border-radius: 50%;&#92;n  display: flex;&#92;n  align-items: center;&#92;n  justify-content: center;&#92;n  font-size: 12px;&#92;n  font-weight: 600;&#92;n  flex-shrink: 0;&#92;n  text-transform: uppercase;&#92;n}&#92;n&#92;n.ontonaut-chat-message-user .ontonaut-chat-avatar {&#92;n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);&#92;n  color: white;&#92;n}&#92;n&#92;n.ontonaut-chat-message-assistant .ontonaut-chat-avatar {&#92;n  background: linear-gradient(135deg, #10b981 0%, #059669 100%);&#92;n  color: white;&#92;n}&#92;n&#92;n.ontonaut-chat-message-system .ontonaut-chat-avatar {&#92;n  background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);&#92;n  color: white;&#92;n}&#92;n&#92;n/* Content */&#92;n.ontonaut-chat-content {&#92;n  flex: 1;&#92;n  display: flex;&#92;n  flex-direction: column;&#92;n  max-width: 70%;&#92;n}&#92;n&#92;n.ontonaut-chat-message-user .ontonaut-chat-content {&#92;n  align-items: flex-end;&#92;n}&#92;n&#92;n/* Bubble */&#92;n.ontonaut-chat-bubble {&#92;n  padding: 10px 14px;&#92;n  border-radius: 16px;&#92;n  font-size: 14px;&#92;n  line-height: 1.5;&#92;n  white-space: pre-wrap;&#92;n  word-wrap: break-word;&#92;n  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);&#92;n  animation: bubbleIn 0.15s ease-out;&#92;n}&#92;n&#92;n@keyframes bubbleIn {&#92;n  from {&#92;n    transform: scale(0.95);&#92;n    opacity: 0;&#92;n  }&#92;n  to {&#92;n    transform: scale(1);&#92;n    opacity: 1;&#92;n  }&#92;n}&#92;n&#92;n.ontonaut-chat-message-user .ontonaut-chat-bubble {&#92;n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);&#92;n  color: white;&#92;n  border-bottom-right-radius: 4px;&#92;n}&#92;n&#92;n.ontonaut-chat-message-assistant .ontonaut-chat-bubble {&#92;n  background: white;&#92;n  color: #1f2937;&#92;n  border: 1px solid #e5e7eb;&#92;n  border-bottom-left-radius: 4px;&#92;n}&#92;n&#92;n.ontonaut-chat-container[data-theme=&#92;&quot;dark&#92;&quot;] .ontonaut-chat-message-assistant .ontonaut-chat-bubble {&#92;n  background: #252525;&#92;n  color: #e0e0e0;&#92;n  border-color: #333333;&#92;n}&#92;n&#92;n.ontonaut-chat-message-system .ontonaut-chat-bubble {&#92;n  background: #fef3c7;&#92;n  color: #92400e;&#92;n  border: 1px solid #fcd34d;&#92;n  font-style: italic;&#92;n}&#92;n&#92;n.ontonaut-chat-container[data-theme=&#92;&quot;dark&#92;&quot;] .ontonaut-chat-message-system .ontonaut-chat-bubble {&#92;n  background: #2a2416;&#92;n  color: #fcd34d;&#92;n  border-color: #92400e;&#92;n}&#92;n&#92;n/* Input Section */&#92;n.ontonaut-chat-input-section {&#92;n  display: flex;&#92;n  gap: 8px;&#92;n  padding: 12px;&#92;n  background: white;&#92;n  border-top: 1px solid #e8eaed;&#92;n  align-items: flex-end;&#92;n}&#92;n&#92;n.ontonaut-chat-container[data-theme=&#92;&quot;dark&#92;&quot;] .ontonaut-chat-input-section {&#92;n  background: #1f1f1f;&#92;n  border-top-color: #333333;&#92;n}&#92;n&#92;n/* Input */&#92;n.ontonaut-chat-input {&#92;n  flex: 1;&#92;n  padding: 10px 12px;&#92;n  border: 1px solid #e5e7eb;&#92;n  border-radius: 20px;&#92;n  font-size: 14px;&#92;n  line-height: 1.5;&#92;n  font-family: inherit;&#92;n  resize: none;&#92;n  outline: none;&#92;n  background: #fafbfc;&#92;n  color: #1f2937;&#92;n  transition: all 0.15s ease;&#92;n  max-height: 150px;&#92;n}&#92;n&#92;n.ontonaut-chat-input:focus {&#92;n  border-color: #10b981;&#92;n  background: white;&#92;n  box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);&#92;n}&#92;n&#92;n.ontonaut-chat-input.disabled {&#92;n  opacity: 0.6;&#92;n  cursor: not-allowed;&#92;n}&#92;n&#92;n.ontonaut-chat-input::placeholder {&#92;n  color: #9ca3af;&#92;n}&#92;n&#92;n.ontonaut-chat-container[data-theme=&#92;&quot;dark&#92;&quot;] .ontonaut-chat-input {&#92;n  background: #252525;&#92;n  border-color: #333333;&#92;n  color: #e0e0e0;&#92;n}&#92;n&#92;n.ontonaut-chat-container[data-theme=&#92;&quot;dark&#92;&quot;] .ontonaut-chat-input:focus {&#92;n  border-color: #10b981;&#92;n  background: #2a2a2a;&#92;n}&#92;n&#92;n/* Send Button */&#92;n.ontonaut-chat-send-button {&#92;n  width: 40px;&#92;n  height: 40px;&#92;n  border-radius: 50%;&#92;n  border: none;&#92;n  background: linear-gradient(135deg, #10b981 0%, #059669 100%);&#92;n  color: white;&#92;n  cursor: pointer;&#92;n  display: flex;&#92;n  align-items: center;&#92;n  justify-content: center;&#92;n  transition: all 0.15s ease;&#92;n  box-shadow: 0 2px 4px rgba(16, 185, 129, 0.2);&#92;n  flex-shrink: 0;&#92;n}&#92;n&#92;n.ontonaut-chat-send-button:hover:not(.disabled) {&#92;n  transform: scale(1.05);&#92;n  box-shadow: 0 4px 8px rgba(16, 185, 129, 0.3);&#92;n}&#92;n&#92;n.ontonaut-chat-send-button:active:not(.disabled) {&#92;n  transform: scale(0.95);&#92;n}&#92;n&#92;n.ontonaut-chat-send-button.disabled {&#92;n  opacity: 0.5;&#92;n  cursor: not-allowed;&#92;n  background: #9ca3af;&#92;n}&#92;n&#92;n.ontonaut-chat-send-button svg {&#92;n  width: 18px;&#92;n  height: 18px;&#92;n}&#92;n&#92;n/* Responsive */&#92;n@media (max-width: 768px) {&#92;n  .ontonaut-chat-container {&#92;n    border-radius: 8px;&#92;n  }&#92;n&#92;n  .ontonaut-chat-messages {&#92;n    padding: 12px;&#92;n    gap: 12px;&#92;n  }&#92;n&#92;n  .ontonaut-chat-content {&#92;n    max-width: 80%;&#92;n  }&#92;n&#92;n  .ontonaut-chat-avatar {&#92;n    width: 28px;&#92;n    height: 28px;&#92;n    font-size: 11px;&#92;n  }&#92;n&#92;n  .ontonaut-chat-bubble {&#92;n    font-size: 13px;&#92;n    padding: 8px 12px;&#92;n  }&#92;n}&#92;n&#92;n/* Typing indicator (future enhancement) */&#92;n@keyframes typing {&#92;n  0%, 60%, 100% {&#92;n    opacity: 0.3;&#92;n  }&#92;n  30% {&#92;n    opacity: 1;&#92;n  }&#92;n}&#92;n&#92;n.ontonaut-chat-typing {&#92;n  display: inline-flex;&#92;n  gap: 4px;&#92;n}&#92;n&#92;n.ontonaut-chat-typing span {&#92;n  width: 6px;&#92;n  height: 6px;&#92;n  border-radius: 50%;&#92;n  background: currentColor;&#92;n  animation: typing 1.4s infinite;&#92;n}&#92;n&#92;n.ontonaut-chat-typing span:nth-child(2) {&#92;n  animation-delay: 0.2s;&#92;n}&#92;n&#92;n.ontonaut-chat-typing span:nth-child(3) {&#92;n  animation-delay: 0.4s;&#92;n}&#92;n&#92;n&quot;' data-buffer-paths='[]'></marimo-anywidget></marimo-ui-element>"
          }
        }
      ],
      "console": []
    },
    {
      "id": "lEQa",
      "code_hash": "8c465ccef404dc27b6403d574f4054be",
      "outputs": [
        {
          "type": "data",
          "data": {
            "text/markdown": "<span class=\"markdown prose dark:prose-invert contents\"><h2 id=\"example-2-openai-streaming\">Example 2: OpenAI Streaming</h2>\n<span class=\"paragraph\">Connect to OpenAI with streaming responses.</span>\n<span class=\"paragraph\"><strong>Setup:</strong>\n<div class=\"language-bash codehilite\"><pre><span></span><code>pip<span class=\"w\"> </span>install<span class=\"w\"> </span>openai\n<span class=\"nb\">export</span><span class=\"w\"> </span><span class=\"nv\">OPENAI_API_KEY</span><span class=\"o\">=</span><span class=\"s2\">&quot;your-key&quot;</span>\n</code></pre></div></span></span>"
          }
        }
      ],
      "console": []
    },
    {
      "id": "PKri",
      "code_hash": "e13f0c4f3e78b00a5a7d4ae07ef4664b",
      "outputs": [
        {
          "type": "data",
          "data": {
            "text/plain": ""
          }
        }
      ],
      "console": [
        {
          "type": "stream",
          "name": "stdout",
          "text": "\u26a0\ufe0f  Set OPENAI_API_KEY environment variable to use OpenAI\n",
          "mimetype": "text/plain"
        }
      ]
    },
    {
      "id": "Xref",
      "code_hash": "a22fe276037d2bcbae066d158ab521bd",
      "outputs": [
        {
          "type": "data",
          "data": {
            "text/markdown": "<span class=\"markdown prose dark:prose-invert contents\"><h2 id=\"example-3-custom-company-handler\">Example 3: Custom Company Handler</h2>\n<span class=\"paragraph\">Wrap your company's OpenAI logic with custom preprocessing.</span></span>"
          }
        }
      ],
      "console": []
    },
    {
      "id": "SFPL",
      "code_hash": "37d2a12cc5bf8abbda5cecf10037e468",
      "outputs": [
        {
          "type": "data",
          "data": {
            "text/html": "<marimo-ui-element object-id='SFPL-0' random-id='5a6c2873-cfc0-f4b3-7452-3a5cd49c50d5'><marimo-anywidget data-initial-value='{&quot;input_text&quot;:&quot;&quot;,&quot;is_streaming&quot;:false,&quot;max_height&quot;:&quot;400px&quot;,&quot;messages&quot;:[],&quot;placeholder&quot;:&quot;Ask with company context...&quot;,&quot;show_timestamps&quot;:false,&quot;streaming_content&quot;:&quot;&quot;,&quot;theme&quot;:&quot;light&quot;}' data-label='null' data-js-url='&quot;./@file/5283-4487742-IAmbEws5.js&quot;' data-js-hash='&quot;9924e35012cc43b19df4a4bcbb6646be&quot;' data-css='&quot;/**&#92;n * Ontonaut ChatBot Styles&#92;n * Sleek, modern chat interface&#92;n */&#92;n&#92;n.ontonaut-chat-container {&#92;n  font-family: -apple-system, BlinkMacSystemFont, &#92;&quot;Segoe UI&#92;&quot;, Roboto, &#92;&quot;Helvetica Neue&#92;&quot;, Arial, sans-serif;&#92;n  border: 1px solid #e8eaed;&#92;n  border-radius: 12px;&#92;n  overflow: hidden;&#92;n  background: white;&#92;n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);&#92;n  margin: 12px 0;&#92;n  display: flex;&#92;n  flex-direction: column;&#92;n  max-width: 800px;&#92;n  transition: box-shadow 0.2s ease;&#92;n}&#92;n&#92;n.ontonaut-chat-container:hover {&#92;n  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);&#92;n}&#92;n&#92;n.ontonaut-chat-container[data-theme=&#92;&quot;dark&#92;&quot;] {&#92;n  background: #1a1a1a;&#92;n  border-color: #333333;&#92;n  color: #e0e0e0;&#92;n}&#92;n&#92;n/* Messages Area */&#92;n.ontonaut-chat-messages {&#92;n  flex: 1;&#92;n  overflow-y: auto;&#92;n  padding: 20px;&#92;n  display: flex;&#92;n  flex-direction: column;&#92;n  gap: 16px;&#92;n  max-height: 600px;&#92;n  min-height: 300px;&#92;n  background: #fafbfc;&#92;n  scroll-behavior: smooth;&#92;n}&#92;n&#92;n.ontonaut-chat-container[data-theme=&#92;&quot;dark&#92;&quot;] .ontonaut-chat-messages {&#92;n  background: #1a1a1a;&#92;n}&#92;n&#92;n/* Scrollbar styling */&#92;n.ontonaut-chat-messages::-webkit-scrollbar {&#92;n  width: 6px;&#92;n}&#92;n&#92;n.ontonaut-chat-messages::-webkit-scrollbar-track {&#92;n  background: transparent;&#92;n}&#92;n&#92;n.ontonaut-chat-messages::-webkit-scrollbar-thumb {&#92;n  background: #d1d5db;&#92;n  border-radius: 3px;&#92;n}&#92;n&#92;n.ontonaut-chat-messages::-webkit-scrollbar-thumb:hover {&#92;n  background: #9ca3af;&#92;n}&#92;n&#92;n.ontonaut-chat-container[data-theme=&#92;&quot;dark&#92;&quot;] .ontonaut-chat-messages::-webkit-scrollbar-thumb {&#92;n  background: #404040;&#92;n}&#92;n&#92;n/* Empty State */&#92;n.ontonaut-chat-empty {&#92;n  display: flex;&#92;n  align-items: center;&#92;n  justify-content: center;&#92;n  height: 100%;&#92;n  color: #9ca3af;&#92;n  font-size: 14px;&#92;n  font-style: italic;&#92;n}&#92;n&#92;n/* Message */&#92;n.ontonaut-chat-message {&#92;n  display: flex;&#92;n  gap: 12px;&#92;n  align-items: flex-start;&#92;n  animation: slideIn 0.2s ease-out;&#92;n}&#92;n&#92;n@keyframes slideIn {&#92;n  from {&#92;n    opacity: 0;&#92;n    transform: translateY(10px);&#92;n  }&#92;n  to {&#92;n    opacity: 1;&#92;n    transform: translateY(0);&#92;n  }&#92;n}&#92;n&#92;n.ontonaut-chat-message-user {&#92;n  flex-direction: row-reverse;&#92;n}&#92;n&#92;n/* Avatar */&#92;n.ontonaut-chat-avatar {&#92;n  width: 32px;&#92;n  height: 32px;&#92;n  border-radius: 50%;&#92;n  display: flex;&#92;n  align-items: center;&#92;n  justify-content: center;&#92;n  font-size: 12px;&#92;n  font-weight: 600;&#92;n  flex-shrink: 0;&#92;n  text-transform: uppercase;&#92;n}&#92;n&#92;n.ontonaut-chat-message-user .ontonaut-chat-avatar {&#92;n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);&#92;n  color: white;&#92;n}&#92;n&#92;n.ontonaut-chat-message-assistant .ontonaut-chat-avatar {&#92;n  background: linear-gradient(135deg, #10b981 0%, #059669 100%);&#92;n  color: white;&#92;n}&#92;n&#92;n.ontonaut-chat-message-system .ontonaut-chat-avatar {&#92;n  background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);&#92;n  color: white;&#92;n}&#92;n&#92;n/* Content */&#92;n.ontonaut-chat-content {&#92;n  flex: 1;&#92;n  display: flex;&#92;n  flex-direction: column;&#92;n  max-width: 70%;&#92;n}&#92;n&#92;n.ontonaut-chat-message-user .ontonaut-chat-content {&#92;n  align-items: flex-end;&#92;n}&#92;n&#92;n/* Bubble */&#92;n.ontonaut-chat-bubble {&#92;n  padding: 10px 14px;&#92;n  border-radius: 16px;&#92;n  font-size: 14px;&#92;n  line-height: 1.5;&#92;n  white-space: pre-wrap;&#92;n  word-wrap: break-word;&#92;n  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);&#92;n  animation: bubbleIn 0.15s ease-out;&#92;n}&#92;n&#92;n@keyframes bubbleIn {&#92;n  from {&#92;n    transform: scale(0.95);&#92;n    opacity: 0;&#92;n  }&#92;n  to {&#92;n    transform: scale(1);&#92;n    opacity: 1;&#92;n  }&#92;n}&#92;n&#92;n.ontonaut-chat-message-user .ontonaut-chat-bubble {&#92;n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);&#92;n  color: white;&#92;n  border-bottom-right-radius: 4px;&#92;n}&#92;n&#92;n.ontonaut-chat-message-assistant .ontonaut-chat-bubble {&#92;n  background: white;&#92;n  color: #1f2937;&#92;n  border: 1px solid #e5e7eb;&#92;n  border-bottom-left-radius: 4px;&#92;n}&#92;n&#92;n.ontonaut-chat-container[data-theme=&#92;&quot;dark&#92;&quot;] .ontonaut-chat-message-assistant .ontonaut-chat-bubble {&#92;n  background: #252525;&#92;n  color: #e0e0e0;&#92;n  border-color: #333333;&#92;n}&#92;n&#92;n.ontonaut-chat-message-system .ontonaut-chat-bubble {&#92;n  background: #fef3c7;&#92;n  color: #92400e;&#92;n  border: 1px solid #fcd34d;&#92;n  font-style: italic;&#92;n}&#92;n&#92;n.ontonaut-chat-container[data-theme=&#92;&quot;dark&#92;&quot;] .ontonaut-chat-message-system .ontonaut-chat-bubble {&#92;n  background: #2a2416;&#92;n  color: #fcd34d;&#92;n  border-color: #92400e;&#92;n}&#92;n&#92;n/* Input Section */&#92;n.ontonaut-chat-input-section {&#92;n  display: flex;&#92;n  gap: 8px;&#92;n  padding: 12px;&#92;n  background: white;&#92;n  border-top: 1px solid #e8eaed;&#92;n  align-items: flex-end;&#92;n}&#92;n&#92;n.ontonaut-chat-container[data-theme=&#92;&quot;dark&#92;&quot;] .ontonaut-chat-input-section {&#92;n  background: #1f1f1f;&#92;n  border-top-color: #333333;&#92;n}&#92;n&#92;n/* Input */&#92;n.ontonaut-chat-input {&#92;n  flex: 1;&#92;n  padding: 10px 12px;&#92;n  border: 1px solid #e5e7eb;&#92;n  border-radius: 20px;&#92;n  font-size: 14px;&#92;n  line-height: 1.5;&#92;n  font-family: inherit;&#92;n  resize: none;&#92;n  outline: none;&#92;n  background: #fafbfc;&#92;n  color: #1f2937;&#92;n  transition: all 0.15s ease;&#92;n  max-height: 150px;&#92;n}&#92;n&#92;n.ontonaut-chat-input:focus {&#92;n  border-color: #10b981;&#92;n  background: white;&#92;n  box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);&#92;n}&#92;n&#92;n.ontonaut-chat-input.disabled {&#92;n  opacity: 0.6;&#92;n  cursor: not-allowed;&#92;n}&#92;n&#92;n.ontonaut-chat-input::placeholder {&#92;n  color: #9ca3af;&#92;n}&#92;n&#92;n.ontonaut-chat-container[data-theme=&#92;&quot;dark&#92;&quot;] .ontonaut-chat-input {&#92;n  background: #252525;&#92;n  border-color: #333333;&#92;n  color: #e0e0e0;&#92;n}&#92;n&#92;n.ontonaut-chat-container[data-theme=&#92;&quot;dark&#92;&quot;] .ontonaut-chat-input:focus {&#92;n  border-color: #10b981;&#92;n  background: #2a2a2a;&#92;n}&#92;n&#92;n/* Send Button */&#92;n.ontonaut-chat-send-button {&#92;n  width: 40px;&#92;n  height: 40px;&#92;n  border-radius: 50%;&#92;n  border: none;&#92;n  background: linear-gradient(135deg, #10b981 0%, #059669 100%);&#92;n  color: white;&#92;n  cursor: pointer;&#92;n  display: flex;&#92;n  align-items: center;&#92;n  justify-content: center;&#92;n  transition: all 0.15s ease;&#92;n  box-shadow: 0 2px 4px rgba(16, 185, 129, 0.2);&#92;n  flex-shrink: 0;&#92;n}&#92;n&#92;n.ontonaut-chat-send-button:hover:not(.disabled) {&#92;n  transform: scale(1.05);&#92;n  box-shadow: 0 4px 8px rgba(16, 185, 129, 0.3);&#92;n}&#92;n&#92;n.ontonaut-chat-send-button:active:not(.disabled) {&#92;n  transform: scale(0.95);&#92;n}&#92;n&#92;n.ontonaut-chat-send-button.disabled {&#92;n  opacity: 0.5;&#92;n  cursor: not-allowed;&#92;n  background: #9ca3af;&#92;n}&#92;n&#92;n.ontonaut-chat-send-button svg {&#92;n  width: 18px;&#92;n  height: 18px;&#92;n}&#92;n&#92;n/* Responsive */&#92;n@media (max-width: 768px) {&#92;n  .ontonaut-chat-container {&#92;n    border-radius: 8px;&#92;n  }&#92;n&#92;n  .ontonaut-chat-messages {&#92;n    padding: 12px;&#92;n    gap: 12px;&#92;n  }&#92;n&#92;n  .ontonaut-chat-content {&#92;n    max-width: 80%;&#92;n  }&#92;n&#92;n  .ontonaut-chat-avatar {&#92;n    width: 28px;&#92;n    height: 28px;&#92;n    font-size: 11px;&#92;n  }&#92;n&#92;n  .ontonaut-chat-bubble {&#92;n    font-size: 13px;&#92;n    padding: 8px 12px;&#92;n  }&#92;n}&#92;n&#92;n/* Typing indicator (future enhancement) */&#92;n@keyframes typing {&#92;n  0%, 60%, 100% {&#92;n    opacity: 0.3;&#92;n  }&#92;n  30% {&#92;n    opacity: 1;&#92;n  }&#92;n}&#92;n&#92;n.ontonaut-chat-typing {&#92;n  display: inline-flex;&#92;n  gap: 4px;&#92;n}&#92;n&#92;n.ontonaut-chat-typing span {&#92;n  width: 6px;&#92;n  height: 6px;&#92;n  border-radius: 50%;&#92;n  background: currentColor;&#92;n  animation: typing 1.4s infinite;&#92;n}&#92;n&#92;n.ontonaut-chat-typing span:nth-child(2) {&#92;n  animation-delay: 0.2s;&#92;n}&#92;n&#92;n.ontonaut-chat-typing span:nth-child(3) {&#92;n  animation-delay: 0.4s;&#92;n}&#92;n&#92;n&quot;' data-buffer-paths='[]'></marimo-anywidget></marimo-ui-element>"
          }
        }
      ],
      "console": []
    },
    {
      "id": "BYtC",
      "code_hash": "22b10dcf5679b9d90099c315451f6346",
      "outputs": [
        {
          "type": "data",
          "data": {
            "text/markdown": "<span class=\"markdown prose dark:prose-invert contents\"><h2 id=\"example-4-mcp-server-integration\">Example 4: MCP Server Integration</h2>\n<span class=\"paragraph\">Use Model Context Protocol for tool calling and context.</span></span>"
          }
        }
      ],
      "console": []
    },
    {
      "id": "RGSE",
      "code_hash": "3073ba9c707179721c722f50831a09b3",
      "outputs": [
        {
          "type": "error",
          "ename": "multiple-defs",
          "evalue": "The variable 'EchoHandler' was defined by another cell",
          "traceback": []
        }
      ],
      "console": []
    },
    {
      "id": "Kclp",
      "code_hash": "9afee49bc9b9d228de45ba1a7ffb5f78",
      "outputs": [
        {
          "type": "data",
          "data": {
            "text/markdown": "<span class=\"markdown prose dark:prose-invert contents\"><h2 id=\"example-5-custom-streaming-handler\">Example 5: Custom Streaming Handler</h2>\n<span class=\"paragraph\">Build your own handler with custom logic.</span></span>"
          }
        }
      ],
      "console": []
    },
    {
      "id": "emfo",
      "code_hash": "24cf20495dc913e6539dc76b2a668767",
      "outputs": [
        {
          "type": "data",
          "data": {
            "text/html": "<marimo-ui-element object-id='emfo-0' random-id='da2a0152-ed0f-be0e-05cd-7303ccc0a57c'><marimo-anywidget data-initial-value='{&quot;input_text&quot;:&quot;&quot;,&quot;is_streaming&quot;:false,&quot;max_height&quot;:&quot;600px&quot;,&quot;messages&quot;:[],&quot;placeholder&quot;:&quot;Try your custom handler...&quot;,&quot;show_timestamps&quot;:false,&quot;theme&quot;:&quot;dark&quot;}' data-label='null' data-js-url='&quot;./@file/4342-4482307-FkCVcyV7.js&quot;' data-js-hash='&quot;a67f4491f04e1ac63691652a96e1ce86&quot;' data-css='&quot;/**&#92;n * Ontonaut ChatBot Styles&#92;n * Sleek, modern chat interface&#92;n */&#92;n&#92;n.ontonaut-chat-container {&#92;n  font-family: -apple-system, BlinkMacSystemFont, &#92;&quot;Segoe UI&#92;&quot;, Roboto, &#92;&quot;Helvetica Neue&#92;&quot;, Arial, sans-serif;&#92;n  border: 1px solid #e8eaed;&#92;n  border-radius: 12px;&#92;n  overflow: hidden;&#92;n  background: white;&#92;n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);&#92;n  margin: 12px 0;&#92;n  display: flex;&#92;n  flex-direction: column;&#92;n  max-width: 800px;&#92;n  transition: box-shadow 0.2s ease;&#92;n}&#92;n&#92;n.ontonaut-chat-container:hover {&#92;n  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);&#92;n}&#92;n&#92;n.ontonaut-chat-container[data-theme=&#92;&quot;dark&#92;&quot;] {&#92;n  background: #1a1a1a;&#92;n  border-color: #333333;&#92;n  color: #e0e0e0;&#92;n}&#92;n&#92;n/* Messages Area */&#92;n.ontonaut-chat-messages {&#92;n  flex: 1;&#92;n  overflow-y: auto;&#92;n  padding: 20px;&#92;n  display: flex;&#92;n  flex-direction: column;&#92;n  gap: 16px;&#92;n  max-height: 600px;&#92;n  min-height: 300px;&#92;n  background: #fafbfc;&#92;n  scroll-behavior: smooth;&#92;n}&#92;n&#92;n.ontonaut-chat-container[data-theme=&#92;&quot;dark&#92;&quot;] .ontonaut-chat-messages {&#92;n  background: #1a1a1a;&#92;n}&#92;n&#92;n/* Scrollbar styling */&#92;n.ontonaut-chat-messages::-webkit-scrollbar {&#92;n  width: 6px;&#92;n}&#92;n&#92;n.ontonaut-chat-messages::-webkit-scrollbar-track {&#92;n  background: transparent;&#92;n}&#92;n&#92;n.ontonaut-chat-messages::-webkit-scrollbar-thumb {&#92;n  background: #d1d5db;&#92;n  border-radius: 3px;&#92;n}&#92;n&#92;n.ontonaut-chat-messages::-webkit-scrollbar-thumb:hover {&#92;n  background: #9ca3af;&#92;n}&#92;n&#92;n.ontonaut-chat-container[data-theme=&#92;&quot;dark&#92;&quot;] .ontonaut-chat-messages::-webkit-scrollbar-thumb {&#92;n  background: #404040;&#92;n}&#92;n&#92;n/* Empty State */&#92;n.ontonaut-chat-empty {&#92;n  display: flex;&#92;n  align-items: center;&#92;n  justify-content: center;&#92;n  height: 100%;&#92;n  color: #9ca3af;&#92;n  font-size: 14px;&#92;n  font-style: italic;&#92;n}&#92;n&#92;n/* Message */&#92;n.ontonaut-chat-message {&#92;n  display: flex;&#92;n  gap: 12px;&#92;n  align-items: flex-start;&#92;n  animation: slideIn 0.2s ease-out;&#92;n}&#92;n&#92;n@keyframes slideIn {&#92;n  from {&#92;n    opacity: 0;&#92;n    transform: translateY(10px);&#92;n  }&#92;n  to {&#92;n    opacity: 1;&#92;n    transform: translateY(0);&#92;n  }&#92;n}&#92;n&#92;n.ontonaut-chat-message-user {&#92;n  flex-direction: row-reverse;&#92;n}&#92;n&#92;n/* Avatar */&#92;n.ontonaut-chat-avatar {&#92;n  width: 32px;&#92;n  height: 32px;&#92;n  border-radius: 50%;&#92;n  display: flex;&#92;n  align-items: center;&#92;n  justify-content: center;&#92;n  font-size: 12px;&#92;n  font-weight: 600;&#92;n  flex-shrink: 0;&#92;n  text-transform: uppercase;&#92;n}&#92;n&#92;n.ontonaut-chat-message-user .ontonaut-chat-avatar {&#92;n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);&#92;n  color: white;&#92;n}&#92;n&#92;n.ontonaut-chat-message-assistant .ontonaut-chat-avatar {&#92;n  background: linear-gradient(135deg, #10b981 0%, #059669 100%);&#92;n  color: white;&#92;n}&#92;n&#92;n.ontonaut-chat-message-system .ontonaut-chat-avatar {&#92;n  background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);&#92;n  color: white;&#92;n}&#92;n&#92;n/* Content */&#92;n.ontonaut-chat-content {&#92;n  flex: 1;&#92;n  display: flex;&#92;n  flex-direction: column;&#92;n  max-width: 70%;&#92;n}&#92;n&#92;n.ontonaut-chat-message-user .ontonaut-chat-content {&#92;n  align-items: flex-end;&#92;n}&#92;n&#92;n/* Bubble */&#92;n.ontonaut-chat-bubble {&#92;n  padding: 10px 14px;&#92;n  border-radius: 16px;&#92;n  font-size: 14px;&#92;n  line-height: 1.5;&#92;n  white-space: pre-wrap;&#92;n  word-wrap: break-word;&#92;n  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);&#92;n  animation: bubbleIn 0.15s ease-out;&#92;n}&#92;n&#92;n@keyframes bubbleIn {&#92;n  from {&#92;n    transform: scale(0.95);&#92;n    opacity: 0;&#92;n  }&#92;n  to {&#92;n    transform: scale(1);&#92;n    opacity: 1;&#92;n  }&#92;n}&#92;n&#92;n.ontonaut-chat-message-user .ontonaut-chat-bubble {&#92;n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);&#92;n  color: white;&#92;n  border-bottom-right-radius: 4px;&#92;n}&#92;n&#92;n.ontonaut-chat-message-assistant .ontonaut-chat-bubble {&#92;n  background: white;&#92;n  color: #1f2937;&#92;n  border: 1px solid #e5e7eb;&#92;n  border-bottom-left-radius: 4px;&#92;n}&#92;n&#92;n.ontonaut-chat-container[data-theme=&#92;&quot;dark&#92;&quot;] .ontonaut-chat-message-assistant .ontonaut-chat-bubble {&#92;n  background: #252525;&#92;n  color: #e0e0e0;&#92;n  border-color: #333333;&#92;n}&#92;n&#92;n.ontonaut-chat-message-system .ontonaut-chat-bubble {&#92;n  background: #fef3c7;&#92;n  color: #92400e;&#92;n  border: 1px solid #fcd34d;&#92;n  font-style: italic;&#92;n}&#92;n&#92;n.ontonaut-chat-container[data-theme=&#92;&quot;dark&#92;&quot;] .ontonaut-chat-message-system .ontonaut-chat-bubble {&#92;n  background: #2a2416;&#92;n  color: #fcd34d;&#92;n  border-color: #92400e;&#92;n}&#92;n&#92;n/* Input Section */&#92;n.ontonaut-chat-input-section {&#92;n  display: flex;&#92;n  gap: 8px;&#92;n  padding: 12px;&#92;n  background: white;&#92;n  border-top: 1px solid #e8eaed;&#92;n  align-items: flex-end;&#92;n}&#92;n&#92;n.ontonaut-chat-container[data-theme=&#92;&quot;dark&#92;&quot;] .ontonaut-chat-input-section {&#92;n  background: #1f1f1f;&#92;n  border-top-color: #333333;&#92;n}&#92;n&#92;n/* Input */&#92;n.ontonaut-chat-input {&#92;n  flex: 1;&#92;n  padding: 10px 12px;&#92;n  border: 1px solid #e5e7eb;&#92;n  border-radius: 20px;&#92;n  font-size: 14px;&#92;n  line-height: 1.5;&#92;n  font-family: inherit;&#92;n  resize: none;&#92;n  outline: none;&#92;n  background: #fafbfc;&#92;n  color: #1f2937;&#92;n  transition: all 0.15s ease;&#92;n  max-height: 150px;&#92;n}&#92;n&#92;n.ontonaut-chat-input:focus {&#92;n  border-color: #10b981;&#92;n  background: white;&#92;n  box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);&#92;n}&#92;n&#92;n.ontonaut-chat-input.disabled {&#92;n  opacity: 0.6;&#92;n  cursor: not-allowed;&#92;n}&#92;n&#92;n.ontonaut-chat-input::placeholder {&#92;n  color: #9ca3af;&#92;n}&#92;n&#92;n.ontonaut-chat-container[data-theme=&#92;&quot;dark&#92;&quot;] .ontonaut-chat-input {&#92;n  background: #252525;&#92;n  border-color: #333333;&#92;n  color: #e0e0e0;&#92;n}&#92;n&#92;n.ontonaut-chat-container[data-theme=&#92;&quot;dark&#92;&quot;] .ontonaut-chat-input:focus {&#92;n  border-color: #10b981;&#92;n  background: #2a2a2a;&#92;n}&#92;n&#92;n/* Send Button */&#92;n.ontonaut-chat-send-button {&#92;n  width: 40px;&#92;n  height: 40px;&#92;n  border-radius: 50%;&#92;n  border: none;&#92;n  background: linear-gradient(135deg, #10b981 0%, #059669 100%);&#92;n  color: white;&#92;n  cursor: pointer;&#92;n  display: flex;&#92;n  align-items: center;&#92;n  justify-content: center;&#92;n  transition: all 0.15s ease;&#92;n  box-shadow: 0 2px 4px rgba(16, 185, 129, 0.2);&#92;n  flex-shrink: 0;&#92;n}&#92;n&#92;n.ontonaut-chat-send-button:hover:not(.disabled) {&#92;n  transform: scale(1.05);&#92;n  box-shadow: 0 4px 8px rgba(16, 185, 129, 0.3);&#92;n}&#92;n&#92;n.ontonaut-chat-send-button:active:not(.disabled) {&#92;n  transform: scale(0.95);&#92;n}&#92;n&#92;n.ontonaut-chat-send-button.disabled {&#92;n  opacity: 0.5;&#92;n  cursor: not-allowed;&#92;n  background: #9ca3af;&#92;n}&#92;n&#92;n.ontonaut-chat-send-button svg {&#92;n  width: 18px;&#92;n  height: 18px;&#92;n}&#92;n&#92;n/* Responsive */&#92;n@media (max-width: 768px) {&#92;n  .ontonaut-chat-container {&#92;n    border-radius: 8px;&#92;n  }&#92;n&#92;n  .ontonaut-chat-messages {&#92;n    padding: 12px;&#92;n    gap: 12px;&#92;n  }&#92;n&#92;n  .ontonaut-chat-content {&#92;n    max-width: 80%;&#92;n  }&#92;n&#92;n  .ontonaut-chat-avatar {&#92;n    width: 28px;&#92;n    height: 28px;&#92;n    font-size: 11px;&#92;n  }&#92;n&#92;n  .ontonaut-chat-bubble {&#92;n    font-size: 13px;&#92;n    padding: 8px 12px;&#92;n  }&#92;n}&#92;n&#92;n/* Typing indicator (future enhancement) */&#92;n@keyframes typing {&#92;n  0%, 60%, 100% {&#92;n    opacity: 0.3;&#92;n  }&#92;n  30% {&#92;n    opacity: 1;&#92;n  }&#92;n}&#92;n&#92;n.ontonaut-chat-typing {&#92;n  display: inline-flex;&#92;n  gap: 4px;&#92;n}&#92;n&#92;n.ontonaut-chat-typing span {&#92;n  width: 6px;&#92;n  height: 6px;&#92;n  border-radius: 50%;&#92;n  background: currentColor;&#92;n  animation: typing 1.4s infinite;&#92;n}&#92;n&#92;n.ontonaut-chat-typing span:nth-child(2) {&#92;n  animation-delay: 0.2s;&#92;n}&#92;n&#92;n.ontonaut-chat-typing span:nth-child(3) {&#92;n  animation-delay: 0.4s;&#92;n}&#92;n&#92;n&quot;' data-buffer-paths='[]'></marimo-anywidget></marimo-ui-element>"
          }
        }
      ],
      "console": []
    },
    {
      "id": "Hstk",
      "code_hash": "4ba3131393eab788b96f92e1e7b191ee",
      "outputs": [
        {
          "type": "data",
          "data": {
            "text/markdown": "<span class=\"markdown prose dark:prose-invert contents\"><h2 id=\"building-your-own-handler\">Building Your Own Handler</h2>\n<h3 id=\"pattern-1-simple-function\">Pattern 1: Simple Function</h3>\n<div class=\"language-python codehilite\"><pre><span></span><code><span class=\"k\">def</span><span class=\"w\"> </span><span class=\"nf\">my_handler</span><span class=\"p\">(</span><span class=\"n\">message</span><span class=\"p\">:</span> <span class=\"nb\">str</span><span class=\"p\">):</span>\n    <span class=\"c1\"># Your logic here</span>\n    <span class=\"k\">yield</span> <span class=\"s2\">&quot;Response chunk 1&quot;</span>\n    <span class=\"k\">yield</span> <span class=\"s2\">&quot;Response chunk 2&quot;</span>\n\n<span class=\"n\">chatbot</span> <span class=\"o\">=</span> <span class=\"n\">ChatBot</span><span class=\"p\">(</span><span class=\"n\">handler</span><span class=\"o\">=</span><span class=\"n\">my_handler</span><span class=\"p\">)</span>\n</code></pre></div>\n<h3 id=\"pattern-2-class-based-handler\">Pattern 2: Class-Based Handler</h3>\n<div class=\"language-python codehilite\"><pre><span></span><code><span class=\"kn\">from</span><span class=\"w\"> </span><span class=\"nn\">ontonaut.handlers</span><span class=\"w\"> </span><span class=\"kn\">import</span> <span class=\"n\">BaseHandler</span>\n\n<span class=\"k\">class</span><span class=\"w\"> </span><span class=\"nc\">MyHandler</span><span class=\"p\">(</span><span class=\"n\">BaseHandler</span><span class=\"p\">):</span>\n    <span class=\"k\">def</span><span class=\"w\"> </span><span class=\"fm\">__init__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">config</span><span class=\"p\">):</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">config</span> <span class=\"o\">=</span> <span class=\"n\">config</span>\n\n    <span class=\"k\">def</span><span class=\"w\"> </span><span class=\"fm\">__call__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">message</span><span class=\"p\">:</span> <span class=\"nb\">str</span><span class=\"p\">):</span>\n        <span class=\"c1\"># Your logic with self.config</span>\n        <span class=\"k\">for</span> <span class=\"n\">chunk</span> <span class=\"ow\">in</span> <span class=\"n\">process</span><span class=\"p\">(</span><span class=\"n\">message</span><span class=\"p\">):</span>\n            <span class=\"k\">yield</span> <span class=\"n\">chunk</span>\n\n<span class=\"n\">handler</span> <span class=\"o\">=</span> <span class=\"n\">MyHandler</span><span class=\"p\">(</span><span class=\"n\">config</span><span class=\"o\">=</span><span class=\"p\">{</span><span class=\"o\">...</span><span class=\"p\">})</span>\n<span class=\"n\">chatbot</span> <span class=\"o\">=</span> <span class=\"n\">ChatBot</span><span class=\"p\">(</span><span class=\"n\">handler</span><span class=\"o\">=</span><span class=\"n\">handler</span><span class=\"p\">)</span>\n</code></pre></div>\n<h3 id=\"pattern-3-async-streaming-future\">Pattern 3: Async Streaming (Future)</h3>\n<div class=\"language-python codehilite\"><pre><span></span><code><span class=\"k\">async</span> <span class=\"k\">def</span><span class=\"w\"> </span><span class=\"nf\">async_handler</span><span class=\"p\">(</span><span class=\"n\">message</span><span class=\"p\">:</span> <span class=\"nb\">str</span><span class=\"p\">):</span>\n    <span class=\"k\">async</span> <span class=\"k\">for</span> <span class=\"n\">chunk</span> <span class=\"ow\">in</span> <span class=\"n\">stream_from_api</span><span class=\"p\">(</span><span class=\"n\">message</span><span class=\"p\">):</span>\n        <span class=\"k\">yield</span> <span class=\"n\">chunk</span>\n\n<span class=\"n\">chatbot</span> <span class=\"o\">=</span> <span class=\"n\">ChatBot</span><span class=\"p\">(</span><span class=\"n\">handler</span><span class=\"o\">=</span><span class=\"n\">async_handler</span><span class=\"p\">)</span>\n</code></pre></div></span>"
          }
        }
      ],
      "console": []
    }
  ]
}
