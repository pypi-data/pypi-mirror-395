Metadata-Version: 2.1
Name: pyapu
Version: 0.2.0
Summary: Structured AI document processing with robust fallback strategies.
Home-page: https://github.com/Aquilesorei/pyapu
License: GPL-3.0-or-later
Keywords: pdf,ai,llm,extraction,json
Author: aquiles
Author-email: achillezongo07@gmail.com
Requires-Python: >=3.12,<4.0
Classifier: License :: OSI Approved :: GNU General Public License v3 or later (GPLv3+)
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.12
Provides-Extra: ocr
Requires-Dist: google-genai (>=1.53.0,<2.0.0)
Requires-Dist: openai (>=2.8.1,<3.0.0)
Requires-Dist: openpyxl (>=3.1.5,<4.0.0)
Requires-Dist: pandas (>=2.3.3,<3.0.0)
Requires-Dist: pdf2image (>=1.17.0,<2.0.0) ; extra == "ocr"
Requires-Dist: pdfplumber (>=0.11.8,<0.12.0)
Requires-Dist: pydantic (>=2.12.5,<3.0.0)
Requires-Dist: pypdf (>=6.4.0,<7.0.0)
Requires-Dist: pytesseract (>=0.3.10,<0.4.0) ; extra == "ocr"
Requires-Dist: python-dotenv (>=1.2.1,<2.0.0)
Project-URL: Repository, https://github.com/Aquilesorei/pyapu
Description-Content-Type: text/markdown

# pyapu

> **py**thon **A**I **P**DF **U**tilities ‚Äî Extract structured JSON from documents using LLMs

[![License: GPL v3](https://img.shields.io/badge/License-GPLv3-blue.svg)](https://www.gnu.org/licenses/gpl-3.0)
[![Python 3.10+](https://img.shields.io/badge/python-3.10+-blue.svg)](https://www.python.org/downloads/)

---

## ‚ú® Features

- üîå **Pluggable Architecture** ‚Äî Everything is extensible with sensible defaults
- ü§ñ **Multi-Provider LLM Support** ‚Äî Gemini, OpenAI, Anthropic, Ollama, and custom endpoints
- üìÑ **Universal Document Support** ‚Äî PDFs, images, Excel, and custom formats
- üéØ **Schema-Driven Extraction** ‚Äî Define your output structure, get consistent JSON
- üîí **Security First** ‚Äî Built-in input sanitization and output validation

---

## üöÄ Quick Start

### Installation

```bash
pip install pyapu
```

### Basic Usage

```python
from pyapu import DocumentProcessor, Object, String, Number, Array

# Define your output schema
invoice_schema = Object(
    description="Invoice data",
    properties={
        "invoice_number": String(description="The invoice ID"),
        "total": Number(),
        "items": Array(
            items=Object(
                properties={
                    "description": String(),
                    "amount": Number(),
                }
            )
        )
    }
)

# Process a document
processor = DocumentProcessor(provider="gemini")
result = processor.process(
    file_path="invoice.pdf",
    prompt="Extract the invoice details.",
    schema=invoice_schema
)

print(result["invoice_number"])  # "INV-2024-001"
print(result["total"])           # 1250.00
```

---

## üîå Plugin System

**Everything in pyapu is pluggable.** Use defaults or register your own implementations:

```python
from pyapu.plugins import register

@register("provider")
class MyCustomProvider(Provider):
    def process(self, file, prompt, schema):
        # Your custom LLM logic
        ...

@register("postprocessor")
class CurrencyNormalizer(Postprocessor):
    def process(self, data: dict) -> dict:
        # Normalize currency values
        ...
```

### Plugin Types

| Type            | Purpose                 | Examples                          |
| --------------- | ----------------------- | --------------------------------- |
| `provider`      | LLM backends            | Gemini, OpenAI, Claude, Ollama    |
| `security`      | Input/output protection | Injection detection, sanitization |
| `extractor`     | Document parsing        | PDF, Image OCR, Excel             |
| `validator`     | Output validation       | Schema, sum checks, date formats  |
| `postprocessor` | Data transformation     | Date/number normalization         |
| `verifier`      | Quality assurance       | LLM self-correction               |

---

## üì¶ Supported Formats

| Format | Extensions              | Method                              |
| ------ | ----------------------- | ----------------------------------- |
| PDF    | `.pdf`                  | Text extraction with fallback chain |
| Images | `.png`, `.jpg`, `.tiff` | Direct vision or OCR                |
| Excel  | `.xlsx`, `.xls`         | Converted to structured text        |
| Text   | `.txt`, `.csv`          | Direct input                        |

---

## üõ£Ô∏è Roadmap

See [ROADMAP.md](ROADMAP.md) for the full development plan.

**Current priorities:**

- [x] Plugin registry system (v0.2.0) ‚úÖ
- [x] Security plugin layer ‚úÖ
- [x] Pydantic model support ‚úÖ
- [ ] Additional providers (OpenAI, Anthropic, Ollama)

---

## üìö Documentation

```bash
# Serve locally (live reload)
poetry run mkdocs serve

# Build static site
poetry run mkdocs build

# Deploy to GitHub Pages
poetry run mkdocs gh-deploy
```

---

## üìÑ License

This project is licensed under the **GNU General Public License v3.0** ‚Äî see [LICENSE](LICENSE) for details.

For commercial or proprietary use, please [contact me](mailto:your-email@example.com) for a separate license.

---

## ü§ù Contributing

Contributions are welcome! Priority areas:

1. **New plugins** ‚Äî Providers, extractors, validators
2. **Documentation** ‚Äî Examples and tutorials
3. **Testing** ‚Äî Expand test coverage

