import{u as x}from"./reactQuery-CcoxLypZ.js";import{u as v,c as f,s as b,N,D as S,M as B}from"./index-WE8upCkO.js";import{r as n,a as k}from"./react-C1sqhVEE.js";import{j as e}from"./ui-cEB64NN_.js";import{H as j,P as E}from"./Pane-rEu9in9v.js";import{S as F}from"./syntaxHighlighter-C6zraU67.js";import{u as H}from"./reactRouter-BS5XHl1L.js";import{b as z}from"./dateFns-DhBcwMxz.js";function L({title:a,titleId:t,...r},o){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":t},r),a?n.createElement("title",{id:t},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"}))}const D=n.forwardRef(L);function M({title:a,titleId:t,...r},o){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":t},r),a?n.createElement("title",{id:t},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 15.75 7.5-7.5 7.5 7.5"}))}const W=n.forwardRef(M);function A({title:a,titleId:t,...r},o){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":t},r),a?n.createElement("title",{id:t},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.35 3.836c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-.1-.664m-5.8 0A2.251 2.251 0 0 1 13.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m8.9-4.414c.376.023.75.05 1.124.08 1.131.094 1.976 1.057 1.976 2.192V16.5A2.25 2.25 0 0 1 18 18.75h-2.25m-7.5-10.5H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V18.75m-7.5-10.5h6.375c.621 0 1.125.504 1.125 1.125v9.375m-8.25-3 1.5 1.5 3-3.75"}))}const O=n.forwardRef(A);function R({title:a,titleId:t,...r},o){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":t},r),a?n.createElement("title",{id:t},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 7.5V6.108c0-1.135.845-2.098 1.976-2.192.373-.03.748-.057 1.123-.08M15.75 18H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08M15.75 18.75v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5A3.375 3.375 0 0 0 6.375 7.5H5.25m11.9-3.664A2.251 2.251 0 0 0 15 2.25h-1.5a2.251 2.251 0 0 0-2.15 1.586m5.8 0c.065.21.1.433.1.664v.75h-6V4.5c0-.231.035-.454.1-.664M6.75 7.5H4.875c-.621 0-1.125.504-1.125 1.125v12c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V16.5a9 9 0 0 0-9-9Z"}))}const V=n.forwardRef(R);function oe(a){const t=v();return x(["transactions","detail",a],()=>t.fetch(`/transactions/${a}`).then(r=>r.json()),{enabled:!!a})}function C(a){const t=v();return x(["blobs",a],async()=>{if(a){const r=await t.fetch(`/blobs/${a}`),o=await r.arrayBuffer();return{id:a,content:o,contentType:r.headers.get("Content-Type")}}})}const P=a=>a&&a[0].toUpperCase()+a.slice(1)||"",w=({text:a,targetRef:t,className:r,contentType:o,description:l})=>{const[c,i]=n.useState(!1),u=navigator.clipboard,d=s=>{(typeof s=="string"?navigator.clipboard.writeText(s):navigator.clipboard.write(s)).then(()=>{i(!0),setTimeout(()=>i(!1),2e3)}).catch(m=>{console.error("Copy failed!",m),i(!1)})},g=()=>{if(a)d(a);else if(t!=null&&t.current){if(o!=null&&o.includes("html")){const s=t.current.innerHTML,h=new Blob([s],{type:o}),m=[new ClipboardItem({[o]:h})];d(m)}else if(o!=null&&o.startsWith("text/")||o!=null&&o.startsWith("application/")){const s=t.current.innerText||"";d(s)}}},p=c?O:V;return u&&(!o||o.startsWith("text/")||o.startsWith("application/"))?e("div",{className:f("flex items-center -space-x-1 text-xs",r),onClick:g},l&&e("span",{className:`m-2 cursor-pointer ${c?"text-blue-300":"text-gray-500"}`},l),e(p,{title:"Copy to clipboard",className:`m-2 h-4 w-4 cursor-pointer ${c?"text-blue-300":"text-gray-500"}`})):null};function y({open:a=!0,title:t,subtitle:r,children:o=void 0,className:l}){const[c,i]=n.useState(a);return e("div",{className:f(l,"px-4 py-3")},e(j,{padding:"pt-0",className:f("flex w-full whitespace-nowrap",o?"cursor-pointer":null),onClick:()=>i(!c)},e("div",{className:"grow font-normal truncate"},e("span",{className:"font-semibold"},t)),o?c?e(W,{className:"h-4 w-4 min-w-4 text-gray-600"}):e(D,{className:"h-4 w-4 min-w-4 text-gray-600"}):null),r??null,o?e("div",{className:"mt-2 space-y-2 overflow-x-auto "+(c?"":"hidden")}," ",o):null)}const $={'code[class*="language-"]':{color:"#393A34",fontFamily:'"Consolas", "Bitstream Vera Sans Mono", "Courier New", Courier, monospace',direction:"ltr",textAlign:"left",whiteSpace:"pre",wordSpacing:"normal",wordBreak:"normal",fontSize:".9em",lineHeight:"1.2em",MozTabSize:"4",OTabSize:"4",tabSize:"4",WebkitHyphens:"none",MozHyphens:"none",msHyphens:"none",hyphens:"none"},'pre[class*="language-"]':{color:"#393A34",fontFamily:'"Consolas", "Bitstream Vera Sans Mono", "Courier New", Courier, monospace',direction:"ltr",textAlign:"left",whiteSpace:"pre",wordSpacing:"normal",wordBreak:"normal",fontSize:".9em",lineHeight:"1.2em",MozTabSize:"4",OTabSize:"4",tabSize:"4",WebkitHyphens:"none",MozHyphens:"none",msHyphens:"none",hyphens:"none",padding:"1em",margin:".5em 0",overflow:"auto",border:"1px solid #dddddd",backgroundColor:"white"},'pre > code[class*="language-"]':{fontSize:"1em"},'pre[class*="language-"]::-moz-selection':{background:"#C1DEF1"},'pre[class*="language-"] ::-moz-selection':{background:"#C1DEF1"},'code[class*="language-"]::-moz-selection':{background:"#C1DEF1"},'code[class*="language-"] ::-moz-selection':{background:"#C1DEF1"},'pre[class*="language-"]::selection':{background:"#C1DEF1"},'pre[class*="language-"] ::selection':{background:"#C1DEF1"},'code[class*="language-"]::selection':{background:"#C1DEF1"},'code[class*="language-"] ::selection':{background:"#C1DEF1"},':not(pre) > code[class*="language-"]':{padding:".2em",paddingTop:"1px",paddingBottom:"1px",background:"#f8f8f8",border:"1px solid #dddddd"},comment:{color:"#008000",fontStyle:"italic"},prolog:{color:"#008000",fontStyle:"italic"},doctype:{color:"#008000",fontStyle:"italic"},cdata:{color:"#008000",fontStyle:"italic"},namespace:{Opacity:".7"},string:{color:"#A31515"},punctuation:{color:"#393A34"},operator:{color:"#393A34"},url:{color:"#36acaa"},symbol:{color:"#36acaa"},number:{color:"#36acaa"},boolean:{color:"#36acaa"},variable:{color:"#36acaa"},constant:{color:"#36acaa"},inserted:{color:"#36acaa"},atrule:{color:"#0000ff"},keyword:{color:"#0000ff"},"attr-value":{color:"#0000ff"},".language-autohotkey .token.selector":{color:"#0000ff"},".language-json .token.boolean":{color:"#0000ff"},".language-json .token.number":{color:"#0000ff"},'code[class*="language-css"]':{color:"#0000ff"},function:{color:"#393A34"},deleted:{color:"#9a050f"},".language-autohotkey .token.tag":{color:"#9a050f"},selector:{color:"#800000"},".language-autohotkey .token.keyword":{color:"#00009f"},important:{color:"#e90",fontWeight:"bold"},bold:{fontWeight:"bold"},italic:{fontStyle:"italic"},"class-name":{color:"#2B91AF"},".language-json .token.property":{color:"#2B91AF"},tag:{color:"#800000"},"attr-name":{color:"#ff0000"},property:{color:"#ff0000"},regex:{color:"#ff0000"},entity:{color:"#ff0000"},"directive.tag.tag":{background:"#ffff00",color:"#393A34"},".line-numbers.line-numbers .line-numbers-rows":{borderRightColor:"#a5a5a5"},".line-numbers .line-numbers-rows > span:before":{color:"#2B91AF"},".line-highlight.line-highlight":{background:"linear-gradient(to right, rgba(193, 222, 241, 0.2) 70%, rgba(221, 222, 241, 0))"}},T={primary:b.button(()=>[{paddingLeft:"0.625rem",paddingRight:"0.625rem",paddingTop:"0.375rem",paddingBottom:"0.375rem"},{fontSize:"0.875rem",lineHeight:"1.25rem",fontWeight:"600"},{"--tw-bg-opacity":"1",backgroundColor:"rgb(37 99 235 / var(--tw-bg-opacity, 1))","--tw-text-opacity":"1",color:"rgb(255 255 255 / var(--tw-text-opacity, 1))",":hover":{"--tw-bg-opacity":"1",backgroundColor:"rgb(59 130 246 / var(--tw-bg-opacity, 1))"},":focus-visible":{outlineColor:"#3b82f6"}},{":focus-visible":{outlineStyle:"solid",outlineWidth:"2px",outlineOffset:"2px"}},{"--tw-ring-offset-shadow":"var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color)","--tw-ring-shadow":"var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color)",boxShadow:"var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000)","--tw-ring-inset":"inset","--tw-ring-opacity":"1","--tw-ring-color":"rgb(29 78 216 / var(--tw-ring-opacity, 1))"}]),secondary:b.button(()=>[{paddingLeft:"0.625rem",paddingRight:"0.625rem",paddingTop:"0.375rem",paddingBottom:"0.375rem"},{fontSize:"0.875rem",lineHeight:"1.25rem",fontWeight:"600"},{"--tw-bg-opacity":"1",backgroundColor:"rgb(255 255 255 / var(--tw-bg-opacity, 1))","--tw-text-opacity":"1",color:"rgb(17 24 39 / var(--tw-text-opacity, 1))",":hover":{"--tw-bg-opacity":"1",backgroundColor:"rgb(249 250 251 / var(--tw-bg-opacity, 1))"}},{"--tw-ring-offset-shadow":"var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color)","--tw-ring-shadow":"var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color)",boxShadow:"var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000)","--tw-ring-inset":"inset","--tw-ring-opacity":"1","--tw-ring-color":"rgb(209 213 219 / var(--tw-ring-opacity, 1))"}])},U=({children:a,variant:t="primary",...r})=>{const o=T[t];return e(o,r,a)},I={...$};function Q({content:a=null,contentType:t=null}){const r=new TextDecoder("utf-8"),o=r.decode(a),[l,c]=n.useState(o==null?void 0:o.slice(0,8e3)),i=()=>c(o);switch(t){case"application/json":return e(k.Fragment,null,e(F,{language:"javascript",className:"w-fit overflow-x-auto text-black language-javascript max-w-full text-xs",children:l||"",style:I,customStyle:{padding:0,border:0}}),((l==null?void 0:l.length)??0)<((o==null?void 0:o.length)||0)&&e("div",{className:"flex w-full justify-end mb-2"},e(U,{variant:"secondary",onClick:i},"Load all")));case"image/png":case"image/svg+xml":case"image/webp":case"image/jpeg":if(a){const u=new Blob([a],{type:t}),d=URL.createObjectURL(u);return e("img",{src:d,alt:"Content"})}return null}return a?e("pre",{className:"max-w-full overflow-x-auto p-4 text-xs text-black",style:{padding:0,border:0}},r.decode(a)):null}function _({id:a}){const t=C(a),r=n.useRef(null);return t&&t.isSuccess&&t.data!==void 0&&t.data.content.byteLength?e("div",{className:"flex space-y-2"},e(w,{targetRef:r,contentType:t.data.contentType,className:"absolute right-2",description:"copy content"}),e("div",{className:"px-2 pt-4 mt-4",ref:r},e(Q,{content:t.data.content,contentType:t.data.contentType}))):null}function q({id:a}){const t=C(a),r=new TextDecoder("utf-8"),o=n.useRef(null);if(t&&t.isSuccess&&t.data!==void 0)return e("div",{className:"flex space-y-2"},e(w,{targetRef:o,contentType:"text/html",className:"absolute right-2",description:"copy headers"}),e("div",{ref:o,className:"pt-4"},e("table",{className:"mb-2 w-full text-xs font-mono"},e("tbody",null,r.decode(t.data.content).split(`
`).map((l,c)=>{const i=l.split(":",2),u=i[0],d=i[1]?l.substring(u.length+1).trim():"";return e("tr",{key:c},e("td",{className:"px-2 w-1 text-blue-600 truncate"},u),e("td",{className:"px-2 whitespace-nowrap"},u.toLowerCase()==="cache-control"&&d.toLowerCase().includes("no-cache")?e("span",{className:"h-4 flex text-xs",title:"Cache was bypassed."},e(N,null),d):d))})))))}function Z({tags:a}){return e("div",{className:"flex gap-x-1"},a.map(([t,r])=>e("span",{key:t,className:"text-xs text-gray-500"},t,"=",r)))}function re({query:a}){var g,p;const t=H(),r=a.data,[o,l,c,i]=[r.elapsed?Math.trunc(r.elapsed)/1e3:null,r.tpdex??null,!!((g=r.extras)!=null&&g.cached),!!((p=r.extras)!=null&&p.no_cache)],u=r.tags?Object.entries(r.tags):[],d=`${window.location.origin}${t.pathname}/${r.id}`;return e(E,{hasDefaultPadding:!1,className:"divide-y divide-gray-100 overflow-hidden text-gray-900 sm:text-sm"},e(y,{title:e("div",{className:"flex gap-x-0.5 items-center"},e("span",{className:"grow"},"Transaction"),e(w,{text:d,description:"copy transaction link",className:"font-light"}),e(S,{duration:o,tpdex:l,cached:c,noCache:i,verbose:!0,className:"pl-1 pr-2"})),children:u.length?e(Z,{tags:u}):null}),(r.messages||[]).map(s=>e(y,{key:s.id,title:e(k.Fragment,null,e("span",{className:"mr-2"},P(s.kind)),e(B,{kind:s.kind,summary:s.summary,endpoint:r.endpoint})),subtitle:s.created_at?e("span",{className:"text-xs text-gray-500"},z(new Date(s.created_at),"PPPPpppp")):void 0,open:s.kind!="error",className:"relative"},e(q,{id:s.headers}),e(_,{id:s.body}))),null)}export{W as F,re as T,D as a,oe as u};
