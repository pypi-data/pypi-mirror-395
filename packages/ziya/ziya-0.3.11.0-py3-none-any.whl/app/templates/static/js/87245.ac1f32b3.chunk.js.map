{"version":3,"file":"static/js/87245.ac1f32b3.chunk.js","mappings":"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","sources":["internal/mcpBuilderFormatter.ts"],"sourcesContent":["/**\n * Amazon Builder MCP specific formatting enhancements\n * This file contains Amazon-internal knowledge and should NOT be committed to public branches\n */\n\nimport { FormattedOutput, registerInternalFormatter, registerToolHeaderEnhancer } from '../utils/mcpFormatter';\n\n// Amazon-specific tool knowledge\nconst AMAZON_TOOL_MAPPINGS = {\n  'mcp_SearchAcronymCentral': 'acronym',\n  'mcp_TicketingReadActions': 'ticketing',\n  'mcp_WorkspaceSearch': 'workspace_search',\n  'WorkspaceSearch': 'workspace_search',\n  'mcp_TaskeiGetRooms': 'taskei_rooms',\n  'mcp_TaskeiListTasks': 'taskei_tasks',\n  'mcp_OncallReadActions': 'oncall',\n  'mcp_ApolloReadActions': 'apollo',\n  'mcp_GetSasRisks': 'sas_risks',\n  'mcp_WorkspaceGitDetails': 'workspace_git',\n  'mcp_GetPipelineHealth': 'pipeline_health',\n  'mcp_InternalCodeSearch': 'code_search',\n  'mcp_ReadInternalWebsites': 'website_content',\n  'mcp_InternalSearch': 'internal_search',\n  'mcp_InternalCodeSearch': 'code_search'\n};\n\nconst AMAZON_FIELD_LABELS = {\n  'ownerLogin': 'Owner',\n  'managerLogin': 'Manager',\n  'teamName': 'Team',\n  'resolverGroup': 'Resolver Group',\n  'environmentName': 'Environment',\n  'pipelineName': 'Pipeline'\n};\n\n/**\n * Enhance display headers for Amazon-internal tools\n */\nfunction enhanceAmazonToolHeader(toolName: string, baseHeader: string, args: Record<string, any>): string | null {\n  const toolType = AMAZON_TOOL_MAPPINGS[toolName as keyof typeof AMAZON_TOOL_MAPPINGS];\n\n  if (!toolType) return null; // Let generic formatter handle it\n\n  switch (toolType) {\n    case 'internal_search':\n      if (args.query) {\n        const domain = args.domain ? ` (${args.domain})` : '';\n        return `Internal Search: ${args.query}${domain}`;\n      }\n      break;\n\n    case 'code_search':\n      if (args.query) {\n        const searchType = args.searchType ? ` [${args.searchType}]` : '';\n        return `Code Search: ${args.query}${searchType}`;\n      }\n      break;\n\n    case 'acronym':\n      if (args.acronym) {\n        return `Acronym: ${args.acronym}`;\n      }\n      break;\n\n    case 'workspace_search':\n      if (args.searchQuery) {\n        const type = args.searchType ? ` [${args.searchType}]` : '';\n        return `Workspace Search: ${args.searchQuery}${type}`;\n      }\n      break;\n\n    case 'website_content':\n      if (args.inputs) {\n        const url = typeof args.inputs === 'string' ? args.inputs : JSON.stringify(args.inputs);\n        const truncated = url.length > 50 ? url.substring(0, 50) + '...' : url;\n        return `Read: ${truncated}`;\n      }\n      break;\n  }\n\n  return null; // Let generic formatter handle it\n}\n\nfunction formatBuilderMcpOutput(toolName: string, result: any, options: any): FormattedOutput | null {\n  const toolType = AMAZON_TOOL_MAPPINGS[toolName as keyof typeof AMAZON_TOOL_MAPPINGS];\n\n  if (!toolType) {\n    return null; // Let generic formatter handle it\n  }\n\n  switch (toolType) {\n    case 'acronym':\n      return formatAmazonAcronym(result, options);\n    case 'ticketing':\n      return formatAmazonTicketing(result, options);\n    case 'taskei_rooms':\n      return formatAmazonTaskeiRooms(result, options);\n    case 'oncall':\n      return formatAmazonOncall(result, options);\n    case 'apollo':\n      return formatAmazonApollo(result, options);\n    case 'sas_risks':\n      return formatAmazonSasRisks(result, options);\n    case 'workspace_git':\n      return formatAmazonWorkspaceGit(result, options);\n    case 'code_search':\n      return formatAmazonCodeSearch(result, options);\n    case 'workspace_search':\n      return formatAmazonWorkspaceSearch(result, options);\n    case 'internal_search':\n      return formatAmazonInternalSearch(result, options);\n    default:\n      return null;\n  }\n}\n\n/**\n * Format file size in human-readable format\n */\nfunction formatFileSize(bytes: number): string {\n  if (bytes < 1024) return `${bytes} B`;\n  if (bytes < 1024 * 1024) return `${(bytes / 1024).toFixed(1)} KB`;\n  if (bytes < 1024 * 1024 * 1024) return `${(bytes / (1024 * 1024)).toFixed(1)} MB`;\n  return `${(bytes / (1024 * 1024 * 1024)).toFixed(1)} GB`;\n}\n\n/**\n * Truncate snippet to max lines\n */\nfunction truncateSnippet(snippet: string, maxLines: number): { text: string; truncated: boolean } {\n  const lines = snippet.split('\\n');\n  if (lines.length <= maxLines) {\n    return { text: snippet, truncated: false };\n  }\n  \n  return {\n    text: lines.slice(0, maxLines).join('\\n'),\n    truncated: true,\n  };\n}\n\n/**\n * Add line numbers to snippet\n */\nfunction addLineNumbers(snippet: string, startLine: number): string {\n  const lines = snippet.split('\\n');\n  const maxLineNum = startLine + lines.length - 1;\n  const padding = maxLineNum.toString().length;\n  \n  return lines\n    .map((line, idx) => {\n      const lineNum = (startLine + idx).toString().padStart(padding, ' ');\n      return `${lineNum} | ${line}`;\n    })\n    .join('\\n');\n}\n\n/**\n * Highlight matching terms in snippet (bold markdown)\n */\nfunction highlightCodeMatches(snippet: string, matchingParts: string[] = []): string {\n  if (matchingParts.length === 0) return snippet;\n  \n  let highlighted = snippet;\n  matchingParts.forEach(part => {\n    // Use word boundaries to avoid partial matches in code\n    const regex = new RegExp(`\\\\b(${part})\\\\b`, 'gi');\n    highlighted = highlighted.replace(regex, '**$1**');\n  });\n  \n  return highlighted;\n}\n\nfunction formatAmazonCodeSearch(result: any, _options: any): FormattedOutput | null {\n  const { input } = _options;\n\n  // Extract search parameters\n  let effectiveInput = input || {};\n\n  // Handle tool_input wrapper\n  if (effectiveInput.tool_input && typeof effectiveInput.tool_input === 'string') {\n    try {\n      effectiveInput = JSON.parse(effectiveInput.tool_input);\n    } catch (e) {\n      console.error('ðŸ“‹ CODE_SEARCH: Failed to parse tool_input:', e);\n      effectiveInput = input || {};\n    }\n  } else if (effectiveInput.tool_input && typeof effectiveInput.tool_input === 'object') {\n    effectiveInput = effectiveInput.tool_input;\n  }\n\n  const searchQuery = effectiveInput.query || '';\n  const searchType = effectiveInput.searchType || 'code';\n\n  // Handle both direct result and wrapped content\n  const searchData = result.content || result;\n  const results = searchData.results || [];\n  const totalHits = searchData.totalHits || {};\n  const paginationInfo = searchData.paginationInfo || '';\n\n  if (!results.length) {\n    const queryDisplay = searchQuery || '(empty query)';\n    const searchSummary = `No code matches found for **\"${queryDisplay}\"** [${searchType}]`;\n\n    return {\n      content: searchSummary,\n      type: 'search_results',\n      collapsed: false,\n      summary: searchSummary,\n      // Don't include hierarchicalResults for empty results\n      // to keep the output clean\n    };\n  }\n\n  // Create detailed summary\n  const totalCount = totalHits.count || 0;\n  const relation = totalHits.relation || '';\n  const queryInfo = searchQuery ? `ðŸ” \"${searchQuery}\" [${searchType}]` : '';\n  const resultSummary = `${results.length} result${results.length === 1 ? '' : 's'}${totalCount ? ` of ${totalCount.toLocaleString()} ${relation}` : ''}`;\n  const summary = queryInfo ? `${queryInfo} - ${resultSummary}` : resultSummary;\n\n  // Create hierarchical results for two-level collapsible rendering\n  const hierarchicalResults = results.map((result: any, index: number) => {\n    const repo = result.repository?.name || 'Unknown';\n    const filePath = result.filePath || '';\n    const matches = result.matches || 0;\n    const fileSize = formatFileSize(result.fileSizeBytes || 0);\n    const branches = result.branches?.join(', ') || 'mainline';\n    const matchingParts = result.matchingQueryParts || [];\n\n    // Build title with metadata\n    const title = `${index + 1}. ${repo}/${filePath} (${matches} match${matches === 1 ? '' : 'es'}, ${fileSize})`;\n\n    // Handle truncated files\n    if (result.snippetTruncationReason) {\n      const reason = result.snippetTruncationReason;\n      return {\n        title,\n        content: `âš ï¸ **${reason}** - No snippets available\\n\\n**Branch:** ${branches}\\n\\nView on [code.amazon.com](https://code.amazon.com/packages/${repo}/blobs/${branches}/--/${filePath})`,\n        language: 'text',\n        metadata: {\n          repo,\n          filePath,\n          truncated: true,\n          reason\n        }\n      };\n    }\n\n    // Build content from snippets\n    const snippets = result.snippets || [];\n    if (snippets.length === 0) {\n      return {\n        title,\n        content: '*No snippets available*',\n        language: 'text',\n        metadata: { repo, filePath, matches }\n      };\n    }\n\n    // Format snippets with line numbers and highlighting\n    const snippetContent = snippets.map((snippet: any, snippetIdx: number) => {\n      let snippetText = snippet.snippet || '';\n      const startLine = snippet.startLineNumber || 1;\n\n      // Truncate long snippets\n      const { text, truncated } = truncateSnippet(snippetText, 20);\n      snippetText = text;\n\n      // Highlight matches\n      snippetText = highlightCodeMatches(snippetText, matchingParts);\n\n      // Add line numbers\n      snippetText = addLineNumbers(snippetText, startLine);\n\n      let header = snippets.length > 1 ? `**Snippet ${snippetIdx + 1}** (Line ${startLine}):\\n\\n` : '';\n      let footer = truncated ? '\\n\\n*... (truncated, showing first 20 lines)*' : '';\n\n      return `${header}${snippetText}${footer}`;\n    }).join('\\n\\n---\\n\\n');\n\n    // Detect language from file extension\n    const ext = filePath.split('.').pop()?.toLowerCase() || '';\n    const langMap: { [key: string]: string } = {\n      'js': 'javascript', 'jsx': 'javascript', 'ts': 'typescript', 'tsx': 'typescript',\n      'py': 'python', 'rb': 'ruby', 'php': 'php', 'java': 'java', 'go': 'go',\n      'rs': 'rust', 'cpp': 'cpp', 'c': 'c', 'cs': 'csharp', 'css': 'css',\n      'html': 'html', 'xml': 'xml', 'json': 'json', 'md': 'markdown',\n      'sh': 'bash', 'yml': 'yaml', 'yaml': 'yaml', 'sql': 'sql'\n    };\n    const language = langMap[ext] || 'text';\n\n    return {\n      title,\n      content: snippetContent,\n      language,\n      metadata: {\n        repo,\n        filePath,\n        matches,\n        branches,\n        fileSize,\n        snippetCount: snippets.length\n      }\n    };\n  });\n\n  const shouldCollapse = results.length > 3;\n\n  // Add pagination info if available\n  let fullSummary = summary;\n  if (paginationInfo) {\n    fullSummary += `\\n\\n*${paginationInfo}*`;\n  }\n\n  // For code search, when collapsed, show only summary + first few titles\n  // The full hierarchicalResults should be rendered separately by the UI\n  const contentForToolBlock = shouldCollapse\n    ? `${summary}\\n\\n**Preview (showing ${Math.min(3, results.length)} of ${results.length}):**\\n` +\n      hierarchicalResults.slice(0, 3).map(r => `â€¢ ${r.title}`).join('\\n') +\n      (results.length > 3 ? `\\n\\n*Expand for ${results.length - 3} more results*` : '')\n    : fullSummary;\n\n  return {\n    content: contentForToolBlock,\n    type: 'search_results',\n    collapsed: shouldCollapse,\n    summary: summary,\n    hierarchicalResults: shouldCollapse ? hierarchicalResults : undefined\n  };\n}\n\nfunction formatAmazonWorkspaceSearch(result: any, _options: any): FormattedOutput | null {\n  const { input } = _options;\n\n  // Extract search parameters - handle both direct input and nested in result\n  // CRITICAL: input.tool_input can be a JSON string that needs parsing!\n  let effectiveInput = input || {};\n\n  // If tool_input exists and is a string, parse it\n  if (effectiveInput.tool_input && typeof effectiveInput.tool_input === 'string') {\n    try {\n      effectiveInput = JSON.parse(effectiveInput.tool_input);\n      console.log('ðŸ“‹ WORKSPACE_SEARCH: Parsed tool_input from JSON string');\n    } catch (e) {\n      console.error('ðŸ“‹ WORKSPACE_SEARCH: Failed to parse tool_input:', e);\n      effectiveInput = input || {};\n    }\n  } else if (effectiveInput.tool_input && typeof effectiveInput.tool_input === 'object') {\n    // tool_input is already an object\n    effectiveInput = effectiveInput.tool_input;\n  }\n\n  const searchQuery = effectiveInput.searchQuery !== undefined ? effectiveInput.searchQuery : '';\n  const searchType = effectiveInput.searchType || effectiveInput.type || 'contentLiteral';\n  const contextLines = effectiveInput.contextLines || 0;\n  const globPatterns = effectiveInput.globPatterns;\n\n  // Handle both direct result and wrapped content\n  const searchData = result.content || result;\n  const results = searchData.results || [];\n  const totalCount = searchData.totalCount || 0;\n  const hasMore = searchData.hasMore || false;\n\n  if (!results.length) {\n    // Include query, search type, and context info in a compact format\n    const contextInfo = contextLines > 0 ? ` with ${contextLines} context lines` : '';\n\n    // Always include search query information, even if empty\n    const queryDisplay = searchQuery || '(empty query)';\n    const searchSummary = `No matches found for **\"${queryDisplay}\"** (${searchType})${contextInfo}`;\n\n    // Add helpful context if glob patterns were used\n    const globInfo = globPatterns\n      ? ` in patterns: ${Array.isArray(globPatterns) ? JSON.stringify(globPatterns) : globPatterns}`\n      : '';\n\n    const fullSummary = searchSummary + globInfo;\n\n    return {\n      content: fullSummary,\n      type: 'search_results',\n      collapsed: false,\n      summary: fullSummary\n    };\n  }\n\n  // Create detailed summary with query information\n  const queryInfo = searchQuery ? `Query: **\"${searchQuery}\"** (${searchType})` : '';\n  const resultSummary = `${results.length}${hasMore ? '+' : ''} result${results.length === 1 ? '' : 's'}${totalCount && totalCount !== results.length ? ` of ${totalCount} total` : ''}`;\n  const summary = queryInfo ? `${queryInfo} - ${resultSummary}` : resultSummary;\n\n  // Create hierarchical results for two-level collapsible rendering\n  const hierarchicalResults = results.map((result: any, index: number) => {\n    const matchCount = result.lines?.length || 0;\n    const title = `${index + 1}. ${result.filepath} (${matchCount} matching line${matchCount === 1 ? '' : 's'})`;\n\n    let codeContent = '';\n    if (result.lines && result.lines.length > 0) {\n      // Extract file extension for syntax highlighting\n      const ext = result.filepath.split('.').pop()?.toLowerCase() || '';\n      const langMap: { [key: string]: string } = {\n        'js': 'javascript', 'jsx': 'javascript', 'ts': 'typescript', 'tsx': 'typescript',\n        'py': 'python', 'rb': 'ruby', 'php': 'php', 'java': 'java', 'go': 'go',\n        'rs': 'rust', 'cpp': 'cpp', 'c': 'c', 'cs': 'csharp', 'css': 'css',\n        'html': 'html', 'xml': 'xml', 'md': 'markdown', 'sh': 'bash', 'yml': 'yaml', 'yaml': 'yaml'\n      };\n      const language = langMap[ext] || 'text';\n\n      codeContent = result.lines.join('\\n');\n\n      return {\n        title,\n        content: codeContent,\n        language,\n        metadata: {\n          filepath: result.filepath,\n          matchCount\n        }\n      };\n    } else {\n      return {\n        title,\n        content: 'No content available',\n        language: 'text',\n        metadata: {\n          filepath: result.filepath,\n          matchCount: 0\n        }\n      };\n    }\n  });\n\n  const shouldCollapse = results.length > 5;\n\n  // Create a more descriptive summary for workspace search\n  let summaryText = summary;\n  if (searchQuery && shouldCollapse) {\n    summaryText = `Search \"${searchQuery}\" - ${summary}`;\n  } else if (shouldCollapse) {\n    summaryText = summary;\n  }\n\n  return {\n    content: summary,\n    type: 'search_results',\n    collapsed: shouldCollapse,\n    summary: summaryText,\n    hierarchicalResults\n  };\n}\n\nfunction formatAmazonAcronym(result: any, _options: any): FormattedOutput | null {\n  if (!result.results?.[0]) {\n    return { content: 'No acronym definitions found', type: 'text', collapsed: false };\n  }\n\n  const acronym = result.results[0];\n  const definitions = Object.entries(acronym.defsUrls || {})\n    .map(([def, url]) => `â€¢ **${def}**${url ? ` - [Link](${url})` : ''}`)\n    .join('\\n');\n\n  return {\n    content: `**${acronym.acronymName}** Definitions:\\n\\n${definitions}`,\n    type: 'list',\n    collapsed: false,\n    metadata: { totalResults: result.totalResults }\n  };\n}\n\nfunction formatAmazonTicketing(result: any, _options: any): FormattedOutput {\n  if (result.status === 'success' && result.data?.groups) {\n    const groups = result.data.groups.map((group: any) =>\n      `â€¢ **${group.details.label}**\\n  - ${group.details.description}\\n  - ID: ${group.name}`\n    ).join('\\n\\n');\n\n    return {\n      content: `Resolver Groups:\\n\\n${groups}`,\n      type: 'list',\n      collapsed: result.data.groups.length > 5\n    };\n  }\n\n  return { content: JSON.stringify(result, null, 2), type: 'json', collapsed: true };\n}\n\nfunction formatAmazonTaskeiRooms(result: any, _options: any): FormattedOutput {\n  if (result.rooms) {\n    const rooms = result.rooms.map((room: any) =>\n      `â€¢ **${room.name}**\\n  - ${room.description}\\n  - Sprints: ${room.enableSprints ? 'âœ“' : 'âœ—'} | Kanban: ${room.enableKanban ? 'âœ“' : 'âœ—'}`\n    ).join('\\n\\n');\n\n    return {\n      content: `Taskei Rooms (${result.rooms.length}):\\n\\n${rooms}`,\n      type: 'list',\n      collapsed: result.rooms.length > 10\n    };\n  }\n\n  return { content: JSON.stringify(result, null, 2), type: 'json', collapsed: true };\n}\n\nfunction formatAmazonOncall(result: any, _options: any): FormattedOutput {\n  if (result.status === 'success' && result.data) {\n    const teams = result.data.map((team: any) =>\n      `â€¢ **${team.teamName}**\\n  - ${team.description}\\n  - Members: ${team.members.split(' ').length}\\n  - Owners: ${team.owners.split(' ').length}`\n    ).join('\\n\\n');\n\n    return {\n      content: `On-call Teams:\\n\\n${teams}`,\n      type: 'list',\n      collapsed: result.data.length > 5\n    };\n  }\n\n  return { content: JSON.stringify(result, null, 2), type: 'json', collapsed: true };\n}\n\nfunction formatAmazonApollo(result: any, _options: any): FormattedOutput {\n  if (result.content && result.content.status === 'success' && result.content.data) {\n    const data = result.content.data;\n\n    if (data.EnvironmentStageNames) {\n      const stages = data.EnvironmentStageNames.map((stage: any) =>\n        `â€¢ **${stage.Alias || 'No Alias'}**\\n  - Environment: ${stage.EnvironmentStageIdentifier.EnvironmentName}\\n  - Stage: ${stage.EnvironmentStageIdentifier.Stage}\\n  - Owner: ${stage.Owner || 'No owner'}\\n  - Modified: ${new Date(stage.DateModified * 1000).toLocaleDateString()}`\n      ).join('\\n\\n');\n\n      return {\n        content: `Apollo Environment Stages:\\n\\n${stages}`,\n        type: 'list',\n        collapsed: data.EnvironmentStageNames.length > 10\n      };\n    }\n  }\n\n  return { content: JSON.stringify(result, null, 2), type: 'json', collapsed: true };\n}\n\nfunction formatAmazonSasRisks(result: any, _options: any): FormattedOutput {\n  if (result.content && result.content.status === 'success' && result.content.data) {\n    const data = result.content.data;\n\n    if (data.ownerLogin) {\n      const summary = `**Risk Summary for ${data.ownerName} (${data.ownerLogin})**\\nManager: ${data.managerName} (${data.managerLogin})\\n\\n`;\n\n      const riskTypes = Object.entries(data.totalCount).map(([type, counts]: [string, any]) =>\n        `â€¢ **${type.replace(/_/g, ' ')}**: ${counts.totalRiskCount} total risks, ${counts.blockingRiskCount} blocking`\n      ).join('\\n');\n\n      return {\n        content: `${summary}${riskTypes}`,\n        type: 'list',\n        collapsed: false\n      };\n    }\n  }\n\n  return { content: JSON.stringify(result, null, 2), type: 'json', collapsed: true };\n}\n\nfunction formatAmazonWorkspaceGit(result: any, _options: any): FormattedOutput {\n  if (result.gitRepositories) {\n    const repos = result.gitRepositories.map((repo: any) => {\n      let repoInfo = `â€¢ **${repo.repositoryName}** (${repo.repositoryPath})\\n`;\n\n      if (repo.gitStatus) {\n        const statusLines = repo.gitStatus.split('\\n').slice(0, 3);\n        repoInfo += `  Status: ${statusLines.join(' | ')}\\n`;\n      }\n\n      if (repo.gitDiff) {\n        if (repo.gitDiff === \"Git diff is too large for summarizing details\") {\n          repoInfo += `  Diff: Large changes present\\n`;\n        } else if (repo.gitDiff.length > 200) {\n          repoInfo += `  Diff: ${repo.gitDiff.split('\\n').length} lines of changes\\n`;\n        } else if (repo.gitDiff.trim()) {\n          repoInfo += `  Diff: Changes present\\n`;\n        } else {\n          repoInfo += `  Diff: No changes\\n`;\n        }\n      }\n\n      return repoInfo;\n    }).join('\\n');\n\n    return {\n      content: `Git Status for ${result.gitRepositories.length} repositories:\\n\\n${repos}`,\n      type: 'list',\n      collapsed: result.gitRepositories.length > 5\n    };\n  }\n\n  return { content: JSON.stringify(result, null, 2), type: 'json', collapsed: true };\n}\n\nfunction formatAmazonInternalSearch(result: any, _options: any): FormattedOutput | null {\n  const { input } = _options;\n\n  // Extract search parameters\n  let effectiveInput = input || {};\n\n  // Handle tool_input wrapper (can be string or object)\n  if (effectiveInput.tool_input && typeof effectiveInput.tool_input === 'string') {\n    try {\n      effectiveInput = JSON.parse(effectiveInput.tool_input);\n      console.log('ðŸ“‹ INTERNAL_SEARCH: Parsed tool_input from JSON string');\n    } catch (e) {\n      console.error('ðŸ“‹ INTERNAL_SEARCH: Failed to parse tool_input:', e);\n      effectiveInput = input || {};\n    }\n  } else if (effectiveInput.tool_input && typeof effectiveInput.tool_input === 'object') {\n    effectiveInput = effectiveInput.tool_input;\n  }\n\n  const searchQuery = effectiveInput.query || '';\n  const domain = effectiveInput.domain || 'ALL';\n  const sortBy = effectiveInput.sortBy || 'SCORE';\n\n  // Handle both direct result and wrapped content\n  const searchData = result.content || result;\n  const results = searchData.results || [];\n  const totalResults = searchData.totalResults || 0;\n\n  if (!results.length) {\n    const queryDisplay = searchQuery || '(empty query)';\n    const domainDisplay = domain !== 'ALL' ? ` in **${domain}**` : '';\n    const searchSummary = `No results found for **\"${queryDisplay}\"**${domainDisplay}`;\n\n    return {\n      content: searchSummary,\n      type: 'search_results',\n      collapsed: false,\n      summary: searchSummary\n    };\n  }\n\n  // Create detailed summary with query information\n  const queryInfo = searchQuery ? `ðŸ” \"${searchQuery}\"${domain !== 'ALL' ? ` in **${domain}**` : ''}` : '';\n  const resultSummary = `${results.length} result${results.length === 1 ? '' : 's'}${totalResults && totalResults !== results.length ? ` of ${totalResults} total` : ''}`;\n  const summary = queryInfo ? `${queryInfo} - ${resultSummary}` : resultSummary;\n\n  // Create hierarchical results for two-level collapsible rendering\n  const hierarchicalResults = results.map((result: any, index: number) => {\n    const title = result.displayTitle || result.title || 'Untitled';\n    const url = result.url || '';\n    const domain = result.domain || '';\n    const modDate = result.modificationDate ? new Date(result.modificationDate).toLocaleDateString() : '';\n    const score = result.score ? ` (score: ${result.score})` : '';\n\n    // Build title with metadata\n    const titleWithMeta = `${index + 1}. ${title}${domain ? ` [${domain}]` : ''}${score}`;\n\n    // Build content with description and metadata\n    let contentLines = [];\n\n    if (result.description) {\n      contentLines.push(result.description.trim());\n    }\n\n    if (url) {\n      contentLines.push(`**URL:** [${url}](${url})`);\n    }\n\n    if (modDate) {\n      contentLines.push(`**Modified:** ${modDate}`);\n    }\n\n    if (result.author) {\n      contentLines.push(`**Author:** ${result.author}`);\n    }\n\n    const content = contentLines.join('\\n\\n');\n\n    return {\n      title: titleWithMeta,\n      content,\n      language: 'markdown',\n      metadata: {\n        url,\n        domain,\n        modDate,\n        score: result.score\n      }\n    };\n  });\n\n  const shouldCollapse = results.length > 5;\n\n  return {\n    content: summary,\n    type: 'search_results',\n    collapsed: shouldCollapse,\n    summary: summary,\n    hierarchicalResults\n  };\n}\n\nregisterInternalFormatter(formatBuilderMcpOutput);\nregisterToolHeaderEnhancer(enhanceAmazonToolHeader);\n"],"names":["AMAZON_TOOL_MAPPINGS","registerInternalFormatter","toolName","result","options","toolType","_result$results","results","content","type","collapsed","acronym","definitions","Object","entries","defsUrls","map","_ref","def","url","concat","join","acronymName","metadata","totalResults","formatAmazonAcronym","_result$data","status","data","groups","group","details","label","description","name","length","JSON","stringify","formatAmazonTicketing","rooms","room","enableSprints","enableKanban","formatAmazonTaskeiRooms","teams","team","teamName","members","split","owners","formatAmazonOncall","EnvironmentStageNames","stages","stage","Alias","EnvironmentStageIdentifier","EnvironmentName","Stage","Owner","Date","DateModified","toLocaleDateString","formatAmazonApollo","ownerLogin","summary","ownerName","managerName","managerLogin","riskTypes","totalCount","_ref2","counts","replace","totalRiskCount","blockingRiskCount","formatAmazonSasRisks","gitRepositories","repos","repo","repoInfo","repositoryName","repositoryPath","gitStatus","statusLines","slice","gitDiff","trim","formatAmazonWorkspaceGit","_options","input","effectiveInput","tool_input","parse","e","console","error","searchQuery","query","searchType","searchData","totalHits","paginationInfo","searchSummary","count","relation","queryInfo","resultSummary","toLocaleString","hierarchicalResults","index","_result$repository","_result$branches","_filePath$split$pop","repository","filePath","matches","fileSize","bytes","fileSizeBytes","toFixed","branches","matchingParts","matchingQueryParts","title","snippetTruncationReason","reason","language","truncated","snippets","snippetContent","snippet","snippetIdx","snippetText","startLine","startLineNumber","text","maxLines","lines","truncateSnippet","arguments","undefined","highlighted","forEach","part","regex","RegExp","highlightCodeMatches","maxLineNum","padding","toString","line","idx","lineNum","padStart","addLineNumbers","header","footer","pop","toLowerCase","snippetCount","shouldCollapse","fullSummary","Math","min","r","formatAmazonCodeSearch","log","contextLines","globPatterns","hasMore","contextInfo","Array","isArray","_result$lines","matchCount","filepath","codeContent","_result$filepath$spli","summaryText","formatAmazonWorkspaceSearch","domain","sortBy","queryDisplay","domainDisplay","displayTitle","modDate","modificationDate","score","titleWithMeta","contentLines","push","author","formatAmazonInternalSearch","registerToolHeaderEnhancer","baseHeader","args","inputs","substring"],"ignoreList":[],"sourceRoot":""}