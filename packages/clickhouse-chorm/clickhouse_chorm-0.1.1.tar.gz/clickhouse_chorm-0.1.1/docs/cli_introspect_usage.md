# CHORM CLI Introspection Usage

## Generate Models from Existing Tables

From the project root (`/home/zwickvitaly/VSCodeProjects/CHORM`):

### Basic Usage

```bash
# Generate models from all tables in default database
.venv/bin/python -m chorm.cli introspect --host localhost --port 8123 --output models.py
```

### Specific Tables

```bash
# Generate models for specific tables only
.venv/bin/python -m chorm.cli introspect \
    --host localhost \
    --port 8123 \
    --tables test_users,test_orders,test_events \
    --output my_models.py
```

### Different Database

```bash
# Specify database
.venv/bin/python -m chorm.cli introspect \
    --host localhost \
    --port 8123 \
    --database mydb \
    --output models.py
```

### With Authentication

```bash
# With username and password
.venv/bin/python -m chorm.cli introspect \
    --host localhost \
    --port 8123 \
    --user myuser \
    --password mypass \
    --output models.py
```

### Using Config File

If you have `chorm.toml` in your project:

```bash
# Will use settings from chorm.toml
.venv/bin/python -m chorm.cli introspect --output models.py
```

## Example Output

The generated `models.py` will contain:

```python
"""
Generated by chorm-cli introspect
Generated at: 2025-12-04 12:16:02
"""

from chorm import Table, Column
from chorm.types import Array, DateTime, LowCardinality, Map, Nullable, String, UInt64, UInt8
from chorm.table_engines import MergeTree, ReplacingMergeTree

class TestUsers(Table):
    __tablename__ = 'test_users'
    __engine__ = MergeTree()
    __order_by__ = ['id', 'created_at']
    __partition_by__ = 'toYYYYMM(created_at)'
    
    id = Column(UInt64())
    name = Column(String())
    email = Column(String())
    age = Column(UInt8())
    country = Column(LowCardinality(String()))
    tags = Column(Array(String()))
    metadata = Column(Map(String(), String()))
    created_at = Column(DateTime())
```

## Notes

- File is created in current directory
- TODO comments added for types requiring manual configuration (e.g., Decimal precision/scale)
- All imports are automatically generated
- Works without `chorm.toml` if connection params provided via CLI
