"""
Admin Dashboard for {{ app_name }}
===================================

Custom admin dashboard widgets and views.

Generated by ADEMA Framework.
"""
from django.contrib import admin
from django.db.models import Count, Sum
from django.utils import timezone
from datetime import timedelta


# =============================================================================
# DASHBOARD WIDGETS
# =============================================================================

class {{ camel_case_app_name }}DashboardMixin:
    """
    Mixin to add dashboard widgets to the admin.
    
    Add this to your ModelAdmin to show summary statistics.
    """
    
    def get_dashboard_stats(self):
        """
        Override this method to return dashboard statistics.
        
        Returns:
            dict: Statistics to display in the admin
        """
        return {}
    
    def changelist_view(self, request, extra_context=None):
        """Add dashboard stats to the changelist view."""
        extra_context = extra_context or {}
        extra_context['dashboard_stats'] = self.get_dashboard_stats()
        return super().changelist_view(request, extra_context)


# Example implementation:
# 
# class SalesDashboardAdmin({{ camel_case_app_name }}DashboardMixin, AdemaModelAdmin):
#     """Admin with sales dashboard."""
#     
#     def get_dashboard_stats(self):
#         today = timezone.now().date()
#         month_start = today.replace(day=1)
#         
#         return {
#             'total_sales_today': Sale.objects.filter(
#                 created_at__date=today
#             ).aggregate(total=Sum('amount'))['total'] or 0,
#             
#             'sales_count_month': Sale.objects.filter(
#                 created_at__gte=month_start
#             ).count(),
#             
#             'pending_orders': Sale.objects.filter(
#                 status='pending'
#             ).count(),
#         }
