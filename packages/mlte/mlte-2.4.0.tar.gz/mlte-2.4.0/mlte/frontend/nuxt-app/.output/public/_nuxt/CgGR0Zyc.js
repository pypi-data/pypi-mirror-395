import{j as O,m as U,c as w,o as V,a as o,F as G,v as H,t as N,b as i,w as u,d as l,r as C,l as P,s as F,q as s,y as B,n as I,z as R}from"./B-k8Z1tc.js";import{E as J,F as D,G as K,H as M,I as Q}from"./CBhitsNU.js";import{S as W,C as q}from"./CpBh97f4.js";import{r as X}from"./DueXm2QC.js";import{i as Y}from"./DeaeknEB.js";import{b as Z}from"./D8mFk-P6.js";const ee={class:"table usa-table usa-table--borderless sortable"},te=o("thead",null,[o("tr",null,[o("th",{scope:"col",role:"columnheader"},"Parent"),o("th",{scope:"col",role:"columnheader"},"Name"),o("th",{scope:"col",role:"columnheader"},"Description"),o("th",{scope:"col",role:"columnheader"},"Actions")])],-1),ne=O({__name:"entry-list",props:{modelValue:{type:Array,required:!0}},emits:["addEntry","editEntry","deleteEntry"],setup(y,{emit:E}){const b=E;return(m,v)=>{const e=U("UsaButton");return V(),w("table",ee,[te,(V(!0),w(G,null,H(y.modelValue,(t,d)=>(V(),w("tr",{key:d},[o("td",null,N(t.parent),1),o("td",null,N(t.name),1),o("td",null,N(t.description),1),o("td",null,[i(e,{class:"secondary-button",onClick:a=>b("editEntry",t)},{default:u(()=>[l(" Edit ")]),_:2},1032,["onClick"]),i(e,{class:"usa-button usa-button--secondary",onClick:a=>b("deleteEntry",t.name)},{default:u(()=>[l(" Delete ")]),_:2},1032,["onClick"])])]))),128))])}}}),se={key:0},oe={class:"section-header"},ae=o("h3",{style:{display:"inline"}},"Custom List:",-1),le={key:1},ue={class:"submit-footer"},re=O({__name:"entry-edit",props:{modelValue:{type:Object,required:!0},newEntryFlag:{type:Boolean,required:!0},initialCustomListName:{type:String,required:!0},customListOptions:{type:Array,required:!0}},emits:["cancel","submit","updateEntry"],async setup(y,{emit:E}){let b,m;const v=E,e=y,t=C(e.initialCustomListName),d=C("None"),a=C([]),_=C({custom_list:!1,name:!1,parent:!1});[b,m]=P(()=>L(e.initialCustomListName)),await b,m();async function L(f){if(f===""){a.value=[];return}const n=await J(f);n?(d.value=n,(await D(n)).forEach(g=>{a.value.push(new W(g.name,g.name))})):(d.value="None",a.value=[])}async function k(){_.value=X(_.value);let f=!1;if(e.newEntryFlag&&t.value===""&&(_.value.custom_list=!0,f=!0),e.modelValue.name===""&&(_.value.name=!0,f=!0),e.modelValue.parent===""&&a.value.length>0&&(_.value.parent=!0,f=!0),f){Y();return}e.newEntryFlag?v("submit",t.value,e.modelValue):v("submit",e.initialCustomListName,e.modelValue)}return(f,n)=>{const $=U("UsaSelect"),g=U("UsaTextInput"),S=U("UsaButton");return V(),w("div",null,[y.newEntryFlag?F("",!0):(V(),w("div",se,[o("h1",oe,N(y.modelValue.name),1),ae,l(" "+N(y.initialCustomListName),1)])),y.newEntryFlag?(V(),w("div",le,[i($,{modelValue:s(t),"onUpdate:modelValue":n[0]||(n[0]=c=>B(t)?t.value=c:null),options:y.customListOptions,onChange:n[1]||(n[1]=c=>L(s(t)))},{label:u(()=>[l(" Custom List ")]),"error-message":u(()=>[l("Custom List must be selected.")]),_:1},8,["modelValue","options"]),i(g,{modelValue:e.modelValue.name,"onUpdate:modelValue":n[2]||(n[2]=c=>e.modelValue.name=c),error:s(_).name},{label:u(()=>[l("Name")]),"error-message":u(()=>[l("Name is required.")]),_:1},8,["modelValue","error"])])):F("",!0),i(g,{modelValue:e.modelValue.description,"onUpdate:modelValue":n[3]||(n[3]=c=>e.modelValue.description=c)},{label:u(()=>[l(" Description ")]),_:1},8,["modelValue"]),i($,{modelValue:e.modelValue.parent,"onUpdate:modelValue":n[4]||(n[4]=c=>e.modelValue.parent=c),options:s(a),error:s(_).parent,disabled:s(a).length==0},{label:u(()=>[l(" Parent: "+N(s(d)),1)]),"error-message":u(()=>[l("Parent must be selected.")]),_:1},8,["modelValue","options","error","disabled"]),o("div",ue,[i(S,{class:"primary-button",onClick:n[5]||(n[5]=c=>v("cancel"))},{default:u(()=>[l(" Cancel ")]),_:1}),i(S,{class:"primary-button",onClick:k},{default:u(()=>[l(" Save ")]),_:1})])])}}}),ie=o("title",null,"Custom Lists",-1),me={key:0},de={class:"inline-input-left"},ce={key:1},Ve=O({__name:"custom-list",async setup(y){let E,b;const m=C(!1),v=C(!1),{customListOptions:e}=([E,b]=P(()=>Z()),E=await E,b(),E),t=C(""),d=C([]),a=C(new q);_();async function _(){e.value.length>0&&(t.value=e.value[0].value,L(e.value[0].value))}async function L(p){p===""?d.value=[]:d.value=await D(p)}function k(){a.value=new q}function f(){k(),m.value=!0,v.value=!0}function n(p){a.value=p,m.value=!0,v.value=!1}async function $(p){if(!confirm("Are you sure you want to delete the entry: "+p+"?"))return;await K(t.value,p)&&L(t.value)}async function g(){m.value&&await S()}async function S(){confirm("Are you sure you want to cancel? All changes will be lost.")&&(m.value=!1,k(),await L(t.value))}async function c(p,r){let x=!0;v.value?await M(p,r)&&(x=!1):await Q(p,r)&&(x=!1),x||(L(t.value),k(),m.value=!1)}return(p,r)=>{const x=U("UsaButton"),A=U("UsaSelect"),T=ne,j=re,z=R;return V(),I(z,{name:"base-layout",onNav:g},{"page-title":u(()=>[l("Custom Lists")]),default:u(()=>[ie,s(m)?F("",!0):(V(),w("div",me,[i(x,{class:"secondary-button sub-header-float-button",onClick:f},{default:u(()=>[l(" Add Entry ")]),_:1}),o("div",de,[i(A,{modelValue:s(t),"onUpdate:modelValue":r[0]||(r[0]=h=>B(t)?t.value=h:null),options:s(e),onChange:r[1]||(r[1]=h=>L(s(t)))},null,8,["modelValue","options"])]),i(T,{modelValue:s(d),"onUpdate:modelValue":r[2]||(r[2]=h=>B(d)?d.value=h:null),onEditEntry:n,onDeleteEntry:$},null,8,["modelValue"])])),s(m)?(V(),w("div",ce,[i(j,{modelValue:s(a),"onUpdate:modelValue":r[3]||(r[3]=h=>B(a)?a.value=h:null),"new-entry-flag":s(v),"initial-custom-list-name":s(t),"custom-list-options":s(e),onCancel:S,onSubmit:c},null,8,["modelValue","new-entry-flag","initial-custom-list-name","custom-list-options"])])):F("",!0)]),_:1})}}});export{Ve as default};
