[build-system]
requires = ["hatchling"]
build-backend = "hatchling.build"

[project]
name = "arretify"
version = "0.1.0"
authors = [
  { name="Sébastien Piquemal", email="sebastien.piquemal@developpement-durable.gouv.fr" },
  { name="Sébastien Meyer", email="sebastien.meyer@developpement-durable.gouv.fr" }
]
description = "Arrêtify est une librairie Python permettant la conversion d'arrêtés préfectoraux français en HTML sémantique."
readme = "README.md"
# Python 3.13 is not supported by spacy with cuda as of august 2025.
requires-python = "~=3.12"
classifiers = [
]
license = "Apache-2.0"
license-files = ["LICENSE"]
dependencies = [
  "python-dotenv~=1.0",
  "requests~=2.32",
  "beautifulsoup4~=4.13",
  "Markdown~=3.7",
  "roman~=5.0",
  "pylatexenc~=2.10",
  "pydantic~=2.11",

  # from _vendor.clients_api_droit
  "requests~=2.32",
  "requests-cache~=1.2",
  "zeep~=4.3",
  "lxml~=5.3",

  # TODO : move this as optional dependency for OCR
  "mistralai~=1.8",
  # TODO : move this as optional dependencies for NLP
  "spacy~=3.8.7",
]

[project.urls]
Homepage = "https://github.com/mte-dgpr/arretify"
Issues = "https://github.com/mte-dgpr/arretify/issues"

[project.optional-dependencies]
dev = [
  "pytest~=8.3",
  "mypy~=1.15",
  "black~=25.1",
  "pre-commit~=4.2",
  "flake8~=7.2",
  "flake8-isort~=7.0",
  "flake8-bugbear~=24.12",
  "isort~=7.0",
  "autoflake~=2.3",
  "types-requests~=2.32",
  "types-beautifulsoup4~=4.12",
  "types-Markdown~=3.7",
  "licenseheaders~=0.8.8"
]

[project.scripts]
arretify = "arretify.main:main_cli"

[tool.mypy]
packages=["arretify"]
plugins = ['pydantic.mypy']
follow_untyped_imports = true
exclude = "arretify/_vendor"

[tool.black]
line-length = 100
extend-exclude = "arretify/_vendor"

[tool.isort]
profile = "black"
line_length = 100
extend_skip = "arretify/_vendor"

[tool.pytest.ini_options]
minversion = "6.0"
addopts = "--ignore=arretify/_vendor"

[tool.hatch.build]
exclude = [
  "examples/",
  "tmp/",
  ".git/",
]

[tool.hatch.build.targets.wheel]
packages = ["arretify"]