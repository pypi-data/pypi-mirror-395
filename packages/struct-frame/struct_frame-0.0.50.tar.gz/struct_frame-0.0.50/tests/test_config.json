{
  "$schema": "https://json-schema.org/draft-07/schema#",
  "description": "Test configuration for struct-frame code generation framework",
  "version": "2.0",
  
  "proto_files": [
    "basic_types.proto",
    "nested_messages.proto",
    "comprehensive_arrays.proto",
    "serialization_test.proto"
  ],
  
  "languages": {
    "c": {
      "name": "C",
      "enabled": true,
      "code_generation": {
        "flag": "--build_c",
        "output_path_flag": "--c_path",
        "output_dir": "tests/generated/c"
      },
      "compilation": {
        "enabled": true,
        "compiler": "gcc",
        "compiler_check": "gcc --version",
        "flags": ["-I{generated_dir}", "-o", "{output}", "{source}", "-lm"],
        "source_extension": ".c",
        "executable_extension": ".exe"
      },
      "test_dir": "tests/c",
      "build_dir": "tests/c/build"
    },
    
    "cpp": {
      "name": "C++",
      "file_prefix": "cpp",
      "enabled": true,
      "code_generation": {
        "flag": "--build_cpp",
        "output_path_flag": "--cpp_path",
        "output_dir": "tests/generated/cpp"
      },
      "compilation": {
        "enabled": true,
        "compiler": "g++",
        "compiler_check": "g++ --version",
        "flags": ["-std=c++14", "-I{generated_dir}", "-o", "{output}", "{source}"],
        "source_extension": ".cpp",
        "executable_extension": ".exe"
      },
      "test_dir": "tests/cpp",
      "build_dir": "tests/cpp/build"
    },
    
    "py": {
      "name": "Python",
      "enabled": true,
      "code_generation": {
        "flag": "--build_py",
        "output_path_flag": "--py_path",
        "output_dir": "tests/generated/py"
      },
      "compilation": {
        "enabled": false
      },
      "execution": {
        "interpreter": "python",
        "source_extension": ".py",
        "env": {
          "PYTHONPATH": "{generated_dir}:{generated_parent_dir}"
        }
      },
      "test_dir": "tests/py",
      "build_dir": "tests/py/build"
    },
    
    "ts": {
      "name": "TypeScript",
      "enabled": true,
      "code_generation": {
        "flag": "--build_ts",
        "output_path_flag": "--ts_path",
        "output_dir": "tests/generated/ts"
      },
      "compilation": {
        "enabled": true,
        "compiler": "npx tsc",
        "compiler_check": "npx tsc --version",
        "command": "npx tsc --project {generated_dir}/tsconfig.json",
        "output_dir": "tests/generated/ts/js",
        "source_extension": ".ts",
        "compiled_extension": ".js",
        "working_dir": "tests/ts"
      },
      "execution": {
        "interpreter": "node",
        "script_dir": "tests/generated/ts/js"
      },
      "test_dir": "tests/ts",
      "build_dir": "tests/ts/build"
    },
    
    "js": {
      "name": "JavaScript",
      "enabled": true,
      "code_generation": {
        "flag": "--build_js",
        "output_path_flag": "--js_path",
        "output_dir": "tests/generated/js"
      },
      "compilation": {
        "enabled": false
      },
      "execution": {
        "interpreter": "node",
        "source_extension": ".js",
        "script_dir": "tests/generated/js"
      },
      "test_dir": "tests/js",
      "build_dir": "tests/js/build"
    },
    
    "gql": {
      "name": "GraphQL",
      "enabled": true,
      "code_generation": {
        "flag": "--build_gql",
        "output_path_flag": "--gql_path",
        "output_dir": "tests/generated/gql"
      },
      "compilation": {
        "enabled": false
      },
      "generation_only": true
    },
    
    "csharp": {
      "name": "C#",
      "enabled": true,
      "code_generation": {
        "flag": "--build_csharp",
        "output_path_flag": "--csharp_path",
        "output_dir": "tests/generated/csharp"
      },
      "compilation": {
        "enabled": false
      },
      "execution": {
        "interpreter": "dotnet",
        "source_extension": ".cs",
        "run_command": "dotnet run --project {test_dir}/StructFrameTests.csproj --no-build --verbosity quiet -- {test_name}"
      },
      "test_dir": "tests/csharp",
      "build_dir": "tests/csharp/build",
      "generation_only": true
    }
  },
  
  "test_suites": [
    {
      "name": "basic_types",
      "description": "Tests basic integer, float, and boolean types",
      "test_name": "test_basic_types"
    },
    {
      "name": "arrays",
      "description": "Tests array serialization and deserialization",
      "test_name": "test_arrays"
    },
    {
      "name": "basic_default_encode",
      "description": "Basic Default format serialization",
      "test_name": "test_basic_default_serialization",
      "output_file": "{lang_name}_basic_default_test_data.bin"
    },
    {
      "name": "basic_default_decode",
      "description": "Basic Default format deserialization",
      "test_name": "test_basic_default_deserialization",
      "skip_display": true
    },
    {
      "name": "basic_minimal_encode",
      "description": "Basic Minimal format serialization",
      "test_name": "test_basic_minimal_serialization",
      "output_file": "{lang_name}_basic_minimal_test_data.bin"
    },
    {
      "name": "basic_minimal_decode",
      "description": "Basic Minimal format deserialization",
      "test_name": "test_basic_minimal_deserialization",
      "skip_display": true
    },
    {
      "name": "tiny_default_encode",
      "description": "Tiny Default format serialization",
      "test_name": "test_tiny_default_serialization",
      "output_file": "{lang_name}_tiny_default_test_data.bin"
    },
    {
      "name": "tiny_default_decode",
      "description": "Tiny Default format deserialization",
      "test_name": "test_tiny_default_deserialization",
      "skip_display": true
    },
    {
      "name": "tiny_minimal_encode",
      "description": "Tiny Minimal format serialization",
      "test_name": "test_tiny_minimal_serialization",
      "output_file": "{lang_name}_tiny_minimal_test_data.bin"
    },
    {
      "name": "tiny_minimal_decode",
      "description": "Tiny Minimal format deserialization",
      "test_name": "test_tiny_minimal_deserialization",
      "skip_display": true
    },
    {
      "name": "frame_format_matrix",
      "description": "Frame format cross-compatibility matrix",
      "plugin": "frame_format_matrix",
      "frame_formats": [
        {
          "display_name": "BasicDefault",
          "encode_suite": "basic_default_encode",
          "decode_suite": "basic_default_decode"
        },
        {
          "display_name": "BasicMinimal",
          "encode_suite": "basic_minimal_encode",
          "decode_suite": "basic_minimal_decode"
        },
        {
          "display_name": "TinyDefault",
          "encode_suite": "tiny_default_encode",
          "decode_suite": "tiny_default_decode"
        },
        {
          "display_name": "TinyMinimal",
          "encode_suite": "tiny_minimal_encode",
          "decode_suite": "tiny_minimal_decode"
        }
      ]
    }
  ]
}
