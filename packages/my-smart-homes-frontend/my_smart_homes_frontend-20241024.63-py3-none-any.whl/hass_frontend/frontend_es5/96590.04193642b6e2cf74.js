"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["96590"],{51964:function(e,t,o){o.d(t,{Dc:function(){return d},Si:function(){return c}});var i=o(69868),s=o(84922),r=o(11991);o(17933),o(86160);let a,n,l=e=>e;const c=e=>{switch(e.level){case 0:return"M11,10H13V16H11V10M22,12H19V20H5V12H2L12,3L22,12M15,10A2,2 0 0,0 13,8H11A2,2 0 0,0 9,10V16A2,2 0 0,0 11,18H13A2,2 0 0,0 15,16V10Z";case 1:return"M12,3L2,12H5V20H19V12H22L12,3M10,8H14V18H12V10H10V8Z";case 2:return"M12,3L2,12H5V20H19V12H22L12,3M9,8H13A2,2 0 0,1 15,10V12A2,2 0 0,1 13,14H11V16H15V18H9V14A2,2 0 0,1 11,12H13V10H9V8Z";case 3:return"M12,3L22,12H19V20H5V12H2L12,3M15,11.5V10C15,8.89 14.1,8 13,8H9V10H13V12H11V14H13V16H9V18H13A2,2 0 0,0 15,16V14.5A1.5,1.5 0 0,0 13.5,13A1.5,1.5 0 0,0 15,11.5Z";case-1:return"M12,3L2,12H5V20H19V12H22L12,3M11,15H7V13H11V15M15,18H13V10H11V8H15V18Z"}return"M10,20V14H14V20H19V12H22L12,3L2,12H5V20H10Z"},d=e=>{switch(e.level){case 0:return"mdi:home-floor-0";case 1:return"mdi:home-floor-1";case 2:return"mdi:home-floor-2";case 3:return"mdi:home-floor-3";case-1:return"mdi:home-floor-negative-1"}return"mdi:home"};class u extends s.WF{render(){if(this.floor.icon)return(0,s.qy)(a||(a=l`<ha-icon .icon="${0}"></ha-icon>`),this.floor.icon);const e=c(this.floor);return(0,s.qy)(n||(n=l`<ha-svg-icon .path="${0}"></ha-svg-icon>`),e)}}(0,i.__decorate)([(0,r.MZ)({attribute:!1})],u.prototype,"floor",void 0),(0,i.__decorate)([(0,r.MZ)()],u.prototype,"icon",void 0),u=(0,i.__decorate)([(0,r.EM)("ha-floor-icon")],u)},35127:function(e,t,o){o.a(e,async function(e,t){try{o(79827),o(35748),o(65315),o(12840),o(837),o(22416),o(37089),o(59023),o(5934),o(95013);var i=o(69868),s=o(84922),r=o(11991),a=o(65940),n=o(44017),l=o(88341),c=o(52777),d=o(9171),u=o(95968),h=o(8148),_=o(15241),p=o(69560),f=(o(99322),o(51964),o(64578)),v=(o(9058),o(86160),e([f]));f=(v.then?(await v)():v)[0];let m,b,y,g,H,V,M,L=e=>e;const k="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z",A="M20 2H4C2.9 2 2 2.9 2 4V20C2 21.11 2.9 22 4 22H20C21.11 22 22 21.11 22 20V4C22 2.9 21.11 2 20 2M4 6L6 4H10.9L4 10.9V6M4 13.7L13.7 4H18.6L4 18.6V13.7M20 18L18 20H13.1L20 13.1V18M20 10.3L10.3 20H5.4L20 5.4V10.3Z",Z="___ADD_NEW___";class $ extends s.WF{async open(){var e;await this.updateComplete,await(null===(e=this._picker)||void 0===e?void 0:e.open())}render(){var e;const t=null!==(e=this.placeholder)&&void 0!==e?e:this.hass.localize("ui.components.floor-picker.floor"),o=this._computeValueRenderer(this.hass.floors);return(0,s.qy)(m||(m=L` <ha-generic-picker .hass="${0}" .autofocus="${0}" .label="${0}" .notFoundLabel="${0}" .emptyLabel="${0}" .placeholder="${0}" .value="${0}" .getItems="${0}" .getAdditionalItems="${0}" .valueRenderer="${0}" .rowRenderer="${0}" @value-changed="${0}"> </ha-generic-picker> `),this.hass,this.autofocus,this.label,this._notFoundLabel,this.hass.localize("ui.components.floor-picker.no_floors"),t,this.value,this._getItems,this._getAdditionalItems,o,this._rowRenderer,this._valueChanged)}_valueChanged(e){e.stopPropagation();const t=e.detail.value;if(t){if(t.startsWith(Z)){this.hass.loadFragmentTranslation("config");const e=t.substring(Z.length);return void(0,p.k)(this,{suggestedName:e,createEntry:async(e,t)=>{try{const o=await(0,h.KD)(this.hass,e);t.forEach(e=>{(0,d.gs)(this.hass,e,{floor_id:o.floor_id})}),this._setValue(o.floor_id)}catch(o){(0,_.showAlertDialog)(this,{title:this.hass.localize("ui.components.floor-picker.failed_create_floor"),text:o.message})}}})}this._setValue(t)}else this._setValue(void 0)}_setValue(e){this.value=e,(0,n.r)(this,"value-changed",{value:e}),(0,n.r)(this,"change")}constructor(...e){super(...e),this.noAdd=!1,this.disabled=!1,this.required=!1,this._computeValueRenderer=(0,a.A)(e=>e=>{const t=this.hass.floors[e];if(!t)return(0,s.qy)(b||(b=L` <ha-svg-icon slot="start" .path="${0}"></ha-svg-icon> <span slot="headline">${0}</span> `),A,t);const o=t?(0,c.X)(t):void 0;return(0,s.qy)(y||(y=L` <ha-floor-icon slot="start" .floor="${0}"></ha-floor-icon> <span slot="headline">${0}</span> `),t,o)}),this._getFloors=(0,a.A)((e,t,o,i,s,r,a,n,d,_)=>{const p=Object.values(e),f=Object.values(t),v=Object.values(o),m=Object.values(i);let b,y,g={};(s||r||a||n||d)&&(g=(0,u.g2)(m),b=v,y=m.filter(e=>e.area_id),s&&(b=b.filter(e=>{const t=g[e.id];return!(!t||!t.length)&&g[e.id].some(e=>s.includes((0,l.m)(e.entity_id)))}),y=y.filter(e=>s.includes((0,l.m)(e.entity_id)))),r&&(b=b.filter(e=>{const t=g[e.id];return!t||!t.length||m.every(e=>!r.includes((0,l.m)(e.entity_id)))}),y=y.filter(e=>!r.includes((0,l.m)(e.entity_id)))),a&&(b=b.filter(e=>{const t=g[e.id];return!(!t||!t.length)&&g[e.id].some(e=>{const t=this.hass.states[e.entity_id];return!!t&&(t.attributes.device_class&&a.includes(t.attributes.device_class))})}),y=y.filter(e=>{const t=this.hass.states[e.entity_id];return t.attributes.device_class&&a.includes(t.attributes.device_class)})),n&&(b=b.filter(e=>n(e))),d&&(b=b.filter(e=>{const t=g[e.id];return!(!t||!t.length)&&g[e.id].some(e=>{const t=this.hass.states[e.entity_id];return!!t&&d(t)})}),y=y.filter(e=>{const t=this.hass.states[e.entity_id];return!!t&&d(t)})));let H,V=p;if(b&&(H=b.filter(e=>e.area_id).map(e=>e.area_id)),y&&(H=(null!=H?H:[]).concat(y.filter(e=>e.area_id).map(e=>e.area_id))),H){const e=(0,h._o)(f);V=V.filter(t=>{var o;return null===(o=e[t.floor_id])||void 0===o?void 0:o.some(e=>H.includes(e.area_id))})}_&&(V=V.filter(e=>!_.includes(e.floor_id)));return V.map(e=>{var t;const o=(0,c.X)(e);return{id:e.floor_id,primary:o,floor:e,sorting_label:(null===(t=e.level)||void 0===t?void 0:t.toString())||"zzzzz",search_labels:[o,e.floor_id,...e.aliases].filter(e=>Boolean(e))}})}),this._rowRenderer=e=>(0,s.qy)(g||(g=L` <ha-combo-box-item type="button" compact="compact"> ${0} <span slot="headline">${0}</span> </ha-combo-box-item> `),e.icon_path?(0,s.qy)(H||(H=L` <ha-svg-icon slot="start" style="margin:0 4px" .path="${0}"></ha-svg-icon> `),e.icon_path):(0,s.qy)(V||(V=L` <ha-floor-icon slot="start" .floor="${0}" style="margin:0 4px"></ha-floor-icon> `),e.floor),e.primary),this._getItems=()=>this._getFloors(this.hass.floors,this.hass.areas,this.hass.devices,this.hass.entities,this.includeDomains,this.excludeDomains,this.includeDeviceClasses,this.deviceFilter,this.entityFilter,this.excludeFloors),this._allFloorNames=(0,a.A)(e=>Object.values(e).map(e=>{var t;return null===(t=(0,c.X)(e))||void 0===t?void 0:t.toLowerCase()}).filter(Boolean)),this._getAdditionalItems=e=>{if(this.noAdd)return[];const t=this._allFloorNames(this.hass.floors);return e&&!t.includes(e.toLowerCase())?[{id:Z+e,primary:this.hass.localize("ui.components.floor-picker.add_new_sugestion",{name:e}),icon_path:k}]:[{id:Z,primary:this.hass.localize("ui.components.floor-picker.add_new"),icon_path:k}]},this._notFoundLabel=e=>this.hass.localize("ui.components.floor-picker.no_match",{term:(0,s.qy)(M||(M=L`<b>‘${0}’</b>`),e)})}}(0,i.__decorate)([(0,r.MZ)({attribute:!1})],$.prototype,"hass",void 0),(0,i.__decorate)([(0,r.MZ)()],$.prototype,"label",void 0),(0,i.__decorate)([(0,r.MZ)()],$.prototype,"value",void 0),(0,i.__decorate)([(0,r.MZ)()],$.prototype,"helper",void 0),(0,i.__decorate)([(0,r.MZ)()],$.prototype,"placeholder",void 0),(0,i.__decorate)([(0,r.MZ)({type:Boolean,attribute:"no-add"})],$.prototype,"noAdd",void 0),(0,i.__decorate)([(0,r.MZ)({type:Array,attribute:"include-domains"})],$.prototype,"includeDomains",void 0),(0,i.__decorate)([(0,r.MZ)({type:Array,attribute:"exclude-domains"})],$.prototype,"excludeDomains",void 0),(0,i.__decorate)([(0,r.MZ)({type:Array,attribute:"include-device-classes"})],$.prototype,"includeDeviceClasses",void 0),(0,i.__decorate)([(0,r.MZ)({type:Array,attribute:"exclude-floors"})],$.prototype,"excludeFloors",void 0),(0,i.__decorate)([(0,r.MZ)({attribute:!1})],$.prototype,"deviceFilter",void 0),(0,i.__decorate)([(0,r.MZ)({attribute:!1})],$.prototype,"entityFilter",void 0),(0,i.__decorate)([(0,r.MZ)({type:Boolean})],$.prototype,"disabled",void 0),(0,i.__decorate)([(0,r.MZ)({type:Boolean})],$.prototype,"required",void 0),(0,i.__decorate)([(0,r.P)("ha-generic-picker")],$.prototype,"_picker",void 0),$=(0,i.__decorate)([(0,r.EM)("ha-floor-picker")],$),t()}catch(m){t(m)}})},8148:function(e,t,o){o.d(t,{KD:function(){return s},NL:function(){return r},_o:function(){return n},eq:function(){return l},ls:function(){return a}});o(35748),o(99342),o(95013);var i=o(24730);o(88178);const s=(e,t)=>e.callWS(Object.assign({type:"config/floor_registry/create"},t)),r=(e,t,o)=>e.callWS(Object.assign({type:"config/floor_registry/update",floor_id:t},o)),a=(e,t)=>e.callWS({type:"config/floor_registry/delete",floor_id:t}),n=e=>{const t={};for(const o of e)o.floor_id&&(o.floor_id in t||(t[o.floor_id]=[]),t[o.floor_id].push(o));return t},l=(e,t)=>(o,s)=>{const r=t?t.indexOf(o):-1,a=t?t.indexOf(s):-1;if(-1===r&&-1===a){var n,l;const t=null==e?void 0:e[o],r=null==e?void 0:e[s];var c,d;if(t&&r&&t.level!==r.level)return(null!==(c=r.level)&&void 0!==c?c:-9999)-(null!==(d=t.level)&&void 0!==d?d:-9999);const a=null!==(n=null==t?void 0:t.name)&&void 0!==n?n:o,u=null!==(l=null==r?void 0:r.name)&&void 0!==l?l:s;return(0,i.xL)(a,u)}return-1===r?1:-1===a?-1:r-a}},40328:function(e,t,o){o.d(t,{E:function(){return r}});o(79827),o(35748),o(65315),o(59023),o(5934),o(95013);var i=o(69868),s=o(11991);const r=e=>{class t extends e{connectedCallback(){super.connectedCallback(),this._checkSubscribed()}disconnectedCallback(){if(super.disconnectedCallback(),this.__unsubs){for(;this.__unsubs.length;){const e=this.__unsubs.pop();e instanceof Promise?e.then(e=>e()):e()}this.__unsubs=void 0}}updated(e){if(super.updated(e),e.has("hass"))this._checkSubscribed();else if(this.hassSubscribeRequiredHostProps)for(const t of e.keys())if(this.hassSubscribeRequiredHostProps.includes(t))return void this._checkSubscribed()}hassSubscribe(){return[]}_checkSubscribed(){var e;void 0!==this.__unsubs||!this.isConnected||void 0===this.hass||null!==(e=this.hassSubscribeRequiredHostProps)&&void 0!==e&&e.some(e=>void 0===this[e])||(this.__unsubs=this.hassSubscribe())}}return(0,i.__decorate)([(0,s.MZ)({attribute:!1})],t.prototype,"hass",void 0),t}},69560:function(e,t,o){o.d(t,{k:function(){return r}});o(35748),o(5934),o(95013);var i=o(44017);const s=()=>Promise.all([o.e("42153"),o.e("15265"),o.e("3245"),o.e("30199"),o.e("70184"),o.e("3654"),o.e("79584"),o.e("42885"),o.e("61717"),o.e("92785"),o.e("19225"),o.e("67502")]).then(o.bind(o,96796)),r=(e,t)=>{(0,i.r)(e,"show-dialog",{dialogTag:"dialog-floor-registry-detail",dialogImport:s,dialogParams:t})}},78100:function(e,t,o){o.d(t,{i:function(){return i}});o(35748),o(5934),o(95013);const i=async()=>{await Promise.all([o.e("33767"),o.e("6822")]).then(o.bind(o,29338))}}}]);
//# sourceMappingURL=96590.04193642b6e2cf74.js.map