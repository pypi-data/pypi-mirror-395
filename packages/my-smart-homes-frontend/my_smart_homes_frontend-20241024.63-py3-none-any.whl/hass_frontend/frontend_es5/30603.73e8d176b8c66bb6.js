"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["30603"],{8795:function(e,t,n){n.d(t,{i:function(){return i}});var r=n(35297);const i=(e,t)=>(e=>{switch(e){case"de":case"lb":return!0;default:return!1}})(t)?(0,r.Z)(e):e.toLocaleLowerCase(t)},13725:function(e,t,n){n.a(e,async function(e,r){try{n.d(t,{$O:function(){return y},a$:function(){return m},cj:function(){return _},dG:function(){return v},gM:function(){return p},gd:function(){return f},rc:function(){return b}});n(79827),n(35748),n(5934),n(67579),n(30500),n(95013);var i=n(23800),o=n(88341),s=n(12275),a=n(8795),c=n(14523),u=n(69006),l=e([u]);u=(l.then?(await l)():l)[0];const d="ui.components.logbook.messages",_=["counter","proximity"],g={triggered_by_numeric_state_of:"numeric state of",triggered_by_state_of:"state of",triggered_by_event:"event",triggered_by_time_pattern:"time pattern",triggered_by_time:"time",triggered_by_homeassistant_stopping:"MSH stopping",triggered_by_homeassistant_starting:"MSH starting"},f=async(e,t,n)=>h(e,t,void 0,void 0,n),h=(e,t,n,r,i,o)=>{if((r||o)&&(!r||0===r.length)&&(!o||0===o.length))return Promise.resolve([]);const s={type:"logbook/get_events",start_time:t};return n&&(s.end_time=n),null!=r&&r.length&&(s.entity_ids=r),null!=o&&o.length&&(s.device_ids=o),i&&(s.context_id=i),e.callWS(s)},p=(e,t,n,r,i,o,s)=>{if((o||s)&&(!o||0===o.length)&&(!s||0===s.length))return Promise.reject("No entities or devices");const a={type:"logbook/event_stream",start_time:n,end_time:r};return null!=o&&o.length&&(a.entity_ids=o),null!=s&&s.length&&(a.device_ids=s),e.connection.subscribeMessage(e=>t(e,i),a)},v=(e,t)=>({entity_id:e.entity_id,state:t,attributes:{device_class:null==e?void 0:e.attributes.device_class,source_type:null==e?void 0:e.attributes.source_type,has_date:null==e?void 0:e.attributes.has_date,has_time:null==e?void 0:e.attributes.has_time,entity_picture_local:i.oL.has((0,o.m)(e.entity_id))||null==e?void 0:e.attributes.entity_picture_local,entity_picture:i.oL.has((0,o.m)(e.entity_id))||null==e?void 0:e.attributes.entity_picture}}),y=(e,t)=>{for(const n of Object.keys(g)){const r=g[n];if(t.startsWith(r))return t.replace(r,`${e(`ui.components.logbook.${n}`)}`)}return t},m=(e,t,n,r,o)=>{switch(o){case"device_tracker":case"person":return"not_home"===n?t(`${d}.was_away`):"home"===n?t(`${d}.was_at_home`):t(`${d}.was_at_state`,{state:n});case"sun":return t("above_horizon"===n?`${d}.rose`:`${d}.set`);case"binary_sensor":{const o=n===i.Or,s=n===i.qg,c=r.attributes.device_class;if(c&&(o||s))return t(`${d}.${o?"detected_device_classes":"cleared_device_classes"}.${c}`,{device_class:(0,a.i)(t(`component.binary_sensor.entity_component.${c}.name`)||c,e.language)})||t(`${d}.${o?"detected_device_class":"cleared_device_class"}`,{device_class:(0,a.i)(t(`component.binary_sensor.entity_component.${c}.name`)||c,e.language)});break}case"cover":switch(n){case"open":return t(`${d}.was_opened`);case"opening":return t(`${d}.is_opening`);case"closing":return t(`${d}.is_closing`);case"closed":return t(`${d}.was_closed`)}break;case"event":return t(`${d}.detected_event_no_type`);case"lock":switch(n){case"unlocked":return t(`${d}.was_unlocked`);case"locking":return t(`${d}.is_locking`);case"unlocking":return t(`${d}.is_unlocking`);case"opening":return t(`${d}.is_opening`);case"open":return t(`${d}.is_opened`);case"locked":return t(`${d}.was_locked`);case"jammed":return t(`${d}.is_jammed`)}}return n===i.Or?t(`${d}.turned_on`):n===i.qg?t(`${d}.turned_off`):n===c.HV?t(`${d}.became_unknown`):n===c.Hh?t(`${d}.became_unavailable`):e.localize(`${d}.changed_to_state`,{state:r?e.formatEntityState(r,n):n})},b=(e,t=[])=>{const n=(0,s.t)(e);return!(_.includes(n)||"sensor"===n&&(0,u.Fp)(n,e,void 0,t))};r()}catch(d){r(d)}})},72569:function(e,t,n){n.d(t,{Fj:function(){return i},Gu:function(){return o},H2:function(){return a},xA:function(){return u},xs:function(){return s}});n(65315),n(84136);var r=n(12275);const i=e=>e.callWS({type:"person/list"}),o=(e,t)=>e.callWS(Object.assign({type:"person/create"},t)),s=(e,t,n)=>e.callWS(Object.assign({type:"person/update",person_id:t},n)),a=(e,t)=>e.callWS({type:"person/delete",person_id:t}),c={},u=e=>{var t;if(null===(t=e.user)||void 0===t||!t.id)return;const n=c[e.user.id];if(n){const t=e.states[n];if(t&&t.attributes.user_id===e.user.id)return t}const i=Object.values(e.states).find(t=>t.attributes.user_id===e.user.id&&"person"===(0,r.t)(t));return i&&(c[e.user.id]=i.entity_id),i}},75865:function(e,t,n){n.a(e,async function(e,r){try{n.r(t),n.d(t,{HuiErrorBadge:function(){return v},createErrorBadgeConfig:function(){return p},createErrorBadgeElement:function(){return h}});var i=n(69868),o=n(90227),s=n(84922),a=n(11991),c=(n(31109),n(86160),n(67717)),u=e([c]);c=(u.then?(await u)():u)[0];let l,d,_,g=e=>e;const f="M13,13H11V7H13M13,17H11V15H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z",h=e=>{const t=document.createElement("hui-error-badge");return t.setConfig(e),t},p=e=>({type:"error",error:e});class v extends s.WF{setConfig(e){this._config=e}_viewDetail(){var e;let t;if(this._config.origConfig)try{t=(0,o.dump)(this._config.origConfig)}catch(n){t=`[Error dumping ${this._config.origConfig}]`}(0,c.showAlertDialog)(this,{title:null===(e=this._config)||void 0===e?void 0:e.error,warning:!0,text:t?(0,s.qy)(l||(l=g`<pre>${0}</pre>`),t):""})}render(){return this._config?(0,s.qy)(d||(d=g` <ha-badge class="error" @click="${0}" type="button" label="Error"> <ha-svg-icon slot="icon" .path="${0}"></ha-svg-icon> <div class="content">${0}</div> </ha-badge> `),this._viewDetail,f,this._config.error):s.s6}}v.styles=(0,s.AH)(_||(_=g`ha-badge{--badge-color:var(--error-color);--ha-card-border-color:var(--error-color)}.content{max-width:100px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}pre{font-family:var(--ha-font-family-code);white-space:break-spaces;user-select:text}`)),(0,i.__decorate)([(0,a.wk)()],v.prototype,"_config",void 0),v=(0,i.__decorate)([(0,a.EM)("hui-error-badge")],v),r()}catch(l){r(l)}})},19370:function(e,t,n){var r=n(36233),i=n(38707),o=n(78923),s=n(19799);e.exports=function(e,t){t&&"string"==typeof e||i(e);var n=s(e);return o(i(void 0!==n?r(n,e):e))}},43114:function(e,t,n){var r=n(87642),i=n(53319),o=n(33358),s=n(77977),a=n(30354),c=n(88721);r({target:"Array",proto:!0},{flatMap:function(e){var t,n=s(this),r=a(n);return o(e),(t=c(n,0)).length=i(t,n,n,r,0,1,e,arguments.length>1?arguments[1]:void 0),t}})},93225:function(e,t,n){n(93017)("flatMap")},12791:function(e,t,n){var r=n(87642),i=n(36233),o=n(33358),s=n(38707),a=n(78923),c=n(19370),u=n(49866),l=n(25727),d=n(55319),_=n(25008),g=n(66337),f=!d&&!_("flatMap",function(){}),h=!d&&!f&&g("flatMap",TypeError),p=d||f||h,v=u(function(){for(var e,t,n=this.iterator,r=this.mapper;;){if(t=this.inner)try{if(!(e=s(i(t.next,t.iterator))).done)return e.value;this.inner=null}catch(o){l(n,"throw",o)}if(e=s(i(this.next,n)),this.done=!!e.done)return;try{this.inner=c(r(e.value,this.counter++),!1)}catch(o){l(n,"throw",o)}}});r({target:"Iterator",proto:!0,real:!0,forced:p},{flatMap:function(e){s(this);try{o(e)}catch(t){l(this,"throw",t)}return h?i(h,this,e):new v(a(this),{mapper:e,inner:null})}})}}]);
//# sourceMappingURL=30603.73e8d176b8c66bb6.js.map