"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["28909"],{94327:function(t,e,n){n.d(e,{Vy:function(){return o},fI:function(){return a},ux:function(){return c}});var i=n(65940),r=n(83510);const s=["#4269d0","#f4bd4a","#ff725c","#6cc5b0","#a463f2","#ff8ab7","#9c6b4e","#97bbf5","#01ab63","#094bad","#c99000","#d84f3e","#49a28f","#048732","#d96895","#8043ce","#7599d1","#7a4c31","#6989f4","#ffd444","#ff957c","#8fe9d3","#62cc71","#ffadda","#c884ff","#badeff","#bf8b6d","#927acc","#97ee3f","#bf3947","#9f5b00","#f48758","#8caed6","#f2b94f","#eff26e","#e43872","#d9b100","#9d7a00","#698cff","#00d27e","#d06800","#009f82","#c49200","#cbe8ff","#fecddf","#c27eb6","#8cd2ce","#c4b8d9","#f883b0","#a49100","#f48800","#27d0df","#a04a9b"];function o(t){return s[t%s.length]}function a(t,e){const n=e.getPropertyValue(`--graph-color-${t+1}`)||o(t);return(0,r.RQ)(n)}const c=(0,i.A)(t=>s.map((e,n)=>a(n,t)),(t,e)=>t[0].getPropertyValue("--graph-color-1")===e[0].getPropertyValue("--graph-color-1"))},85356:function(t,e,n){n.d(e,{n:function(){return u},v:function(){return a}});n(35748),n(99342),n(35058),n(65315),n(837),n(37089),n(88238),n(34536),n(16257),n(20152),n(44711),n(72108),n(77030),n(95013);var i=n(12275),r=n(14523),s=n(88341),o=n(24730);const a={alarm_control_panel:["armed_away","armed_custom_bypass","armed_home","armed_night","armed_vacation","arming","disarmed","disarming","pending","triggered"],alert:["on","off","idle"],assist_satellite:["idle","listening","responding","processing"],automation:["on","off"],binary_sensor:["on","off"],button:[],calendar:["on","off"],camera:["idle","recording","streaming"],cover:["closed","closing","open","opening"],device_tracker:["home","not_home"],fan:["on","off"],humidifier:["on","off"],input_boolean:["on","off"],input_button:[],lawn_mower:["error","paused","mowing","returning","docked"],light:["on","off"],lock:["jammed","locked","locking","unlocked","unlocking","opening","open"],media_player:["off","on","idle","playing","paused","standby","buffering"],person:["home","not_home"],plant:["ok","problem"],remote:["on","off"],scene:[],schedule:["on","off"],script:["on","off"],siren:["on","off"],sun:["above_horizon","below_horizon"],switch:["on","off"],timer:["active","idle","paused"],update:["on","off"],vacuum:["cleaning","docked","error","idle","paused","returning"],valve:["closed","closing","open","opening"],weather:["clear-night","cloudy","exceptional","fog","hail","lightning-rainy","lightning","partlycloudy","pouring","rainy","snowy-rainy","snowy","sunny","windy-variant","windy"]},c={alarm_control_panel:{code_format:["number","text"]},binary_sensor:{device_class:["battery","battery_charging","co","cold","connectivity","door","garage_door","gas","heat","light","lock","moisture","motion","moving","occupancy","opening","plug","power","presence","problem","running","safety","smoke","sound","tamper","update","vibration","window"]},button:{device_class:["restart","update"]},camera:{frontend_stream_type:["hls","web_rtc"]},climate:{hvac_action:["off","idle","preheating","defrosting","heating","cooling","drying","fan"]},cover:{device_class:["awning","blind","curtain","damper","door","garage","gate","shade","shutter","window"]},device_tracker:{source_type:["bluetooth","bluetooth_le","gps","router"]},fan:{direction:["forward","reverse"]},humidifier:{device_class:["humidifier","dehumidifier"],action:["off","idle","humidifying","drying"]},media_player:{device_class:["tv","speaker","receiver"],media_content_type:["album","app","artist","channel","channels","composer","contributing_artist","episode","game","genre","image","movie","music","playlist","podcast","season","track","tvshow","url","video"],repeat:["off","one","all"]},number:{device_class:["temperature"]},sensor:{device_class:["apparent_power","aqi","battery","carbon_dioxide","carbon_monoxide","current","date","duration","energy","frequency","gas","humidity","illuminance","monetary","nitrogen_dioxide","nitrogen_monoxide","nitrous_oxide","ozone","ph","pm1","pm10","pm25","pm4","power_factor","power","pressure","reactive_power","signal_strength","sulphur_dioxide","temperature","timestamp","volatile_organic_compounds","volatile_organic_compounds_parts","voltage","volume_flow_rate"],state_class:["measurement","total","total_increasing"]},switch:{device_class:["outlet","switch"]},update:{device_class:["firmware"]},water_heater:{away_mode:["on","off"]}},u=(t,e,n=void 0)=>{const u=(0,i.t)(e),d=[];switch(!n&&u in a?d.push(...a[u]):n&&u in c&&n in c[u]&&d.push(...c[u][n]),u){case"climate":n?"fan_mode"===n?d.push(...e.attributes.fan_modes):"preset_mode"===n?d.push(...e.attributes.preset_modes):"swing_mode"===n&&d.push(...e.attributes.swing_modes):d.push(...e.attributes.hvac_modes);break;case"device_tracker":case"person":n||d.push(...Object.entries(t.states).filter(([t,e])=>"zone"===(0,s.m)(t)&&"zone.home"!==t&&e.attributes.friendly_name).map(([t,e])=>e.attributes.friendly_name).sort((e,n)=>(0,o.xL)(e,n,t.locale.language)));break;case"event":"event_type"===n&&d.push(...e.attributes.event_types);break;case"fan":"preset_mode"===n&&d.push(...e.attributes.preset_modes);break;case"humidifier":"mode"===n&&d.push(...e.attributes.available_modes);break;case"input_select":case"select":n||d.push(...e.attributes.options);break;case"light":"effect"===n&&e.attributes.effect_list?d.push(...e.attributes.effect_list):"color_mode"===n&&e.attributes.supported_color_modes&&d.push(...e.attributes.supported_color_modes);break;case"media_player":"sound_mode"===n?d.push(...e.attributes.sound_mode_list):"source"===n&&d.push(...e.attributes.source_list);break;case"remote":"current_activity"===n&&d.push(...e.attributes.activity_list);break;case"sensor":n||"enum"!==e.attributes.device_class||d.push(...e.attributes.options);break;case"vacuum":"fan_speed"===n&&d.push(...e.attributes.fan_speed_list);break;case"water_heater":n&&"operation_mode"!==n||d.push(...e.attributes.operation_list)}return n||d.push(...r.s7),[...new Set(d)]}},92900:function(t,e,n){n.d(e,{c:function(){return p}});n(35748),n(95013);var i=n(94327),r=n(83510),s=n(6788),o=n(88341),a=n(25442),c=n(14523),u=n(45736),d=n(12275),h=n(85356);const l={media_player:{paused:.5,idle:1},vacuum:{returning:.5}};let f=0;const _=new Map;function p(t,e,n){return function(t,e,n){var i;if(!n||t===c.Hh)return(0,u.a)("--history-unavailable-color",e);if(t===c.HV)return(0,u.a)("--history-unknown-color",e);const d=(0,a.mg)(n,t);if(!d)return;const h=(0,u.a)(d,e);if(!h)return;const f=(0,o.m)(n.entity_id),_=null===(i=l[f])||void 0===i?void 0:i[t];return _?(0,r.zm)((0,s.T)((0,r.Nc)((0,r.xp)(h)),_)):h}(t,e,n)||function(t,e,n){if(!n)return;const r=(0,d.t)(n),s=(h.v[r]||"sensor"===r&&"enum"===n.attributes.device_class&&n.attributes.options||[]).indexOf(t);return-1!==s?(0,i.fI)(s,e):void 0}(t,e,n)||function(t,e){if(_.has(t))return _.get(t);const n=(0,i.fI)(f,e);return f++,_.set(t,n),n}(t,e)}},63002:function(t,e,n){n.a(t,async function(t,i){try{n.d(e,{$3:function(){return g},$O:function(){return I},$j:function(){return y},ED:function(){return a},JE:function(){return C},OQ:function(){return H},PU:function(){return O},Ph:function(){return p},Uf:function(){return k},W1:function(){return m},Wr:function(){return l},Z:function(){return d},gF:function(){return b},iY:function(){return v},jU:function(){return c},nN:function(){return S},p3:function(){return h},pJ:function(){return _},r_:function(){return u},sz:function(){return f}});n(79827),n(35748),n(65315),n(59023),n(95013);var r=n(72652),s=n(50654),o=t([s]);s=(o.then?(await o)():o)[0];var a=function(t){return t[t.NONE=0]="NONE",t[t.ARITHMETIC=1]="ARITHMETIC",t[t.CIRCULAR=2]="CIRCULAR",t}({});const c=59509==n.j?["entity_not_recorded","entity_no_longer_recorded","state_class_removed","units_changed","mean_type_changed","no_state"]:null,u=["L","gal","ft³","m³","CCF","MCF"],d=t=>t.sendMessagePromise({type:"recorder/info"}),h=(t,e)=>t.callWS({type:"recorder/list_statistic_ids",statistic_type:e}),l=(t,e)=>t.callWS({type:"recorder/get_statistics_metadata",statistic_ids:e}),f=(t,e,n,i,r="hour",s,o)=>t.callWS({type:"recorder/statistics_during_period",start_time:e.toISOString(),end_time:null==n?void 0:n.toISOString(),statistic_ids:i,period:r,units:s,types:o}),_=(t,e,n,i)=>t.callWS({type:"recorder/statistic_during_period",statistic_id:e,units:i,fixed_period:n.fixed_period?{start_time:n.fixed_period.start instanceof Date?n.fixed_period.start.toISOString():n.fixed_period.start,end_time:n.fixed_period.end instanceof Date?n.fixed_period.end.toISOString():n.fixed_period.end}:void 0,calendar:n.calendar?Object.assign(Object.assign({},"week"===n.calendar.period?{first_weekday:(0,s.D)(t.locale).substring(0,3)}:{}),n.calendar):void 0,rolling_window:n.rolling_window}),p=t=>t.callWS({type:"recorder/validate_statistics"}),m=(t,e,n,i)=>t.callWS({type:"recorder/update_statistics_metadata",statistic_id:e,unit_of_measurement:n,unit_class:i}),g=(t,e)=>t.callWS({type:"recorder/clear_statistics",statistic_ids:e}),y=t=>{let e=null;if(!t)return null;for(const n of t)null!==n.change&&void 0!==n.change&&(null===e?e=n.change:e+=n.change);return e},b=(t,e)=>{let n=null;for(const i of e){if(!(i in t))continue;const e=y(t[i]);null!==e&&(null===n?n=e:n+=e)}return n},v=(t,e)=>t.some(t=>void 0!==t[e]&&null!==t[e]),w=["mean","min","max"],x=["sum","state","change"],S=(t,e)=>!(!w.includes(e)||0===t.mean_type)||!(!x.includes(e)||!t.has_sum),k=(t,e,n,i,r)=>{const s=new Date(n).toISOString();return t.callWS({type:"recorder/adjust_sum_statistics",statistic_id:e,start_time:s,adjustment:i,adjustment_unit_of_measurement:r})},I=(t,e,n)=>{const i=t.states[e];return i?(0,r.u)(i):(null==n?void 0:n.name)||e},C=(t,e,n)=>{let i;var r;e&&(i=null===(r=t.states[e])||void 0===r?void 0:r.attributes.unit_of_measurement);return void 0===i?null==n?void 0:n.statistics_unit_of_measurement:i},H=t=>t.includes(":"),O=t=>t.callWS({type:"recorder/update_statistics_issues"});i()}catch(c){i(c)}})},18318:function(t,e,n){n.a(t,async function(t,i){try{n.r(e),n.d(e,{DEFAULT_HOURS_TO_SHOW:function(){return k},HuiHistoryGraphCard:function(){return I}});n(46852),n(35748),n(65315),n(22416),n(37089),n(5934),n(95013);var r=n(69868),s=n(84922),o=n(11991),a=n(75907),c=n(26946),u=n(94372),d=n(47807),h=(n(94124),n(70490),n(42163),n(69006)),l=n(63002),f=n(3274),_=n(87916),p=n(8510),m=n(38177),g=t([d,l,h]);[d,l,h]=g.then?(await g)():g;let y,b,v,w,x,S=t=>t;const k=24;class I extends s.WF{static async getConfigElement(){return await Promise.all([n.e("42153"),n.e("30199"),n.e("70184"),n.e("53904"),n.e("61717"),n.e("56030"),n.e("78525"),n.e("15116"),n.e("76855")]).then(n.bind(n,89227)),document.createElement("hui-history-graph-card-editor")}static getStubConfig(){return{type:"history-graph",entities:["sun.sun"]}}getCardSize(){var t,e;return null!==(t=this._config)&&void 0!==t&&t.title?2:0+2*((null===(e=this._entityIds)||void 0===e?void 0:e.length)||1)}getGridOptions(){return{columns:12,min_columns:6,min_rows:2}}setConfig(t){if(!t.entities||!Array.isArray(t.entities))throw new Error("Entities need to be an array");if(!t.entities.length)throw new Error("You must include at least one entity");this._entities=t.entities?(0,m.L)(t.entities):[],this._entityIds=this._entities.map(t=>t.entity),this._hoursToShow=t.hours_to_show||k,this._config=t,this._computeNames()}_computeNames(){this.hass&&this._config&&(this._names={},this._entities.forEach(t=>{const e=this.hass.states[t.entity];this._names[t.entity]=e?(0,_.v)(this.hass,e,t.name):t.entity}))}willUpdate(t){super.willUpdate(t),t.has("hass")&&this._computeNames()}connectedCallback(){super.connectedCallback(),this.hasUpdated&&this._subscribeHistory()}disconnectedCallback(){super.disconnectedCallback(),this._unsubscribeHistory()}async _subscribeHistory(){if(!(0,c.x)(this.hass,"history")||this._subscribed)return;const{numeric_device_classes:t}=await(0,f.KL)(this.hass);this._subscribed=(0,h.IQ)(this.hass,e=>{var n;this._subscribed&&(this._stateHistory=(0,h.Mm)(this.hass,e,this._entityIds,this.hass.localize,t,null===(n=this._config)||void 0===n?void 0:n.split_device_classes),this._mergeHistory())},this._hoursToShow,this._entityIds).catch(t=>{this._subscribed=void 0,this._error=t}),await this._fetchStatistics(t),this._setRedrawTimer()}_mergeHistory(){var t;this._stateHistory&&(this._history=(0,h.tG)(this._stateHistory,this._statisticsHistory,null===(t=this._config)||void 0===t?void 0:t.split_device_classes))}async _fetchStatistics(t){var e;const n=new Date,i=new Date;i.setHours(i.getHours()-this._hoursToShow-1);const r=await(0,l.sz)(this.hass,i,n,this._entityIds,"hour",void 0,["mean","state"]);this._statisticsHistory=(0,h._1)(this.hass,r,this._entityIds,t,null===(e=this._config)||void 0===e?void 0:e.split_device_classes),this._mergeHistory()}_redrawGraph(){this._history&&(this._history=Object.assign({},this._history))}_setRedrawTimer(){clearInterval(this._interval),this._interval=window.setInterval(()=>this._redrawGraph(),6e4)}_unsubscribeHistory(){clearInterval(this._interval),this._subscribed&&(this._subscribed.then(t=>null==t?void 0:t()),this._subscribed=void 0)}shouldUpdate(t){return(0,p.pY)(this,t)||t.size>1||!t.has("hass")}updated(t){if(super.updated(t),!(this._config&&this.hass&&this._hoursToShow&&this._entityIds.length))return;if(!t.has("_config")&&!t.has("hass"))return;const e=t.get("_config");!t.has("_config")||(null==e?void 0:e.entities)===this._config.entities&&(null==e?void 0:e.hours_to_show)===this._config.hours_to_show||(this._unsubscribeHistory(),this._subscribeHistory())}render(){var t,e,n,i;if(!this.hass||!this._config)return s.s6;const r=new Date;r.setHours(r.getHours()-this._hoursToShow);const o=`/history?${(0,u.KH)({entity_id:this._entityIds.join(","),start_date:r.toISOString()})}`,c=null!==(t=null===(e=this._config.grid_options)||void 0===e?void 0:e.columns)&&void 0!==t?t:12,d="number"==typeof c&&c<=12,h="number"==typeof(null===(n=this._config.grid_options)||void 0===n?void 0:n.rows);return(0,s.qy)(y||(y=S` <ha-card> ${0} <div class="content ${0}"> ${0} </div> </ha-card> `),this._config.title?(0,s.qy)(b||(b=S` <h1 class="card-header"> ${0} <a href="${0}"><ha-icon-next></ha-icon-next></a> </h1> `),this._config.title,o):s.s6,(0,a.H)({"has-header":!!this._config.title,"has-rows":!(null===(i=this._config.grid_options)||void 0===i||!i.rows),"has-height":h}),this._error?(0,s.qy)(v||(v=S` <ha-alert alert-type="error"> ${0}: ${0} </ha-alert> `),this.hass.localize("ui.components.history_charts.error"),this._error.message||this._error.code):(0,s.qy)(w||(w=S` <state-history-charts .hass="${0}" .isLoadingData="${0}" .historyData="${0}" .names="${0}" up-to-now .hoursToShow="${0}" .showNames="${0}" .logarithmicScale="${0}" .minYAxis="${0}" .maxYAxis="${0}" .fitYData="${0}" .height="${0}" .narrow="${0}" .expandLegend="${0}"></state-history-charts> `),this.hass,!this._history,this._history,this._names,this._hoursToShow,void 0===this._config.show_names||this._config.show_names,this._config.logarithmic_scale||!1,this._config.min_y_axis,this._config.max_y_axis,this._config.fit_y_data||!1,h?"100%":void 0,d,this._config.expand_legend))}constructor(...t){super(...t),this._names={},this._entityIds=[],this._entities=[],this._hoursToShow=k}}I.styles=(0,s.AH)(x||(x=S`ha-card{display:flex;flex-direction:column;height:100%}.card-header{justify-content:space-between;display:flex;padding-bottom:0}.card-header ha-icon-next{--mdc-icon-button-size:24px;line-height:24px;color:var(--primary-text-color)}.content{padding:0 16px 8px;flex:1;overflow:hidden}.has-header{padding-top:0}state-history-charts{--timeline-top-margin:16px}.has-height state-history-charts{height:100%}.has-rows{--chart-max-height:100%}`)),(0,r.__decorate)([(0,o.MZ)({attribute:!1})],I.prototype,"hass",void 0),(0,r.__decorate)([(0,o.wk)()],I.prototype,"_history",void 0),(0,r.__decorate)([(0,o.wk)()],I.prototype,"_statisticsHistory",void 0),(0,r.__decorate)([(0,o.wk)()],I.prototype,"_config",void 0),(0,r.__decorate)([(0,o.wk)()],I.prototype,"_error",void 0),I=(0,r.__decorate)([(0,o.EM)("hui-history-graph-card")],I),i()}catch(y){i(y)}})},74879:function(t,e,n){var i=n(87642),r=n(36196),s=n(48630),o=n(85456),a=TypeError,c=Object.defineProperty,u=r.self!==r;try{if(o){var d=Object.getOwnPropertyDescriptor(r,"self");!u&&d&&d.get&&d.enumerable||s(r,"self",{get:function(){return r},set:function(t){if(this!==r)throw new a("Illegal invocation");c(r,"self",{value:t,writable:!0,configurable:!0,enumerable:!0})},configurable:!0,enumerable:!0})}else i({global:!0,simple:!0,forced:u},{self:r})}catch(h){}},71588:function(t,e,n){n.r(e),n.d(e,{Axis:function(){return i._0},ChartView:function(){return i.OZ},ComponentModel:function(){return i.jT},ComponentView:function(){return i.bR},List:function(){return i.B8},Model:function(){return i.Kx},PRIORITY:function(){return i.FQ},SeriesModel:function(){return i.rP},color:function(){return i.yW},connect:function(){return i.Ng},dataTool:function(){return i.p5},dependencies:function(){return i.El},disConnect:function(){return i.zm},disconnect:function(){return i.Zf},dispose:function(){return i.AS},env:function(){return i._K},extendChartView:function(){return i.yX},extendComponentModel:function(){return i.rt},extendComponentView:function(){return i.NO},extendSeriesModel:function(){return i.NA},format:function(){return i.GP},getCoordinateSystemDimensions:function(){return i.Bo},getInstanceByDom:function(){return i.FP},getInstanceById:function(){return i.aQ},getMap:function(){return i.ZB},graphic:function(){return i.fA},helper:function(){return i.dw},init:function(){return i.Ts},innerDrawElementOnCanvas:function(){return i.UU},matrix:function(){return i.UP},number:function(){return i.ai},parseGeoJSON:function(){return i.l3},parseGeoJson:function(){return i.zI},registerAction:function(){return i.OH},registerCoordinateSystem:function(){return i.pX},registerCustomSeries:function(){return i.mx},registerLayout:function(){return i.Oh},registerLoading:function(){return i.Ej},registerLocale:function(){return i.E},registerMap:function(){return i.mz},registerPostInit:function(){return i.cf},registerPostUpdate:function(){return i.tb},registerPreprocessor:function(){return i.lP},registerProcessor:function(){return i.qg},registerTheme:function(){return i.bf},registerTransform:function(){return i.iY},registerUpdateLifecycle:function(){return i.xV},registerVisual:function(){return i.AF},setCanvasCreator:function(){return i.vV},setPlatformAPI:function(){return i.Gs},throttle:function(){return i.nF},time:function(){return i.kB},use:function(){return i.Yx},util:function(){return i.ZS},vector:function(){return i.i1},version:function(){return i.rE},zrUtil:function(){return i.F_},zrender:function(){return i.nd}});var i=n(74901)}}]);
//# sourceMappingURL=28909.9d3d6bc087e85bef.js.map