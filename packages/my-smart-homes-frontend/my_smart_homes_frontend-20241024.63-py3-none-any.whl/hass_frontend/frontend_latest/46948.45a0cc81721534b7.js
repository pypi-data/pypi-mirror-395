export const __webpack_id__="46948";export const __webpack_ids__=["46948"];export const __webpack_modules__={94327:function(e,t,i){i.d(t,{Vy:()=>o,fI:()=>r,ux:()=>l});var a=i(65940),s=i(83510);const n=["#4269d0","#f4bd4a","#ff725c","#6cc5b0","#a463f2","#ff8ab7","#9c6b4e","#97bbf5","#01ab63","#094bad","#c99000","#d84f3e","#49a28f","#048732","#d96895","#8043ce","#7599d1","#7a4c31","#6989f4","#ffd444","#ff957c","#8fe9d3","#62cc71","#ffadda","#c884ff","#badeff","#bf8b6d","#927acc","#97ee3f","#bf3947","#9f5b00","#f48758","#8caed6","#f2b94f","#eff26e","#e43872","#d9b100","#9d7a00","#698cff","#00d27e","#d06800","#009f82","#c49200","#cbe8ff","#fecddf","#c27eb6","#8cd2ce","#c4b8d9","#f883b0","#a49100","#f48800","#27d0df","#a04a9b"];function o(e){return n[e%n.length]}function r(e,t){const i=t.getPropertyValue(`--graph-color-${e+1}`)||o(e);return(0,s.RQ)(i)}const l=(0,a.A)(e=>n.map((t,i)=>r(i,e)),(e,t)=>e[0].getPropertyValue("--graph-color-1")===t[0].getPropertyValue("--graph-color-1"))},94029:function(e,t,i){i.a(e,async function(e,a){try{i.d(t,{K:()=>d});var s=i(77489),n=i(65940),o=i(22989),r=e([s,o]);[s,o]=r.then?(await r)():r;const l=(0,n.A)(e=>new Intl.RelativeTimeFormat(e.language,{numeric:"auto"})),d=(e,t,i,a=!0)=>{const s=(0,o.x)(e,i,t);return a?l(t).format(s.value,s.unit):Intl.NumberFormat(t.language,{style:"unit",unit:s.unit,unitDisplay:"long"}).format(Math.abs(s.value))};a()}catch(e){a(e)}})},96276:function(e,t,i){i.d(t,{L:()=>n});const a={10:"mdi:battery-10",20:"mdi:battery-20",30:"mdi:battery-30",40:"mdi:battery-40",50:"mdi:battery-50",60:"mdi:battery-60",70:"mdi:battery-70",80:"mdi:battery-80",90:"mdi:battery-90",100:"mdi:battery"},s={10:"mdi:battery-charging-10",20:"mdi:battery-charging-20",30:"mdi:battery-charging-30",40:"mdi:battery-charging-40",50:"mdi:battery-charging-50",60:"mdi:battery-charging-60",70:"mdi:battery-charging-70",80:"mdi:battery-charging-80",90:"mdi:battery-charging-90",100:"mdi:battery-charging"},n=(e,t)=>{const i=Number(e);if(isNaN(i))return"off"===e?"mdi:battery":"on"===e?"mdi:battery-alert":"mdi:battery-unknown";const n=10*Math.round(i/10);return t&&i>=10?s[n]:t?"mdi:battery-charging-outline":i<=5?"mdi:battery-alert-variant-outline":a[n]}},85356:function(e,t,i){i.d(t,{n:()=>d,v:()=>r});i(99342),i(65315),i(837),i(37089),i(88238),i(34536),i(16257),i(20152),i(44711),i(72108),i(77030);var a=i(12275),s=i(14523),n=i(88341),o=i(24730);const r={alarm_control_panel:["armed_away","armed_custom_bypass","armed_home","armed_night","armed_vacation","arming","disarmed","disarming","pending","triggered"],alert:["on","off","idle"],assist_satellite:["idle","listening","responding","processing"],automation:["on","off"],binary_sensor:["on","off"],button:[],calendar:["on","off"],camera:["idle","recording","streaming"],cover:["closed","closing","open","opening"],device_tracker:["home","not_home"],fan:["on","off"],humidifier:["on","off"],input_boolean:["on","off"],input_button:[],lawn_mower:["error","paused","mowing","returning","docked"],light:["on","off"],lock:["jammed","locked","locking","unlocked","unlocking","opening","open"],media_player:["off","on","idle","playing","paused","standby","buffering"],person:["home","not_home"],plant:["ok","problem"],remote:["on","off"],scene:[],schedule:["on","off"],script:["on","off"],siren:["on","off"],sun:["above_horizon","below_horizon"],switch:["on","off"],timer:["active","idle","paused"],update:["on","off"],vacuum:["cleaning","docked","error","idle","paused","returning"],valve:["closed","closing","open","opening"],weather:["clear-night","cloudy","exceptional","fog","hail","lightning-rainy","lightning","partlycloudy","pouring","rainy","snowy-rainy","snowy","sunny","windy-variant","windy"]},l={alarm_control_panel:{code_format:["number","text"]},binary_sensor:{device_class:["battery","battery_charging","co","cold","connectivity","door","garage_door","gas","heat","light","lock","moisture","motion","moving","occupancy","opening","plug","power","presence","problem","running","safety","smoke","sound","tamper","update","vibration","window"]},button:{device_class:["restart","update"]},camera:{frontend_stream_type:["hls","web_rtc"]},climate:{hvac_action:["off","idle","preheating","defrosting","heating","cooling","drying","fan"]},cover:{device_class:["awning","blind","curtain","damper","door","garage","gate","shade","shutter","window"]},device_tracker:{source_type:["bluetooth","bluetooth_le","gps","router"]},fan:{direction:["forward","reverse"]},humidifier:{device_class:["humidifier","dehumidifier"],action:["off","idle","humidifying","drying"]},media_player:{device_class:["tv","speaker","receiver"],media_content_type:["album","app","artist","channel","channels","composer","contributing_artist","episode","game","genre","image","movie","music","playlist","podcast","season","track","tvshow","url","video"],repeat:["off","one","all"]},number:{device_class:["temperature"]},sensor:{device_class:["apparent_power","aqi","battery","carbon_dioxide","carbon_monoxide","current","date","duration","energy","frequency","gas","humidity","illuminance","monetary","nitrogen_dioxide","nitrogen_monoxide","nitrous_oxide","ozone","ph","pm1","pm10","pm25","pm4","power_factor","power","pressure","reactive_power","signal_strength","sulphur_dioxide","temperature","timestamp","volatile_organic_compounds","volatile_organic_compounds_parts","voltage","volume_flow_rate"],state_class:["measurement","total","total_increasing"]},switch:{device_class:["outlet","switch"]},update:{device_class:["firmware"]},water_heater:{away_mode:["on","off"]}},d=(e,t,i=void 0)=>{const d=(0,a.t)(t),c=[];switch(!i&&d in r?c.push(...r[d]):i&&d in l&&i in l[d]&&c.push(...l[d][i]),d){case"climate":i?"fan_mode"===i?c.push(...t.attributes.fan_modes):"preset_mode"===i?c.push(...t.attributes.preset_modes):"swing_mode"===i&&c.push(...t.attributes.swing_modes):c.push(...t.attributes.hvac_modes);break;case"device_tracker":case"person":i||c.push(...Object.entries(e.states).filter(([e,t])=>"zone"===(0,n.m)(e)&&"zone.home"!==e&&t.attributes.friendly_name).map(([e,t])=>t.attributes.friendly_name).sort((t,i)=>(0,o.xL)(t,i,e.locale.language)));break;case"event":"event_type"===i&&c.push(...t.attributes.event_types);break;case"fan":"preset_mode"===i&&c.push(...t.attributes.preset_modes);break;case"humidifier":"mode"===i&&c.push(...t.attributes.available_modes);break;case"input_select":case"select":i||c.push(...t.attributes.options);break;case"light":"effect"===i&&t.attributes.effect_list?c.push(...t.attributes.effect_list):"color_mode"===i&&t.attributes.supported_color_modes&&c.push(...t.attributes.supported_color_modes);break;case"media_player":"sound_mode"===i?c.push(...t.attributes.sound_mode_list):"source"===i&&c.push(...t.attributes.source_list);break;case"remote":"current_activity"===i&&c.push(...t.attributes.activity_list);break;case"sensor":i||"enum"!==t.attributes.device_class||c.push(...t.attributes.options);break;case"vacuum":"fan_speed"===i&&c.push(...t.attributes.fan_speed_list);break;case"water_heater":i&&"operation_mode"!==i||c.push(...t.attributes.operation_list)}return i||c.push(...s.s7),[...new Set(c)]}},35297:function(e,t,i){i.d(t,{Z:()=>a});const a=e=>e.charAt(0).toUpperCase()+e.slice(1)},17728:function(e,t,i){i.d(t,{n:()=>a});const a=e=>e.replace(/^_*(.)|_+(.)/g,(e,t,i)=>t?t.toUpperCase():" "+i.toUpperCase())},49013:function(e,t,i){async function a(e){try{return(await e.callWS({type:"config_entries/get_device_limit"})).device_count_limit}catch(e){return}}i.d(t,{z:()=>a})},22989:function(e,t,i){i.a(e,async function(e,a){try{i.d(t,{x:()=>h});var s=i(41484),n=i(88258),o=i(42794),r=i(50654);const l=1e3,d=60,c=60*d;function h(e,t=Date.now(),i,a={}){const h={...p,...a||{}},u=(+e-+t)/l;if(Math.abs(u)<h.second)return{value:Math.round(u),unit:"second"};const _=u/d;if(Math.abs(_)<h.minute)return{value:Math.round(_),unit:"minute"};const g=u/c;if(Math.abs(g)<h.hour)return{value:Math.round(g),unit:"hour"};const v=new Date(e),m=new Date(t);v.setHours(0,0,0,0),m.setHours(0,0,0,0);const f=(0,s.c)(v,m);if(0===f)return{value:Math.round(g),unit:"hour"};if(Math.abs(f)<h.day)return{value:f,unit:"day"};const y=(0,r.P)(i),b=(0,n.k)(v,{weekStartsOn:y}),w=(0,n.k)(m,{weekStartsOn:y}),$=(0,o.I)(b,w);if(0===$)return{value:f,unit:"day"};if(Math.abs($)<h.week)return{value:$,unit:"week"};const x=v.getFullYear()-m.getFullYear(),k=12*x+v.getMonth()-m.getMonth();return 0===k?{value:$,unit:"week"}:Math.abs(k)<h.month||0===x?{value:k,unit:"month"}:{value:Math.round(x),unit:"year"}}const p={second:59,minute:59,hour:22,day:5,week:4,month:11};a()}catch(u){a(u)}})},75831:function(e,t,i){var a=i(69868),s=i(71906),n=i(22019);class o extends s.Y{}o=(0,a.__decorate)([(0,n.EM)("ha-chip-set")],o)},42267:function(e,t,i){var a=i(69868),s=i(84922),n=i(22019),o=i(96276);i(17933);class r extends s.WF{render(){return this.batteryStateObj?s.qy` <ha-icon .icon="${(0,o.L)(this.batteryStateObj.state,"on"===this.batteryChargingStateObj?.state)}"></ha-icon> `:s.s6}}(0,a.__decorate)([(0,n.MZ)({attribute:!1})],r.prototype,"batteryStateObj",void 0),(0,a.__decorate)([(0,n.MZ)({attribute:!1})],r.prototype,"batteryChargingStateObj",void 0),r=(0,a.__decorate)([(0,n.EM)("ha-battery-icon")],r)},70490:function(e,t,i){var a=i(69868),s=i(84922),n=i(22019);class o extends s.WF{render(){return s.qy` ${this.header?s.qy`<h1 class="card-header">${this.header}</h1>`:s.s6} <slot></slot> `}constructor(...e){super(...e),this.raised=!1}}o.styles=s.AH`:host{background:var(--ha-card-background,var(--card-background-color,#fff));-webkit-backdrop-filter:var(--ha-card-backdrop-filter,none);backdrop-filter:var(--ha-card-backdrop-filter,none);box-shadow:var(--ha-card-box-shadow,none);box-sizing:border-box;border-radius:var(--ha-card-border-radius,var(--ha-border-radius-lg));border-width:var(--ha-card-border-width,1px);border-style:solid;border-color:var(--ha-card-border-color,var(--divider-color,#e0e0e0));color:var(--primary-text-color);display:block;transition:all .3s ease-out;position:relative}:host([raised]){border:none;box-shadow:var(--ha-card-box-shadow,0px 2px 1px -1px rgba(0,0,0,.2),0px 1px 1px 0px rgba(0,0,0,.14),0px 1px 3px 0px rgba(0,0,0,.12))}.card-header,:host ::slotted(.card-header){color:var(--ha-card-header-color,var(--primary-text-color));font-family:var(--ha-card-header-font-family, inherit);font-size:var(--ha-card-header-font-size, var(--ha-font-size-2xl));letter-spacing:-.012em;line-height:var(--ha-line-height-expanded);padding:var(--ha-space-3) var(--ha-space-4) var(--ha-space-4);display:block;margin-block-start:var(--ha-space-0);margin-block-end:var(--ha-space-0);font-weight:var(--ha-font-weight-normal)}:host ::slotted(.card-content:not(:first-child)),slot:not(:first-child)::slotted(.card-content){padding-top:var(--ha-space-0);margin-top:calc(var(--ha-space-2) * -1)}:host ::slotted(.card-content){padding:var(--ha-space-4)}:host ::slotted(.card-actions){border-top:1px solid var(--divider-color,#e8e8e8);padding:var(--ha-space-2)}`,(0,a.__decorate)([(0,n.MZ)()],o.prototype,"header",void 0),(0,a.__decorate)([(0,n.MZ)({type:Boolean,reflect:!0})],o.prototype,"raised",void 0),o=(0,a.__decorate)([(0,n.EM)("ha-card")],o)},10547:function(e,t,i){var a=i(69868),s=i(54500),n=i(2909),o=i(22019),r=i(84922),l=i(91541);class d extends s.n{firstUpdated(e){super.firstUpdated(e),this.style.setProperty("--mdc-theme-secondary","var(--primary-color)")}}d.styles=[n.R,r.AH`:host{--mdc-typography-button-text-transform:none;--mdc-typography-button-font-size:var(--ha-font-size-l);--mdc-typography-button-font-family:var(--ha-font-family-body);--mdc-typography-button-font-weight:var(--ha-font-weight-medium)}:host .mdc-fab--extended{border-radius:var(--ha-button-border-radius,var(--ha-border-radius-pill))}:host .mdc-fab.mdc-fab--extended .ripple{border-radius:var(--ha-button-border-radius,var(--ha-border-radius-pill))}:host .mdc-fab--extended .mdc-fab__icon{margin-inline-start:-8px;margin-inline-end:12px;direction:var(--direction)}:disabled{--mdc-theme-secondary:var(--disabled-text-color);pointer-events:none}`,"rtl"===l.G.document.dir?r.AH`:host .mdc-fab--extended .mdc-fab__icon{direction:rtl}`:r.AH``],d=(0,a.__decorate)([(0,o.EM)("ha-fab")],d)},25559:function(e,t,i){i.a(e,async function(e,t){try{i(65315),i(837),i(37089);var a=i(69868),s=i(84922),n=i(22019),o=i(33055),r=i(65940),l=i(44017),d=i(24730),c=i(61964),h=i(50809),p=(i(7475),i(37448)),u=(i(16520),i(14532),i(7253),e([p]));p=(u.then?(await u)():u)[0];const _="M21 8H3V6H21V8M13.81 16H10V18H13.09C13.21 17.28 13.46 16.61 13.81 16M18 11H6V13H18V11M21.12 15.46L19 17.59L16.88 15.46L15.47 16.88L17.59 19L15.47 21.12L16.88 22.54L19 20.41L21.12 22.54L22.54 21.12L20.41 19L22.54 16.88L21.12 15.46Z";class g extends s.WF{render(){return s.qy` <ha-expansion-panel left-chevron .expanded="${this.expanded}" @expanded-will-change="${this._expandedWillChange}" @expanded-changed="${this._expandedChanged}"> <div slot="header" class="header"> ${this.hass.localize("ui.panel.config.integrations.caption")} ${this.value?.length?s.qy`<div class="badge">${this.value?.length}</div> <ha-icon-button .path="${_}" @click="${this._clearFilter}"></ha-icon-button>`:s.s6} </div> ${this._manifests&&this._shouldRender?s.qy`<search-input-outlined .hass="${this.hass}" .filter="${this._filter}" @value-changed="${this._handleSearchChange}"> </search-input-outlined> <ha-list class="ha-scrollbar" @click="${this._handleItemClick}" multi> ${(0,o.u)(this._integrations(this.hass.localize,this._manifests,this._filter,this.value),e=>e.domain,e=>s.qy`<ha-check-list-item .value="${e.domain}" .selected="${(this.value||[]).includes(e.domain)}" graphic="icon"> <ha-domain-icon slot="graphic" .hass="${this.hass}" .domain="${e.domain}" brand-fallback></ha-domain-icon> ${e.name} </ha-check-list-item>`)} </ha-list> `:s.s6} </ha-expansion-panel> `}updated(e){e.has("expanded")&&this.expanded&&setTimeout(()=>{this.expanded&&(this.renderRoot.querySelector("ha-list").style.height=this.clientHeight-49-32+"px")},300)}_expandedWillChange(e){this._shouldRender=e.detail.expanded}_expandedChanged(e){this.expanded=e.detail.expanded}async firstUpdated(){this._manifests=await(0,c.fK)(this.hass),this.hass.loadBackendTranslation("title")}_handleItemClick(e){const t=e.target.closest("ha-check-list-item"),i=t?.value;i&&(this.value?.includes(i)?this.value=this.value?.filter(e=>e!==i):this.value=[...this.value||[],i],t.selected=this.value?.includes(i),(0,l.r)(this,"data-table-filter-changed",{value:this.value,items:void 0}))}_clearFilter(e){e.preventDefault(),this.value=void 0,(0,l.r)(this,"data-table-filter-changed",{value:void 0,items:void 0})}_handleSearchChange(e){this._filter=e.detail.value.toLowerCase()}static get styles(){return[h.dp,s.AH`:host{border-bottom:1px solid var(--divider-color)}:host([expanded]){flex:1;height:0}ha-expansion-panel{--ha-card-border-radius:var(--ha-border-radius-square);--expansion-panel-content-padding:0}.header{display:flex;align-items:center}.header ha-icon-button{margin-inline-start:auto;margin-inline-end:8px}.badge{display:inline-block;margin-left:8px;margin-inline-start:8px;margin-inline-end:0;min-width:16px;box-sizing:border-box;border-radius:var(--ha-border-radius-circle);font-size:var(--ha-font-size-xs);font-weight:var(--ha-font-weight-normal);background-color:var(--primary-color);line-height:var(--ha-line-height-normal);text-align:center;padding:0px 2px;color:var(--text-primary-color)}search-input-outlined{display:block;padding:var(--ha-space-1) var(--ha-space-2) 0}`]}constructor(...e){super(...e),this.narrow=!1,this.expanded=!1,this._shouldRender=!1,this._integrations=(0,r.A)((e,t,i,a)=>t.map(t=>({...t,name:(0,c.p$)(e,t.domain,t)})).filter(e=>(!e.integration_type||!["entity","system","hardware"].includes(e.integration_type))&&(!i||e.name.toLowerCase().includes(i)||e.domain.toLowerCase().includes(i))).sort((e,t)=>(0,d.xL)(e.name,t.name,this.hass.locale.language)))}}(0,a.__decorate)([(0,n.MZ)({attribute:!1})],g.prototype,"hass",void 0),(0,a.__decorate)([(0,n.MZ)({attribute:!1})],g.prototype,"value",void 0),(0,a.__decorate)([(0,n.MZ)({type:Boolean})],g.prototype,"narrow",void 0),(0,a.__decorate)([(0,n.MZ)({type:Boolean,reflect:!0})],g.prototype,"expanded",void 0),(0,a.__decorate)([(0,n.wk)()],g.prototype,"_manifests",void 0),(0,a.__decorate)([(0,n.wk)()],g.prototype,"_shouldRender",void 0),(0,a.__decorate)([(0,n.wk)()],g.prototype,"_filter",void 0),g=(0,a.__decorate)([(0,n.EM)("ha-filter-integrations")],g),t()}catch(e){t(e)}})},74533:function(e,t,i){i(99342),i(65315),i(84136),i(37089);var a=i(69868),s=i(84922),n=i(22019),o=i(44017),r=i(50809);i(7475),i(16520),i(17933),i(9058),i(14532);class l extends s.WF{render(){if(!this.states)return s.s6;const e=this.states.find(e=>e.icon);return s.qy` <ha-expansion-panel left-chevron .expanded="${this.expanded}" @expanded-will-change="${this._expandedWillChange}" @expanded-changed="${this._expandedChanged}"> <div slot="header" class="header"> ${this.label} ${this.value?.length?s.qy`<div class="badge">${this.value?.length}</div> <ha-icon-button .path="${"M21 8H3V6H21V8M13.81 16H10V18H13.09C13.21 17.28 13.46 16.61 13.81 16M18 11H6V13H18V11M21.12 15.46L19 17.59L16.88 15.46L15.47 16.88L17.59 19L15.47 21.12L16.88 22.54L19 20.41L21.12 22.54L22.54 21.12L20.41 19L22.54 16.88L21.12 15.46Z"}" @click="${this._clearFilter}"></ha-icon-button>`:s.s6} </div> ${this._shouldRender?s.qy` <ha-list @selected="${this._statesSelected}" multi class="ha-scrollbar"> ${this.states.map(t=>s.qy`<ha-check-list-item .value="${t.value}" .selected="${this.value?.includes(t.value)??!1}" .graphic="${e?"icon":null}"> ${t.icon?s.qy`<ha-icon slot="graphic" .icon="${t.icon}"></ha-icon>`:s.s6} ${t.label} </ha-check-list-item>`)} </ha-list> `:s.s6} </ha-expansion-panel> `}willUpdate(e){e.has("expanded")&&this.expanded&&(this._shouldRender=!0)}updated(e){(e.has("expanded")||e.has("states"))&&this.expanded&&setTimeout(async()=>{if(!this.expanded)return;const e=this._list;e&&(e.style.height=this.clientHeight-49+"px")},300)}_expandedWillChange(e){this._shouldRender=e.detail.expanded}_expandedChanged(e){this.expanded=e.detail.expanded}async _statesSelected(e){if(!e.detail.index.size)return(0,o.r)(this,"data-table-filter-changed",{value:[],items:void 0}),void(this.value=[]);const t=[];for(const i of e.detail.index){const e=this.states[i].value;t.push(e)}this.value=t,(0,o.r)(this,"data-table-filter-changed",{value:t,items:void 0})}_clearFilter(e){e.preventDefault(),this.value=void 0,(0,o.r)(this,"data-table-filter-changed",{value:void 0,items:void 0})}static get styles(){return[r.dp,s.AH`:host{border-bottom:1px solid var(--divider-color)}:host([expanded]){flex:1;height:0}ha-expansion-panel{--ha-card-border-radius:var(--ha-border-radius-square);--expansion-panel-content-padding:0}.header{display:flex;align-items:center}.header ha-icon-button{margin-inline-start:auto;margin-inline-end:8px}.badge{display:inline-block;margin-left:8px;margin-inline-start:8px;margin-inline-end:0;min-width:16px;box-sizing:border-box;border-radius:var(--ha-border-radius-circle);font-size:var(--ha-font-size-xs);font-weight:var(--ha-font-weight-normal);background-color:var(--primary-color);line-height:var(--ha-line-height-normal);text-align:center;padding:0px 2px;color:var(--text-primary-color)}`]}constructor(...e){super(...e),this.narrow=!1,this.expanded=!1,this._shouldRender=!1}}(0,a.__decorate)([(0,n.MZ)({attribute:!1})],l.prototype,"hass",void 0),(0,a.__decorate)([(0,n.MZ)()],l.prototype,"label",void 0),(0,a.__decorate)([(0,n.MZ)({attribute:!1})],l.prototype,"value",void 0),(0,a.__decorate)([(0,n.MZ)({attribute:!1})],l.prototype,"states",void 0),(0,a.__decorate)([(0,n.MZ)({type:Boolean})],l.prototype,"narrow",void 0),(0,a.__decorate)([(0,n.MZ)({type:Boolean,reflect:!0})],l.prototype,"expanded",void 0),(0,a.__decorate)([(0,n.wk)()],l.prototype,"_shouldRender",void 0),(0,a.__decorate)([(0,n.P)("ha-list")],l.prototype,"_list",void 0),l=(0,a.__decorate)([(0,n.EM)("ha-filter-states")],l)},42163:function(e,t,i){i.r(t),i.d(t,{HaIconNext:()=>r});var a=i(69868),s=i(22019),n=i(91541),o=i(86160);class r extends o.HaSvgIcon{constructor(...e){super(...e),this.path="rtl"===n.G.document.dir?"M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z":"M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z"}}(0,a.__decorate)([(0,s.MZ)()],r.prototype,"path",void 0),r=(0,a.__decorate)([(0,s.EM)("ha-icon-next")],r)},73634:function(e,t,i){var a=i(69868),s=i(36363),n=i(20150),o=i(84922),r=i(22019);class l extends s.g{async show(){super.show(),this.menu.hasOverflow=!1}}l.styles=[n.R,o.AH`:host{--ha-icon-display:block;--md-sys-color-primary:var(--primary-text-color);--md-sys-color-on-primary:var(--primary-text-color);--md-sys-color-secondary:var(--secondary-text-color);--md-sys-color-surface:var(--card-background-color);--md-sys-color-on-surface:var(--primary-text-color);--md-sys-color-on-surface-variant:var(--secondary-text-color);--md-sys-color-secondary-container:rgba(
          var(--rgb-primary-color),
          0.15
        );--md-sys-color-on-secondary-container:var(--text-primary-color);--mdc-icon-size:16px;--md-sys-color-on-primary-container:var(--primary-text-color);--md-sys-color-on-secondary-container:var(--primary-text-color)}`],l=(0,a.__decorate)([(0,r.EM)("ha-sub-menu")],l)},99561:function(e,t,i){i.d(t,{KC:()=>c,Vy:()=>l,ds:()=>n,ew:()=>r,g5:()=>d,tl:()=>o});var a=i(70816),s=i(14523);const n=(e,t,i)=>e.connection.subscribeMessage(i,{type:"assist_satellite/intercept_wake_word",entity_id:t}),o=(e,t)=>e.callWS({type:"assist_satellite/test_connection",entity_id:t}),r=(e,t,i)=>e.callService("assist_satellite","announce",i,{entity_id:t}),l=(e,t)=>e.callWS({type:"assist_satellite/get_configuration",entity_id:t}),d=(e,t,i)=>e.callWS({type:"assist_satellite/set_wake_words",entity_id:t,wake_word_ids:i}),c=e=>e&&e.state!==s.Hh&&(0,a.$)(e,1)},48727:function(e,t,i){i.d(t,{D:()=>s,i:()=>a});i(65315),i(22416),i(88238),i(34536),i(16257),i(20152),i(44711),i(72108),i(77030);const a=e=>{const t={};return Object.entries(e).forEach(([e,i])=>{t[e]={value:i.value,items:i.items instanceof Set?Array.from(i.items):i.items}}),t},s=e=>{const t={};return Object.entries(e).forEach(([e,i])=>{t[e]={value:i.value,items:Array.isArray(i.items)?new Set(i.items):i.items}}),t}},47446:function(e,t,i){i.d(t,{Dh:()=>a,It:()=>o,WV:()=>n,g9:()=>s});const a=e=>e.callWS({type:"diagnostics/list"}),s=(e,t)=>e.callWS({type:"diagnostics/get",domain:t}),n=e=>`/api/diagnostics/config_entry/${e}`,o=(e,t)=>`/api/diagnostics/config_entry/${e}/device/${t}`},61830:function(e,t,i){function a(e){return"strategy"in e}i.d(t,{Dz:()=>s,Wu:()=>a,io:()=>o,ql:()=>n});const s=(e,t,i)=>e.sendMessagePromise({type:"lovelace/config",url_path:t,force:i}),n=(e,t,i)=>e.callWS({type:"lovelace/config/save",url_path:t,config:i}),o=(e,t)=>e.callWS({type:"lovelace/config/delete",url_path:t})},2560:function(e,t,i){i.d(t,{A_:()=>o,SJ:()=>a,mQ:()=>n,n6:()=>s});const a=e=>e.callWS({type:"lovelace/dashboards/list"}),s=(e,t)=>e.callWS({type:"lovelace/dashboards/create",...t}),n=(e,t,i)=>e.callWS({type:"lovelace/dashboards/update",dashboard_id:t,...i}),o=(e,t)=>e.callWS({type:"lovelace/dashboards/delete",dashboard_id:t})},59895:function(e,t,i){i.d(t,{_:()=>o});i(65315),i(837),i(22416),i(37089);var a=i(84922),s=i(15241),n=i(59569);i(16520);const o=async(e,t,i)=>{const o=await(0,n.BM)(t,i),r=Object.entries(o),l=r.filter(([e,t])=>t&&e!==t).map(([e,t])=>a.qy`<tr> <td>${e}</td> <td>${t}</td> </tr>`),d=r.filter(([e,t])=>null===t).map(([e])=>a.qy`<li>${e}</li>`),c=r.filter(([e,t])=>e===t).map(([e])=>a.qy`<li>${e}</li>`);l.length?(0,s.dk)(e,{title:t.localize("ui.dialogs.recreate_entity_ids.confirm_rename_title"),text:a.qy`${t.localize("ui.dialogs.recreate_entity_ids.confirm_rename_warning")} <br><br> <ha-expansion-panel outlined> <span slot="header">${t.localize("ui.dialogs.recreate_entity_ids.will_rename",{count:l.length})}</span> <div style="overflow:auto"> <table style="width:100%;text-align:var(--float-start)"> <tr> <th>${t.localize("ui.dialogs.recreate_entity_ids.old")}</th> <th>${t.localize("ui.dialogs.recreate_entity_ids.new")}</th> </tr> ${l} </table> </div> </ha-expansion-panel> ${d.length?a.qy`<ha-expansion-panel outlined style="margin-top:8px"> <span slot="header">${t.localize("ui.dialogs.recreate_entity_ids.cant_rename",{count:d.length})}</span> ${d} </ha-expansion-panel>`:a.s6} ${c.length?a.qy`<ha-expansion-panel outlined style="margin-top:8px"> <span slot="header">${t.localize("ui.dialogs.recreate_entity_ids.wont_change",{count:c.length})}</span> ${c} </ha-expansion-panel>`:a.s6}`,confirmText:t.localize("ui.common.update"),dismissText:t.localize("ui.common.cancel"),destructive:!0,confirm:()=>{r.filter(([e,t])=>t&&e!==t).forEach(([i,a])=>(0,n.G_)(t,i,{new_entity_id:a}).catch(a=>{(0,s.showAlertDialog)(e,{title:t.localize("ui.dialogs.recreate_entity_ids.update_entity_error",{entityId:i}),text:a.message})}))}}):(0,s.showAlertDialog)(e,{title:t.localize("ui.dialogs.recreate_entity_ids.confirm_no_renamable_entity_ids"),text:a.qy`${d.length?a.qy`<ha-expansion-panel outlined style="margin-top:8px"> <span slot="header">${t.localize("ui.dialogs.recreate_entity_ids.cant_rename",{count:d.length})}</span> ${d} </ha-expansion-panel>`:a.s6} ${c.length?a.qy`<ha-expansion-panel outlined style="margin-top:8px"> <span slot="header">${t.localize("ui.dialogs.recreate_entity_ids.wont_change",{count:c.length})}</span> ${c} </ha-expansion-panel>`:a.s6}`})}},62801:function(e,t,i){i.d(t,{L:()=>n});var a=i(44017);const s=()=>Promise.all([i.e("94527"),i.e("86677"),i.e("30199"),i.e("89088"),i.e("70412"),i.e("33395"),i.e("70184"),i.e("56216"),i.e("27923"),i.e("5615"),i.e("75297"),i.e("89137"),i.e("61717"),i.e("336"),i.e("4026"),i.e("22694")]).then(i.bind(i,39989)),n=(e,t)=>{(0,a.r)(e,"show-dialog",{dialogTag:"ha-voice-assistant-setup-dialog",dialogImport:s,dialogParams:t})}},85288:function(e,t,i){i.a(e,async function(e,a){try{i.r(t);var s=i(69868),n=i(84922),o=i(22019),r=i(77240),l=(i(65442),i(17372)),d=(i(45148),i(94124),e([l]));l=(d.then?(await d)():d)[0];class c extends n.WF{render(){return n.qy` ${this.toolbar?n.qy`<div class="toolbar"> ${this.rootnav||history.state?.root?n.qy` <ha-menu-button .hass="${this.hass}" .narrow="${this.narrow}"></ha-menu-button> `:n.qy` <ha-icon-button-arrow-prev .hass="${this.hass}" @click="${this._handleBack}"></ha-icon-button-arrow-prev> `} </div>`:""} <div class="content"> <ha-alert alert-type="error">${this.error}</ha-alert> <slot> <ha-button appearance="plain" size="small" @click="${this._handleBack}"> ${this.hass?.localize("ui.common.back")} </ha-button> </slot> </div> `}_handleBack(){(0,r.O)()}static get styles(){return[n.AH`:host{display:block;height:100%;background-color:var(--primary-background-color)}.toolbar{display:flex;align-items:center;font-size:var(--ha-font-size-xl);height:var(--header-height);padding:8px 12px;pointer-events:none;background-color:var(--app-header-background-color);font-weight:var(--ha-font-weight-normal);color:var(--app-header-text-color,#fff);border-bottom:var(--app-header-border-bottom,none);box-sizing:border-box}@media (max-width:599px){.toolbar{padding:4px}}ha-icon-button-arrow-prev{pointer-events:auto}.content{color:var(--primary-text-color);height:calc(100% - var(--header-height));display:flex;padding:16px;align-items:center;justify-content:center;flex-direction:column;box-sizing:border-box}a{color:var(--primary-color)}ha-alert{margin-bottom:16px}`]}constructor(...e){super(...e),this.toolbar=!0,this.rootnav=!1,this.narrow=!1}}(0,s.__decorate)([(0,o.MZ)({attribute:!1})],c.prototype,"hass",void 0),(0,s.__decorate)([(0,o.MZ)({type:Boolean})],c.prototype,"toolbar",void 0),(0,s.__decorate)([(0,o.MZ)({type:Boolean})],c.prototype,"rootnav",void 0),(0,s.__decorate)([(0,o.MZ)({type:Boolean})],c.prototype,"narrow",void 0),(0,s.__decorate)([(0,o.MZ)()],c.prototype,"error",void 0),c=(0,s.__decorate)([(0,o.EM)("hass-error-screen")],c),a()}catch(e){a(e)}})},41564:function(e,t,i){var a=i(69868),s=i(84922),n=i(22019),o=i(33136),r=i(77240),l=(i(65442),i(45148),i(50809));class d extends s.WF{render(){return s.qy` <div class="toolbar"> <div class="toolbar-content"> ${this.mainPage||history.state?.root?s.qy` <ha-menu-button .hassio="${this.supervisor}" .hass="${this.hass}" .narrow="${this.narrow}"></ha-menu-button> `:this.backPath?s.qy` <a href="${this.backPath}"> <ha-icon-button-arrow-prev .hass="${this.hass}"></ha-icon-button-arrow-prev> </a> `:s.qy` <ha-icon-button-arrow-prev .hass="${this.hass}" @click="${this._backTapped}"></ha-icon-button-arrow-prev> `} <div class="main-title"> <slot name="header">${this.header}</slot> </div> <slot name="toolbar-icon"></slot> </div> </div> <div class="content ha-scrollbar" @scroll="${this._saveScrollPos}"> <slot></slot> </div> <div id="fab"> <slot name="fab"></slot> </div> `}_saveScrollPos(e){this._savedScrollPos=e.target.scrollTop}_backTapped(){this.backCallback?this.backCallback():(0,r.O)()}static get styles(){return[l.dp,s.AH`:host{display:block;height:100%;background-color:var(--primary-background-color);overflow:hidden;position:relative}:host([narrow]){width:100%;position:fixed}.toolbar{background-color:var(--app-header-background-color);padding-top:var(--safe-area-inset-top);padding-right:var(--safe-area-inset-right)}:host([narrow]) .toolbar{padding-left:var(--safe-area-inset-left)}.toolbar-content{display:flex;align-items:center;font-size:var(--ha-font-size-xl);height:var(--header-height);font-weight:var(--ha-font-weight-normal);color:var(--app-header-text-color,#fff);border-bottom:var(--app-header-border-bottom,none);box-sizing:border-box;padding:8px 12px}.toolbar a{color:var(--sidebar-text-color);text-decoration:none}::slotted([slot=toolbar-icon]),ha-icon-button-arrow-prev,ha-menu-button{pointer-events:auto;color:var(--sidebar-icon-color)}.main-title{margin:var(--margin-title);line-height:var(--ha-line-height-normal);min-width:0;flex-grow:1;overflow-wrap:break-word;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;padding-bottom:1px}.content{position:relative;width:calc(100% - var(--safe-area-inset-right,0px));height:calc(100% - 1px - var(--header-height,0px) - var(--safe-area-inset-top,0px) - var(--hass-subpage-bottom-inset,var(--safe-area-inset-bottom,0px)));margin-bottom:var(--hass-subpage-bottom-inset,var(--safe-area-inset-bottom));margin-right:var(--safe-area-inset-right);overflow-y:auto;overflow:auto;-webkit-overflow-scrolling:touch}:host([narrow]) .content{width:calc(100% - var(--safe-area-inset-left,0px) - var(--safe-area-inset-right,0px));margin-left:var(--safe-area-inset-left)}#fab{position:absolute;right:calc(16px + var(--safe-area-inset-right,0px));inset-inline-end:calc(16px + var(--safe-area-inset-right,0px));inset-inline-start:initial;bottom:calc(16px + var(--safe-area-inset-bottom,0px));z-index:1;display:flex;flex-wrap:wrap;justify-content:flex-end;gap:var(--ha-space-2)}:host([narrow]) #fab.tabs{bottom:calc(84px + var(--safe-area-inset-bottom,0px))}#fab[is-wide]{bottom:calc(24px + var(--safe-area-inset-bottom,0px));right:calc(24px + var(--safe-area-inset-right,0px));inset-inline-end:calc(24px + var(--safe-area-inset-right,0px));inset-inline-start:initial}`]}constructor(...e){super(...e),this.mainPage=!1,this.narrow=!1,this.supervisor=!1}}(0,a.__decorate)([(0,n.MZ)({attribute:!1})],d.prototype,"hass",void 0),(0,a.__decorate)([(0,n.MZ)()],d.prototype,"header",void 0),(0,a.__decorate)([(0,n.MZ)({type:Boolean,attribute:"main-page"})],d.prototype,"mainPage",void 0),(0,a.__decorate)([(0,n.MZ)({type:String,attribute:"back-path"})],d.prototype,"backPath",void 0),(0,a.__decorate)([(0,n.MZ)({attribute:!1})],d.prototype,"backCallback",void 0),(0,a.__decorate)([(0,n.MZ)({type:Boolean,reflect:!0})],d.prototype,"narrow",void 0),(0,a.__decorate)([(0,n.MZ)({type:Boolean})],d.prototype,"supervisor",void 0),(0,a.__decorate)([(0,o.a)(".content")],d.prototype,"_savedScrollPos",void 0),(0,a.__decorate)([(0,n.Ls)({passive:!0})],d.prototype,"_saveScrollPos",null),d=(0,a.__decorate)([(0,n.EM)("hass-subpage")],d)},38525:function(e,t,i){i.d(t,{E:()=>s,J:()=>n});var a=i(44017);const s=()=>Promise.all([i.e("42153"),i.e("15265"),i.e("3245"),i.e("30199"),i.e("70184"),i.e("53904"),i.e("87110"),i.e("79584"),i.e("59836"),i.e("19474"),i.e("89137"),i.e("61717"),i.e("56030"),i.e("84704")]).then(i.bind(i,34865)),n=(e,t)=>{(0,a.r)(e,"show-dialog",{dialogTag:"dialog-area-registry-detail",dialogImport:s,dialogParams:t})}},91562:function(e,t,i){i.a(e,async function(e,t){try{i(99342),i(65315),i(837),i(22416),i(37089);var a=i(69868),s=i(84922),n=i(22019),o=i(75907),r=i(60434),l=i(86886),d=i(50231),c=i(17372),h=(i(70490),i(17933),i(14532),i(77510),i(59569)),p=i(16808),u=i(81579),_=i(4472),g=i(6055),v=i(6574),m=e([c,g,p]);[c,g,p]=m.then?(await m)():m;class f extends s.WF{shouldUpdate(e){return e.has("hass")&&1===e.size?(this._entityRows.forEach(e=>{e.hass=this.hass}),!1):(this._entityRows=[],!0)}render(){if(!this.entities.length)return s.qy` <ha-card outlined .header="${this.header}"> <div class="empty card-content"> ${this.hass.localize("ui.panel.config.devices.entities.none")} </div> </ha-card> `;const e=[],t=[];return this.entities.forEach(i=>{i.disabled_by?this._extDisabledEntityEntries?t.push(this._extDisabledEntityEntries[i.entity_id]||i):t.push(i):e.push(i)}),s.qy` <ha-card outlined .header="${this.header}"> ${e.length?s.qy` <div id="entities" class="move-up"> <ha-list> ${e.map(e=>this.hass.states[e.entity_id]?this._renderEntity(e):this._renderEntry(e))} </ha-list> </div> `:s.s6} ${t.length?s.qy`<div class="${(0,o.H)({"move-up":!e.length})}"> ${this.showHidden?s.qy` <ha-list> ${t.map(e=>this._renderEntry(e))} </ha-list> <button class="show-more" @click="${this._toggleShowHidden}"> ${this.hass.localize("ui.panel.config.devices.entities.show_less")} </button> `:s.qy` <button class="show-more" @click="${this._toggleShowHidden}"> ${this.hass.localize("ui.panel.config.devices.entities.disabled_entities",{count:t.length})} </button> `} </div>`:s.s6} <div class="card-actions"> <ha-button appearance="plain" @click="${this._addToLovelaceView}"> ${this.hass.localize("ui.panel.config.devices.entities.add_entities_lovelace")} </ha-button> </div> </ha-card> `}_toggleShowHidden(){if(this.showHidden=!this.showHidden,!this.showHidden||void 0!==this._extDisabledEntityEntries)return;this._extDisabledEntityEntries={};const e=this.entities.filter(e=>e.disabled_by),t=async()=>{if(0===e.length)return;const i=e.pop().entity_id,a=await(0,h.v)(this.hass,i);this._extDisabledEntityEntries[i]=a,this.requestUpdate("_extDisabledEntityEntries"),t()};t(),t(),t()}_renderEntity(e){const t={entity:e.entity_id},i=(0,g.T)(t);if(this.hass){i.hass=this.hass;const a=this.hass.states[e.entity_id];let s=(0,l.aH)(a,this.hass.entities,this.hass.devices)||this.deviceName;e.hidden_by&&(s+=` (${this.hass.localize("ui.panel.config.devices.entities.hidden")})`),t.name=s}return i.entry=e,this._entityRows.push(i),s.qy` <div>${i}</div> `}_renderEntry(e){const t=e.stateName||e.name||e.original_name,i=(0,r.T)((0,p.u7)(this.hass,e));return s.qy` <ha-list-item graphic="icon" class="disabled-entry" .entry="${e}" @click="${this._openEditEntry}"> <ha-icon slot="graphic" .icon="${i}"></ha-icon> <div class="name"> ${t?(0,d.p)(t,this.deviceName)||t:e.entity_id} </div> </ha-list-item> `}_openEditEntry(e){const t=e.currentTarget.entry;(0,u.p)(this,{entityId:t.entity_id})}_addToLovelaceView(){const e=this.entities.filter(e=>!e.disabled_by).map(e=>e.entity_id);(0,v.Q)(this,this.hass,(0,_.Bi)(this.hass,e,{title:this.deviceName}),(0,_.ZI)(e,{title:this.deviceName}),e)}constructor(...e){super(...e),this.showHidden=!1,this._entityRows=[]}}f.styles=s.AH`:host{display:block}ha-icon{margin-left:-8px}.entity-id{color:var(--secondary-text-color)}.buttons{text-align:right;margin:0 0 0 8px}.disabled-entry{color:var(--secondary-text-color)}.move-up{margin-top:-13px}.move-up:has(> ha-list){margin-top:-24px}:not(.move-up)>ha-list{margin-top:-24px}.move-up+:not(:has(ha-list))>button.show-more,ha-list+button.show-more{margin-top:-12px}#entities>ha-list{margin:0 16px 0 8px}.name{font-size:var(--ha-font-size-m)}.name:dir(rtl){margin-inline-start:8px}.empty{text-align:center}button.show-more{color:var(--primary-color);text-align:left;cursor:pointer;background:0 0;border-width:initial;border-style:none;border-color:initial;border-image:initial;padding:16px;font:inherit}button.show-more:focus{outline:0;text-decoration:underline}ha-list>*{margin:8px 0px}ha-list-item{height:40px;--mdc-ripple-color:transparent}.card-actions{padding:4px 16px 4px 4px}`,(0,a.__decorate)([(0,n.MZ)()],f.prototype,"header",void 0),(0,a.__decorate)([(0,n.MZ)({attribute:!1})],f.prototype,"deviceName",void 0),(0,a.__decorate)([(0,n.MZ)({attribute:!1})],f.prototype,"hass",void 0),(0,a.__decorate)([(0,n.MZ)({attribute:!1})],f.prototype,"entities",void 0),(0,a.__decorate)([(0,n.MZ)({attribute:"show-hidden",type:Boolean})],f.prototype,"showHidden",void 0),(0,a.__decorate)([(0,n.wk)()],f.prototype,"_extDisabledEntityEntries",void 0),f=(0,a.__decorate)([(0,n.EM)("ha-device-entities-card")],f),t()}catch(e){t(e)}})},13587:function(e,t,i){i(65315),i(837),i(37089);var a=i(69868),s=i(84922),n=i(22019),o=i(91525),r=i(17728),l=(i(70490),i(50809)),d=i(94372),c=i(26946);class h extends s.WF{render(){return s.qy` <ha-card outlined .header="${this.hass.localize("ui.panel.config.devices.device_info",{type:this.hass.localize(`ui.panel.config.devices.type.${this.device.entry_type||"device"}_heading`)})}"> <div class="card-content"> ${this.device.model?s.qy`<div class="model"> ${this.device.model} ${this.device.model_id?s.qy`(${this.device.model_id})`:""} </div>`:this.device.model_id?s.qy`<div class="model">${this.device.model_id}</div>`:""} ${this.device.manufacturer?s.qy` <div class="manuf"> ${this.hass.localize("ui.panel.config.integrations.config_entry.manuf",{manufacturer:this.device.manufacturer})} </div> `:""} ${this.device.via_device_id?s.qy` <div class="extra-info"> ${this.hass.localize("ui.panel.config.integrations.config_entry.via")} <span class="hub"><a href="/config/devices/device/${this.device.via_device_id}">${this._computeDeviceNameDislay(this.device.via_device_id)}</a></span> </div> `:""} ${this.device.sw_version?s.qy` <div class="extra-info"> ${this.hass.localize("ui.panel.config.integrations.config_entry."+("service"!==this.device.entry_type||this.device.hw_version?"firmware":"version"),{version:this.device.sw_version})} </div> `:""} ${this.device.hw_version?s.qy` <div class="extra-info"> ${this.hass.localize("ui.panel.config.integrations.config_entry.hardware",{version:this.device.hw_version})} </div> `:""} ${this.device.serial_number?s.qy` <div class="extra-info"> ${this.hass.localize("ui.panel.config.integrations.config_entry.serial_number",{serial_number:this.device.serial_number})} </div> `:""} ${this._getAddresses().map(([e,t])=>s.qy` <div class="extra-info"> ${"bluetooth"===e&&(0,c.x)(this.hass,"bluetooth")?s.qy`${(0,r.n)(e)}: <a href="/config/bluetooth/advertisement-monitor?${(0,d.KH)({address:t})}">${t.toUpperCase()}</a>`:"mac"===e&&(0,c.x)(this.hass,"dhcp")?s.qy`MAC: <a href="/config/dhcp?${(0,d.KH)({mac_address:t})}">${t.toUpperCase()}</a>`:s.qy`${"mac"===e?"MAC":(0,r.n)(e)}: ${t.toUpperCase()}`} </div> `)} <slot></slot> </div> <slot name="actions"></slot> </ha-card> `}_getAddresses(){return this.device.connections.filter(e=>["mac","bluetooth","zigbee"].includes(e[0]))}_computeDeviceNameDislay(e){const t=this.hass.devices[e];return t?(0,o.T)(t,this.hass):`<${this.hass.localize("ui.panel.config.integrations.config_entry.unknown_via_device")}>`}static get styles(){return[l.RF,s.AH`:host{display:block}ha-card{flex:1 0 100%;min-width:0}.device{width:30%}.extra-info{margin-top:8px;word-wrap:break-word}.manuf,.model{color:var(--secondary-text-color);word-wrap:break-word}`]}constructor(...e){super(...e),this.narrow=!1}}(0,a.__decorate)([(0,n.MZ)({attribute:!1})],h.prototype,"hass",void 0),(0,a.__decorate)([(0,n.MZ)({attribute:!1})],h.prototype,"device",void 0),(0,a.__decorate)([(0,n.MZ)({type:Boolean})],h.prototype,"narrow",void 0),h=(0,a.__decorate)([(0,n.EM)("ha-device-info-card")],h)},2571:function(e,t,i){i(65315),i(837),i(37089);var a=i(69868),s=i(84922),n=i(22019),o=i(65940),r=i(91525),l=i(24730);i(70490),i(42163),i(77510);class d extends s.WF{render(){const e=this._viaDevices(this.deviceId,this.hass.devices);return 0===e.length?s.s6:s.qy` <ha-card> <h1 class="card-header"> ${this.hass.localize("ui.panel.config.devices.connected_devices.heading")} </h1> ${(this._showAll?e:e.slice(0,10)).map(e=>s.qy` <a href="${`/config/devices/device/${e.id}`}"> <ha-list-item hasMeta> ${(0,r.T)(e,this.hass)} <ha-icon-next slot="meta"></ha-icon-next> </ha-list-item> </a> `)} ${!this._showAll&&e.length>10?s.qy` <button class="show-more" @click="${this._toggleShowAll}"> ${this.hass.localize("ui.panel.config.devices.connected_devices.show_more",{count:e.length-10})} </button> `:""} </ha-card> `}_toggleShowAll(){this._showAll=!this._showAll}constructor(...e){super(...e),this._showAll=!1,this._viaDevices=(0,o.A)((e,t)=>Object.values(t).filter(t=>t.via_device_id===e).sort((e,t)=>(0,l.SH)((0,r.T)(e,this.hass),(0,r.T)(t,this.hass),this.hass.locale.language)))}}d.styles=s.AH`:host{display:block}.card-header{padding-bottom:0}a{text-decoration:none;color:var(--primary-text-color)}button.show-more{color:var(--primary-color);text-align:left;cursor:pointer;background:0 0;border-width:initial;border-style:none;border-color:initial;border-image:initial;padding:16px;font:inherit}button.show-more:focus{outline:0;text-decoration:underline}`,(0,a.__decorate)([(0,n.MZ)({attribute:!1})],d.prototype,"hass",void 0),(0,a.__decorate)([(0,n.MZ)({attribute:!1})],d.prototype,"deviceId",void 0),(0,a.__decorate)([(0,n.wk)()],d.prototype,"_showAll",void 0),d=(0,a.__decorate)([(0,n.EM)("ha-device-via-devices-card")],d)},69012:function(e,t,i){i.d(t,{V:()=>n});var a=i(44017);const s=()=>i.e("21037").then(i.bind(i,1372)),n=(e,t)=>{(0,a.r)(e,"show-dialog",{dialogTag:"dialog-device-automation",dialogImport:s,dialogParams:t})}},31302:function(e,t,i){i.d(t,{F:()=>s,_:()=>n});var a=i(44017);const s=()=>Promise.all([i.e("3245"),i.e("30199"),i.e("70184"),i.e("89022"),i.e("61717"),i.e("6978")]).then(i.bind(i,37250)),n=(e,t)=>{(0,a.r)(e,"show-dialog",{dialogTag:"dialog-device-registry-detail",dialogImport:s,dialogParams:t})}},32903:function(e,t,i){i.a(e,async function(e,t){try{i(99342),i(65315),i(837),i(84136),i(22416),i(37089),i(59023);var a=i(69868),s=i(97809),n=i(84922),o=i(22019),r=i(13802),l=i(65940),d=i(26946),c=i(23800),h=i(91525),p=i(88341),u=i(86886),_=i(12275),g=i(72652),v=i(24730),m=i(63870),f=i(47781),y=(i(42267),i(94124),i(17372)),b=(i(78918),i(9058),i(42163),i(77510),i(86160),i(7245)),w=i(99561),$=i(72094),x=i(60993),k=i(32293),z=i(36322),A=i(47446),C=i(59569),M=i(61964),L=i(59895),E=i(42706),q=i(54600),H=i(15241),S=i(62801),I=i(85288),D=(i(41564),i(50809)),Z=i(71522),V=i(51140),W=i(3676),P=i(91562),T=(i(13587),i(2571),i(69012)),F=i(31302),R=e([y,b,I,W,P]);[y,b,I,W,P]=R.then?(await R)():R;const O="M12,15.5A3.5,3.5 0 0,1 8.5,12A3.5,3.5 0 0,1 12,8.5A3.5,3.5 0 0,1 15.5,12A3.5,3.5 0 0,1 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.21,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.21,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.67 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z",j="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z",B="M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z",U="M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z",N="M12,2A3,3 0 0,1 15,5V11A3,3 0 0,1 12,14A3,3 0 0,1 9,11V5A3,3 0 0,1 12,2M19,11C19,14.53 16.39,17.44 13,17.93V21H11V17.93C7.61,17.44 5,14.53 5,11H7A5,5 0 0,0 12,16A5,5 0 0,0 17,11H19Z",J="M14,3V5H17.59L7.76,14.83L9.17,16.24L19,6.41V10H21V3M19,19H5V5H12V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19Z",G="M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z",Q="M17,13H13V17H11V13H7V11H11V7H13V11H17M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z",K="M13,3A9,9 0 0,0 4,12H1L4.89,15.89L4.96,16.03L9,12H6A7,7 0 0,1 13,5A7,7 0 0,1 20,12A7,7 0 0,1 13,19C11.07,19 9.32,18.21 8.06,16.94L6.64,18.36C8.27,20 10.5,21 13,21A9,9 0 0,0 22,12A9,9 0 0,0 13,3Z",Y=3e4;class X extends n.WF{willUpdate(e){super.willUpdate(e),e.has("deviceId")&&(this._deviceActions=[],this._deviceAlerts=[],this._deleteButtons=[],this._diagnosticDownloadLinks=[]),(e.has("deviceId")||e.has("entries"))&&this._fetchData()}firstUpdated(e){super.firstUpdated(e),(0,F.F)()}updated(e){super.updated(e),e.has("deviceId")&&this._findRelated()}disconnectedCallback(){super.disconnectedCallback(),clearTimeout(this._deviceAlertsActionsTimeout)}render(){if(!this.hass||!this.deviceId)return n.s6;const e=this.hass.devices[this.deviceId];if(!e)return n.qy` <hass-error-screen .hass="${this.hass}" .error="${this.hass.localize("ui.panel.config.devices.device_not_found")}"></hass-error-screen> `;const t=(0,h.T)(e,this.hass),i=this._integrations(e,this.entries,this.manifests),a=this._entities(this.deviceId,this._entityReg),s=this._entitiesByCategory(a),o=this._batteryEntity(a),l=this._batteryChargingEntity(a),c=o?this.hass.states[o.entity_id]:void 0,p=c?(0,_.t)(c):void 0,u=l?this.hass.states[l.entity_id]:void 0,v=e.area_id?this.hass.areas[e.area_id]:void 0,f=i.map(e=>n.qy`<a slot="actions" href="${`/config/integrations/integration/${e.domain}#config_entry=${e.entry_id}`}"> <ha-list-item graphic="icon" hasMeta> <img slot="graphic" alt="${(0,M.p$)(this.hass.localize,e.domain)}" src="${(0,Z.MR)({domain:e.domain,type:"icon",darkOptimized:this.hass.themes?.darkMode})}" crossorigin="anonymous" referrerpolicy="no-referrer" @error="${this._onImageError}" @load="${this._onImageLoad}"> ${(0,M.p$)(this.hass.localize,e.domain)} <ha-icon-next slot="meta"></ha-icon-next> </ha-list-item> </a>`),y=[...this._deviceActions||[]];Array.isArray(this._diagnosticDownloadLinks)&&y.push(...this._diagnosticDownloadLinks),this._deleteButtons&&y.push(...this._deleteButtons),y.sort((e,t)=>"warning"===e.classes&&"warning"!==t.classes?1:"warning"!==e.classes&&"warning"===t.classes?-1:0);const b=y.shift();e.disabled_by&&f.push(n.qy` <ha-alert alert-type="warning"> ${this.hass.localize("ui.panel.config.devices.enabled_cause",{type:this.hass.localize(`ui.panel.config.devices.type.${e.entry_type||"device"}`),cause:this.hass.localize(`ui.panel.config.devices.disabled_by.${e.disabled_by}`)})} </ha-alert> ${"user"===e.disabled_by?n.qy` <div class="card-actions" slot="actions"> <ha-button variant="warning" size="small" @click="${this._enableDevice}"> ${this.hass.localize("ui.common.enable")} </ha-button> </div> `:""} `),this._renderIntegrationInfo(e,i,f);const w=e.disabled_by?this.hass.localize("ui.panel.config.devices.add_prompt_disabled"):this.hass.localize("ui.panel.config.devices.add_prompt_enabled"),$=(0,d.x)(this.hass,"automation")?n.qy` <ha-card outlined> <h1 class="card-header"> ${this.hass.localize("ui.panel.config.devices.automation.automations_heading")} <ha-icon-button @click="${this._showAutomationDialog}" .disabled="${e.disabled_by}" .label="${e.disabled_by?this.hass.localize("ui.panel.config.devices.automation.create_disable",{type:this.hass.localize(`ui.panel.config.devices.type.${e.entry_type||"device"}`)}):this.hass.localize("ui.panel.config.devices.automation.create",{type:this.hass.localize(`ui.panel.config.devices.type.${e.entry_type||"device"}`)})}" .path="${Q}"></ha-icon-button> </h1> ${this._related?.automation?.length?n.qy` <div class="items"> ${this._getRelated(this._related).automation.map(e=>{const t=e;return t?n.qy`<a href="${(0,r.J)(t.attributes.id?`/config/automation/edit/${encodeURIComponent(t.attributes.id)}`:`/config/automation/show/${t.entity_id}`)}"> <ha-list-item hasMeta .automation="${t}"> ${(0,g.u)(t)} <ha-icon-next slot="meta"></ha-icon-next> </ha-list-item> </a>`:n.s6})} </div> `:n.qy` <div class="card-content"> ${this.hass.localize("ui.panel.config.devices.add_prompt",{name:this.hass.localize("ui.panel.config.devices.automation.automations"),type:this.hass.localize(`ui.panel.config.devices.type.${e.entry_type||"device"}`)})} ${w} </div> `} </ha-card> `:"",x=(0,d.x)(this.hass,"scene")&&a.length?n.qy` <ha-card outlined> <h1 class="card-header"> ${this.hass.localize("ui.panel.config.devices.scene.scenes_heading")} <ha-icon-button @click="${this._createScene}" .disabled="${e.disabled_by}" .label="${e.disabled_by?this.hass.localize("ui.panel.config.devices.scene.create_disable",{type:this.hass.localize(`ui.panel.config.devices.type.${e.entry_type||"device"}`)}):this.hass.localize("ui.panel.config.devices.scene.create",{type:this.hass.localize(`ui.panel.config.devices.type.${e.entry_type||"device"}`)})}" .path="${Q}"></ha-icon-button> </h1> ${this._related?.scene?.length?n.qy` <div class="items"> ${this._getRelated(this._related).scene.map(e=>{const t=e;return t&&t.attributes.id?n.qy` <a href="${`/config/scene/edit/${t.attributes.id}`}"> <ha-list-item hasMeta .scene="${t}"> ${(0,g.u)(t)} <ha-icon-next slot="meta"></ha-icon-next> </ha-list-item> </a> `:n.qy` <ha-list-item .id="scene-${(0,m.Y)(t.entity_id)}" hasMeta .scene="${t}"> ${(0,g.u)(t)} <ha-icon-next slot="meta"></ha-icon-next> </ha-list-item> <ha-tooltip .for="scene-${(0,m.Y)(t.entity_id)}" placement="left"> ${this.hass.localize("ui.panel.config.devices.cant_edit")} </ha-tooltip> `})} </div> `:n.qy` <div class="card-content"> ${this.hass.localize("ui.panel.config.devices.add_prompt",{name:this.hass.localize("ui.panel.config.devices.scene.scenes"),type:this.hass.localize(`ui.panel.config.devices.type.${e.entry_type||"device"}`)})} ${w} </div> `} </ha-card> `:"",k=(0,d.x)(this.hass,"script")?n.qy` <ha-card outlined> <h1 class="card-header"> ${this.hass.localize("ui.panel.config.devices.script.scripts_heading")} <ha-icon-button @click="${this._showScriptDialog}" .disabled="${e.disabled_by}" .label="${e.disabled_by?this.hass.localize("ui.panel.config.devices.script.create_disable",{type:this.hass.localize(`ui.panel.config.devices.type.${e.entry_type||"device"}`)}):this.hass.localize("ui.panel.config.devices.script.create",{type:this.hass.localize(`ui.panel.config.devices.type.${e.entry_type||"device"}`)})}" .path="${Q}"></ha-icon-button> </h1> ${this._related?.script?.length?n.qy` <div class="items"> ${this._getRelated(this._related).script.map(e=>{const t=e,i=this._entityReg.find(t=>t.entity_id===e.entity_id);let a=`/config/script/show/${t.entity_id}`;return i&&(a=`/config/script/edit/${i.unique_id}`),t?n.qy` <a href="${a}"> <ha-list-item hasMeta .script="${e}"> ${(0,g.u)(t)} <ha-icon-next slot="meta"></ha-icon-next> </ha-list-item> </a> `:""})} </div> `:n.qy` <div class="card-content"> ${this.hass.localize("ui.panel.config.devices.add_prompt",{name:this.hass.localize("ui.panel.config.devices.script.scripts"),type:this.hass.localize(`ui.panel.config.devices.type.${e.entry_type||"device"}`)})} ${w} </div> `} </ha-card> `:"";return n.qy`<hass-subpage .hass="${this.hass}" .narrow="${this.narrow}" .header="${t}"> <ha-icon-button slot="toolbar-icon" .path="${G}" @click="${this._showSettings}" .label="${this.hass.localize("ui.panel.config.devices.edit_settings")}"></ha-icon-button> <ha-md-button-menu slot="toolbar-icon"> <ha-icon-button slot="trigger" .label="${this.hass.localize("ui.common.menu")}" .path="${B}"></ha-icon-button> <ha-md-menu-item .clickAction="${this._resetEntityIds}"> <ha-svg-icon slot="start" .path="${K}"></ha-svg-icon> <div slot="headline"> ${this.hass.localize("ui.panel.config.devices.restore_entity_ids")} </div> </ha-md-menu-item> </ha-md-button-menu> <div class="container"> <div class="header fullwidth"> ${v?n.qy`<div class="header-name"> <a href="/config/areas/area/${v.area_id}">${this.hass.localize("ui.panel.config.integrations.config_entry.area",{area:v.name||"Unnamed Area"})}</a> </div>`:""} <div class="header-right"> ${!c||"binary_sensor"!==p&&isNaN(c.state)?"":n.qy` <div class="battery"> ${"sensor"===p?this.hass.formatEntityState(c):n.s6} <ha-battery-icon .hass="${this.hass}" .batteryStateObj="${c}" .batteryChargingStateObj="${u}"></ha-battery-icon> </div> `} ${i.length?n.qy` <img alt="${(0,M.p$)(this.hass.localize,i[0].domain)}" src="${(0,Z.MR)({domain:i[0].domain,type:"logo",darkOptimized:this.hass.themes?.darkMode})}" crossorigin="anonymous" referrerpolicy="no-referrer" @load="${this._onImageLoad}" @error="${this._onImageError}"> `:""} </div> </div> <div class="column"> ${this._deviceAlerts?.length?n.qy` <div> ${this._deviceAlerts.map(e=>n.qy` <ha-alert .alertType="${e.level}"> ${e.text} </ha-alert> `)} </div> `:""} <ha-device-info-card .hass="${this.hass}" .device="${e}"> ${f} ${b||y.length?n.qy` <div class="card-actions" slot="actions"> <ha-button href="${(0,r.J)(b.href)}" rel="${(0,r.J)(b.target?"noreferrer":void 0)}" appearance="plain" target="${(0,r.J)(b.target)}" class="${(0,r.J)(b.classes)}" .variant="${b.classes?.includes("warning")?"danger":"brand"}" .action="${b.action}" @click="${this._deviceActionClicked}"> ${b.label} ${b.icon?n.qy` <ha-svg-icon class="${(0,r.J)(b.classes)}" .path="${b.icon}" slot="start"></ha-svg-icon> `:n.s6} ${b.trailingIcon?n.qy` <ha-svg-icon .path="${b.trailingIcon}" slot="end"></ha-svg-icon> `:n.s6} </ha-button> ${y.length?n.qy` <ha-button-menu> <ha-icon-button slot="trigger" .label="${this.hass.localize("ui.common.menu")}" .path="${B}"></ha-icon-button> ${y.map(e=>{const t=n.qy`<ha-list-item class="${(0,r.J)(e.classes)}" .action="${e.action}" @click="${this._deviceActionClicked}" graphic="icon" .hasMeta="${Boolean(e.trailingIcon)}"> ${e.label} ${e.icon?n.qy` <ha-svg-icon class="${(0,r.J)(e.classes)}" .path="${e.icon}" slot="graphic"></ha-svg-icon> `:""} ${e.trailingIcon?n.qy` <ha-svg-icon slot="meta" .path="${e.trailingIcon}"></ha-svg-icon> `:""} </ha-list-item>`;return e.href?n.qy`<a href="${e.href}" target="${(0,r.J)(e.target)}" rel="${(0,r.J)(e.target?"noreferrer":void 0)}">${t} </a>`:t})} </ha-button-menu> `:""} </div> `:""} </ha-device-info-card> ${this.narrow?"":[$,x,k]} </div> <div class="column"> ${["control","sensor","notify","event","assist","config","diagnostic"].map(i=>s[i].length>0||0===a.length&&"control"===i?n.qy` <ha-device-entities-card .hass="${this.hass}" .header="${this.hass.localize(`ui.panel.config.devices.entities.${i}`)}" .deviceName="${t}" .entities="${s[i]}" .showHidden="${null!==e.disabled_by}"> </ha-device-entities-card> `:"")} <ha-device-via-devices-card .hass="${this.hass}" .deviceId="${this.deviceId}"></ha-device-via-devices-card> </div> <div class="column"> ${this.narrow?[$,x,k]:""} ${(0,d.x)(this.hass,"logbook")?n.qy` <ha-card outlined> <h1 class="card-header"> ${this.hass.localize("panel.logbook")} </h1> <ha-logbook .hass="${this.hass}" .time="${this._logbookTime}" .entityIds="${this._entityIds(a)}" .deviceIds="${this._deviceIdInList(this.deviceId)}" virtualize narrow no-icon></ha-logbook> </ha-card> `:""} </div> </div> </hass-subpage>`}_fetchData(){this.deviceId&&this.entries.length&&(this._getDiagnosticButtons(),this._getDeleteActions(),clearTimeout(this._deviceAlertsActionsTimeout),this._getDeviceActions(),this._getDeviceAlerts())}async _getDiagnosticButtons(){const e=this.deviceId;if(!(0,d.x)(this.hass,"diagnostics"))return;const t=this.hass.devices[this.deviceId];if(!t)return;let i=await Promise.all(this._integrations(t,this.entries,this.manifests).map(async e=>{if("loaded"!==e.state)return!1;let t;try{t=await(0,A.g9)(this.hass,e.domain)}catch(e){if("not_found"===e.code)return!1;throw e}return!(!t.handlers.device&&!t.handlers.config_entry)&&{link:t.handlers.device?(0,A.It)(e.entry_id,this.deviceId):(0,A.WV)(e.entry_id),domain:e.domain}}));i=i.filter(Boolean),this.deviceId===e&&i.length>0&&(this._diagnosticDownloadLinks=i.map(e=>({href:e.link,icon:U,action:e=>this._signUrl(e),label:i.length>1?this.hass.localize("ui.panel.config.devices.download_diagnostics_integration",{integration:(0,M.p$)(this.hass.localize,e.domain)}):this.hass.localize("ui.panel.config.devices.download_diagnostics")})))}_getDeleteActions(){const e=this.deviceId,t=this.hass.devices[this.deviceId];if(!t)return;const i=[];this._integrations(t,this.entries,this.manifests).forEach(e=>{"loaded"===e.state&&e.supports_remove_device&&i.push({action:async()=>{if(await(0,H.dk)(this,{text:this._integrations(t,this.entries,this.manifests).length>1?this.hass.localize("ui.panel.config.devices.confirm_delete_integration",{integration:(0,M.p$)(this.hass.localize,e.domain)}):this.hass.localize("ui.panel.config.devices.confirm_delete"),confirmText:this.hass.localize("ui.common.delete"),dismissText:this.hass.localize("ui.common.cancel"),destructive:!0}))try{await(0,z.nO)(this.hass,this.deviceId,e.entry_id)}catch(e){(0,H.showAlertDialog)(this,{title:this.hass.localize("ui.panel.config.devices.error_delete"),text:e.message})}},classes:"warning",icon:j,label:this._integrations(t,this.entries,this.manifests).length>1?this.hass.localize("ui.panel.config.devices.delete_device_integration",{integration:(0,M.p$)(this.hass.localize,e.domain)}):this.hass.localize("ui.panel.config.devices.delete_device")})}),this.deviceId===e&&i.length>0&&(this._deleteButtons=i)}async _getDeviceActions(){const e=this.deviceId,t=this.hass.devices[this.deviceId];if(!t)return;const a=[],s=t.configuration_url?.startsWith("homeassistant://")||!1,n=s?t.configuration_url.replace("homeassistant://","/"):t.configuration_url;n&&a.push({href:n,target:s?void 0:"_blank",icon:O,label:this.hass.localize("ui.panel.config.devices.open_configuration_url"),trailingIcon:J});const o=this._entities(this.deviceId,this._entityReg).find(e=>"assist_satellite"===(0,p.m)(e.entity_id)),r=this._integrations(t,this.entries,this.manifests).map(e=>e.domain);if(!r.includes("voip")&&o&&(0,w.KC)(this.hass.states[o.entity_id])&&a.push({action:this._voiceAssistantSetup,label:this.hass.localize("ui.panel.config.devices.set_up_voice_assistant"),icon:N}),r.includes("mqtt")){const e=(await i.e("35136").then(i.bind(i,42531))).getMQTTDeviceActions(this,t);a.push(...e)}if(r.includes("zha")){const e=await i.e("56895").then(i.bind(i,27042)),s=await e.getZHADeviceActions(this,this.hass,t);a.push(...s)}if(r.includes("zwave_js")){const e=await i.e("74357").then(i.bind(i,56564)),s=await e.getZwaveDeviceActions(this,this.hass,t);a.push(...s)}if(r.includes("matter")){const s=await i.e("82652").then(i.bind(i,28823)),n=s.getMatterDeviceDefaultActions(this,this.hass,t);a.push(...n),s.getMatterDeviceActions(this,this.hass,t).then(t=>{this.deviceId===e&&(this._deviceActions=[...t,...this._deviceActions||[]])})}this.deviceId===e&&(this._deviceActions=a)}async _getDeviceAlerts(){const e=this.deviceId,t=this.hass.devices[this.deviceId];if(!t)return;const a=[];if(this._integrations(t,this.entries,this.manifests).map(e=>e.domain).includes("zwave_js")){const e=await i.e("42549").then(i.bind(i,55156)),s=await e.getZwaveDeviceAlerts(this.hass,t);a.push(...s)}this.deviceId===e&&(this._deviceAlerts=a,a.length&&(this._deviceAlertsActionsTimeout=window.setTimeout(()=>{this._getDeviceAlerts(),this._getDeviceActions()},Y)))}_computeEntityName(e){const t=this.hass.devices[this.deviceId];return(0,u.cx)(e,this.hass.devices)||(0,h.T)(t,this.hass)}_onImageLoad(e){e.target.style.display="inline-block"}_onImageError(e){e.target.style.display="none"}async _findRelated(){this._related=await(0,q.f)(this.hass,"device",this.deviceId)}_createScene(){const e={};this._entities(this.deviceId,this._entityReg).forEach(t=>{e[t.entity_id]=""}),(0,E.Tx)({entities:e})}_showScriptDialog(){(0,T.V)(this,{device:this.hass.devices[this.deviceId],entityReg:this._entityReg,script:!0})}_showAutomationDialog(){(0,T.V)(this,{device:this.hass.devices[this.deviceId],entityReg:this._entityReg,script:!1})}_renderIntegrationInfo(e,t,a){const s=t.map(e=>e.domain);s.includes("zha")&&(i.e("94952").then(i.bind(i,52731)),a.push(n.qy` <ha-device-info-zha .hass="${this.hass}" .device="${e}"></ha-device-info-zha> `)),s.includes("zwave_js")&&(i.e("14448").then(i.bind(i,9587)),a.push(n.qy` <ha-device-info-zwave_js .hass="${this.hass}" .device="${e}"></ha-device-info-zwave_js> `)),s.includes("matter")&&(i.e("35572").then(i.bind(i,26431)),a.push(n.qy` <ha-device-info-matter .hass="${this.hass}" .device="${e}"></ha-device-info-matter> `))}async _enableDevice(){await(0,z.FB)(this.hass,this.deviceId,{disabled_by:null})}async _signUrl(e){const t=e.currentTarget.getAttribute("href")?e.currentTarget:e.currentTarget.closest("a"),i=await(0,$.e0)(this.hass,t.getAttribute("href"));(0,V.R)(i.path)}_deviceActionClicked(e){e.currentTarget.action&&(e.preventDefault(),e.currentTarget.action(e))}static get styles(){return[D.RF,n.AH`.container{display:flex;flex-wrap:wrap;margin:auto;max-width:1000px;margin-top:32px;margin-bottom:32px}:host([narrow]) .container{margin-top:0}.card-header{display:flex;align-items:center;justify-content:space-between;padding-bottom:12px}.card-header ha-icon-button{margin-right:-8px;margin-inline-end:-8px;margin-inline-start:initial;color:var(--primary-color);height:auto;direction:var(--direction)}.device-info{padding:16px}h1{margin:0;font-family:var(--ha-font-family-body);-webkit-font-smoothing:var(--ha-font-smoothing);-moz-osx-font-smoothing:var(--ha-moz-osx-font-smoothing);font-size:var(--ha-font-size-2xl);font-weight:var(--ha-font-weight-normal);line-height:var(--ha-line-height-condensed);opacity:var(--dark-primary-opacity)}.header{display:flex;justify-content:space-between}.header-name{display:flex;align-items:center;padding-left:8px;padding-inline-start:8px;padding-inline-end:initial;direction:var(--direction)}.column,.fullwidth{padding:8px;box-sizing:border-box}.column{width:33%;flex-grow:1}.fullwidth{width:100%;flex-grow:1}.header-right{align-self:center}.header-right img{height:30px}.header-right{display:flex}.header-right:first-child{width:100%;justify-content:flex-end}.header-right>:not(:first-child){margin-left:16px;margin-inline-start:16px;margin-inline-end:initial;direction:var(--direction)}.battery{align-self:center;align-items:center;display:flex;white-space:nowrap}.column>:not(:first-child){margin-top:16px}:host([narrow]) .column{width:100%}a{text-decoration:none;color:var(--primary-color)}ha-card a{color:var(--primary-text-color)}ha-svg-icon[slot=trailingIcon]{display:block;width:18px;height:18px;margin-inline-start:8px;margin-inline-end:initial}ha-svg-icon[slot=meta]{width:18px;height:18px}.items{padding-bottom:16px}ha-card:has(ha-logbook){padding-bottom:var(--ha-card-border-radius,var(--ha-border-radius-lg))}ha-logbook{height:400px}:host([narrow]) ha-logbook{height:235px}.card-actions{display:flex;justify-content:space-between;align-items:center;padding:4px 16px 4px 4px}`]}constructor(...e){super(...e),this.narrow=!1,this.isWide=!1,this.showAdvanced=!1,this._diagnosticDownloadLinks=[],this._deleteButtons=[],this._deviceActions=[],this._deviceAlerts=[],this._logbookTime={recent:86400},this._integrations=(0,l.A)((e,t,i)=>{const a={};for(const e of t)a[e.entry_id]=e;const s={};for(const e of i)s[e.domain]=e;const n=e.config_entries.filter(e=>e in a).map(e=>a[e]);return(0,x.JW)(n,e.primary_config_entry)}),this._entities=(0,l.A)((e,t)=>t.filter(t=>t.device_id===e).map(e=>({...e,stateName:this._computeEntityName(e)})).sort((e,t)=>(0,v.xL)(e.stateName||`zzz${e.entity_id}`,t.stateName||`zzz${t.entity_id}`,this.hass.locale.language))),this._getEntitiesSorted=e=>e.sort((e,t)=>(0,v.xL)(e.attributes.friendly_name||`zzz${e.entity_id}`,t.attributes.friendly_name||`zzz${t.entity_id}`,this.hass.locale.language)),this._getRelated=(0,l.A)(e=>({automation:this._getEntitiesSorted((e?.automation??[]).map(e=>this.hass.states[e])),scene:this._getEntitiesSorted((e?.scene??[]).map(e=>this.hass.states[e])),script:this._getEntitiesSorted((e?.script??[]).map(e=>this.hass.states[e]))})),this._deviceIdInList=(0,l.A)(e=>[e]),this._entityIds=(0,l.A)(e=>e.map(e=>e.entity_id)),this._entitiesByCategory=(0,l.A)(e=>{const t=(0,f.$)(e,e=>{const t=(0,p.m)(e.entity_id);return c.gt.includes(t)?"assist":"event"===t||"notify"===t?t:e.entity_category?e.entity_category:c.JF.includes(t)?"sensor":"control"});for(const e of["assist","config","control","diagnostic","event","notify","sensor"])e in t||(t[e]=[]);return t}),this._batteryEntity=(0,l.A)(e=>(0,C.Er)(this.hass,e)),this._batteryChargingEntity=(0,l.A)(e=>(0,C.DW)(this.hass,e)),this._resetEntityIds=()=>{const e=this._entities(this.deviceId,this._entityReg).map(e=>e.entity_id);(0,L._)(this,this.hass,e)},this._showSettings=async()=>{const e=this.hass.devices[this.deviceId];(0,F._)(this,{device:e,updateEntry:async t=>{const i=e.name_by_user||e.name,a=t.name_by_user;if("user"===t.disabled_by&&"user"!==e.disabled_by){for(const i of e.config_entries)if(!Object.values(this.hass.devices).some(t=>t.id!==e.id&&t.config_entries.includes(i))){const e=this.entries.find(e=>e.entry_id===i);if(e&&!e.disabled_by&&await(0,H.dk)(this,{title:this.hass.localize("ui.panel.config.devices.confirm_disable_config_entry_title"),text:this.hass.localize("ui.panel.config.devices.confirm_disable_config_entry_message",{name:e.title}),destructive:!0,confirmText:this.hass.localize("ui.common.yes"),dismissText:this.hass.localize("ui.common.no")})){let e;try{e=await(0,x.XQ)(this.hass,i)}catch(e){return void(0,H.showAlertDialog)(this,{title:this.hass.localize("ui.panel.config.integrations.config_entry.disable_error"),text:e.message})}e.require_restart&&(0,H.showAlertDialog)(this,{text:this.hass.localize("ui.panel.config.integrations.config_entry.disable_restart_confirm")}),delete t.disabled_by}}}else null!==t.disabled_by&&"user"!==t.disabled_by&&delete t.disabled_by;try{await(0,z.FB)(this.hass,this.deviceId,t)}catch(e){return void(0,H.showAlertDialog)(this,{title:this.hass.localize("ui.panel.config.devices.update_device_error"),text:e.message})}if(!i||!a||i===a)return;const s=this._entities(this.deviceId,this._entityReg).map(e=>{const t=e.name||e.stateName;let s;if(!e.has_entity_name||e.name){if(!e.has_entity_name||e.name!==i&&e.name!==a){if(!t||!t.includes(i))return;s=t.replace(i,a)}else s=null;return(0,C.G_)(this.hass,e.entity_id,{name:s})}});await Promise.all(s)}})},this._voiceAssistantSetup=()=>{(0,S.L)(this,{deviceId:this.deviceId})}}}(0,a.__decorate)([(0,o.MZ)({attribute:!1})],X.prototype,"hass",void 0),(0,a.__decorate)([(0,o.MZ)({attribute:!1})],X.prototype,"entries",void 0),(0,a.__decorate)([(0,o.MZ)({attribute:!1})],X.prototype,"manifests",void 0),(0,a.__decorate)([(0,o.MZ)({attribute:!1})],X.prototype,"deviceId",void 0),(0,a.__decorate)([(0,o.MZ)({type:Boolean,reflect:!0})],X.prototype,"narrow",void 0),(0,a.__decorate)([(0,o.MZ)({attribute:"is-wide",type:Boolean})],X.prototype,"isWide",void 0),(0,a.__decorate)([(0,o.MZ)({attribute:!1})],X.prototype,"showAdvanced",void 0),(0,a.__decorate)([(0,o.wk)()],X.prototype,"_related",void 0),(0,a.__decorate)([(0,o.wk)()],X.prototype,"_diagnosticDownloadLinks",void 0),(0,a.__decorate)([(0,o.wk)()],X.prototype,"_deleteButtons",void 0),(0,a.__decorate)([(0,o.wk)()],X.prototype,"_deviceActions",void 0),(0,a.__decorate)([(0,o.wk)()],X.prototype,"_deviceAlerts",void 0),(0,a.__decorate)([(0,o.wk)(),(0,s.Fg)({context:k.ih,subscribe:!0})],X.prototype,"_entityReg",void 0),X=(0,a.__decorate)([(0,o.EM)("ha-config-device-page")],X),t()}catch(e){t(e)}})},78899:function(e,t,i){i.a(e,async function(e,t){try{i(99342),i(65315),i(12840),i(837),i(84136),i(22416),i(37089),i(59023),i(88238),i(34536),i(16257),i(20152),i(44711),i(72108),i(77030),i(81071),i(92714),i(55885);var a=i(69868),s=i(97809),n=i(84922),o=i(88006),r=i(22019),l=i(65940),d=i(78412),c=i(6149),h=i(20051),p=i(91525),u=i(52777),_=i(12275),g=i(14001),v=i(77240),m=i(46244),f=i(21977),y=(i(42267),i(94124),i(78918),i(7475),i(10547),i(65508),i(76758),i(25559)),b=i(80624),w=(i(74533),i(9058),i(28565),i(92409),i(73634),i(9171)),$=i(60993),x=i(32293),k=i(48727),z=i(36322),A=i(59569),C=i(40804),M=i(15241),L=(i(68891),i(40328)),E=i(50809),q=i(71522),H=i(38525),S=i(84193),I=(i(53103),i(26322)),D=i(61627),Z=i(49013),V=e([f,y,b,c]);[f,y,b,c]=V.then?(await V)():V;const W="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z",P="M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z",T="M7,10L12,15L17,10H7Z",F="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z",R="M20 2H4C2.9 2 2 2.9 2 4V20C2 21.11 2.9 22 4 22H20C21.11 22 22 21.11 22 20V4C22 2.9 21.11 2 20 2M4 6L6 4H10.9L4 10.9V6M4 13.7L13.7 4H18.6L4 18.6V13.7M20 18L18 20H13.1L20 13.1V18M20 10.3L10.3 20H5.4L20 5.4V10.3Z",O="M12 2C17.5 2 22 6.5 22 12S17.5 22 12 22 2 17.5 2 12 6.5 2 12 2M12 4C10.1 4 8.4 4.6 7.1 5.7L18.3 16.9C19.3 15.5 20 13.8 20 12C20 7.6 16.4 4 12 4M16.9 18.3L5.7 7.1C4.6 8.4 4 10.1 4 12C4 16.4 7.6 20 12 20C13.9 20 15.6 19.4 16.9 18.3Z",j="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z";class B extends((0,L.E)(n.WF)){connectedCallback(){super.connectedCallback(),window.addEventListener("location-changed",this._locationChanged),window.addEventListener("popstate",this._popState)}disconnectedCallback(){super.disconnectedCallback(),window.removeEventListener("location-changed",this._locationChanged),window.removeEventListener("popstate",this._popState)}willUpdate(e){super.willUpdate(e),this.hasUpdated||this._setFiltersFromUrl(),e.has("_selected")&&(this._selectedCanDelete=this._selected.filter(e=>this.hass.devices[e].config_entries.some(e=>this.entries.find(t=>t.entry_id===e)?.supports_remove_device)))}_setFiltersFromUrl(){const e=this._searchParms.get("domain"),t=this._searchParms.get("config_entry"),i=this._searchParms.get("sub_entry"),a=this._searchParms.has("label");(e||t||a)&&(this._filter=history.state?.filter||"",this._filters={"ha-filter-states":{value:[...this._filters["ha-filter-states"]?.value||[],"disabled"],items:void 0},"ha-filter-integrations":{value:e?[e]:[],items:void 0},config_entry:{value:t?[t]:[],items:void 0},sub_entry:{value:i?[i]:[],items:void 0}},this._filterLabel())}_filterLabel(){const e=this._searchParms.get("label");e&&(this._filters={...this._filters,"ha-filter-labels":{value:[e],items:void 0}})}_clearFilter(){this._filters={}}hassSubscribe(){return[(0,C.o5)(this.hass.connection,e=>{this._labels=e})]}render(){const{devicesOutput:e}=this._devicesAndFilterDomains(this.hass.devices,this.entries,this.entities,this.hass.areas,this.manifests,this._filters,this.hass.localize,this._labels),t=this._sizeController.value&&this._sizeController.value<700||!this._sizeController.value&&"docked"===this.hass.dockedSidebar,i=n.qy`${Object.values(this.hass.areas).map(e=>n.qy`<ha-md-menu-item .value="${e.area_id}" .clickAction="${this._handleBulkArea}"> ${e.icon?n.qy`<ha-icon slot="start" .icon="${e.icon}"></ha-icon>`:n.qy`<ha-svg-icon slot="start" .path="${R}"></ha-svg-icon>`} <div slot="headline">${e.name}</div> </ha-md-menu-item>`)} <ha-md-menu-item .value="${null}" .clickAction="${this._handleBulkArea}"> <div slot="headline"> ${this.hass.localize("ui.panel.config.devices.picker.bulk_actions.no_area")} </div> </ha-md-menu-item> <ha-md-divider role="separator" tabindex="-1"></ha-md-divider> <ha-md-menu-item .clickAction="${this._bulkCreateArea}"> <div slot="headline"> ${this.hass.localize("ui.panel.config.devices.picker.bulk_actions.add_area")} </div> </ha-md-menu-item>`,a=n.qy`${this._labels?.map(e=>{const t=e.color?(0,d.M)(e.color):void 0,i=this._selected.every(t=>this.hass.devices[t]?.labels.includes(e.label_id)),a=!i&&this._selected.some(t=>this.hass.devices[t]?.labels.includes(e.label_id));return n.qy`<ha-md-menu-item .value="${e.label_id}" .action="${i?"remove":"add"}" @click="${this._handleBulkLabel}" keep-open> <ha-checkbox slot="start" .checked="${i}" .indeterminate="${a}" reducedTouchTarget></ha-checkbox> <ha-label style="${t?`--color: ${t}`:""}" .description="${e.description}"> ${e.icon?n.qy`<ha-icon slot="icon" .icon="${e.icon}"></ha-icon>`:n.s6} ${e.name} </ha-label> </ha-md-menu-item>`})} <ha-md-divider role="separator" tabindex="-1"></ha-md-divider> <ha-md-menu-item .clickAction="${this._bulkCreateLabel}"> <div slot="headline"> ${this.hass.localize("ui.panel.config.labels.add_label")} </div></ha-md-menu-item>`;return n.qy` <hass-tabs-subpage-data-table .hass="${this.hass}" .narrow="${this.narrow}" .backPath="${this._searchParms.has("historyBack")?void 0:"/config"}" .tabs="${S.configSections.devices}" .route="${this.route}" .searchLabel="${this.hass.localize("ui.panel.config.devices.picker.search",{number:e.length})}" .columns="${this._columns(this.hass.localize)}" .data="${e}" selectable .selected="${this._selected.length}" @selection-changed="${this._handleSelectionChanged}" .filter="${this._filter}" has-filters .filters="${Object.values(this._filters).filter(e=>Array.isArray(e.value)?e.value.length:e.value&&Object.values(e.value).some(e=>Array.isArray(e)?e.length:e)).length}" .initialGroupColumn="${this._activeGrouping}" .initialCollapsedGroups="${this._activeCollapsed}" .initialSorting="${this._activeSorting}" .columnOrder="${this._activeColumnOrder}" .hiddenColumns="${this._activeHiddenColumns}" @columns-changed="${this._handleColumnsChanged}" @clear-filter="${this._clearFilter}" @search-changed="${this._handleSearchChange}" @sorting-changed="${this._handleSortingChanged}" @grouping-changed="${this._handleGroupingChanged}" @collapsed-changed="${this._handleCollapseChanged}" @row-click="${this._handleRowClicked}" clickable has-fab class="${this.narrow?"narrow":""}"> <ha-integration-overflow-menu .hass="${this.hass}" slot="toolbar-icon"></ha-integration-overflow-menu> <ha-fab slot="fab" .label="${this.hass.localize("ui.panel.config.devices.add_device")}" extended @click="${this._addDevice}"> <ha-svg-icon slot="icon" .path="${F}"></ha-svg-icon> </ha-fab> ${Array.isArray(this._filters.config_entry?.value)&&this._filters.config_entry?.value.length?n.qy`<ha-alert slot="filter-pane"> ${this.hass.localize("ui.panel.config.devices.filtering_by_config_entry")} ${this.entries?.find(e=>e.entry_id===this._filters.config_entry.value[0])?.title||this._filters.config_entry.value[0]}${1===this._filters.config_entry.value.length&&Array.isArray(this._filters.sub_entry?.value)&&this._filters.sub_entry.value.length?n.qy` (${this._subEntries?.find(e=>e.subentry_id===this._filters.sub_entry.value[0])?.title||this._filters.sub_entry.value[0]})`:n.s6} </ha-alert>`:n.s6} <ha-filter-floor-areas .hass="${this.hass}" type="device" .value="${this._filters["ha-filter-floor-areas"]?.value}" @data-table-filter-changed="${this._filterChanged}" slot="filter-pane" .expanded="${"ha-filter-floor-areas"===this._expandedFilter}" .narrow="${this.narrow}" @expanded-changed="${this._filterExpanded}"></ha-filter-floor-areas> <ha-filter-integrations .hass="${this.hass}" .value="${this._filters["ha-filter-integrations"]?.value}" @data-table-filter-changed="${this._filterChanged}" slot="filter-pane" .expanded="${"ha-filter-integrations"===this._expandedFilter}" .narrow="${this.narrow}" @expanded-changed="${this._filterExpanded}"></ha-filter-integrations> <ha-filter-states .hass="${this.hass}" .value="${this._filters["ha-filter-states"]?.value}" .states="${this._states(this.hass.localize)}" .label="${this.hass.localize("ui.panel.config.devices.picker.state")}" @data-table-filter-changed="${this._filterChanged}" slot="filter-pane" .expanded="${"ha-filter-states"===this._expandedFilter}" .narrow="${this.narrow}" @expanded-changed="${this._filterExpanded}"></ha-filter-states> <ha-filter-labels .hass="${this.hass}" .value="${this._filters["ha-filter-labels"]?.value}" @data-table-filter-changed="${this._filterChanged}" slot="filter-pane" .expanded="${"ha-filter-labels"===this._expandedFilter}" .narrow="${this.narrow}" @expanded-changed="${this._filterExpanded}"></ha-filter-labels> ${this.narrow?n.s6:n.qy`<ha-md-button-menu slot="selection-bar"> <ha-assist-chip slot="trigger" .label="${this.hass.localize("ui.panel.config.automation.picker.bulk_actions.add_label")}"> <ha-svg-icon slot="trailing-icon" .path="${T}"></ha-svg-icon> </ha-assist-chip> ${a} </ha-md-button-menu> ${t?n.s6:n.qy`<ha-md-button-menu slot="selection-bar"> <ha-assist-chip slot="trigger" .label="${this.hass.localize("ui.panel.config.devices.picker.bulk_actions.move_area")}"> <ha-svg-icon slot="trailing-icon" .path="${T}"></ha-svg-icon> </ha-assist-chip> ${i} </ha-md-button-menu>`}`} <ha-md-button-menu has-overflow slot="selection-bar"> ${this.narrow?n.qy`<ha-assist-chip .label="${this.hass.localize("ui.panel.config.automation.picker.bulk_action")}" slot="trigger"> <ha-svg-icon slot="trailing-icon" .path="${T}"></ha-svg-icon> </ha-assist-chip>`:n.qy`<ha-icon-button .path="${P}" .label="${this.hass.localize("ui.panel.config.automation.picker.bulk_action")}" slot="trigger"></ha-icon-button>`} ${this.narrow?n.qy` <ha-sub-menu> <ha-md-menu-item slot="item"> <div slot="headline"> ${this.hass.localize("ui.panel.config.automation.picker.bulk_actions.add_label")} </div> <ha-svg-icon slot="end" .path="${W}"></ha-svg-icon> </ha-md-menu-item> <ha-md-menu slot="menu">${a}</ha-md-menu> </ha-sub-menu>`:n.s6} ${t?n.qy`<ha-sub-menu> <ha-md-menu-item slot="item"> <div slot="headline"> ${this.hass.localize("ui.panel.config.devices.picker.bulk_actions.move_area")} </div> <ha-svg-icon slot="end" .path="${W}"></ha-svg-icon> </ha-md-menu-item> <ha-md-menu slot="menu">${i}</ha-md-menu> </ha-sub-menu> <ha-md-divider role="separator" tabindex="-1"></ha-md-divider>`:n.s6} <ha-md-menu-item .clickAction="${this._deleteSelected}" .disabled="${!this._selectedCanDelete.length}" class="warning"> <ha-svg-icon slot="start" .path="${j}"></ha-svg-icon> <div slot="headline"> ${this.hass.localize("ui.panel.config.devices.picker.bulk_actions.delete_selected.button")} </div> </ha-md-menu-item> </ha-md-button-menu> </hass-tabs-subpage-data-table> `}async _loadSubEntries(e){this._subEntries=await(0,$.t0)(this.hass,e)}_filterExpanded(e){e.detail.expanded?this._expandedFilter=e.target.localName:this._expandedFilter===e.target.localName&&(this._expandedFilter=void 0)}_filterChanged(e){const t=e.target.localName;this._filters={...this._filters,[t]:e.detail}}_batteryEntity(e,t){const i=(0,A.Er)(this.hass,t[e]||[]);return i?i.entity_id:void 0}_batteryChargingEntity(e,t){const i=(0,A.DW)(this.hass,t[e]||[]);return i?i.entity_id:void 0}_handleRowClicked(e){const t=e.detail.id;this._ignoreLocationChange=!0,(0,v.o)(`/config/devices/device/${t}`)}_handleSearchChange(e){this._filter=e.detail.value,history.replaceState({filter:this._filter},"")}async _addDevice(){const{filteredConfigEntry:e,filteredDomains:t}=this._devicesAndFilterDomains(this.hass.devices,this.entries,this.entities,this.hass.areas,this.manifests,this._filters,this.hass.localize,this._labels),i=Object.keys(this.hass.devices).length,a=await(0,Z.z)(this.hass);void 0!==a?i>=a?(0,M.showAlertDialog)(this,{title:"Sorry",text:"Maximum devices reached. Remove one to add a new device."}):1===t.size&&g.x.includes([...t][0])?(0,g.P)(this,this.hass,[...t][0],{config_entry:e?.entry_id}):(0,I.X)(this,{domain:this._searchParms.get("domain")||void 0}):(0,M.showAlertDialog)(this,{title:"Sorry",text:"Something went wrong with your subscription."})}_handleSelectionChanged(e){this._selected=e.detail.value}async _bulkAddArea(e){const t=[];this._selected.forEach(i=>{t.push((0,z.FB)(this.hass,i,{area_id:e}))});const i=await Promise.allSettled(t);if((0,m.$)(i)){const e=(0,m.N)(i);(0,M.showAlertDialog)(this,{title:this.hass.localize("ui.panel.config.common.multiselect.failed",{number:e.length}),text:n.qy`<pre>
${e.map(e=>e.reason.message||e.reason.code||e.reason).join("\r\n")}</pre>`})}}async _handleBulkLabel(e){const t=e.currentTarget.value,i=e.currentTarget.action;this._bulkLabel(t,i)}async _bulkLabel(e,t){const i=[];this._selected.forEach(a=>{i.push((0,z.FB)(this.hass,a,{labels:"add"===t?this.hass.devices[a].labels.concat(e):this.hass.devices[a].labels.filter(t=>t!==e)}))});const a=await Promise.allSettled(i);if((0,m.$)(a)){const e=(0,m.N)(a);(0,M.showAlertDialog)(this,{title:this.hass.localize("ui.panel.config.common.multiselect.failed",{number:e.length}),text:n.qy`<pre>
${e.map(e=>e.reason.message||e.reason.code||e.reason).join("\r\n")}</pre>`})}}_clearSelection(){this._dataTable.clearSelection()}_handleSortingChanged(e){this._activeSorting=e.detail}_handleGroupingChanged(e){this._activeGrouping=e.detail.value}_handleCollapseChanged(e){this._activeCollapsed=e.detail.value}_handleColumnsChanged(e){this._activeColumnOrder=e.detail.columnOrder,this._activeHiddenColumns=e.detail.hiddenColumns}static get styles(){return[n.AH`:host{display:block}hass-tabs-subpage-data-table{--data-table-row-height:60px}hass-tabs-subpage-data-table.narrow{--data-table-row-height:72px}ha-button-menu{margin-left:8px;margin-inline-start:8px;margin-inline-end:initial}.clear{color:var(--primary-color);padding-left:8px;padding-inline-start:8px;text-transform:uppercase;direction:var(--direction)}ha-assist-chip{--ha-assist-chip-container-shape:10px}ha-md-button-menu ha-assist-chip{--md-assist-chip-trailing-space:8px}ha-label{--ha-label-background-color:var(--color, var(--grey-color));--ha-label-background-opacity:0.5}`,E.RF]}constructor(...e){super(...e),this.narrow=!1,this.isWide=!1,this._searchParms=new URLSearchParams(window.location.search),this._selected=[],this._selectedCanDelete=[],this._filter=history.state?.filter||"",this._filters={},this._sizeController=new o.P(this,{callback:e=>e[0]?.contentRect.width}),this._ignoreLocationChange=!1,this._locationChanged=()=>{this._ignoreLocationChange?this._ignoreLocationChange=!1:window.location.search.substring(1)!==this._searchParms.toString()&&(this._searchParms=new URLSearchParams(window.location.search),this._setFiltersFromUrl())},this._popState=()=>{window.location.search.substring(1)!==this._searchParms.toString()&&(this._searchParms=new URLSearchParams(window.location.search),this._setFiltersFromUrl())},this._states=(0,l.A)(e=>[{value:"disabled",label:e("ui.panel.config.devices.data_table.disabled_by")}]),this._devicesAndFilterDomains=(0,l.A)((e,t,i,a,s,n,o,r)=>{let l=Object.values(e).map(e=>({...e,label_entries:[]}));const d={};for(const e of i)e.device_id&&(e.device_id in d||(d[e.device_id]=[]),d[e.device_id].push(e));const c={};for(const e of t)c[e.entry_id]=e;const h={};for(const e of s)h[e.domain]=e;let _;const g=new Set;Object.entries(n).forEach(([e,i])=>{if("config_entry"===e&&Array.isArray(i.value)&&i.value.length){l=l.filter(e=>e.config_entries.some(e=>i.value.includes(e)));const e=t.filter(e=>e.entry_id&&i.value.includes(e.entry_id));e.forEach(e=>{g.add(e.domain)}),1===e.length&&(_=e[0])}else if("sub_entry"===e&&Array.isArray(i.value)&&i.value.length){if(!Array.isArray(this._filters.config_entry?.value)||1!==this._filters.config_entry.value.length)return;const e=this._filters.config_entry.value[0];l=l.filter(t=>t.config_entries_subentries[e]&&i.value.some(i=>t.config_entries_subentries[e].includes(i))),this._subEntries||this._loadSubEntries(e)}else if("ha-filter-integrations"===e&&Array.isArray(i.value)&&i.value.length){const e=t.filter(e=>i.value.includes(e.domain)).map(e=>e.entry_id);l=l.filter(t=>t.config_entries.some(t=>e.includes(t))),i.value.forEach(e=>g.add(e))}else"ha-filter-labels"===e&&Array.isArray(i.value)&&i.value.length?l=l.filter(e=>e.labels.some(e=>i.value.includes(e))):i.items&&(l=l.filter(e=>i.items.has(e.id)))});const v=n["ha-filter-states"]?.value;v?.length&&v.includes("disabled")||(l=l.filter(e=>!e.disabled_by));return{devicesOutput:l.map(e=>{const t=(0,$.JW)(e.config_entries.filter(e=>e in c).map(e=>c[e]),e.primary_config_entry),i=(r&&e?.labels||[]).map(e=>r.find(t=>t.label_id===e));let s="";if(e.area_id&&a[e.area_id]?.floor_id&&this.hass.floors){const t=a[e.area_id].floor_id;this.hass.floors[t]&&(s=(0,u.X)(this.hass.floors[t]))}return{...e,name:(0,p.T)(e,this.hass,d[e.id]),model:e.model||`<${o("ui.panel.config.devices.data_table.unknown")}>`,manufacturer:e.manufacturer||`<${o("ui.panel.config.devices.data_table.unknown")}>`,area:e.area_id&&a[e.area_id]?a[e.area_id].name:"",floor:s,integration:t.length?t.map(e=>o(`component.${e.domain}.title`)||e.domain).join(", "):this.hass.localize("ui.panel.config.devices.data_table.no_integration"),domains:t.map(e=>e.domain),battery_entity:[this._batteryEntity(e.id,d),this._batteryChargingEntity(e.id,d)],battery_level:this.hass.states[this._batteryEntity(e.id,d)||""]?.state,label_entries:i}}),filteredConfigEntry:_,filteredDomains:g}}),this._columns=(0,l.A)(e=>({icon:{title:"",label:e("ui.panel.config.devices.data_table.icon"),type:"icon",moveable:!1,showNarrow:!0,template:e=>e.domains.length?n.qy`<img alt="" crossorigin="anonymous" referrerpolicy="no-referrer" src="${(0,q.MR)({domain:e.domains[0],type:"icon",darkOptimized:this.hass.themes?.darkMode})}">`:""},name:{title:e("ui.panel.config.devices.data_table.device"),main:!0,sortable:!0,filterable:!0,direction:"asc",grows:!0,flex:2,minWidth:"150px",extraTemplate:e=>n.qy` ${e.label_entries.length?n.qy` <ha-data-table-labels .labels="${e.label_entries}"></ha-data-table-labels> `:n.s6} `},area:{title:e("ui.panel.config.devices.data_table.area"),sortable:!0,filterable:!0,groupable:!0,minWidth:"120px"},floor:{title:e("ui.panel.config.devices.data_table.floor"),sortable:!0,filterable:!0,groupable:!0,minWidth:"120px",defaultHidden:!0},integration:{title:e("ui.panel.config.devices.data_table.integration"),sortable:!0,filterable:!0,groupable:!0,minWidth:"120px"},manufacturer:{title:e("ui.panel.config.devices.data_table.manufacturer"),sortable:!0,filterable:!0,groupable:!0,minWidth:"120px"},model:{title:e("ui.panel.config.devices.data_table.model"),sortable:!0,filterable:!0,minWidth:"120px"},battery_entity:{title:e("ui.panel.config.devices.data_table.battery"),showNarrow:!0,sortable:!0,type:"numeric",maxWidth:"101px",minWidth:"101px",valueColumn:"battery_level",template:e=>{const t=e.battery_entity,i=t&&t[0]?this.hass.states[t[0]]:void 0,a=i?(0,_.t)(i):void 0,s=t&&t[1]?this.hass.states[t[1]]:void 0;return!i||"binary_sensor"!==a&&isNaN(i.state)?"":n.qy` ${"sensor"===a?this.hass.formatEntityState(i):n.s6} <ha-battery-icon .hass="${this.hass}" .batteryStateObj="${i}" .batteryChargingStateObj="${s}"></ha-battery-icon> `}},created_at:{title:e("ui.panel.config.generic.headers.created_at"),defaultHidden:!0,sortable:!0,minWidth:"128px",template:e=>e.created_at?(0,c.ZS)(new Date(1e3*e.created_at),this.hass.locale,this.hass.config):""},modified_at:{title:e("ui.panel.config.generic.headers.modified_at"),defaultHidden:!0,sortable:!0,minWidth:"128px",template:e=>e.modified_at?(0,c.ZS)(new Date(1e3*e.modified_at),this.hass.locale,this.hass.config):""},disabled_by:{title:e("ui.panel.config.devices.picker.state"),type:"icon",defaultHidden:!0,sortable:!0,filterable:!0,minWidth:"80px",maxWidth:"80px",template:e=>e.disabled_by?n.qy` <div tabindex="0" style="display:inline-block;position:relative"> <ha-svg-icon .id="svg-icon-${e.id}" .path="${O}"></ha-svg-icon> <ha-tooltip .for="svg-icon-${e.id}" placement="left"> ${this.hass.localize("ui.panel.config.entities.picker.status.disabled")} </ha-tooltip> </div> `:""},labels:{title:"",hidden:!0,filterable:!0,template:e=>e.label_entries.map(e=>e.name).join(" ")}})),this._handleBulkArea=e=>{const t=e.value;this._bulkAddArea(t)},this._bulkCreateArea=()=>{(0,H.J)(this,{createEntry:async e=>{const t=await(0,w.L3)(this.hass,e);return this._bulkAddArea(t.area_id),t}})},this._bulkCreateLabel=()=>{(0,D.f)(this,{createEntry:async e=>{const t=await(0,C._9)(this.hass,e);this._bulkLabel(t.label_id,"add")}})},this._deleteSelected=()=>{(0,M.dk)(this,{title:this.hass.localize("ui.panel.config.devices.picker.bulk_actions.delete_selected.confirm_title"),text:this._selectedCanDelete.length===this._selected.length?this.hass.localize("ui.panel.config.devices.picker.bulk_actions.delete_selected.confirm_text"):this.hass.localize("ui.panel.config.devices.picker.bulk_actions.delete_selected.confirm_partly_text",{deletable:this._selectedCanDelete.length,selected:this._selected.length}),confirmText:this.hass.localize("ui.common.delete"),dismissText:this.hass.localize("ui.common.cancel"),destructive:!0,confirm:async()=>{const e=[];this._selectedCanDelete.forEach(t=>{const i=this.hass.devices[t]?.config_entries;i.forEach(i=>{this.entries.find(e=>e.entry_id===i)?.supports_remove_device&&e.push((0,z.nO)(this.hass,t,i))})});const t=await Promise.allSettled(e);(0,m.$)(t)&&(0,M.showAlertDialog)(this,{text:this.hass.localize("ui.panel.config.devices.picker.bulk_actions.delete_selected.partial_failure"),title:this.hass.localize("ui.panel.config.devices.picker.bulk_actions.delete_selected.partial_failure_title")}),this._clearSelection()}})}}}(0,a.__decorate)([(0,r.MZ)({attribute:!1})],B.prototype,"hass",void 0),(0,a.__decorate)([(0,r.MZ)({type:Boolean})],B.prototype,"narrow",void 0),(0,a.__decorate)([(0,r.MZ)({attribute:"is-wide",type:Boolean})],B.prototype,"isWide",void 0),(0,a.__decorate)([(0,r.MZ)({attribute:!1})],B.prototype,"entries",void 0),(0,a.__decorate)([(0,r.wk)()],B.prototype,"_subEntries",void 0),(0,a.__decorate)([(0,r.wk)(),(0,s.Fg)({context:x.ih,subscribe:!0})],B.prototype,"entities",void 0),(0,a.__decorate)([(0,r.MZ)({attribute:!1})],B.prototype,"manifests",void 0),(0,a.__decorate)([(0,r.MZ)({attribute:!1})],B.prototype,"route",void 0),(0,a.__decorate)([(0,r.wk)()],B.prototype,"_searchParms",void 0),(0,a.__decorate)([(0,r.wk)()],B.prototype,"_selected",void 0),(0,a.__decorate)([(0,r.P)("hass-tabs-subpage-data-table",!0)],B.prototype,"_dataTable",void 0),(0,a.__decorate)([(0,r.wk)(),(0,h.I)({storage:"sessionStorage",key:"devices-table-search",state:!0,subscribe:!1})],B.prototype,"_filter",void 0),(0,a.__decorate)([(0,r.wk)(),(0,h.I)({storage:"sessionStorage",key:"devices-table-filters-full",state:!0,subscribe:!1,serializer:k.i,deserializer:k.D})],B.prototype,"_filters",void 0),(0,a.__decorate)([(0,r.wk)()],B.prototype,"_expandedFilter",void 0),(0,a.__decorate)([(0,r.wk)()],B.prototype,"_labels",void 0),(0,a.__decorate)([(0,h.I)({key:"devices-table-sort",state:!1,subscribe:!1})],B.prototype,"_activeSorting",void 0),(0,a.__decorate)([(0,h.I)({key:"devices-table-grouping",state:!1,subscribe:!1})],B.prototype,"_activeGrouping",void 0),(0,a.__decorate)([(0,h.I)({key:"devices-table-collapsed",state:!1,subscribe:!1})],B.prototype,"_activeCollapsed",void 0),(0,a.__decorate)([(0,h.I)({key:"devices-table-column-order",state:!1,subscribe:!1})],B.prototype,"_activeColumnOrder",void 0),(0,a.__decorate)([(0,h.I)({key:"devices-table-hidden-columns",state:!1,subscribe:!1})],B.prototype,"_activeHiddenColumns",void 0),B=(0,a.__decorate)([(0,r.EM)("ha-config-devices-dashboard")],B),t()}catch(e){t(e)}})},23578:function(e,t,i){i.a(e,async function(e,a){try{i.r(t);var s=i(69868),n=i(22019),o=i(60993),r=i(61964),l=i(69134),d=i(32903),c=i(78899),h=e([d,c]);[d,c]=h.then?(await h)():h;class p extends l.a{firstUpdated(e){super.firstUpdated(e),this._loadData()}updatePageEl(e){e.hass=this.hass,"device"===this._currentPage&&(e.deviceId=this.routeTail.path.substr(1)),e.entries=this._configEntries,e.manifests=this._manifests,e.narrow=this.narrow,e.isWide=this.isWide,e.showAdvanced=this.showAdvanced,e.route=this.routeTail}async _loadData(){this._configEntries=await(0,o.VN)(this.hass),this._manifests=await(0,r.fK)(this.hass)}constructor(...e){super(...e),this.narrow=!1,this.isWide=!1,this.showAdvanced=!1,this.routerOptions={defaultPage:"dashboard",routes:{dashboard:{tag:"ha-config-devices-dashboard",cache:!0},device:{tag:"ha-config-device-page"}}},this._configEntries=[],this._manifests=[]}}(0,s.__decorate)([(0,n.MZ)({attribute:!1})],p.prototype,"hass",void 0),(0,s.__decorate)([(0,n.MZ)({type:Boolean})],p.prototype,"narrow",void 0),(0,s.__decorate)([(0,n.MZ)({attribute:"is-wide",type:Boolean})],p.prototype,"isWide",void 0),(0,s.__decorate)([(0,n.MZ)({attribute:!1})],p.prototype,"showAdvanced",void 0),(0,s.__decorate)([(0,n.wk)()],p.prototype,"_configEntries",void 0),(0,s.__decorate)([(0,n.wk)()],p.prototype,"_manifests",void 0),p=(0,s.__decorate)([(0,n.EM)("ha-config-devices")],p),a()}catch(e){a(e)}})},4472:function(e,t,i){i.d(t,{KT:()=>f,Bi:()=>m,ZI:()=>v,Yp:()=>y});i(99342),i(65315),i(837),i(84136),i(22416),i(37089),i(88238),i(34536),i(16257),i(20152),i(44711),i(72108),i(77030);var a=i(23800),s=i(88341),n=i(12275),o=i(72652);var r=i(50231),l=i(24730),d=i(9171),c=i(61964),h=i(73779),p=i(47225),u=i(87916);const _=new Set(["ai_task","automation","configurator","device_tracker","event","geo_location","notify","persistent_notification","script","sun","tag","todo","zone",...a.gt]),g=new Set(["backup","mobile_app"]),v=(e,t)=>({type:"grid",cards:e.map(e=>({type:"tile",entity:e,show_entity_picture:["camera","image","person"].includes((0,s.m)(e))||void 0})),...t}),m=(e,t,i,n=!0)=>{const d=[],c=e.states,h=[],p=i.title?i.title.toLowerCase():void 0,_=[];for(const e of t){const t=c[e],i=(0,s.m)(e);if("alarm_control_panel"===i){const t={type:"alarm-panel",entity:e};d.push(t)}else if("camera"===i){const t={type:"picture-entity",entity:e};d.push(t)}else if("image"===i){const t={type:"picture",image_entity:e};d.push(t)}else if("climate"===i){const t={type:"thermostat",entity:e,features:(c[e]?.attributes?.hvac_modes?.length??0)>1?[{type:"climate-hvac-modes",hvac_modes:c[e]?.attributes?.hvac_modes}]:void 0};d.push(t)}else if("humidifier"===i){const t={type:"humidifier",entity:e,features:[{type:"humidifier-toggle"}]};d.push(t)}else if("media_player"===i){const t={type:"media-control",entity:e};d.push(t)}else if("plant"===i){const t={type:"plant-status",entity:e};d.push(t)}else if("weather"===i){const t={type:"weather-forecast",entity:e,show_forecast:!1};d.push(t)}else if(!n||"scene"!==i&&"script"!==i){let i;const a=p&&t&&(i=(0,r.p)((0,o.u)(t),p))?{entity:e,name:i}:e;h.push(a)}else{const i={entity:e,show_icon:!0,show_name:!0};let a;p&&t&&(a=(0,r.p)((0,o.u)(t),p))&&(i.name=a),_.push(i)}}if(h.sort((t,i)=>{const n="string"==typeof t?t:t.entity,r="string"==typeof i?i:i.entity,d=a.JF.includes((0,s.m)(n))?"sensor":"control";return d!==(a.JF.includes((0,s.m)(r))?"sensor":"control")?"sensor"===d?1:-1:(0,l.xL)("string"==typeof t?c[t]?(0,o.u)(c[t]):"":c[t.entity]?(0,u.v)(e,c[t.entity],t.name):"","string"==typeof i?c[i]?(0,o.u)(c[i]):"":c[i.entity]?(0,u.v)(e,c[i.entity],i.name):"")}),0===h.length&&_.length>0)return m(e,t,i,!1);if(h.length>0||_.length>0){const e={type:"entities",entities:h,...i};_.length>0&&(e.footer={type:"buttons",entities:_}),d.unshift(e)}return d.length<2?d:[{type:"grid",square:!1,columns:1,cards:d}]},f=(e,t)=>{const i=[];for(const e of t){const t={type:"entity",entity:e};i.push(t)}return i},y=(e,t,i,a,r,u)=>{const v=e.states,f=e.areas,y=e.devices,b=e.entities,w=((e,t)=>{const i={},a=new Set(Object.values(t).filter(e=>e.entity_category||e.platform&&g.has(e.platform)||e.hidden).map(e=>e.entity_id));for(const t of Object.keys(e)){const s=e[t];_.has((0,n.t)(s))||a.has(s.entity_id)||(i[t]=e[t])}return i})(v,b),$={};for(const e of Object.keys(w)){const t=w[e];t.attributes.order&&($[e]=t.attributes.order)}const x=((e,t,i,a)=>{const s={...a},n={},o={};for(const a of Object.values(i)){const i=a.area_id||a.device_id&&t[a.device_id]?.area_id;i&&i in e&&a.entity_id in s?(i in n||(n[i]=[]),n[i].push(s[a.entity_id]),delete s[a.entity_id]):a.device_id&&a.device_id in t&&a.entity_id in s&&(a.device_id in o||(o[a.device_id]=[]),o[a.device_id].push(s[a.entity_id]),delete s[a.entity_id])}for(const[e,t]of Object.entries(o))1===t.length&&(s[t[0].entity_id]=t[0],delete o[e]);return{areasWithEntities:n,devicesWithEntities:o,otherEntities:s}})(f,y,b,w);if(a?.hidden)for(const e of a.hidden)delete x.areasWithEntities[e];r&&(x.devicesWithEntities={},x.otherEntities={});const k=(e=>{const t=[],i={};return Object.keys(e).forEach(a=>{const n=e[a];"group"===(0,s.m)(a)?t.push(n):i[a]=n}),t.forEach(e=>e.attributes.entity_id.forEach(e=>{delete i[e]})),{groups:t,ungrouped:i}})(x.otherEntities);k.groups.sort((e,t)=>$[e.entity_id]-$[t.entity_id]);const z=[];for(const t of k.groups)z.push(...m(e,t.attributes.entity_id,{title:(0,o.u)(t),show_header_toggle:"hidden"!==t.attributes.control}));const A=((e,t,i,a,s)=>{const r={},{localize:d}=e;for(const e of Object.keys(s)){const t=s[e],i=(0,n.t)(t);i in r||(r[i]=[]),r[i].push(t.entity_id)}const u=[];if("person"in r){const e=[];if(1===r.person.length)u.push({type:"entities",entities:r.person});else{let t,i="";for(const a of r.person){const n=s[a];let o=n.attributes.entity_picture;if(!o){if(void 0===t){const e=getComputedStyle(document.body);t=encodeURIComponent(e.getPropertyValue("--light-primary-color").trim()),i=encodeURIComponent((e.getPropertyValue("--text-light-primary-color")||e.getPropertyValue("--primary-text-color")).trim())}o=`data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 50 50' width='50' height='50' style='background-color:${t}'%3E%3Cg%3E%3Ctext font-family='roboto' x='50%25' y='50%25' text-anchor='middle' stroke='${i}' font-size='1.3em' dy='.3em'%3E${(0,h._2)(n.attributes.friendly_name||"")}%3C/text%3E%3C/g%3E%3C/svg%3E`}e.push({type:"picture-entity",entity:a,aspect_ratio:"1",show_name:!1,image:o})}u.push({type:"grid",square:!0,columns:3,cards:e})}delete r.person}const _=[];for(const e of p.L)e in r&&(_.push(...r[e]),delete r[e]);const g={};for(const e of Object.keys(r))g[e]=(0,c.p$)(d,e);_.length&&(r._helpers=_,g._helpers=d("ui.panel.lovelace.strategy.original-states.helpers")),Object.keys(r).sort((e,t)=>(0,l.xL)(g[e],g[t])).forEach(t=>{u.push(...m(e,r[t].sort((e,t)=>(0,l.xL)((0,o.u)(s[e]),(0,o.u)(s[t]))),{title:g[t]}))});const v={path:t,title:i,cards:u};return a&&(v.icon=a),v})(e,"default_view","Home",undefined,k.ungrouped),C=[],M=Object.keys(x.areasWithEntities).sort((0,d.dj)(f,a?.order));for(const t of M){const i=x.areasWithEntities[t],a=f[t];C.push(...m(e,i.map(e=>e.entity_id),{title:a.name}))}const L=[],E=Object.entries(x.devicesWithEntities).sort((e,t)=>{const i=y[e[0]],a=y[t[0]];return(0,l.xL)(i.name_by_user||i.name||"",a.name_by_user||a.name||"")});for(const[i,a]of E){const s=y[i];L.push(...m(e,a.map(e=>e.entity_id),{title:s.name_by_user||s.name||t("ui.panel.config.devices.unnamed_device",{type:t(`ui.panel.config.devices.type.${s.entry_type||"device"}`)})}))}let q;if(i&&!u){const e=i.energy_sources.find(e=>"grid"===e.type);e&&e.flow_from.length>0&&(q={title:t("ui.panel.lovelace.cards.energy.energy_distribution.title_today"),type:"energy-distribution",link_dashboard:!0})}return A.cards.unshift(...C,...z,...q?[q]:[]),A.cards.push(...L),A}},6574:function(e,t,i){i.d(t,{Q:()=>l});i(65315),i(837);var a=i(61830),s=i(2560),n=i(15241),o=i(84528),r=i(78839);const l=async(e,t,i,l,d)=>{t.loadFragmentTranslation("lovelace");const c=await(0,s.SJ)(t),h=c.filter(e=>"storage"===e.mode),p=t.panels.lovelace?.config?.mode;if("storage"!==p&&!h.length)return void(0,o.Q)(e,{cardConfig:i,entities:d,yaml:!0});let u,_=null;if("storage"===p)try{u=await(0,a.Dz)(t.connection,null,!1)}catch(e){}if(!u&&h.length)for(const e of h)try{u=await(0,a.Dz)(t.connection,e.url_path,!1),_=e.url_path;break}catch(e){}u?h.length||u.views?.length?h.length||1!==u.views.length?(0,r.X)(e,{lovelaceConfig:u,urlPath:_,allowDashboardChange:!0,actionLabel:t.localize("ui.common.next"),dashboards:c,viewSelectedCallback:(s,n,r)=>{(0,o.Q)(e,{cardConfig:i,sectionConfig:l,lovelaceConfig:n,saveConfig:async e=>{try{await(0,a.ql)(t,s,e)}catch{alert(t.localize("ui.panel.lovelace.add_entities.saving_failed"))}},path:[r],entities:d})}}):(0,o.Q)(e,{cardConfig:i,sectionConfig:l,lovelaceConfig:u,saveConfig:async e=>{try{await(0,a.ql)(t,null,e)}catch(e){alert(t.localize("ui.panel.lovelace.add_entities.saving_failed"))}},path:[0],entities:d}):(0,n.showAlertDialog)(e,{text:"You don't have any Lovelace views, first create a view in Lovelace."}):c.length>h.length?(0,o.Q)(e,{cardConfig:i,sectionConfig:l,entities:d,yaml:!0}):(0,n.showAlertDialog)(e,{text:"You don't seem to be in control of any dashboard, please take control first."})}},84528:function(e,t,i){i.d(t,{Q:()=>n});var a=i(44017);const s=()=>Promise.all([i.e("33395"),i.e("11469"),i.e("91544"),i.e("18672"),i.e("93282"),i.e("58197"),i.e("58484"),i.e("32998"),i.e("10326"),i.e("6530"),i.e("65336"),i.e("88815"),i.e("75783"),i.e("53476"),i.e("336"),i.e("5023"),i.e("3029"),i.e("17386"),i.e("69548"),i.e("2552"),i.e("5350")]).then(i.bind(i,53923)),n=(e,t)=>{(0,a.r)(e,"show-dialog",{dialogTag:"hui-dialog-suggest-card",dialogImport:s,dialogParams:t})}},78839:function(e,t,i){i.d(t,{X:()=>s});var a=i(44017);const s=(e,t)=>{(0,a.r)(e,"show-dialog",{dialogTag:"hui-dialog-select-view",dialogImport:()=>Promise.all([i.e("3245"),i.e("89088"),i.e("33395"),i.e("27923"),i.e("79431")]).then(i.bind(i,65850)),dialogParams:t})}},51140:function(e,t,i){i.d(t,{h:()=>n,R:()=>s});var a=i(49487);const s=(e,t="")=>{const i=document.createElement("a");i.target="_blank",i.href=e,i.download=t,i.style.display="none",document.body.appendChild(i),i.dispatchEvent(new MouseEvent("click")),document.body.removeChild(i)},n=e=>!(e=>!!e.auth.external&&a.n)(e)||!!e.auth.external?.config.downloadFileSupported},49487:function(e,t,i){i.d(t,{n:()=>a});const a=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}};
//# sourceMappingURL=46948.45a0cc81721534b7.js.map