export const __webpack_id__="55727";export const __webpack_ids__=["55727"];export const __webpack_modules__={94327:function(e,t,s){s.d(t,{Vy:()=>a,fI:()=>n,ux:()=>c});var i=s(65940),r=s(83510);const o=["#4269d0","#f4bd4a","#ff725c","#6cc5b0","#a463f2","#ff8ab7","#9c6b4e","#97bbf5","#01ab63","#094bad","#c99000","#d84f3e","#49a28f","#048732","#d96895","#8043ce","#7599d1","#7a4c31","#6989f4","#ffd444","#ff957c","#8fe9d3","#62cc71","#ffadda","#c884ff","#badeff","#bf8b6d","#927acc","#97ee3f","#bf3947","#9f5b00","#f48758","#8caed6","#f2b94f","#eff26e","#e43872","#d9b100","#9d7a00","#698cff","#00d27e","#d06800","#009f82","#c49200","#cbe8ff","#fecddf","#c27eb6","#8cd2ce","#c4b8d9","#f883b0","#a49100","#f48800","#27d0df","#a04a9b"];function a(e){return o[e%o.length]}function n(e,t){const s=t.getPropertyValue(`--graph-color-${e+1}`)||a(e);return(0,r.RQ)(s)}const c=(0,i.A)(e=>o.map((t,s)=>n(s,e)),(e,t)=>e[0].getPropertyValue("--graph-color-1")===t[0].getPropertyValue("--graph-color-1"))},85356:function(e,t,s){s.d(t,{n:()=>d,v:()=>n});s(99342),s(65315),s(837),s(37089),s(88238),s(34536),s(16257),s(20152),s(44711),s(72108),s(77030);var i=s(12275),r=s(14523),o=s(88341),a=s(24730);const n={alarm_control_panel:["armed_away","armed_custom_bypass","armed_home","armed_night","armed_vacation","arming","disarmed","disarming","pending","triggered"],alert:["on","off","idle"],assist_satellite:["idle","listening","responding","processing"],automation:["on","off"],binary_sensor:["on","off"],button:[],calendar:["on","off"],camera:["idle","recording","streaming"],cover:["closed","closing","open","opening"],device_tracker:["home","not_home"],fan:["on","off"],humidifier:["on","off"],input_boolean:["on","off"],input_button:[],lawn_mower:["error","paused","mowing","returning","docked"],light:["on","off"],lock:["jammed","locked","locking","unlocked","unlocking","opening","open"],media_player:["off","on","idle","playing","paused","standby","buffering"],person:["home","not_home"],plant:["ok","problem"],remote:["on","off"],scene:[],schedule:["on","off"],script:["on","off"],siren:["on","off"],sun:["above_horizon","below_horizon"],switch:["on","off"],timer:["active","idle","paused"],update:["on","off"],vacuum:["cleaning","docked","error","idle","paused","returning"],valve:["closed","closing","open","opening"],weather:["clear-night","cloudy","exceptional","fog","hail","lightning-rainy","lightning","partlycloudy","pouring","rainy","snowy-rainy","snowy","sunny","windy-variant","windy"]},c={alarm_control_panel:{code_format:["number","text"]},binary_sensor:{device_class:["battery","battery_charging","co","cold","connectivity","door","garage_door","gas","heat","light","lock","moisture","motion","moving","occupancy","opening","plug","power","presence","problem","running","safety","smoke","sound","tamper","update","vibration","window"]},button:{device_class:["restart","update"]},camera:{frontend_stream_type:["hls","web_rtc"]},climate:{hvac_action:["off","idle","preheating","defrosting","heating","cooling","drying","fan"]},cover:{device_class:["awning","blind","curtain","damper","door","garage","gate","shade","shutter","window"]},device_tracker:{source_type:["bluetooth","bluetooth_le","gps","router"]},fan:{direction:["forward","reverse"]},humidifier:{device_class:["humidifier","dehumidifier"],action:["off","idle","humidifying","drying"]},media_player:{device_class:["tv","speaker","receiver"],media_content_type:["album","app","artist","channel","channels","composer","contributing_artist","episode","game","genre","image","movie","music","playlist","podcast","season","track","tvshow","url","video"],repeat:["off","one","all"]},number:{device_class:["temperature"]},sensor:{device_class:["apparent_power","aqi","battery","carbon_dioxide","carbon_monoxide","current","date","duration","energy","frequency","gas","humidity","illuminance","monetary","nitrogen_dioxide","nitrogen_monoxide","nitrous_oxide","ozone","ph","pm1","pm10","pm25","pm4","power_factor","power","pressure","reactive_power","signal_strength","sulphur_dioxide","temperature","timestamp","volatile_organic_compounds","volatile_organic_compounds_parts","voltage","volume_flow_rate"],state_class:["measurement","total","total_increasing"]},switch:{device_class:["outlet","switch"]},update:{device_class:["firmware"]},water_heater:{away_mode:["on","off"]}},d=(e,t,s=void 0)=>{const d=(0,i.t)(t),_=[];switch(!s&&d in n?_.push(...n[d]):s&&d in c&&s in c[d]&&_.push(...c[d][s]),d){case"climate":s?"fan_mode"===s?_.push(...t.attributes.fan_modes):"preset_mode"===s?_.push(...t.attributes.preset_modes):"swing_mode"===s&&_.push(...t.attributes.swing_modes):_.push(...t.attributes.hvac_modes);break;case"device_tracker":case"person":s||_.push(...Object.entries(e.states).filter(([e,t])=>"zone"===(0,o.m)(e)&&"zone.home"!==e&&t.attributes.friendly_name).map(([e,t])=>t.attributes.friendly_name).sort((t,s)=>(0,a.xL)(t,s,e.locale.language)));break;case"event":"event_type"===s&&_.push(...t.attributes.event_types);break;case"fan":"preset_mode"===s&&_.push(...t.attributes.preset_modes);break;case"humidifier":"mode"===s&&_.push(...t.attributes.available_modes);break;case"input_select":case"select":s||_.push(...t.attributes.options);break;case"light":"effect"===s&&t.attributes.effect_list?_.push(...t.attributes.effect_list):"color_mode"===s&&t.attributes.supported_color_modes&&_.push(...t.attributes.supported_color_modes);break;case"media_player":"sound_mode"===s?_.push(...t.attributes.sound_mode_list):"source"===s&&_.push(...t.attributes.source_list);break;case"remote":"current_activity"===s&&_.push(...t.attributes.activity_list);break;case"sensor":s||"enum"!==t.attributes.device_class||_.push(...t.attributes.options);break;case"vacuum":"fan_speed"===s&&_.push(...t.attributes.fan_speed_list);break;case"water_heater":s&&"operation_mode"!==s||_.push(...t.attributes.operation_list)}return s||_.push(...r.s7),[...new Set(_)]}},92900:function(e,t,s){s.d(t,{c:()=>f});var i=s(94327),r=s(83510),o=s(6788),a=s(88341),n=s(25442),c=s(14523),d=s(45736),_=s(12275),h=s(85356);const u={media_player:{paused:.5,idle:1},vacuum:{returning:.5}};let l=0;const p=new Map;function f(e,t,s){return function(e,t,s){if(!s||e===c.Hh)return(0,d.a)("--history-unavailable-color",t);if(e===c.HV)return(0,d.a)("--history-unknown-color",t);const i=(0,n.mg)(s,e);if(!i)return;const _=(0,d.a)(i,t);if(!_)return;const h=(0,a.m)(s.entity_id),l=u[h]?.[e];return l?(0,r.zm)((0,o.T)((0,r.Nc)((0,r.xp)(_)),l)):_}(e,t,s)||function(e,t,s){if(!s)return;const r=(0,_.t)(s),o=(h.v[r]||"sensor"===r&&"enum"===s.attributes.device_class&&s.attributes.options||[]).indexOf(e);return-1!==o?(0,i.fI)(o,t):void 0}(e,t,s)||function(e,t){if(p.has(e))return p.get(e);const s=(0,i.fI)(l,t);return l++,p.set(e,s),s}(e,t)}},63002:function(e,t,s){s.d(t,{$3:()=>f,$O:()=>S,$j:()=>m,ED:()=>o,JE:()=>k,OQ:()=>I,PU:()=>C,Ph:()=>l,Uf:()=>x,W1:()=>p,Wr:()=>_,Z:()=>c,gF:()=>g,iY:()=>y,jU:()=>a,nN:()=>v,p3:()=>d,pJ:()=>u,r_:()=>n,sz:()=>h});s(65315),s(59023);var i=s(72652),r=s(50654),o=function(e){return e[e.NONE=0]="NONE",e[e.ARITHMETIC=1]="ARITHMETIC",e[e.CIRCULAR=2]="CIRCULAR",e}({});const a=59509==s.j?["entity_not_recorded","entity_no_longer_recorded","state_class_removed","units_changed","mean_type_changed","no_state"]:null,n=["L","gal","ft³","m³","CCF","MCF"],c=e=>e.sendMessagePromise({type:"recorder/info"}),d=(e,t)=>e.callWS({type:"recorder/list_statistic_ids",statistic_type:t}),_=(e,t)=>e.callWS({type:"recorder/get_statistics_metadata",statistic_ids:t}),h=(e,t,s,i,r="hour",o,a)=>e.callWS({type:"recorder/statistics_during_period",start_time:t.toISOString(),end_time:s?.toISOString(),statistic_ids:i,period:r,units:o,types:a}),u=(e,t,s,i)=>e.callWS({type:"recorder/statistic_during_period",statistic_id:t,units:i,fixed_period:s.fixed_period?{start_time:s.fixed_period.start instanceof Date?s.fixed_period.start.toISOString():s.fixed_period.start,end_time:s.fixed_period.end instanceof Date?s.fixed_period.end.toISOString():s.fixed_period.end}:void 0,calendar:s.calendar?{..."week"===s.calendar.period?{first_weekday:(0,r.D)(e.locale).substring(0,3)}:{},...s.calendar}:void 0,rolling_window:s.rolling_window}),l=e=>e.callWS({type:"recorder/validate_statistics"}),p=(e,t,s,i)=>e.callWS({type:"recorder/update_statistics_metadata",statistic_id:t,unit_of_measurement:s,unit_class:i}),f=(e,t)=>e.callWS({type:"recorder/clear_statistics",statistic_ids:t}),m=e=>{let t=null;if(!e)return null;for(const s of e)null!==s.change&&void 0!==s.change&&(null===t?t=s.change:t+=s.change);return t},g=(e,t)=>{let s=null;for(const i of t){if(!(i in e))continue;const t=m(e[i]);null!==t&&(null===s?s=t:s+=t)}return s},y=(e,t)=>e.some(e=>void 0!==e[t]&&null!==e[t]),b=["mean","min","max"],w=["sum","state","change"],v=(e,t)=>!(!b.includes(t)||0===e.mean_type)||!(!w.includes(t)||!e.has_sum),x=(e,t,s,i,r)=>{const o=new Date(s).toISOString();return e.callWS({type:"recorder/adjust_sum_statistics",statistic_id:t,start_time:o,adjustment:i,adjustment_unit_of_measurement:r})},S=(e,t,s)=>{const r=e.states[t];return r?(0,i.u)(r):s?.name||t},k=(e,t,s)=>{let i;return t&&(i=e.states[t]?.attributes.unit_of_measurement),void 0===i?s?.statistics_unit_of_measurement:i},I=e=>e.includes(":"),C=e=>e.callWS({type:"recorder/update_statistics_issues"})},18318:function(e,t,s){s.a(e,async function(e,i){try{s.r(t),s.d(t,{DEFAULT_HOURS_TO_SHOW:()=>y,HuiHistoryGraphCard:()=>b});s(65315),s(22416),s(37089);var r=s(69868),o=s(84922),a=s(22019),n=s(75907),c=s(26946),d=s(94372),_=s(47807),h=(s(94124),s(70490),s(42163),s(69006)),u=s(63002),l=s(3274),p=s(87916),f=s(8510),m=s(38177),g=e([_,h]);[_,h]=g.then?(await g)():g;const y=24;class b extends o.WF{static async getConfigElement(){return await Promise.all([s.e("42153"),s.e("30199"),s.e("70184"),s.e("53904"),s.e("61717"),s.e("56030"),s.e("78525"),s.e("15116"),s.e("76855")]).then(s.bind(s,89227)),document.createElement("hui-history-graph-card-editor")}static getStubConfig(){return{type:"history-graph",entities:["sun.sun"]}}getCardSize(){return this._config?.title?2:0+2*(this._entityIds?.length||1)}getGridOptions(){return{columns:12,min_columns:6,min_rows:2}}setConfig(e){if(!e.entities||!Array.isArray(e.entities))throw new Error("Entities need to be an array");if(!e.entities.length)throw new Error("You must include at least one entity");this._entities=e.entities?(0,m.L)(e.entities):[],this._entityIds=this._entities.map(e=>e.entity),this._hoursToShow=e.hours_to_show||y,this._config=e,this._computeNames()}_computeNames(){this.hass&&this._config&&(this._names={},this._entities.forEach(e=>{const t=this.hass.states[e.entity];this._names[e.entity]=t?(0,p.v)(this.hass,t,e.name):e.entity}))}willUpdate(e){super.willUpdate(e),e.has("hass")&&this._computeNames()}connectedCallback(){super.connectedCallback(),this.hasUpdated&&this._subscribeHistory()}disconnectedCallback(){super.disconnectedCallback(),this._unsubscribeHistory()}async _subscribeHistory(){if(!(0,c.x)(this.hass,"history")||this._subscribed)return;const{numeric_device_classes:e}=await(0,l.KL)(this.hass);this._subscribed=(0,h.IQ)(this.hass,t=>{this._subscribed&&(this._stateHistory=(0,h.Mm)(this.hass,t,this._entityIds,this.hass.localize,e,this._config?.split_device_classes),this._mergeHistory())},this._hoursToShow,this._entityIds).catch(e=>{this._subscribed=void 0,this._error=e}),await this._fetchStatistics(e),this._setRedrawTimer()}_mergeHistory(){this._stateHistory&&(this._history=(0,h.tG)(this._stateHistory,this._statisticsHistory,this._config?.split_device_classes))}async _fetchStatistics(e){const t=new Date,s=new Date;s.setHours(s.getHours()-this._hoursToShow-1);const i=await(0,u.sz)(this.hass,s,t,this._entityIds,"hour",void 0,["mean","state"]);this._statisticsHistory=(0,h._1)(this.hass,i,this._entityIds,e,this._config?.split_device_classes),this._mergeHistory()}_redrawGraph(){this._history&&(this._history={...this._history})}_setRedrawTimer(){clearInterval(this._interval),this._interval=window.setInterval(()=>this._redrawGraph(),6e4)}_unsubscribeHistory(){clearInterval(this._interval),this._subscribed&&(this._subscribed.then(e=>e?.()),this._subscribed=void 0)}shouldUpdate(e){return(0,f.pY)(this,e)||e.size>1||!e.has("hass")}updated(e){if(super.updated(e),!(this._config&&this.hass&&this._hoursToShow&&this._entityIds.length))return;if(!e.has("_config")&&!e.has("hass"))return;const t=e.get("_config");!e.has("_config")||t?.entities===this._config.entities&&t?.hours_to_show===this._config.hours_to_show||(this._unsubscribeHistory(),this._subscribeHistory())}render(){if(!this.hass||!this._config)return o.s6;const e=new Date;e.setHours(e.getHours()-this._hoursToShow);const t=`/history?${(0,d.KH)({entity_id:this._entityIds.join(","),start_date:e.toISOString()})}`,s=this._config.grid_options?.columns??12,i="number"==typeof s&&s<=12,r="number"==typeof this._config.grid_options?.rows;return o.qy` <ha-card> ${this._config.title?o.qy` <h1 class="card-header"> ${this._config.title} <a href="${t}"><ha-icon-next></ha-icon-next></a> </h1> `:o.s6} <div class="content ${(0,n.H)({"has-header":!!this._config.title,"has-rows":!!this._config.grid_options?.rows,"has-height":r})}"> ${this._error?o.qy` <ha-alert alert-type="error"> ${this.hass.localize("ui.components.history_charts.error")}: ${this._error.message||this._error.code} </ha-alert> `:o.qy` <state-history-charts .hass="${this.hass}" .isLoadingData="${!this._history}" .historyData="${this._history}" .names="${this._names}" up-to-now .hoursToShow="${this._hoursToShow}" .showNames="${void 0===this._config.show_names||this._config.show_names}" .logarithmicScale="${this._config.logarithmic_scale||!1}" .minYAxis="${this._config.min_y_axis}" .maxYAxis="${this._config.max_y_axis}" .fitYData="${this._config.fit_y_data||!1}" .height="${r?"100%":void 0}" .narrow="${i}" .expandLegend="${this._config.expand_legend}"></state-history-charts> `} </div> </ha-card> `}constructor(...e){super(...e),this._names={},this._entityIds=[],this._entities=[],this._hoursToShow=y}}b.styles=o.AH`ha-card{display:flex;flex-direction:column;height:100%}.card-header{justify-content:space-between;display:flex;padding-bottom:0}.card-header ha-icon-next{--mdc-icon-button-size:24px;line-height:24px;color:var(--primary-text-color)}.content{padding:0 16px 8px;flex:1;overflow:hidden}.has-header{padding-top:0}state-history-charts{--timeline-top-margin:16px}.has-height state-history-charts{height:100%}.has-rows{--chart-max-height:100%}`,(0,r.__decorate)([(0,a.MZ)({attribute:!1})],b.prototype,"hass",void 0),(0,r.__decorate)([(0,a.wk)()],b.prototype,"_history",void 0),(0,r.__decorate)([(0,a.wk)()],b.prototype,"_statisticsHistory",void 0),(0,r.__decorate)([(0,a.wk)()],b.prototype,"_config",void 0),(0,r.__decorate)([(0,a.wk)()],b.prototype,"_error",void 0),b=(0,r.__decorate)([(0,a.EM)("hui-history-graph-card")],b),i()}catch(e){i(e)}})},71588:function(e,t,s){s.r(t),s.d(t,{Axis:()=>i._0,ChartView:()=>i.OZ,ComponentModel:()=>i.jT,ComponentView:()=>i.bR,List:()=>i.B8,Model:()=>i.Kx,PRIORITY:()=>i.FQ,SeriesModel:()=>i.rP,color:()=>i.yW,connect:()=>i.Ng,dataTool:()=>i.p5,dependencies:()=>i.El,disConnect:()=>i.zm,disconnect:()=>i.Zf,dispose:()=>i.AS,env:()=>i._K,extendChartView:()=>i.yX,extendComponentModel:()=>i.rt,extendComponentView:()=>i.NO,extendSeriesModel:()=>i.NA,format:()=>i.GP,getCoordinateSystemDimensions:()=>i.Bo,getInstanceByDom:()=>i.FP,getInstanceById:()=>i.aQ,getMap:()=>i.ZB,graphic:()=>i.fA,helper:()=>i.dw,init:()=>i.Ts,innerDrawElementOnCanvas:()=>i.UU,matrix:()=>i.UP,number:()=>i.ai,parseGeoJSON:()=>i.l3,parseGeoJson:()=>i.zI,registerAction:()=>i.OH,registerCoordinateSystem:()=>i.pX,registerCustomSeries:()=>i.mx,registerLayout:()=>i.Oh,registerLoading:()=>i.Ej,registerLocale:()=>i.E,registerMap:()=>i.mz,registerPostInit:()=>i.cf,registerPostUpdate:()=>i.tb,registerPreprocessor:()=>i.lP,registerProcessor:()=>i.qg,registerTheme:()=>i.bf,registerTransform:()=>i.iY,registerUpdateLifecycle:()=>i.xV,registerVisual:()=>i.AF,setCanvasCreator:()=>i.vV,setPlatformAPI:()=>i.Gs,throttle:()=>i.nF,time:()=>i.kB,use:()=>i.Yx,util:()=>i.ZS,vector:()=>i.i1,version:()=>i.rE,zrUtil:()=>i.F_,zrender:()=>i.nd});var i=s(74901)}};
//# sourceMappingURL=55727.f6d482b2bfbe7f49.js.map