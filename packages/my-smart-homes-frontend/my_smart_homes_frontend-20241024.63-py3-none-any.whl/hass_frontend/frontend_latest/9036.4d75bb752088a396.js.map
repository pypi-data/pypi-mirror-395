{"version":3,"file":"9036.4d75bb752088a396.js","sources":["https://raw.githubusercontent.com/home-assistant/frontend/20241024.63/src/panels/lovelace/cards/energy/hui-power-sankey-card.ts"],"names":["DEFAULT_CONFIG","group_by_floor","group_by_area","HuiPowerSankeyCard","SubscribeMixin","MobileAwareMixin","LitElement","setConfig","config","this","_config","hassSubscribe","getEnergyDataCollection","hass","key","collection_key","subscribe","data","_data","getCardSize","getGridOptions","columns","min_columns","rows","min_rows","shouldUpdate","changedProps","has","oldHass","get","_entities","size","entityId","states","render","nothing","html","localize","prefs","powerData","_computePowerData","computedStyle","getComputedStyle","nodes","links","homeNode","id","label","value","Math","max","used_total","color","getPropertyValue","trim","index","push","from_battery","source","target","to_battery","grid_to_battery","solar_to_battery","from_grid","solar","to_grid","battery_to_grid","solar_to_grid","untrackedConsumption","deviceNodes","parentLinks","device_consumption","forEach","device","idx","stat_rate","_getCurrentPower","node","name","_getEntityLabel","getGraphColorByIndex","parent","included_in_stat","devicesWithoutParent","filter","areas","floors","_groupByFloorAndArea","Object","keys","sort","a","b","level","Infinity","floorId","floorNodeId","areaId","targetNodeId","areaNodeId","devices","deviceNode","deviceSections","_getDeviceSections","section","length","hasData","some","vertical","layout","_isMobileSize","title","classMap","_valueFormatter","clear","energy_sources","type","power","powerSource","abs","solar_remaining","grid_remaining","battery_remaining","to_battery_remaining","to_grid_remaining","used_total_remaining","used_solar","used_battery","used_grid","excess_grid_in_after_consumption","min","grid_to_battery_2","no_area","no_floor","entity","area","floor","getEntityContext","entities","area_id","floor_id","includes","unshift","parentSection","childSection","parentIds","values","remainingLinks","isChild","entries","child","add","stateObj","parseFloat","state","isNaN","attributes","unit_of_measurement","friendly_name","args","Set","hassSubscribeRequiredHostProps","formatNumber","locale","maximumFractionDigits","undefined","styles","css","attribute"],"mappings":"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"}