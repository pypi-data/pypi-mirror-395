# mrt_glucose_hourly_patterns.yml - Schema tests for glucose hourly patterns mart

version: 2

models:
  - name: mrt_glucose_hourly_patterns
    description: "PostgreSQL mart providing hourly glucose patterns"
    columns:
      - name: hour_of_day
        description: "Hour of the day"
        tests:
          - not_null
          - accepted_values:
              values: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23]
              quote: false

      - name: avg_glucose_mg_dl
        description: "Average glucose for this hour"
        tests:
          - dbt_expectations.expect_column_values_to_be_of_type:
              column_type: double

      - name: reading_count
        description: "Number of readings in this hour"
        tests:
          - not_null
          - dbt_expectations.expect_column_values_to_be_of_type:
              column_type: bigint

      - name: coefficient_of_variation
        description: "Coefficient of variation for glucose readings"
        tests:
          - dbt_expectations.expect_column_values_to_be_of_type:
              column_type: double
