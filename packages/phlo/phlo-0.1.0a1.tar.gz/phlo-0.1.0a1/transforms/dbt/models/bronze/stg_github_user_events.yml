# stg_github_user_events.yml - Schema tests for GitHub user events staging model

version: 2

models:
  - name: stg_github_user_events
    description: "Bronze layer staging model for GitHub user events"
    meta:
      dagster:
        asset_key: ["stg_github_user_events"]
    columns:
      - name: event_id
        description: "Unique identifier for the GitHub event"
        tests:
          - not_null
          - unique

      - name: event_type
        description: "Type of GitHub event"
        tests:
          - not_null
          - accepted_values:
              values: ['CommitCommentEvent', 'CreateEvent', 'DeleteEvent', 'ForkEvent',
                      'GollumEvent', 'IssueCommentEvent', 'IssuesEvent', 'MemberEvent',
                      'PublicEvent', 'PullRequestEvent', 'PullRequestReviewEvent',
                      'PullRequestReviewCommentEvent', 'PushEvent', 'ReleaseEvent',
                      'SponsorshipEvent', 'WatchEvent']

      - name: actor
        description: "JSON string containing actor information"
        tests:
          - not_null

      - name: repo
        description: "JSON string containing repository information"
        tests:
          - not_null

      - name: payload
        description: "JSON string containing event payload data"
        tests:
          - not_null

      - name: public
        description: "Whether the event is public"
        tests:
          - not_null
          - accepted_values:
              values: [true, false]

      - name: created_at
        description: "Timestamp when the event was created"
        tests:
          - not_null

      - name: _cascade_ingested_at
        description: "Phlo ingestion timestamp"
        tests:
          - not_null
