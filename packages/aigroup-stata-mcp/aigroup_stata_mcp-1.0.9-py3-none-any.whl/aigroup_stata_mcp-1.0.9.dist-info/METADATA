Metadata-Version: 2.4
Name: aigroup-stata-mcp
Version: 1.0.9
Summary: A Stata integration server based on Model Context Protocol (MCP) that allows AI assistants to execute Stata scripts, fetch data information, and run statistical analysis.
Author-email: jackdark425 <jackdark425@gmail.com>
License: MIT
License-File: LICENSE
Keywords: ai,data-analysis,mcp,model-context-protocol,stata,statistics
Classifier: Development Status :: 4 - Beta
Classifier: Intended Audience :: Science/Research
Classifier: License :: OSI Approved :: MIT License
Classifier: Operating System :: OS Independent
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Classifier: Programming Language :: Python :: 3.13
Classifier: Topic :: Scientific/Engineering
Classifier: Topic :: Software Development :: Libraries :: Python Modules
Requires-Python: >=3.11
Requires-Dist: mcp[cli]>=1.21.0
Requires-Dist: numpy>=1.24.0
Requires-Dist: openpyxl>=3.1.5
Requires-Dist: pandas>=2.3.0
Requires-Dist: pathvalidate>=3.3.1
Requires-Dist: pexpect>=4.9.0
Requires-Dist: pydantic>=2.0.0
Requires-Dist: python-dotenv>=1.1.1
Requires-Dist: requests>=2.31.0
Provides-Extra: config
Requires-Dist: tomli-w>=1.0.0; extra == 'config'
Requires-Dist: tomli>=2.0.1; (python_version < '3.11') and extra == 'config'
Description-Content-Type: text/markdown

# aigroup-stata-mcp

[![Python 3.11+](https://img.shields.io/badge/python-3.11+-blue.svg)](https://www.python.org/downloads/)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![MCP Protocol](https://img.shields.io/badge/MCP-Protocol-blueviolet)](https://spec.modelcontextprotocol.io/)
[![PyPI version](https://img.shields.io/pypi/v/aigroup-stata-mcp.svg)](https://pypi.org/project/aigroup-stata-mcp/)

ä¸€ä¸ªåŸºäº Model Context Protocol (MCP) çš„ Stata é›†æˆæœåŠ¡å™¨ï¼Œå…è®¸ AI åŠ©æ‰‹æ‰§è¡Œ Stata è„šæœ¬ã€è·å–æ•°æ®ä¿¡æ¯å’Œè¿è¡Œç»Ÿè®¡åˆ†æã€‚

## åŠŸèƒ½ç‰¹æ€§

### ğŸš€ æ ¸å¿ƒåŠŸèƒ½
- **Stata è„šæœ¬æ‰§è¡Œ**: æ‰§è¡Œ `.do` æ–‡ä»¶å¹¶æ•è·æ—¥å¿—è¾“å‡º
- **æ•°æ®ä¿¡æ¯è·å–**: æ”¯æŒ `.dta` å’Œ `.csv` æ–‡ä»¶çš„æè¿°æ€§ç»Ÿè®¡
- **Stata å‘½ä»¤å¸®åŠ©**: è·å– Stata å†…ç½®å‘½ä»¤çš„å¸®åŠ©æ–‡æ¡£
- **SSC åŒ…ç®¡ç†**: ä» SSC ä»“åº“å®‰è£…å’Œç®¡ç† Stata åŒ…
- **æ–‡ä»¶æ“ä½œ**: åˆ›å»ºã€è¯»å–å’Œå†™å…¥ Stata è„šæœ¬æ–‡ä»¶

### ğŸ”§ æŠ€æœ¯ç‰¹æ€§
- **è·¨å¹³å°æ”¯æŒ**: Windowsã€macOS å’Œ Linux
- **è‡ªåŠ¨ Stata æ£€æµ‹**: è‡ªåŠ¨æŸ¥æ‰¾ç³»ç»Ÿä¸Šçš„ Stata å®‰è£…è·¯å¾„
- **å¤šä¼ è¾“åè®®**: æ”¯æŒ stdioã€SSEã€HTTP å’Œ streamable-http
- **ç»“æ„åŒ–è¾“å‡º**: ä½¿ç”¨ Pydantic æ¨¡å‹æä¾›ç±»å‹å®‰å…¨çš„å“åº”
- **å¤šè¯­è¨€æ”¯æŒ**: ä¸­è‹±æ–‡ç•Œé¢å’Œæç¤º
- **é…ç½®ç®¡ç†**: æ”¯æŒ TOML æ ¼å¼çš„é…ç½®æ–‡ä»¶

### ğŸ“Š æ•°æ®å¤„ç†
- **æ•°æ®æ ¼å¼æ”¯æŒ**: Stata (.dta)ã€CSV (.csv) æ–‡ä»¶
- **ç»Ÿè®¡åˆ†æ**: æè¿°æ€§ç»Ÿè®¡ã€å˜é‡åˆ†æ
- **URL æ•°æ®æº**: æ”¯æŒä» URL ç›´æ¥è¯»å–æ•°æ®æ–‡ä»¶
- **æ™ºèƒ½ç¼–ç æ£€æµ‹**: è‡ªåŠ¨æ£€æµ‹æ–‡ä»¶ç¼–ç å’Œåˆ†éš”ç¬¦

## å¿«é€Ÿå¼€å§‹

### ç³»ç»Ÿè¦æ±‚

- **Python**: 3.11 æˆ–æ›´é«˜ç‰ˆæœ¬
- **Stata**: å·²å®‰è£…å¹¶é…ç½®å¥½ç¯å¢ƒå˜é‡
- **MCP å®¢æˆ·ç«¯**: Claude Desktopã€é€šä¹‰çµç ã€roocodeã€Cherry Studio æˆ–å…¶ä»–å…¼å®¹ MCP çš„å®¢æˆ·ç«¯

### å®‰è£…

```bash
# ä½¿ç”¨ pip å®‰è£…
pip install aigroup-stata-mcp

# æˆ–ä½¿ç”¨ uv å®‰è£…
uv add aigroup-stata-mcp

# æˆ–ä½¿ç”¨ uvx ç›´æ¥è¿è¡Œï¼ˆæ— éœ€å®‰è£…ï¼‰
uvx aigroup-stata-mcp
```

### é…ç½®

#### é…ç½®æ–‡ä»¶

Stata-MCP æ”¯æŒä½¿ç”¨ TOML æ ¼å¼çš„é…ç½®æ–‡ä»¶ã€‚é…ç½®æ–‡ä»¶ä½äºé¡¹ç›®æ ¹ç›®å½•çš„ [config.toml](file:///d%3A/aigroup-stata-mcp/config.toml)ã€‚

ç¤ºä¾‹é…ç½®æ–‡ä»¶:

```toml
name = "aigroup-stata-mcp"
instructions = "Stata-MCP lets you and LLMs run Stata do-files and fetch results"
website_url = "https://github.com/jackdark425"

# Working directory for the server
# If not specified, will use default based on OS:
# - Linux/macOS: ~/Documents
# - Windows: %USERPROFILE%\Documents
# working_directory = "/path/to/working/directory"

# Path to Stata CLI executable
# If not specified, will auto-detect
# stata_cli = "/usr/local/stata/stata-mp"
```

ä½ ä¹Ÿå¯ä»¥é€šè¿‡ `--config` å‚æ•°æŒ‡å®šè‡ªå®šä¹‰é…ç½®æ–‡ä»¶è·¯å¾„ã€‚

#### MCP å®¢æˆ·ç«¯é…ç½®

åœ¨æ”¯æŒ MCP åè®®çš„ AI å®¢æˆ·ç«¯é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š

**é€šç”¨é…ç½®æ ¼å¼**:
```
{
  "mcpServers": {
    "stata-mcp": {
      "command": "uvx",
      "args": ["aigroup-stata-mcp"]
    }
  }
}
```

> **æ³¨æ„**: ç³»ç»Ÿä¼šè‡ªåŠ¨è¯†åˆ« Stata å®‰è£…è·¯å¾„ï¼Œé€šå¸¸æ— éœ€æ‰‹åŠ¨é…ç½®ã€‚å¦‚æœè‡ªåŠ¨è¯†åˆ«å¤±è´¥ï¼Œå¯ä»¥é€šè¿‡è®¾ç½® `STATA_CLI` ç¯å¢ƒå˜é‡æŒ‡å®š Stata å¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„ã€‚

ä¸åŒå®¢æˆ·ç«¯çš„é…ç½®æ–‡ä»¶ä½ç½®å¯èƒ½ä¸åŒï¼Œä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§å®¢æˆ·ç«¯çš„é…ç½®æ–‡ä»¶ä½ç½®ï¼š

- **Claude Desktop**:
  - macOS: `~/Library/Application Support/Claude/claude_desktop_config.json`
  - Windows: `%APPDATA%\Claude\claude_desktop_config.json`

#### ä½¿ç”¨å®‰è£…å™¨

é¡¹ç›®æä¾›äº†è‡ªåŠ¨å®‰è£…å·¥å…·ï¼š

```
# æ£€æŸ¥ç³»ç»Ÿå…¼å®¹æ€§
stata-mcp --usable

# è‡ªåŠ¨å®‰è£…åˆ° Claude Desktop
stata-mcp --install
```

## å¯ç”¨å·¥å…·

### Stata å·¥å…·

#### `stata_do`
æ‰§è¡Œ Stata do æ–‡ä»¶å¹¶è¿”å›æ‰§è¡Œç»“æœã€‚

**å‚æ•°:**
- `dofile_path`: do æ–‡ä»¶è·¯å¾„
- `log_file_name`: æ—¥å¿—æ–‡ä»¶åï¼ˆå¯é€‰ï¼‰
- `is_read_log`: æ˜¯å¦è¯»å–æ—¥å¿—å†…å®¹ï¼ˆé»˜è®¤: trueï¼‰

**ç¤ºä¾‹:**
```stata
regress price mpg weight
outreg2 using "results", replace
```

#### `get_data_info`
è·å–æ•°æ®æ–‡ä»¶çš„æè¿°æ€§ç»Ÿè®¡ä¿¡æ¯ã€‚

**å‚æ•°:**
- `data_path`: æ•°æ®æ–‡ä»¶è·¯å¾„
- `vars_list`: å˜é‡åˆ—è¡¨ï¼ˆå¯é€‰ï¼‰
- `encoding`: æ–‡ä»¶ç¼–ç ï¼ˆé»˜è®¤: utf-8ï¼‰
- `file_extension`: æ–‡ä»¶æ‰©å±•åï¼ˆå¯é€‰ï¼‰
- `is_save`: æ˜¯å¦ä¿å­˜ç»“æœåˆ°æ–‡ä»¶ï¼ˆé»˜è®¤: trueï¼‰

**æ”¯æŒæ ¼å¼:**
- Stata æ–‡ä»¶ (.dta)
- CSV æ–‡ä»¶ (.csv, .txt, .tsv)

#### `help`
è·å– Stata å‘½ä»¤çš„å¸®åŠ©æ–‡æ¡£ã€‚

**å‚æ•°:**
- `cmd`: Stata å‘½ä»¤åç§°

**ç¤ºä¾‹:**
```stata
help regress
help summarize
```

#### `ssc_install`
ä» SSC ä»“åº“å®‰è£… Stata åŒ…ã€‚

**å‚æ•°:**
- `command`: åŒ…åç§°
- `is_replace`: æ˜¯å¦æ›¿æ¢å·²å®‰è£…ç‰ˆæœ¬ï¼ˆé»˜è®¤: trueï¼‰

### æ–‡ä»¶å·¥å…·

#### `write_dofile`
åˆ›å»ºæ–°çš„ Stata do æ–‡ä»¶ã€‚

**å‚æ•°:**
- `content`: Stata ä»£ç å†…å®¹
- `encoding`: æ–‡ä»¶ç¼–ç ï¼ˆé»˜è®¤: utf-8ï¼‰

#### `append_dofile`
å‘ç°æœ‰ do æ–‡ä»¶è¿½åŠ å†…å®¹æˆ–åˆ›å»ºæ–°æ–‡ä»¶ã€‚

**å‚æ•°:**
- `original_dofile_path`: åŸå§‹ do æ–‡ä»¶è·¯å¾„
- `content`: è¦è¿½åŠ çš„ Stata ä»£ç 
- `encoding`: æ–‡ä»¶ç¼–ç ï¼ˆé»˜è®¤: utf-8ï¼‰

#### `read_file`
è¯»å–æ–‡ä»¶å†…å®¹ã€‚

**å‚æ•°:**
- `file_path`: æ–‡ä»¶è·¯å¾„
- `encoding`: æ–‡ä»¶ç¼–ç ï¼ˆé»˜è®¤: utf-8ï¼‰

#### `load_figure`
åŠ è½½å›¾ç‰‡æ–‡ä»¶ã€‚

**å‚æ•°:**
- `figure_path`: å›¾ç‰‡æ–‡ä»¶è·¯å¾„ï¼ˆæ”¯æŒ pngã€jpg æ ¼å¼ï¼‰

### æ ¸å¿ƒå·¥å…·

#### `mk_dir`
å®‰å…¨åˆ›å»ºç›®å½•ã€‚

**å‚æ•°:**
- `path`: ç›®å½•è·¯å¾„

## å¯ç”¨æç¤º

### `stata_assistant_role`
è·å– Stata åŠ©æ‰‹è§’è‰²å®šä¹‰æç¤ºã€‚

**å‚æ•°:**
- `lang`: è¯­è¨€ä»£ç ï¼ˆen/cnï¼Œå¯é€‰ï¼‰

### `stata_analysis_strategy`
è·å– Stata åˆ†æç­–ç•¥æŒ‡å—ã€‚

**å‚æ•°:**
- `lang`: è¯­è¨€ä»£ç ï¼ˆen/cnï¼Œå¯é€‰ï¼‰

### `results_doc_path`
ç”Ÿæˆç»“æœæ–‡æ¡£å­˜å‚¨è·¯å¾„ã€‚

## é¡¹ç›®ç»“æ„

```
stata_mcp/
â”œâ”€â”€ core/                    # æ ¸å¿ƒåŠŸèƒ½æ¨¡å—
â”‚   â”œâ”€â”€ data_info/          # æ•°æ®ä¿¡æ¯å¤„ç†
â”‚   â”‚   â”œâ”€â”€ _base.py        # æ•°æ®ä¿¡æ¯åŸºç±»
â”‚   â”‚   â”œâ”€â”€ dta.py          # Stata æ–‡ä»¶å¤„ç†
â”‚   â”‚   â””â”€â”€ csv.py          # CSV æ–‡ä»¶å¤„ç†
â”‚   â””â”€â”€ stata/              # Stata é›†æˆ
â”‚       â”œâ”€â”€ stata_controller/ # Stata ä¼šè¯æ§åˆ¶
â”‚       â”œâ”€â”€ stata_do/       # do æ–‡ä»¶æ‰§è¡Œå™¨
â”‚       â””â”€â”€ stata_finder/   # Stata è·¯å¾„æŸ¥æ‰¾å™¨
â”œâ”€â”€ server/                 # MCP æœåŠ¡å™¨å®ç°
â”‚   â”œâ”€â”€ tools/              # MCP å·¥å…·å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ core_tools.py   # æ ¸å¿ƒå·¥å…·
â”‚   â”‚   â”œâ”€â”€ file_tools.py   # æ–‡ä»¶å·¥å…·
â”‚   â”‚   â””â”€â”€ stata_tools.py  # Stata å·¥å…·
â”‚   â”œâ”€â”€ prompts/            # MCP æç¤ºå®šä¹‰
â”‚   â””â”€â”€ main.py             # æœåŠ¡å™¨ä¸»ç¨‹åº
â”œâ”€â”€ utils/                  # å·¥å…·ç±»
â”‚   â”œâ”€â”€ Installer/          # å®‰è£…å™¨
â”‚   â”œâ”€â”€ Prompt/             # æç¤ºç®¡ç†
â”‚   â””â”€â”€ usable.py           # ç³»ç»Ÿå…¼å®¹æ€§æ£€æŸ¥
â””â”€â”€ cli/                    # å‘½ä»¤è¡Œæ¥å£
```

## å¼€å‘æŒ‡å—

### ç¯å¢ƒè®¾ç½®

1. å…‹éš†ä»“åº“ï¼š
```bash
git clone https://github.com/jackdark425/aigroup-stata-mcp.git
cd aigroup-stata-mcp
```

2. å®‰è£…å¼€å‘ä¾èµ–ï¼š
```bash
pip install -e ".[dev]"
```

3. è¿è¡Œæµ‹è¯•ï¼š
```bash
python -m pytest
```

### æ·»åŠ æ–°å·¥å…·

åœ¨ `src/stata_mcp/server/tools/` ç›®å½•ä¸‹åˆ›å»ºæ–°çš„å·¥å…·æ–‡ä»¶ï¼š

```python
from mcp.server.fastmcp import Context, FastMCP
from pydantic import BaseModel, Field

class MyToolResult(BaseModel):
    result: str = Field(description="Tool execution result")

def register_my_tools(server: FastMCP) -> None:
    @server.tool()
    def my_tool(ctx: Context, param: str) -> MyToolResult:
        """Tool description."""
        # Tool implementation
        return MyToolResult(result="Success")
```

ç„¶ååœ¨ `src/stata_mcp/server/main.py` ä¸­æ³¨å†Œæ–°å·¥å…·ã€‚

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **Stata æœªæ‰¾åˆ°**
   - ç¡®ä¿ Stata å·²æ­£ç¡®å®‰è£…
   - æ‰‹åŠ¨è®¾ç½® `STATA_CLI` ç¯å¢ƒå˜é‡
   - ä½¿ç”¨ `stata-mcp --usable` æ£€æŸ¥é…ç½®

2. **æƒé™é”™è¯¯**
   - ç¡®ä¿å¯¹å·¥ä½œç›®å½•æœ‰è¯»å†™æƒé™
   - æ£€æŸ¥é˜²ç«å¢™è®¾ç½®

3. **ç¼–ç é—®é¢˜**
   - æŒ‡å®šæ­£ç¡®çš„æ–‡ä»¶ç¼–ç 
   - ä½¿ç”¨ UTF-8 ç¼–ç å¤„ç†ä¸­æ–‡æ•°æ®

### è°ƒè¯•æ¨¡å¼

å¯ç”¨è¯¦ç»†æ—¥å¿—è¾“å‡ºï¼š

```bash
stata-mcp --verbose
```

## è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ¬¢è¿è´¡çŒ®ï¼è¯·å‚é˜… [CONTRIBUTING.md](CONTRIBUTING.md) äº†è§£è¯¦ç»†ä¿¡æ¯ã€‚

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æ‰“å¼€ Pull Request

## è®¸å¯è¯

æœ¬é¡¹ç›®åŸºäº MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦ç»†ä¿¡æ¯ã€‚

## è‡´è°¢

- [Model Context Protocol](https://spec.modelcontextprotocol.io/) - æä¾›åè®®è§„èŒƒ
- [Stata](https://www.stata.com/) - ç»Ÿè®¡åˆ†æè½¯ä»¶
- [FastMCP](https://github.com/modelcontextprotocol/python-sdk) - Python MCP SDK

## æ”¯æŒ

å¦‚æœæ‚¨é‡åˆ°é—®é¢˜æˆ–æœ‰å»ºè®®ï¼Œè¯·ï¼š

1. æŸ¥çœ‹ [é—®é¢˜é¡µé¢](https://github.com/jackdark425/aigroup-stata-mcp/issues)
2. åˆ›å»ºæ–°çš„ issue
3. è”ç³»ç»´æŠ¤è€…: jackdark425@gmail.com

---

**æ³¨æ„**: æœ¬é¡¹ç›®ä¸ StataCorp LLC æ— å…³ï¼ŒStata æ˜¯ StataCorp LLC çš„æ³¨å†Œå•†æ ‡ã€‚