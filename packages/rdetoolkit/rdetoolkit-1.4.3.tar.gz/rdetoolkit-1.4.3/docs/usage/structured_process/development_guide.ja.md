## å®Ÿéš›ã®ãƒ‡ãƒ¼ã‚¿ã‚’ç”¨ã„ãŸæ§‹é€ åŒ–å‡¦ç†ã®å®Ÿè£…æ–¹æ³•

ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ã€Rigakuã®Xç·šå›æŠ˜è£…ç½®ï¼ˆXRDï¼‰ã‹ã‚‰å‡ºåŠ›ã•ã‚Œã‚‹RASãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‡¦ç†ã—ã€RDEã«ç™»éŒ²ã™ã‚‹ãŸã‚ã®æ§‹é€ åŒ–å‡¦ç†ã‚’ã€RDEToolKitãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ç”¨ã—ã¦æ§‹ç¯‰ã™ã‚‹æ–¹æ³•ã‚’èª¬æ˜ã—ã¾ã™ã€‚

## ãƒ‡ãƒ¼ã‚¿åˆ©ç”¨ã«é–¢ã™ã‚‹è¬è¾

æœ¬ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ä½¿ç”¨ã™ã‚‹ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ãŠã‚ˆã³é–¢é€£ã™ã‚‹æŠ€è¡“æƒ…å ±ã¯ã€å›½ç«‹ç ”ç©¶é–‹ç™ºæ³•äººç‰©è³ªãƒ»ææ–™ç ”ç©¶æ©Ÿæ§‹ï¼ˆNIMSï¼‰ã®ã€ŒNIMS Materials Data Conversion Tools (M-DaC)ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‹ã‚‰æä¾›ã•ã‚Œã¦ã„ã¾ã™ã€‚M-DaCãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ã€è¨ˆæ¸¬æ©Ÿå™¨ãƒ¡ãƒ¼ã‚«ãƒ¼ã¨ã®å”åŠ›ã«ã‚ˆã‚Šé–‹ç™ºã•ã‚ŒãŸã€å®Ÿé¨“ãƒ‡ãƒ¼ã‚¿ã®åŠ¹ç‡çš„ãªåé›†ã¨é«˜ä»˜åŠ ä¾¡å€¤åŒ–ã‚’ç›®çš„ã¨ã—ãŸæŠ€è¡“é–‹ç™ºã®æˆæœã§ã™ã€‚

è¬è¾ï¼š

- ãƒ‡ãƒ¼ã‚¿æä¾›: å›½ç«‹ç ”ç©¶é–‹ç™ºæ³•äººç‰©è³ªãƒ»ææ–™ç ”ç©¶æ©Ÿæ§‹ï¼ˆNIMSï¼‰
- ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ: NIMS Materials Data Conversion Tools (M-DaC) for XRD
- å…±åŒé–‹ç™º: æ ªå¼ä¼šç¤¾ãƒªã‚¬ã‚¯
- ãƒ©ã‚¤ã‚»ãƒ³ã‚¹: MIT License
- å¼•ç”¨: H. Nagao, S. Matsunami, M. Suzuki, and H. Yoshikawa: "NIMS Materials Data Conversion Tools (M-DaC) ver 1.1"

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®æˆæœã‚’æ´»ç”¨ã™ã‚‹ã“ã¨ã§ã€å®Ÿéš›ã®ç ”ç©¶ç¾å ´ã§ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹ãƒ‡ãƒ¼ã‚¿å½¢å¼ã«åŸºã¥ã„ãŸå®Ÿè·µçš„ãªå­¦ç¿’ãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚NIMSãŠã‚ˆã³é–¢é€£ã™ã‚‹ã™ã¹ã¦ã®ç ”ç©¶è€…ãƒ»æŠ€è¡“è€…ã®çš†æ§˜ã«æ·±ãæ„Ÿè¬ã„ãŸã—ã¾ã™ã€‚

### RASãƒ•ã‚¡ã‚¤ãƒ«ã«ã¤ã„ã¦

#### ãƒ‡ãƒ¼ã‚¿å½¢å¼ã®ç‰¹å¾´

RASãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆRigakuï¼‰ã¯ã€Rigakuç¤¾ã®Xç·šå›æŠ˜è£…ç½®SmartLabãªã©ã‹ã‚‰å‡ºåŠ›ã•ã‚Œã‚‹æ¨™æº–çš„ãªãƒ‡ãƒ¼ã‚¿å½¢å¼ã§ã™ã€‚ä»¥ä¸‹ã®ç‰¹å¾´ãŒã‚ã‚Šã¾ã™ï¼š

- ASCIIå½¢å¼: ãƒ†ã‚­ã‚¹ãƒˆãƒ™ãƒ¼ã‚¹ã®ãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼ã§ã€äººé–“ãŒèª­ã‚ã‚‹å½¢å¼
- æ§‹é€ åŒ–ã•ã‚ŒãŸãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿: æ¸¬å®šæ¡ä»¶ã€è£…ç½®è¨­å®šã€ã‚µãƒ³ãƒ—ãƒ«æƒ…å ±ãªã©ãŒä½“ç³»çš„ã«è¨˜éŒ²
- 3åˆ—ãƒ‡ãƒ¼ã‚¿: è§’åº¦ã€å¼·åº¦ã€æ¸›è¡°è£œæ­£ä¿‚æ•°ã®3åˆ—ã§æ§‹æˆã•ã‚Œã‚‹æ¸¬å®šãƒ‡ãƒ¼ã‚¿
- åŒºåˆ‡ã‚Šæ–‡å­—: ã‚¢ã‚¹ã‚¿ãƒªã‚¹ã‚¯ï¼ˆ*ï¼‰ã§å§‹ã¾ã‚‹è¡ŒãŒãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã¨ã‚³ãƒ¡ãƒ³ãƒˆã‚’ç¤ºã™

#### ãƒ•ã‚¡ã‚¤ãƒ«æ§‹é€ 

```plaintext
*RAS_DATA_START
*FILE_DATETIME 2023-01-15 10:30:00
*SAMPLE_NAME Al2O3_sample
*TARGET_NAME Cu
*TUBE_VOLTAGE 40.0
*TUBE_CURRENT 30.0
*SCAN_MODE continuous
*SCAN_SPEED 2.0
*SCAN_STEP 0.02
*START_ANGLE 10.0
*STOP_ANGLE 90.0
*RAS_HEADER_START
... (è©³ç´°ãªãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿)
*RAS_HEADER_END
*RAS_INT_START
10.0000 1200.0000 1.0000
10.0200 1205.0000 1.0000
10.0400 1198.0000 1.0000
... (æ¸¬å®šãƒ‡ãƒ¼ã‚¿)
*RAS_INT_END
*RAS_DATA_END
```

## rdetoolkitã‚’ä½¿ã£ã¦RDEæ§‹é€ åŒ–å‡¦ç†ã‚’æ§‹ç¯‰ã™ã‚‹

### RDEæ§‹é€ åŒ–å‡¦ç†ã®é–‹ç™ºãƒ—ãƒ­ã‚»ã‚¹

æœ¬ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ç¤ºã™é–‹ç™ºãƒ—ãƒ­ã‚»ã‚¹ã¯ä¸€ä¾‹ã§ã™ã€‚åˆ©ç”¨è€…ã®ãƒ‹ãƒ¼ã‚ºã«å¿œã˜ã¦èª¿æ•´ã—ã¦ãã ã•ã„ã€‚

```mermaid
flowchart TD
    %% å…¨ä½“ã®å‘ãã‚’ç¸¦ï¼ˆTopâ†’Bottomï¼‰ã«æŒ‡å®š
    subgraph RDEæ§‹é€ åŒ–å‡¦ç†é–‹ç™ºãƒ—ãƒ­ã‚»ã‚¹
        direction TB
        style RDEæ§‹é€ åŒ–å‡¦ç†é–‹ç™ºãƒ—ãƒ­ã‚»ã‚¹ fill:#f0f4f8,stroke:#333,stroke-width:2px,rx:10,ry:10
    end

    %% ãƒãƒ¼ãƒ‰ã®å…±é€šã‚¹ã‚¿ã‚¤ãƒ«å®šç¾©
    classDef step fill:#cfe2f3,stroke:#333,stroke-width:1.5px,rx:5,ry:5,font-size:14px;

    %% å„ã‚¹ãƒ†ãƒƒãƒ—
    A[ğŸ” æŠ½å‡ºã™ã‚‹ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’é¸æŠã™ã‚‹]:::step --> B[ğŸ› ï¸ ç’°å¢ƒæ§‹ç¯‰]:::step
    B --> C[ğŸ“„ å¿…è¦ãªãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã™ã‚‹]:::step
    C --> D[ğŸ’» æ§‹é€ åŒ–å‡¦ç†ã‚’é–‹ç™ºã™ã‚‹]:::step
    D --> E[âœ… å‹•ä½œç¢ºèªã™ã‚‹]:::step
```

### RDEãƒ‡ãƒ¼ã‚¿ç™»éŒ²ã§å¿…è¦ã¨ãªã‚‹äº‹å‰å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«ç¾¤ã«ã¤ã„ã¦

RDEã¯å†åˆ©ç”¨ãªãƒ‡ãƒ¼ã‚¿ç™»éŒ²ã«ãŠã„ã¦ã€ä¸‹è¨˜ãƒ•ã‚¡ã‚¤ãƒ«ã¯å¿…é ˆã¨ãªã‚Šã¾ã™ã€‚

- `templates/tasksupport/invoice.shcema.json`
- `templates/tasksupport/metadata-def.json`

RDEã¯ã€è¨ˆæ¸¬è£…ç½®ã‹ã‚‰å‡ºåŠ›ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚„æ—¥ã€…ã®å®Ÿé¨“ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰æŠ½å‡ºã™ã‚‹ã¹ãäº‹å‰ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«`metadata-def.json`ã¨ã€ã‚µãƒ³ãƒ—ãƒ«æƒ…å ±(åˆæˆæ¡ä»¶ãªã©)ã‚„è¨ˆæ¸¬æ¡ä»¶ãªã©æ—¥ã€…ã®å®Ÿé¨“ã§å®šå‹çš„ã«è¨˜éŒ²ãŒå¿…è¦ãªæƒ…å ±ã‚’ã€ãƒ‡ãƒ¼ã‚¿å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ ã‚’æŸ”è»Ÿã«ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã§ãã‚‹`invoice.schema.json`ã€‚

- ãƒ‡ãƒ¼ã‚¿ç™»éŒ²æ™‚ã«ã€`invoice.schema.json`ã‚’ä½œæˆã™ã‚‹ã“ã¨ã§ã€æ—¥ã€…ã®å®Ÿé¨“ã§å¿…è¦ãªæƒ…å ±ã‚’ãƒ‡ãƒ¼ã‚¿å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ ã¨ã—ã¦å®šç¾©ã§ãã¾ã™ã€‚
- ãƒ‡ãƒ¼ã‚¿ç™»éŒ²æ™‚ã«ã€ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’è‡ªå‹•çš„ã«æŠ½å‡ºã™ã‚‹ãŸã‚ã®äº‹å‰ãƒ•ã‚¡ã‚¤ãƒ«ã‚’`metadata-def.json`

ã•ã‚‰ã«ã€ã“ã‚Œã‚‰ã®ãƒ•ã‚¡ã‚¤ãƒ«ç¾¤ã¯ã€å½“æ©Ÿæ§‹ãŒæä¾›ã™ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã§ç°¡æ˜“çš„ã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã™ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚ã¾ãŸã€ä¸Šè¨˜ã®ãƒ•ã‚¡ã‚¤ãƒ«ã«åŠ ãˆã¦ã€å€‹äººã®ç’°å¢ƒã§æ§‹é€ åŒ–å‡¦ç†ã‚’æ§‹ç¯‰ã™ã‚‹ãŸã‚ã®`invoice.json`ã‚‚ä½œæˆå¯èƒ½ã§ã™ã€‚

- [nims-mdpf/RDE_datasettemplate-schemafile-make-tool - Github](https://github.com/nims-mdpf/RDE_datasettemplate-schemafile-make-tool)

#### æŠ½å‡ºã™ã‚‹ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’é¸æŠã™ã‚‹(metadata-def.json)

å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰æŠ½å‡ºã™ã‚‹ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’äº‹å‰ã«æ±ºã‚ã¦ãŠãã¾ã™ã€‚åˆ©ç”¨è€…ã‚„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ã‚ˆã£ã¦ã€äº‹å‰ã«å®šç¾©ã™ã‚‹ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã®æ•°ã¯ç•°ãªã‚Šã¾ã™ã€‚

ä»Šå›ã¯ã€æ¸¬å®šæ¡ä»¶ãƒ»è©¦æ–™æƒ…å ±ãƒ»æ™‚é–“ãƒ»ãƒˆãƒ¬ãƒ¼ã‚µãƒ“ãƒªãƒ†ã‚£ã¨ã„ã†è¦³ç‚¹ã‹ã‚‰ä»¥ä¸‹ã®ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’æŠ½å‡ºã™ã‚‹ã¨ã„ã†æ–¹é‡ã§ã€

**A. æ¸¬å®šæ¡ä»¶**ï¼ˆMeasurement Conditionsï¼‰

```plaintext
*MEAS_COND_XG_VOLTAGE "40"           # ç®¡é›»åœ§ï¼ˆkVï¼‰
*MEAS_COND_XG_CURRENT "30"           # ç®¡é›»æµï¼ˆmAï¼‰
*HW_XG_TARGET_NAME "Cu"              # Xç·šæºï¼ˆCuï¼‰
*HW_XG_WAVE_LENGTH_ALPHA1 "1.540593" # æ³¢é•·Î±1ï¼ˆÃ…ï¼‰
*HW_XG_WAVE_LENGTH_ALPHA2 "1.544414" # æ³¢é•·Î±2ï¼ˆÃ…ï¼‰
*MEAS_SCAN_START "25.0000"           # æ¸¬å®šé–‹å§‹è§’åº¦
*MEAS_SCAN_STOP "60.0000"            # æ¸¬å®šçµ‚äº†è§’åº¦
*MEAS_SCAN_STEP "0.0100"             # æ¸¬å®šã‚¹ãƒ†ãƒƒãƒ—
*MEAS_SCAN_SPEED "8.0000"            # æ¸¬å®šé€Ÿåº¦ï¼ˆdeg/minï¼‰
*MEAS_SCAN_MODE "CONTINUOUS"         # æ¸¬å®šãƒ¢ãƒ¼ãƒ‰
```

**B. è©¦æ–™æƒ…å ±**ï¼ˆSample Informationï¼‰

```plaintext
*FILE_SAMPLE "Test Sample"           # è©¦æ–™å
*FILE_COMMENT "XRD example"          # ã‚³ãƒ¡ãƒ³ãƒˆ
*FILE_MEMO "Rigaku XRD memo"         # ãƒ¡ãƒ¢
*FILE_OPERATOR "English"             # æ“ä½œè€…
*FILE_USERGROUP "Academic"           # ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚°ãƒ«ãƒ¼ãƒ—
```

**C. æ™‚é–“ãƒ»ãƒˆãƒ¬ãƒ¼ã‚µãƒ“ãƒªãƒ†ã‚£**ï¼ˆTemporal & Traceabilityï¼‰

```plaintext
*MEAS_SCAN_START_TIME "11/21/2017 08:32:31" # æ¸¬å®šé–‹å§‹æ™‚åˆ»
*MEAS_SCAN_END_TIME "11/21/2017 08:37:42"   # æ¸¬å®šçµ‚äº†æ™‚åˆ»
*MEAS_DATA_COUNT "3501"                     # ãƒ‡ãƒ¼ã‚¿ç‚¹æ•°
*FILE_VERSION "1"                           # ãƒ•ã‚¡ã‚¤ãƒ«ãƒãƒ¼ã‚¸ãƒ§ãƒ³
```

ã“ã‚Œã‚‰ã®æƒ…å ±ã‚’ã‚‚ã¨ã«ã€`metadata-def.json`ã«ä»¥ä¸‹ã®ã‚ˆã†ã«å®šç¾©ã—ã¾ã™ã€‚

> é•·æ–‡ã®ãŸã‚ä¸€æ–‡æŠœç²‹ã—ã¦è¡¨ç¤ºã—ã¦ã„ã¾ã™ã€‚

```json
{
    "file_sample": {
        "name": {
            "ja": "è©¦æ–™å",
            "en": "Sample Name"
        },
        "schema": {
            "type": "string"
        }
    },
    "file_comment": {
        "name": {
            "ja": "ãƒ•ã‚¡ã‚¤ãƒ«ã‚³ãƒ¡ãƒ³ãƒˆ",
            "en": "File Comment"
        },
        "schema": {
            "type": "string"
        }
    },
    ...
}
```

<details>
<summary>Click to view the full `metadata-def.json`</summary>

```json
{
    "file_sample": {
        "name": {
            "ja": "è©¦æ–™å",
            "en": "Sample Name"
        },
        "schema": {
            "type": "string"
        }
    },
    "file_comment": {
        "name": {
            "ja": "ãƒ•ã‚¡ã‚¤ãƒ«ã‚³ãƒ¡ãƒ³ãƒˆ",
            "en": "File Comment"
        },
        "schema": {
            "type": "string"
        }
    },
    "file_memo": {
        "name": {
            "ja": "ãƒ•ã‚¡ã‚¤ãƒ«ãƒ¡ãƒ¢",
            "en": "File Memo"
        },
        "schema": {
            "type": "string"
        }
    },
    "file_operator": {
        "name": {
            "ja": "æ“ä½œè€…",
            "en": "Operator"
        },
        "schema": {
            "type": "string"
        }
    },
    "file_usergroup": {
        "name": {
            "ja": "ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚°ãƒ«ãƒ¼ãƒ—",
            "en": "User Group"
        },
        "schema": {
            "type": "string"
        }
    },
    "file_version": {
        "name": {
            "ja": "ãƒ•ã‚¡ã‚¤ãƒ«ãƒãƒ¼ã‚¸ãƒ§ãƒ³",
            "en": "File Version"
        },
        "schema": {
            "type": "string"
        }
    },
    "hw_xg_target_name": {
        "name": {
            "ja": "Xç·šã‚¿ãƒ¼ã‚²ãƒƒãƒˆå",
            "en": "X-ray Target Name"
        },
        "schema": {
            "type": "string"
        }
    },
    "hw_xg_target_atomic_number": {
        "name": {
            "ja": "ã‚¿ãƒ¼ã‚²ãƒƒãƒˆåŸå­ç•ªå·",
            "en": "Target Atomic Number"
        },
        "schema": {
            "type": "integer"
        }
    },
    "hw_xg_wave_length_alpha1": {
        "name": {
            "ja": "æ³¢é•·Î±1",
            "en": "Wavelength Alpha1"
        },
        "schema": {
            "type": "number"
        }
    },
    "hw_xg_wave_length_alpha2": {
        "name": {
            "ja": "æ³¢é•·Î±2",
            "en": "Wavelength Alpha2"
        },
        "schema": {
            "type": "number"
        }
    },
    "hw_xg_wave_length_beta": {
        "name": {
            "ja": "æ³¢é•·Î²",
            "en": "Wavelength Beta"
        },
        "schema": {
            "type": "number"
        }
    },
    "hw_xg_wave_length_unit": {
        "name": {
            "ja": "æ³¢é•·å˜ä½",
            "en": "Wavelength Unit"
        },
        "schema": {
            "type": "string"
        }
    },
    "hw_xg_focus": {
        "name": {
            "ja": "Xç·šãƒ•ã‚©ãƒ¼ã‚«ã‚¹",
            "en": "X-ray Focus"
        },
        "schema": {
            "type": "string"
        }
    },
    "hw_xg_focus_type": {
        "name": {
            "ja": "ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã‚¿ã‚¤ãƒ—",
            "en": "Focus Type"
        },
        "schema": {
            "type": "string"
        }
    },
    "meas_cond_xg_voltage": {
        "name": {
            "ja": "ç®¡é›»åœ§",
            "en": "Tube Voltage"
        },
        "schema": {
            "type": "number"
        }
    },
    "meas_cond_xg_current": {
        "name": {
            "ja": "ç®¡é›»æµ",
            "en": "Tube Current"
        },
        "schema": {
            "type": "number"
        }
    },
    "hw_xg_voltage_unit": {
        "name": {
            "ja": "é›»åœ§å˜ä½",
            "en": "Voltage Unit"
        },
        "schema": {
            "type": "string"
        }
    },
    "hw_xg_current_unit": {
        "name": {
            "ja": "é›»æµå˜ä½",
            "en": "Current Unit"
        },
        "schema": {
            "type": "string"
        }
    },
    "meas_scan_start": {
        "name": {
            "ja": "æ¸¬å®šé–‹å§‹è§’åº¦",
            "en": "Scan Start Angle"
        },
        "schema": {
            "type": "number"
        }
    },
    "meas_scan_stop": {
        "name": {
            "ja": "æ¸¬å®šçµ‚äº†è§’åº¦",
            "en": "Scan Stop Angle"
        },
        "schema": {
            "type": "number"
        }
    },
    "meas_scan_step": {
        "name": {
            "ja": "æ¸¬å®šã‚¹ãƒ†ãƒƒãƒ—",
            "en": "Scan Step"
        },
        "schema": {
            "type": "number"
        }
    },
    "meas_scan_speed": {
        "name": {
            "ja": "æ¸¬å®šé€Ÿåº¦",
            "en": "Scan Speed"
        },
        "schema": {
            "type": "number"
        }
    },
    "meas_scan_speed_unit": {
        "name": {
            "ja": "æ¸¬å®šé€Ÿåº¦å˜ä½",
            "en": "Scan Speed Unit"
        },
        "schema": {
            "type": "string"
        }
    },
    "meas_scan_mode": {
        "name": {
            "ja": "æ¸¬å®šãƒ¢ãƒ¼ãƒ‰",
            "en": "Scan Mode"
        },
        "schema": {
            "type": "string"
        }
    },
    "meas_scan_unit_x": {
        "name": {
            "ja": "Xè»¸å˜ä½",
            "en": "X-axis Unit"
        },
        "schema": {
            "type": "string"
        }
    },
    "meas_scan_unit_y": {
        "name": {
            "ja": "Yè»¸å˜ä½",
            "en": "Y-axis Unit"
        },
        "schema": {
            "type": "string"
        }
    },
    "meas_scan_axis_x": {
        "name": {
            "ja": "æ¸¬å®šè»¸X",
            "en": "Scan Axis X"
        },
        "schema": {
            "type": "string"
        }
    },
    "meas_scan_resolution_x": {
        "name": {
            "ja": "Xè»¸åˆ†è§£èƒ½",
            "en": "X-axis Resolution"
        },
        "schema": {
            "type": "number"
        }
    },
    "meas_data_count": {
        "name": {
            "ja": "ãƒ‡ãƒ¼ã‚¿ç‚¹æ•°",
            "en": "Data Count"
        },
        "schema": {
            "type": "integer"
        }
    },
    "meas_scan_start_time": {
        "name": {
            "ja": "æ¸¬å®šé–‹å§‹æ™‚åˆ»",
            "en": "Scan Start Time"
        },
        "schema": {
            "type": "string",
            "format": "date-time"
        }
    },
    "meas_scan_end_time": {
        "name": {
            "ja": "æ¸¬å®šçµ‚äº†æ™‚åˆ»",
            "en": "Scan End Time"
        },
        "schema": {
            "type": "string",
            "format": "date-time"
        }
    },
    "hw_goniometer_name": {
        "name": {
            "ja": "ã‚´ãƒ‹ã‚ªãƒ¡ãƒ¼ã‚¿å",
            "en": "Goniometer Name"
        },
        "schema": {
            "type": "string"
        }
    },
    "hw_goniometer_id": {
        "name": {
            "ja": "ã‚´ãƒ‹ã‚ªãƒ¡ãƒ¼ã‚¿ID",
            "en": "Goniometer ID"
        },
        "schema": {
            "type": "string"
        }
    },
    "hw_counter_select_name": {
        "name": {
            "ja": "æ¤œå‡ºå™¨å",
            "en": "Detector Name"
        },
        "schema": {
            "type": "string"
        }
    },
    "hw_counter_pixel_size": {
        "name": {
            "ja": "æ¤œå‡ºå™¨ãƒ”ã‚¯ã‚»ãƒ«ã‚µã‚¤ã‚º",
            "en": "Detector Pixel Size"
        },
        "schema": {
            "type": "string"
        }
    },
    "hw_attachment_name": {
        "name": {
            "ja": "ã‚¢ã‚¿ãƒƒãƒãƒ¡ãƒ³ãƒˆå",
            "en": "Attachment Name"
        },
        "schema": {
            "type": "string"
        }
    },
    "hw_attachment_id": {
        "name": {
            "ja": "ã‚¢ã‚¿ãƒƒãƒãƒ¡ãƒ³ãƒˆID",
            "en": "Attachment ID"
        },
        "schema": {
            "type": "string"
        }
    },
    "hw_sample_holder_name": {
        "name": {
            "ja": "è©¦æ–™ãƒ›ãƒ«ãƒ€ãƒ¼å",
            "en": "Sample Holder Name"
        },
        "schema": {
            "type": "string"
        }
    },
    "hw_sample_holder_id": {
        "name": {
            "ja": "è©¦æ–™ãƒ›ãƒ«ãƒ€ãƒ¼ID",
            "en": "Sample Holder ID"
        },
        "schema": {
            "type": "string"
        }
    },
    "meas_cond_axis_position_incident_slit": {
        "name": {
            "ja": "å…¥å°„ã‚¹ãƒªãƒƒãƒˆ",
            "en": "Incident Slit"
        },
        "schema": {
            "type": "string"
        }
    },
    "meas_cond_axis_position_divergence_slit": {
        "name": {
            "ja": "ç™ºæ•£ã‚¹ãƒªãƒƒãƒˆ",
            "en": "Divergence Slit"
        },
        "schema": {
            "type": "string"
        }
    },
    "meas_cond_axis_position_receiving_slit": {
        "name": {
            "ja": "å—å…‰ã‚¹ãƒªãƒƒãƒˆ",
            "en": "Receiving Slit"
        },
        "schema": {
            "type": "string"
        }
    },
    "meas_cond_axis_position_soller_slit_incident": {
        "name": {
            "ja": "å…¥å°„å´ã‚½ãƒ¼ãƒ©ãƒ¼ã‚¹ãƒªãƒƒãƒˆ",
            "en": "Incident Soller Slit"
        },
        "schema": {
            "type": "string"
        }
    },
    "meas_cond_axis_position_soller_slit_receiving": {
        "name": {
            "ja": "å—å…‰å´ã‚½ãƒ¼ãƒ©ãƒ¼ã‚¹ãƒªãƒƒãƒˆ",
            "en": "Receiving Soller Slit"
        },
        "schema": {
            "type": "string"
        }
    },
    "meas_cond_axis_position_monochromator": {
        "name": {
            "ja": "ãƒ¢ãƒã‚¯ãƒ­ãƒ¡ãƒ¼ã‚¿",
            "en": "Monochromator"
        },
        "schema": {
            "type": "string"
        }
    },
    "meas_cond_axis_position_attenuator": {
        "name": {
            "ja": "ã‚¢ãƒƒãƒ†ãƒãƒ¼ã‚¿",
            "en": "Attenuator"
        },
        "schema": {
            "type": "string"
        }
    },
    "meas_cond_axis_position_pha": {
        "name": {
            "ja": "æ³¢é«˜åˆ†æå™¨",
            "en": "Pulse Height Analyzer"
        },
        "schema": {
            "type": "string"
        }
    },
    "meas_cond_axis_offset_theta_s": {
        "name": {
            "ja": "Î¸è©¦æ–™ã‚ªãƒ•ã‚»ãƒƒãƒˆ",
            "en": "Theta Sample Offset"
        },
        "schema": {
            "type": "number"
        }
    },
    "meas_cond_axis_offset_theta_d": {
        "name": {
            "ja": "Î¸æ¤œå‡ºå™¨ã‚ªãƒ•ã‚»ãƒƒãƒˆ",
            "en": "Theta Detector Offset"
        },
        "schema": {
            "type": "number"
        }
    },
    "meas_cond_axis_offset_two_theta": {
        "name": {
            "ja": "2Î¸ã‚ªãƒ•ã‚»ãƒƒãƒˆ",
            "en": "Two Theta Offset"
        },
        "schema": {
            "type": "number"
        }
    },
    "meas_cond_axis_offset_omega": {
        "name": {
            "ja": "Ï‰ã‚ªãƒ•ã‚»ãƒƒãƒˆ",
            "en": "Omega Offset"
        },
        "schema": {
            "type": "number"
        }
    },
    "meas_cond_axis_position_z": {
        "name": {
            "ja": "Zä½ç½®",
            "en": "Z Position"
        },
        "schema": {
            "type": "number"
        }
    },
    "meas_cond_axis_position_zs": {
        "name": {
            "ja": "è©¦æ–™Zä½ç½®",
            "en": "Sample Z Position"
        },
        "schema": {
            "type": "number"
        }
    },
    "meas_cond_axis_position_zr": {
        "name": {
            "ja": "å—å…‰Zä½ç½®",
            "en": "Receiving Z Position"
        },
        "schema": {
            "type": "number"
        }
    },
    "meas_cond_axis_position_primary_geometry": {
        "name": {
            "ja": "ä¸€æ¬¡å…‰å­¦ç³»å¹¾ä½•",
            "en": "Primary Geometry"
        },
        "schema": {
            "type": "string"
        }
    },
    "meas_cond_axis_position_incident_primary": {
        "name": {
            "ja": "å…¥å°„å…‰å­¦ç³»",
            "en": "Incident Primary"
        },
        "schema": {
            "type": "string"
        }
    },
    "meas_cond_axis_position_receiving_optics": {
        "name": {
            "ja": "å—å…‰å…‰å­¦ç³»",
            "en": "Receiving Optics"
        },
        "schema": {
            "type": "string"
        }
    },
    "hw_goniometer_radius_0": {
        "name": {
            "ja": "ã‚´ãƒ‹ã‚ªåŠå¾„0",
            "en": "Goniometer Radius 0"
        },
        "schema": {
            "type": "number"
        }
    },
    "hw_goniometer_radius_1": {
        "name": {
            "ja": "ã‚´ãƒ‹ã‚ªåŠå¾„1",
            "en": "Goniometer Radius 1"
        },
        "schema": {
            "type": "number"
        }
    },
    "hw_goniometer_radius_2": {
        "name": {
            "ja": "ã‚´ãƒ‹ã‚ªåŠå¾„2",
            "en": "Goniometer Radius 2"
        },
        "schema": {
            "type": "number"
        }
    },
    "disp_line_color": {
        "name": {
            "ja": "è¡¨ç¤ºç·šè‰²",
            "en": "Display Line Color"
        },
        "schema": {
            "type": "string"
        }
    },
    "file_type": {
        "name": {
            "ja": "ãƒ•ã‚¡ã‚¤ãƒ«ã‚¿ã‚¤ãƒ—",
            "en": "File Type"
        },
        "schema": {
            "type": "string"
        }
    },
    "file_part_id": {
        "name": {
            "ja": "ãƒ•ã‚¡ã‚¤ãƒ«éƒ¨å“ID",
            "en": "File Part ID"
        },
        "schema": {
            "type": "string"
        }
    },
    "meas_cond_wave_type": {
        "name": {
            "ja": "Xç·šæ³¢é•·ã‚¿ã‚¤ãƒ—",
            "en": "X-ray Wave Type"
        },
        "schema": {
            "type": "string"
        }
    },
    "meas_scan_unequaly_spaced": {
        "name": {
            "ja": "ä¸ç­‰é–“éš”ã‚¹ã‚­ãƒ£ãƒ³",
            "en": "Unequally Spaced Scan"
        },
        "schema": {
            "type": "boolean"
        }
    }
}
```

</details>

#### ç™»éŒ²ãƒ•ã‚©ãƒ¼ãƒ ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã™ã‚‹(invoice.schema.json)

invoice.schema.jsonã‚’å¤‰æ›´ã™ã‚‹ã“ã¨ã§ã€ç™»éŒ²ãƒ•ã‚©ãƒ¼ãƒ ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã§ãã¾ã™ã€‚ä»Šå›ã¯ã€æ¸¬å®šæ¸©åº¦ã‚’ãƒ‡ãƒ¼ã‚¿ç™»éŒ²æ™‚ã«æ‰‹å…¥åŠ›ã§ç™»éŒ²ã§ãã‚‹ã‚ˆã†ã«ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ã¾ã™ã€‚ä»¥ä¸‹ã¯ã€`invoice.schema.json`ã®ä¸€éƒ¨ä¾‹ã§ã™ã€‚

ã‚‚ã—ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã§ã€ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ãŸå…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ ã‚’ç¢ºèªã—ãŸã„å ´åˆã€ä»¥ä¸‹ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

- [template_viewer - nims-mdpf/RDE_datasettemplate-schemafile-make-tool](https://github.com/nims-mdpf/RDE_datasettemplate-schemafile-make-tool/tree/main/template_viewer)

```json
{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "myproject/XRD/project",
  "description": "å›ºæœ‰æƒ…å ±ã¨è©¦æ–™æƒ…å ±ã®ã‚¹ã‚­ãƒ¼ãƒ",
  "type": "object",
  "required": [
      "custom",
      "sample"
  ],
  "properties": {
      "custom": {
        "type": "object",
        "label": {
          "ja": "å›ºæœ‰æƒ…å ±",
          "en": "Specific Information"
        },
        "required": [],
        "properties": {
          "measurement_temperature": {
              "type": "number",
              "label": {
                "ja": "æ¸¬å®šæ¸©åº¦",
                "en": "Measurement Temperature"
              },
              "options": {
                "unit": "C"
              }
          }
        }
      },
      "sample": {
        "type": "object",
        "label": {
          "ja": "è©¦æ–™æƒ…å ±",
          "en": "Sample Information"
        },
        "required": [
          "names"
        ],
        "properties": {
          "generalAttributes": {
              "type": "array",
              "items": [
                {
                  "type": "object",
                  "required": [
                      "termId"
                  ],
                  "properties": {
                      "termId": {
                        "const": "3adf9874-7bcb-e5f8-99cb-3d6fd9d7b55e"
                      }
                  }
                },
                {
                  "type": "object",
                  "required": [
                      "termId"
                  ],
                  "properties": {
                      "termId": {
                        "const": "e2d20d02-2e38-2cd3-b1b3-66fdb8a11057"
                      }
                  }
                },
                {
                  "type": "object",
                  "required": [
                      "termId"
                  ],
                  "properties": {
                      "termId": {
                        "const": "efcf34e7-4308-c195-6691-6f4d28ffc9bb"
                      }
                  }
                },
                {
                  "type": "object",
                  "required": [
                      "termId"
                  ],
                  "properties": {
                      "termId": {
                        "const": "7cc57dfb-8b70-4b3a-5315-fbce4cbf73d0"
                      }
                  }
                },
                {
                  "type": "object",
                  "required": [
                      "termId"
                  ],
                  "properties": {
                      "termId": {
                        "const": "1e70d11d-cbdd-bfd1-9301-9612c29b4060"
                      }
                  }
                },
                {
                  "type": "object",
                  "required": [
                      "termId"
                  ],
                  "properties": {
                      "termId": {
                        "const": "5e166ac4-bfcd-457a-84bc-8626abe9188f"
                      }
                  }
                },
                {
                  "type": "object",
                  "required": [
                      "termId"
                  ],
                  "properties": {
                      "termId": {
                        "const": "0d0417a3-3c3b-496a-b0fb-5a26f8a74166"
                      }
                  }
                }
              ]
          }
        }
      }
  }
}
```

### ç’°å¢ƒæº–å‚™

#### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®åˆæœŸåŒ–

uvã‚’ä½¿ç”¨ã—ã¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’åˆæœŸåŒ–ã—ã¾ã™ã€‚

```bash
# æ–°ã—ã„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã™ã‚‹å ´åˆ
uv init rde-struct-project
cd rde-struct-project
```

pipã‚’åˆ©ç”¨ã™ã‚‹å ´åˆ

```bash
mkdir rde-struct-project
cd rde-struct-project
pyhton3 -m venv .venv
source .venv/bin/activate
```

åˆæœŸåŒ–å¾Œã€ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒä½œæˆã•ã‚Œã¾ã™ã€‚requirements.txtã®ä»£ã‚ã‚Šã«pyproject.tomlã‚’ã”åˆ©ç”¨ãã ã•ã„ã€‚

- `pyproject.toml`: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®è¨­å®šã¨ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
- `src/`: ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
- `README.md`: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®èª¬æ˜æ–‡æ›¸

#### å¿…è¦ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

pipã‚’ä½¿ç”¨ã—ã¦ã€RDEToolKitãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚

```bash
pip install rdetoolkit
```

uvã‚’ä½¿ã†å ´åˆ

```bash
uv add rdetoolkit
uv sync
```

#### æ§‹é€ åŒ–å‡¦ç†ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®åˆæœŸåŒ–

rdetoolkitã‚’ä½¿ç”¨ã—ã¦ã€æ§‹é€ åŒ–å‡¦ç†ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’åˆæœŸåŒ–ã—ã¾ã™ã€‚

```bash
# pip
python3 -m rdetoolkit init
# uv
uv run python -m rdetoolkit init
```

ã“ã®ã‚³ãƒãƒ³ãƒ‰ã«ã‚ˆã‚Šã€ä»¥ä¸‹ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¨ãƒ•ã‚¡ã‚¤ãƒ«ãŒä½œæˆã•ã‚Œã¾ã™ï¼š

- continer/: æ§‹é€ åŒ–å‡¦ç†ã®å®Ÿè¡Œç’°å¢ƒã‚’å®šç¾©ã™ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
- container/data/: æ§‹é€ åŒ–å‡¦ç†ã§ä½¿ç”¨ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ã‚’é…ç½®ã™ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
- input/: å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ã‚’é…ç½®ã™ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª(ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºãƒ»ãƒ‡ãƒãƒƒã‚°ã§ã¯åˆ©ç”¨å¿…é ˆã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚)
- templates/: æ§‹é€ åŒ–å‡¦ç†ã§ä½¿ç”¨ã™ã‚‹ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’é…ç½®ã™ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª(ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºãƒ»ãƒ‡ãƒãƒƒã‚°ã§ã¯åˆ©ç”¨å¿…é ˆã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚)

```bash
rde-struct-project/
â”œâ”€â”€ container
â”‚   â”œâ”€â”€ data
â”‚   â”‚   â”œâ”€â”€ inputdata
â”‚   â”‚   â”œâ”€â”€ invoice
â”‚   â”‚   â”‚   â””â”€â”€ invoice.json
â”‚   â”‚   â””â”€â”€ tasksupport
â”‚   â”‚       â”œâ”€â”€ invoice.schema.json
â”‚   â”‚       â””â”€â”€ metadata-def.json
â”‚   â”œâ”€â”€ modules/ # ã‚«ã‚¹ã‚¿ãƒ ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ç¾¤ã‚’é…ç½®ã™ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â”œâ”€â”€ main.py # æ§‹é€ åŒ–å‡¦ç†ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
â”‚   â””â”€â”€ requirements.txt
â”œâ”€â”€ input
â”‚   â”œâ”€â”€ inputdata
â”‚   â””â”€â”€ invoice
â”‚       â””â”€â”€ invoice.json
â””â”€â”€ templates
    â””â”€â”€ tasksupport
        â”œâ”€â”€ invoice.schema.json
        â””â”€â”€ metadata-def.json
```

ã•ãã»ã©ä½œæˆã—ãŸã€`metadata-def.json`ã¨`invoice.schema.json`ã€ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆç”Ÿæˆãƒ„ãƒ¼ãƒ«ã§ä½œæˆã—ãŸ`invoice.json`ã‚’`container/data/tasksupport/`ã¨ã€`templates/`ã«é…ç½®ã—ã¾ã™ã€‚

```bash
cp metadata-def.json container/data/tasksupport/
cp invoice.schema.json container/data/tasksupport/
cp invoice.json container/data/invoice/
cp metadata-def.json templates/tasksupport
cp invoice.schema.json templates/tasksupport
cp metadata-def.json templates/tasksupport/tasksupport/
cp invoice.schema.json templates/tasksupport/tasksupport/
```

ã¾ãŸã€ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦ããŸå…¥åŠ›ãƒ‡ãƒ¼ã‚¿[XRD_RIGAKU.ras](https://github.com/nims-mdpf/M-DaC_XRD/blob/master/source/XRD_RIGAKU.ras)ã‚‚`container/data/inputdata/`ã«é…ç½®ã—ã¾ã™ã€‚

```bash
cp XRD_RIGAKU.ras container/data/inputdata/
```

#### è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®è¿½åŠ 

`data/tasksupport/rdeconfig.yml`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã€RDEæ§‹é€ åŒ–å‡¦ç†ã§å¿…è¦ãªè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¿½åŠ ã—ã¾ã™ã€‚

```yaml
system:
    save_raw: true
    save_nonshared_raw: false
    magic_variable: false
    save_thumbnail_image: true
```

### rdetoolkitãŒæ¨å¥¨ã™ã‚‹æ§‹é€ åŒ–å‡¦ç†ã®åŸºæœ¬æ§‹æˆ

rdetoolkitã§ã¯ã€æ§‹é€ åŒ–å‡¦ç†ã®åŸºæœ¬çš„ãªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«æ¨å¥¨ã—ã¦ã„ã¾ã™ã€‚

```bash
container
â”œâ”€â”€ data
â”‚   â”œâ”€â”€ inputdata
â”‚   â”‚   â””â”€â”€ XRD_RIGAKU.ras
â”‚   â”œâ”€â”€ invoice
â”‚   â”‚   â””â”€â”€ invoice.json
â”‚   â””â”€â”€ tasksupport
â”‚       â”œâ”€â”€ invoice.schema.json
â”‚       â””â”€â”€ metadata-def.json
â”œâ”€â”€ Dockerfile
â”œâ”€â”€ main.py
â”œâ”€â”€ modules
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ mymodule.py
â””â”€â”€ requirements.txt
```

| ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª/ãƒ•ã‚¡ã‚¤ãƒ« | èª¬æ˜                                                               |
| --------------------- | ------------------------------------------------------------------ |
| main.py               | æ§‹é€ åŒ–å‡¦ç†ã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆã€‚é–‹ç™ºã—ãŸãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’å‘¼ã³å‡ºã—ã¾ã™ã€‚ |
| modules               | ã‚«ã‚¹ã‚¿ãƒ ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’é…ç½®ã™ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã€‚                         |
| requirements.txt      | å¿…è¦ãªPythonãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’å®šç¾©ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã€‚                         |
| data                  | æ§‹é€ åŒ–å‡¦ç†ã§ä½¿ç”¨ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ã‚’é…ç½®ã™ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã€‚                 |

> rdetoolkitã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã¨ã€`pandas`, `numpy`, `matplotlib`ãªã©ã®ãƒ‡ãƒ¼ã‚¿å‡¦ç†ã«å¿…è¦ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒè‡ªå‹•çš„ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¾ã™ã€‚ã“ã‚Œã‚‰ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¯ã€æ§‹é€ åŒ–å‡¦ç†ã§ã®ãƒ‡ãƒ¼ã‚¿æ“ä½œã‚„å¯è¦–åŒ–ã«å½¹ç«‹ã¡ã¾ã™ã€‚

### main.pyã®å®Ÿè£…

ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ä½œæˆã•ã‚ŒãŸ`main.py`ã¯ã€ä»Šå›ã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆã¨ãªã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã«ãªã‚Šã¾ã™ã€‚å„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ»ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒé–‹ç™ºã—ãŸãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ç¾¤ã‚’å‘¼ã³å‡ºã™ãŸã‚ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ã™ã€‚

ä»¥ä¸‹ã®ã‚ˆã†ã«ã€`rdetoolkit.workflows.run()`ã«é–‹ç™ºã—ãŸãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’å¼•æ•°ã¨ã—ã¦æ¸¡ã™ã“ã¨ã§ã€RDEæ§‹é€ åŒ–å‡¦ç†ã§å¿…è¦ãªpre/postå‡¦ç†ã‚’å«ã‚€æ§‹é€ åŒ–å‡¦ç†ã‚’å®Ÿè£…ã§ãã¾ã™ã€‚

ä»Šå›é–‹ç™ºã™ã‚‹ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’`modules.mymodule.my_xrd_func()`ã¨ã—ã¾ã™ã€‚`run()`ã®å¼•æ•°`custom_dataset_function`ã«ã“ã®é–¢æ•°ã‚’æŒ‡å®šã—ã¾ã™ã€‚

```python
import rdetoolkit

from modules.mymodule import my_xrd_func

rdetoolkit.workflows.run(custom_dataset_function=my_xrd_func)
```

### ã‚«ã‚¹ã‚¿ãƒ ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®å®Ÿè£…

`container/modules/`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã‚«ã‚¹ã‚¿ãƒ ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’é…ç½®ã—ã¾ã™ã€‚ã“ã“ã§ã¯ã€`mymodule.py`ã¨ã„ã†ãƒ•ã‚¡ã‚¤ãƒ«åã§ã€XRDãƒ‡ãƒ¼ã‚¿ã‚’å‡¦ç†ã™ã‚‹é–¢æ•°ã‚’å®Ÿè£…ã—ã¾ã™ã€‚

ã“ã“ã§é‡è¦ãªãƒã‚¤ãƒ³ãƒˆã¯ã€å®šç¾©ã™ã‚‹é–¢æ•°`my_xrd_func`ã«ä»¥ä¸‹ã®å¼•æ•°ã‚’å«ã‚ã‚‹ã“ã¨ã§ã™ï¼š

- `RdeInputDirPaths`: å…¥åŠ›ãƒ‡ãƒ¼ã‚¿å„ç¨®ãŒæ ¼ç´ã•ã‚Œã¦ã„ã‚‹ãƒ‡ãƒ¼ã‚¿ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ãƒ‘ã‚¹ç¾¤ã‚’æ ¼ç´ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚¯ãƒ©ã‚¹ã€‚
- `RdeOutputResourcePath`: å‡ºåŠ›ãƒªã‚½ãƒ¼ã‚¹ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ‘ã‚¹ã‚’æ ¼ç´ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚¯ãƒ©ã‚¹ã€‚

ã“ã‚Œã‚‰ã®ã‚¯ãƒ©ã‚¹ã«æ ¼ç´ã•ã‚Œã¦ã„ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ‘ã‚¹ã‚’ä½¿ã†ã¨ã€RDEã‚·ã‚¹ãƒ†ãƒ ã«å®‰å…¨ãƒ»ç¢ºå®Ÿã«ãƒ‡ãƒ¼ã‚¿ã‚’ç™»éŒ²ã§ãã¾ã™ã€‚

ã•ã‚‰ã«ã€å…¥åŠ›ãƒ•ã‚¡ã‚¤ãƒ«ã¯ã€`RdeInputDirPaths`ã‚¯ãƒ©ã‚¹ã®`rawfiles`å±æ€§ã«æ ¼ç´ã•ã‚Œã¾ã™ã€‚`srcpaths`ã§ã¯ãªãã€`resource_paths.rawfiles`ã¨ã„ã†é…åˆ—ã«æ ¼ç´ã•ã‚Œã¦ã„ã‚‹ãŸã‚ã€ã“ã®å±æ€§ã®åˆ©ç”¨ã‚’æ¨å¥¨ã—ã¾ã™ã€‚

> RDEã«ã¯ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã®ä¸­ã«ã€ãƒ‡ãƒ¼ã‚¿ã‚¿ã‚¤ãƒ«ã¨ã„ã†å˜ä½ã§ãƒ‡ãƒ¼ã‚¿ãŒç™»éŒ²ã•ã‚Œã¾ã™ã€‚rdetoolkitã§ã¯ã€ã“ã®ãƒ‡ãƒ¼ã‚¿ã‚¿ã‚¤ãƒ«ã®å˜ä½ã§å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ã‚’è‡ªå‹•çš„ã«ã‚°ãƒ«ãƒ¼ãƒ”ãƒ³ã‚°ã—ã€ã‚«ã‚¹ã‚¿ãƒ æ§‹é€ åŒ–å‡¦ç†ã«ãƒ‡ãƒ¼ã‚¿ã‚’æ¸¡ã™ãŸã‚ã€`RdeInputDirPaths`ã®`rawfiles`å±æ€§ã«æ ¼ç´ã•ã‚Œã¦ã„ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’åˆ©ç”¨ã—ã¾ã™ã€‚

```python
from rdetoolkit.models.rde2types import RdeInputDirPaths, RdeOutputResourcePath

def my_xrd_func(srcpaths: RdeInputDirPaths, resource_paths: RdeOutputResourcePath):
    pass
```

ã¤ã¥ã„ã¦ã€`my_xrd_func`é–¢æ•°å†…ã§å®Ÿè£…ã™ã‚‹å‡¦ç†ã‚’å®šç¾©ã—ã¾ã™ã€‚RDEæ§‹é€ åŒ–å‡¦ç†ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè‡ªèº«ãŒæŸ”è»Ÿã«å‡¦ç†ã‚’å®šç¾©ã§ãã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚æœ€ã‚‚å¤šã„ã‚±ãƒ¼ã‚¹ã¯ã€ä»¥ä¸‹ã®å‡¦ç†ç³»ã‚’å®Ÿè£…ã™ã‚‹ã“ã¨ãŒå¤šã„ã§ã™ã€‚

- å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿
- ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’æŠ½å‡º
- æ§‹é€ åŒ–ãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ
- ãƒ—ãƒ­ãƒƒãƒˆç”»åƒã®ä½œæˆ(RDEä¸Šã§å¯è¦–åŒ–ã—ãŸã‚°ãƒ©ãƒ•ã‚’é–²è¦§ã™ã‚‹ãŸã‚)

ä»¥ä¸‹ã®æ–¹é‡ã§å®Ÿè£…ã—ã¾ã™ã€‚

| å‡¦ç†å†…å®¹             | å‡¦ç†å†…å®¹                                               | é–¢æ•°å                     |
| -------------------- | ------------------------------------------------------ | -------------------------- |
| å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ | `.ras`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã¿ã€è¨ˆæ¸¬ãƒ‡ãƒ¼ã‚¿ã¨ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’åˆ†é›¢ | `read_ras_file`            |
| ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’æŠ½å‡º     | åˆ†é›¢ã—ãŸãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜                               | `save_metadata`            |
| æ§‹é€ åŒ–ãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ | è¨ˆæ¸¬ãƒ‡ãƒ¼ã‚¿ã®ã¿ã‚’csvã«ä¿å­˜                              | pandasã®to_csv()ã‚’åˆ©ç”¨ã™ã‚‹ |
| ãƒ—ãƒ­ãƒƒãƒˆç”»åƒã®ä½œæˆ   | XRDã®ãƒ—ãƒ­ãƒƒãƒˆç”»åƒã‚’ä½œæˆ                                | `xrd_plot`                 |

#### Step1: å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã‚€

`read_ras_file`é–¢æ•°ã§ã¯ã€å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ã€è¨ˆæ¸¬ãƒ‡ãƒ¼ã‚¿ã¨ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’åˆ†é›¢ã—ã¾ã™ã€‚ä»¥ä¸‹ã®ã‚ˆã†ã«å®Ÿè£…ã—ã¾ã™ã€‚

```python
from pathlib import Path
import re
import pandas as pd

from rdetoolkit.models.rde2types import RdeInputDirPaths, RdeOutputResourcePath


def parse_ras_file(filepath: str | Path) -> tuple[dict[str, str], pd.DataFrame]:
    """RASãƒ•ã‚¡ã‚¤ãƒ«è§£æ: ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã¨æ¸¬å®šãƒ‡ãƒ¼ã‚¿ã‚’æŠ½å‡º"""
    metadata, data_lines = {}, []

    with open(filepath, 'r', encoding='utf-8') as f:
        lines = f.readlines()

    in_data = False
    for line in lines:
        line = line.strip()
        if not line:
            continue

        if line.startswith('*'):
            if line == '*RAS_INT_START':
                in_data = True
            elif line == '*RAS_INT_END':
                break
            elif not in_data:
                parts = line[1:].split(' ', 1)
                if len(parts) == 2 and parts[1].strip():
                    key = re.sub(r'[^a-zA-Z0-9]+', '_', parts[0].lower()).strip('_')
                    metadata[key] = parts[1].strip().strip('"')
        elif in_data:
            parts = line.split()
            if len(parts) == 3:
                try:
                    x, i, a = float(parts[0]), float(parts[1]), float(parts[2])
                    data_lines.append([x, i * a])
                except ValueError:
                    continue

    return metadata, pd.DataFrame(data_lines, columns=['two_theta', 'intensity'])


def my_xrd_func(srcpaths: RdeInputDirPaths, resource_paths: RdeOutputResourcePath):
    # å…¥åŠ›ãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿
    # rasãƒ•ã‚¡ã‚¤ãƒ«ãŒä¸€ã¤ã—ã‹ãªã„ãŸã‚ã€æœ€åˆã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å¯¾è±¡ã¨ã™ã‚‹
    metadata, dataframe = parse_ras_file(resource_paths.rawfiles[0])

```

#### Step2: ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ã™ã‚‹

`save_metadata`é–¢æ•°ã§ã¯ã€æŠ½å‡ºã—ãŸãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’`metadata-def.json`ã«åŸºã¥ã„ã¦ä¿å­˜ã—ã¾ã™ã€‚ä»¥ä¸‹ã®ã‚ˆã†ã«å®Ÿè£…ã—ã¾ã™ã€‚

```python

from pathlib import Path
import re
import pandas as pd

from rdetoolkit.models.rde2types import RdeInputDirPaths, RdeOutputResourcePath
from rdetoolkit.rde2util import Meta


def parse_ras_file(filepath: str | Path) -> tuple[dict[str, str], pd.DataFrame]:
    """
    RASãƒ•ã‚¡ã‚¤ãƒ«ã‚’è§£æã—ã€ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã¨æ¸¬å®šãƒ‡ãƒ¼ã‚¿ã‚’æŠ½å‡ºã™ã‚‹
    """
    # ... çœç•¥: ä¸Šè¨˜ã®parse_ras_fileé–¢æ•°ã®å†…å®¹ã‚’ã“ã“ã«å«ã‚ã‚‹ ...
    return metadata, df

# **è¿½åŠ **
def save_metadata(metadata: dict[str, str], metadata_def_json_path: str | Path, save_path: str | Path):
    """ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’metadata-def.jsonã«åŸºã¥ã„ã¦ä¿å­˜"""
    meta = Meta(metadata_def_json_path)
    meta.assign_vals(metadata)
    meta.writefile(str(save_path))


def my_xrd_func(srcpaths: RdeInputDirPaths, resource_paths: RdeOutputResourcePath):
    # å…¥åŠ›ãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿
    metadata, dataframe = parse_ras_file(resource_paths.rawfiles[0])

    # **è¿½åŠ **: ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ä¿å­˜å‡¦ç†
    metadata_def_json_path = srcpaths.tasksupport.joinpath("metadata-def.json")
    save_path = resource_paths.meta.joinpath("metadata.json")
    save_metadata(metadata, metadata_def_json_path, save_path)

```

#### Step3: æ§‹é€ åŒ–ãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ

`my_xrd_func`é–¢æ•°å†…ã§ã€è¨ˆæ¸¬ãƒ‡ãƒ¼ã‚¿ã‚’CSVãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦ä¿å­˜ã—ã¾ã™ã€‚ä»¥ä¸‹ã®ã‚ˆã†ã«å®Ÿè£…ã—ã¾ã™ã€‚

```python
def parse_ras_file(filepath: str | Path) -> tuple[dict[str, str], pd.DataFrame]:
    # ... çœç•¥: ä¸Šè¨˜ã®parse_ras_fileé–¢æ•°ã®å†…å®¹ã‚’ã“ã“ã«å«ã‚ã‚‹ ...
    return metadata, df


def save_metadata(metadata: dict[str, str], metadata_def_json_path: str | Path, save_path: str | Path):
    # ... çœç•¥: ä¸Šè¨˜ã®save_metadataé–¢æ•°ã®å†…å®¹ã‚’ã“ã“ã«å«ã‚ã‚‹ ...

def my_xrd_func(srcpaths: RdeInputDirPaths, resource_paths: RdeOutputResourcePath):
    metadata, dataframe = parse_ras_file(resource_paths.rawfiles[0])

    metadata_def_json_path = srcpaths.tasksupport.joinpath("metadata-def.json")
    save_path = resource_paths.meta.joinpath("metadata.json")
    save_metadata(metadata, metadata_def_json_path, save_path)

    # **è¿½åŠ **: è¨ˆæ¸¬ãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜
    dataframe.to_csv(resource_paths.struct.joinpath("mesurement.csv"), index=False)
```

#### Step4: ãƒ—ãƒ­ãƒƒãƒˆç”»åƒã®ä½œæˆ

`xrd_plot`é–¢æ•°ã§ã¯ã€XRDãƒ‡ãƒ¼ã‚¿ã®ãƒ—ãƒ­ãƒƒãƒˆç”»åƒã‚’ä½œæˆã—ã¾ã™ã€‚ä»¥ä¸‹ã®ã‚ˆã†ã«å®Ÿè£…ã—ã¾ã™ã€‚

```python
def parse_ras_file(filepath: str | Path) -> tuple[dict[str, str], pd.DataFrame]:
    # ... çœç•¥: ä¸Šè¨˜ã®parse_ras_fileé–¢æ•°ã®å†…å®¹ã‚’ã“ã“ã«å«ã‚ã‚‹ ...
    return metadata, df


def save_metadata(metadata: dict[str, str], metadata_def_json_path: str | Path, save_path: str | Path):
    # ... çœç•¥: ä¸Šè¨˜ã®save_metadataé–¢æ•°ã®å†…å®¹ã‚’ã“ã“ã«å«ã‚ã‚‹ ...

def xrd_plot(data: pd.DataFrame, output_path: str | Path):
    """XRDãƒ—ãƒ­ãƒƒãƒˆç”»åƒä½œæˆ"""
    plt.figure(figsize=(10, 6))
    plt.plot(data['two_theta'], data['intensity'], label='Intensity')
    plt.xlabel('2Theta (degrees)')
    plt.ylabel('Intensity')
    plt.title('XRD Pattern')
    plt.legend()
    plt.grid()
    plt.savefig(output_path)
    plt.close()

def my_xrd_func(srcpaths: RdeInputDirPaths, resource_paths: RdeOutputResourcePath):
        metadata, dataframe = parse_ras_file(resource_paths.rawfiles[0])

    metadata_def_json_path = srcpaths.tasksupport.joinpath("metadata-def.json")
    save_path = resource_paths.meta.joinpath("metadata.json")
    save_metadata(metadata, metadata_def_json_path, save_path)

    # è¨ˆæ¸¬ãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜
    dataframe.to_csv(resource_paths.struct.joinpath("mesurement.csv"), index=False)

    # **è¿½åŠ **: ãƒ—ãƒ­ãƒƒãƒˆç”»åƒä½œæˆ
    xrd_plot(dataframe, resource_paths.main_image.joinpath("xrd_graph.png"))
```

#### Step5: ä¾‹å¤–å‡¦ç†ã‚’è¿½åŠ ã™ã‚‹

`rdetoolkit`ã§ã¯ã€æ§‹é€ åŒ–å‡¦ç†ä¸­ã«ç™ºç”Ÿã™ã‚‹å¯èƒ½æ€§ã®ã‚ã‚‹ä¾‹å¤–ã‚’`StructuredError`ã¨ã—ã¦å®šç¾©ã—ã¦ã„ã¾ã™ã€‚ã“ã‚Œã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã§ã€ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿæ™‚ã«é©åˆ‡ãªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤ºã™ã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚

```python
from pathlib import Path
import re
import pandas as pd
import matplotlib.pyplot as plt

from rdetoolkit.models.rde2types import RdeInputDirPaths, RdeOutputResourcePath
from rdetoolkit.rde2util import Meta
from rdetoolkit.exceptions import StructuredError # **è¿½åŠ **

# ... çœç•¥: ä¸Šè¨˜ã®é–¢æ•°ç¾¤ã‚’å†…å®¹ã‚’ã“ã“ã«å«ã‚ã‚‹ ...

def my_xrd_func(srcpaths: RdeInputDirPaths, resource_paths: RdeOutputResourcePath):
    """XRDãƒ‡ãƒ¼ã‚¿å‡¦ç†ãƒ¡ã‚¤ãƒ³é–¢æ•°"""
    try:
        # RASãƒ•ã‚¡ã‚¤ãƒ«è§£æ
        metadata, dataframe = parse_ras_file(resource_paths.rawfiles[0])

        # ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ä¿å­˜
        try:
            save_metadata(metadata,
                        srcpaths.tasksupport.joinpath("metadata-def.json"),
                        resource_paths.meta.joinpath("metadata.json"))
        except StructuredError as e:
            print(f"Error saving metadata: {e}")
            return None

        # æ¸¬å®šãƒ‡ãƒ¼ã‚¿ä¿å­˜
        dataframe.to_csv(resource_paths.struct.joinpath("mesurement.csv"), index=False)

        # ãƒ—ãƒ­ãƒƒãƒˆç”»åƒä½œæˆ
        xrd_plot(dataframe, resource_paths.main_image.joinpath("xrd_graph.png"))
    except Exception as e:
        raise StructuredError(f"An error occurred during XRD processing: {e}") from e
```

#### Step6: æ§‹é€ åŒ–å‡¦ç†ã®å‹•ä½œç¢ºèª

```bash
cd container
python3 main.py
```

ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒç”Ÿæˆã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã™ã€‚(ç©ºã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¯è¡¨ç¤ºã‹ã‚‰é™¤å¤–ã—ã¦ã„ã¾ã™ã€‚)

```bash
container/data
â”œâ”€â”€ inputdata
â”‚   â””â”€â”€ XRD_RIGAKU.ras
â”œâ”€â”€ invoice
â”‚   â””â”€â”€ invoice.json
â”œâ”€â”€ job.failed
â”œâ”€â”€ main_image
â”‚   â””â”€â”€ xrd_graph.png
â”œâ”€â”€ meta
â”‚   â””â”€â”€ metadata.json
â”œâ”€â”€ nonshared_raw
â”‚   â””â”€â”€ XRD_RIGAKU.ras
â”œâ”€â”€ raw
â”‚   â””â”€â”€ XRD_RIGAKU.ras
â”œâ”€â”€ structured
â”‚   â””â”€â”€ mesurement.csv
â”œâ”€â”€ tasksupport
â”‚   â”œâ”€â”€ invoice.schema.json
â”‚   â”œâ”€â”€ metadata-def.json
â”‚   â””â”€â”€ rdeconfig.yml
â””â”€â”€ thumbnail
    â””â”€â”€ xrd_graph.png
```

### ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸã¨ãã¯

`container/data/logs`ä»¥ä¸‹ã«ã€`rdesys.log`ã«ãƒ­ã‚°ãŒå‡ºåŠ›ã•ã‚Œã¾ã™ã€‚ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸå ´åˆã¯ã€ã“ã“ã«ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¨˜éŒ²ã•ã‚Œã¾ã™ã€‚

## RDEã«æ§‹é€ åŒ–å‡¦ç†ã‚’æå‡ºã™ã‚‹

ã‚‚ã—å‹•ä½œç­‰å•é¡ŒãŒãªã‘ã‚Œã°ã€RDEã«æ§‹é€ åŒ–å‡¦ç†ã‚’æå‡ºã—ã¾ã™ã€‚ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—zipãŒç”Ÿæˆã•ã‚Œã‚‹ã®ã§ã€ã“ã®zipãƒ•ã‚¡ã‚¤ãƒ«ã‚’RDEã«æå‡ºã—ã¾ã™ã€‚

```bash
uv run python -m rdetoolkit artifact -s . -o rde_submit_files.zip
```

```bash
# å‡ºåŠ›
ğŸ“¦ Archiving project files...
ğŸ“Œ - Source Directory: .
ğŸ“Œ - Output Archive: rde_submit_files.zip
âœ… ğŸ³ Dockerfile found!: container/Dockerfile
âœ… ğŸ requirements.txt found!: container/requirements.txt
ğŸ” Scanning for external connections...OK
ğŸ” Scanning for code security vulnerabilities...OK
âœ… Archive created successfully: rde_submit_files.zip
âœ… Archive and report generation completed successfully.: rde_submit_files.md
```
